/*! jQuery v1.8.3 jquery.com | jquery.org/license */
(function (e, t) {
  function _(e) {
    var t = (M[e] = {});
    return (
      v.each(e.split(y), function (e, n) {
        t[n] = !0;
      }),
      t
    );
  }
  function H(e, n, r) {
    if (r === t && e.nodeType === 1) {
      var i = "data-" + n.replace(P, "-$1").toLowerCase();
      r = e.getAttribute(i);
      if (typeof r == "string") {
        try {
          r =
            r === "true"
              ? !0
              : r === "false"
                ? !1
                : r === "null"
                  ? null
                  : +r + "" === r
                    ? +r
                    : D.test(r)
                      ? v.parseJSON(r)
                      : r;
        } catch (s) { }
        v.data(e, n, r);
      } else r = t;
    }
    return r;
  }
  function B(e) {
    var t;
    for (t in e) {
      if (t === "data" && v.isEmptyObject(e[t])) continue;
      if (t !== "toJSON") return !1;
    }
    return !0;
  }
  function et() {
    return !1;
  }
  function tt() {
    return !0;
  }
  function ut(e) {
    return !e || !e.parentNode || e.parentNode.nodeType === 11;
  }
  function at(e, t) {
    do e = e[t];
    while (e && e.nodeType !== 1);
    return e;
  }
  function ft(e, t, n) {
    t = t || 0;
    if (v.isFunction(t))
      return v.grep(e, function (e, r) {
        var i = !!t.call(e, r, e);
        return i === n;
      });
    if (t.nodeType)
      return v.grep(e, function (e, r) {
        return (e === t) === n;
      });
    if (typeof t == "string") {
      var r = v.grep(e, function (e) {
        return e.nodeType === 1;
      });
      if (it.test(t)) return v.filter(t, r, !n);
      t = v.filter(t, r);
    }
    return v.grep(e, function (e, r) {
      return v.inArray(e, t) >= 0 === n;
    });
  }
  function lt(e) {
    var t = ct.split("|"),
      n = e.createDocumentFragment();
    if (n.createElement) while (t.length) n.createElement(t.pop());
    return n;
  }
  function Lt(e, t) {
    return (
      e.getElementsByTagName(t)[0] ||
      e.appendChild(e.ownerDocument.createElement(t))
    );
  }
  function At(e, t) {
    if (t.nodeType !== 1 || !v.hasData(e)) return;
    var n,
      r,
      i,
      s = v._data(e),
      o = v._data(t, s),
      u = s.events;
    if (u) {
      delete o.handle, (o.events = {});
      for (n in u)
        for (r = 0, i = u[n].length; r < i; r++) v.event.add(t, n, u[n][r]);
    }
    o.data && (o.data = v.extend({}, o.data));
  }
  function Ot(e, t) {
    var n;
    if (t.nodeType !== 1) return;
    t.clearAttributes && t.clearAttributes(),
      t.mergeAttributes && t.mergeAttributes(e),
      (n = t.nodeName.toLowerCase()),
      n === "object"
        ? (t.parentNode && (t.outerHTML = e.outerHTML),
          v.support.html5Clone &&
          e.innerHTML &&
          !v.trim(t.innerHTML) &&
          (t.innerHTML = e.innerHTML))
        : n === "input" && Et.test(e.type)
          ? ((t.defaultChecked = t.checked = e.checked),
            t.value !== e.value && (t.value = e.value))
          : n === "option"
            ? (t.selected = e.defaultSelected)
            : n === "input" || n === "textarea"
              ? (t.defaultValue = e.defaultValue)
              : n === "script" && t.text !== e.text && (t.text = e.text),
      t.removeAttribute(v.expando);
  }
  function Mt(e) {
    return typeof e.getElementsByTagName != "undefined"
      ? e.getElementsByTagName("*")
      : typeof e.querySelectorAll != "undefined"
        ? e.querySelectorAll("*")
        : [];
  }
  function _t(e) {
    Et.test(e.type) && (e.defaultChecked = e.checked);
  }
  function Qt(e, t) {
    if (t in e) return t;
    var n = t.charAt(0).toUpperCase() + t.slice(1),
      r = t,
      i = Jt.length;
    while (i--) {
      t = Jt[i] + n;
      if (t in e) return t;
    }
    return r;
  }
  function Gt(e, t) {
    return (
      (e = t || e),
      v.css(e, "display") === "none" || !v.contains(e.ownerDocument, e)
    );
  }
  function Yt(e, t) {
    var n,
      r,
      i = [],
      s = 0,
      o = e.length;
    for (; s < o; s++) {
      n = e[s];
      if (!n.style) continue;
      (i[s] = v._data(n, "olddisplay")),
        t
          ? (!i[s] && n.style.display === "none" && (n.style.display = ""),
            n.style.display === "" &&
            Gt(n) &&
            (i[s] = v._data(n, "olddisplay", nn(n.nodeName))))
          : ((r = Dt(n, "display")),
            !i[s] && r !== "none" && v._data(n, "olddisplay", r));
    }
    for (s = 0; s < o; s++) {
      n = e[s];
      if (!n.style) continue;
      if (!t || n.style.display === "none" || n.style.display === "")
        n.style.display = t ? i[s] || "" : "none";
    }
    return e;
  }
  function Zt(e, t, n) {
    var r = Rt.exec(t);
    return r ? Math.max(0, r[1] - (n || 0)) + (r[2] || "px") : t;
  }
  function en(e, t, n, r) {
    var i = n === (r ? "border" : "content") ? 4 : t === "width" ? 1 : 0,
      s = 0;
    for (; i < 4; i += 2)
      n === "margin" && (s += v.css(e, n + $t[i], !0)),
        r
          ? (n === "content" &&
            (s -= parseFloat(Dt(e, "padding" + $t[i])) || 0),
            n !== "margin" &&
            (s -= parseFloat(Dt(e, "border" + $t[i] + "Width")) || 0))
          : ((s += parseFloat(Dt(e, "padding" + $t[i])) || 0),
            n !== "padding" &&
            (s += parseFloat(Dt(e, "border" + $t[i] + "Width")) || 0));
    return s;
  }
  function tn(e, t, n) {
    var r = t === "width" ? e.offsetWidth : e.offsetHeight,
      i = !0,
      s = v.support.boxSizing && v.css(e, "boxSizing") === "border-box";
    if (r <= 0 || r == null) {
      r = Dt(e, t);
      if (r < 0 || r == null) r = e.style[t];
      if (Ut.test(r)) return r;
      (i = s && (v.support.boxSizingReliable || r === e.style[t])),
        (r = parseFloat(r) || 0);
    }
    return r + en(e, t, n || (s ? "border" : "content"), i) + "px";
  }
  function nn(e) {
    if (Wt[e]) return Wt[e];
    var t = v("<" + e + ">").appendTo(i.body),
      n = t.css("display");
    t.remove();
    if (n === "none" || n === "") {
      Pt = i.body.appendChild(
        Pt ||
        v.extend(i.createElement("iframe"), {
          frameBorder: 0,
          width: 0,
          height: 0,
        })
      );
      if (!Ht || !Pt.createElement)
        (Ht = (Pt.contentWindow || Pt.contentDocument).document),
          Ht.write("<!doctype html><html><body>"),
          Ht.close();
      (t = Ht.body.appendChild(Ht.createElement(e))),
        (n = Dt(t, "display")),
        i.body.removeChild(Pt);
    }
    return (Wt[e] = n), n;
  }
  function fn(e, t, n, r) {
    var i;
    if (v.isArray(t))
      v.each(t, function (t, i) {
        n || sn.test(e)
          ? r(e, i)
          : fn(e + "[" + (typeof i == "object" ? t : "") + "]", i, n, r);
      });
    else if (!n && v.type(t) === "object")
      for (i in t) fn(e + "[" + i + "]", t[i], n, r);
    else r(e, t);
  }
  function Cn(e) {
    return function (t, n) {
      typeof t != "string" && ((n = t), (t = "*"));
      var r,
        i,
        s,
        o = t.toLowerCase().split(y),
        u = 0,
        a = o.length;
      if (v.isFunction(n))
        for (; u < a; u++)
          (r = o[u]),
            (s = /^\+/.test(r)),
            s && (r = r.substr(1) || "*"),
            (i = e[r] = e[r] || []),
            i[s ? "unshift" : "push"](n);
    };
  }
  function kn(e, n, r, i, s, o) {
    (s = s || n.dataTypes[0]), (o = o || {}), (o[s] = !0);
    var u,
      a = e[s],
      f = 0,
      l = a ? a.length : 0,
      c = e === Sn;
    for (; f < l && (c || !u); f++)
      (u = a[f](n, r, i)),
        typeof u == "string" &&
        (!c || o[u]
          ? (u = t)
          : (n.dataTypes.unshift(u), (u = kn(e, n, r, i, u, o))));
    return (c || !u) && !o["*"] && (u = kn(e, n, r, i, "*", o)), u;
  }
  function Ln(e, n) {
    var r,
      i,
      s = v.ajaxSettings.flatOptions || {};
    for (r in n) n[r] !== t && ((s[r] ? e : i || (i = {}))[r] = n[r]);
    i && v.extend(!0, e, i);
  }
  function An(e, n, r) {
    var i,
      s,
      o,
      u,
      a = e.contents,
      f = e.dataTypes,
      l = e.responseFields;
    for (s in l) s in r && (n[l[s]] = r[s]);
    while (f[0] === "*")
      f.shift(),
        i === t && (i = e.mimeType || n.getResponseHeader("content-type"));
    if (i)
      for (s in a)
        if (a[s] && a[s].test(i)) {
          f.unshift(s);
          break;
        }
    if (f[0] in r) o = f[0];
    else {
      for (s in r) {
        if (!f[0] || e.converters[s + " " + f[0]]) {
          o = s;
          break;
        }
        u || (u = s);
      }
      o = o || u;
    }
    if (o) return o !== f[0] && f.unshift(o), r[o];
  }
  function On(e, t) {
    var n,
      r,
      i,
      s,
      o = e.dataTypes.slice(),
      u = o[0],
      a = {},
      f = 0;
    e.dataFilter && (t = e.dataFilter(t, e.dataType));
    if (o[1]) for (n in e.converters) a[n.toLowerCase()] = e.converters[n];
    for (; (i = o[++f]);)
      if (i !== "*") {
        if (u !== "*" && u !== i) {
          n = a[u + " " + i] || a["* " + i];
          if (!n)
            for (r in a) {
              s = r.split(" ");
              if (s[1] === i) {
                n = a[u + " " + s[0]] || a["* " + s[0]];
                if (n) {
                  n === !0
                    ? (n = a[r])
                    : a[r] !== !0 && ((i = s[0]), o.splice(f--, 0, i));
                  break;
                }
              }
            }
          if (n !== !0)
            if (n && e["throws"]) t = n(t);
            else
              try {
                t = n(t);
              } catch (l) {
                return {
                  state: "parsererror",
                  error: n ? l : "No conversion from " + u + " to " + i,
                };
              }
        }
        u = i;
      }
    return { state: "success", data: t };
  }
  function Fn() {
    try {
      return new e.XMLHttpRequest();
    } catch (t) { }
  }
  function In() {
    try {
      return new e.ActiveXObject("Microsoft.XMLHTTP");
    } catch (t) { }
  }
  function $n() {
    return (
      setTimeout(function () {
        qn = t;
      }, 0),
      (qn = v.now())
    );
  }
  function Jn(e, t) {
    v.each(t, function (t, n) {
      var r = (Vn[t] || []).concat(Vn["*"]),
        i = 0,
        s = r.length;
      for (; i < s; i++) if (r[i].call(e, t, n)) return;
    });
  }
  function Kn(e, t, n) {
    var r,
      i = 0,
      s = 0,
      o = Xn.length,
      u = v.Deferred().always(function () {
        delete a.elem;
      }),
      a = function () {
        var t = qn || $n(),
          n = Math.max(0, f.startTime + f.duration - t),
          r = n / f.duration || 0,
          i = 1 - r,
          s = 0,
          o = f.tweens.length;
        for (; s < o; s++) f.tweens[s].run(i);
        return (
          u.notifyWith(e, [f, i, n]),
          i < 1 && o ? n : (u.resolveWith(e, [f]), !1)
        );
      },
      f = u.promise({
        elem: e,
        props: v.extend({}, t),
        opts: v.extend(!0, { specialEasing: {} }, n),
        originalProperties: t,
        originalOptions: n,
        startTime: qn || $n(),
        duration: n.duration,
        tweens: [],
        createTween: function (t, n, r) {
          var i = v.Tween(
            e,
            f.opts,
            t,
            n,
            f.opts.specialEasing[t] || f.opts.easing
          );
          return f.tweens.push(i), i;
        },
        stop: function (t) {
          var n = 0,
            r = t ? f.tweens.length : 0;
          for (; n < r; n++) f.tweens[n].run(1);
          return t ? u.resolveWith(e, [f, t]) : u.rejectWith(e, [f, t]), this;
        },
      }),
      l = f.props;
    Qn(l, f.opts.specialEasing);
    for (; i < o; i++) {
      r = Xn[i].call(f, e, l, f.opts);
      if (r) return r;
    }
    return (
      Jn(f, l),
      v.isFunction(f.opts.start) && f.opts.start.call(e, f),
      v.fx.timer(v.extend(a, { anim: f, queue: f.opts.queue, elem: e })),
      f
        .progress(f.opts.progress)
        .done(f.opts.done, f.opts.complete)
        .fail(f.opts.fail)
        .always(f.opts.always)
    );
  }
  function Qn(e, t) {
    var n, r, i, s, o;
    for (n in e) {
      (r = v.camelCase(n)),
        (i = t[r]),
        (s = e[n]),
        v.isArray(s) && ((i = s[1]), (s = e[n] = s[0])),
        n !== r && ((e[r] = s), delete e[n]),
        (o = v.cssHooks[r]);
      if (o && "expand" in o) {
        (s = o.expand(s)), delete e[r];
        for (n in s) n in e || ((e[n] = s[n]), (t[n] = i));
      } else t[r] = i;
    }
  }
  function Gn(e, t, n) {
    var r,
      i,
      s,
      o,
      u,
      a,
      f,
      l,
      c,
      h = this,
      p = e.style,
      d = {},
      m = [],
      g = e.nodeType && Gt(e);
    n.queue ||
      ((l = v._queueHooks(e, "fx")),
        l.unqueued == null &&
        ((l.unqueued = 0),
          (c = l.empty.fire),
          (l.empty.fire = function () {
            l.unqueued || c();
          })),
        l.unqueued++,
        h.always(function () {
          h.always(function () {
            l.unqueued--, v.queue(e, "fx").length || l.empty.fire();
          });
        })),
      e.nodeType === 1 &&
      ("height" in t || "width" in t) &&
      ((n.overflow = [p.overflow, p.overflowX, p.overflowY]),
        v.css(e, "display") === "inline" &&
        v.css(e, "float") === "none" &&
        (!v.support.inlineBlockNeedsLayout || nn(e.nodeName) === "inline"
          ? (p.display = "inline-block")
          : (p.zoom = 1))),
      n.overflow &&
      ((p.overflow = "hidden"),
        v.support.shrinkWrapBlocks ||
        h.done(function () {
          (p.overflow = n.overflow[0]),
            (p.overflowX = n.overflow[1]),
            (p.overflowY = n.overflow[2]);
        }));
    for (r in t) {
      s = t[r];
      if (Un.exec(s)) {
        delete t[r], (a = a || s === "toggle");
        if (s === (g ? "hide" : "show")) continue;
        m.push(r);
      }
    }
    o = m.length;
    if (o) {
      (u = v._data(e, "fxshow") || v._data(e, "fxshow", {})),
        "hidden" in u && (g = u.hidden),
        a && (u.hidden = !g),
        g
          ? v(e).show()
          : h.done(function () {
            v(e).hide();
          }),
        h.done(function () {
          var t;
          v.removeData(e, "fxshow", !0);
          for (t in d) v.style(e, t, d[t]);
        });
      for (r = 0; r < o; r++)
        (i = m[r]),
          (f = h.createTween(i, g ? u[i] : 0)),
          (d[i] = u[i] || v.style(e, i)),
          i in u ||
          ((u[i] = f.start),
            g &&
            ((f.end = f.start),
              (f.start = i === "width" || i === "height" ? 1 : 0)));
    }
  }
  function Yn(e, t, n, r, i) {
    return new Yn.prototype.init(e, t, n, r, i);
  }
  function Zn(e, t) {
    var n,
      r = { height: e },
      i = 0;
    t = t ? 1 : 0;
    for (; i < 4; i += 2 - t)
      (n = $t[i]), (r["margin" + n] = r["padding" + n] = e);
    return t && (r.opacity = r.width = e), r;
  }
  function tr(e) {
    return v.isWindow(e)
      ? e
      : e.nodeType === 9
        ? e.defaultView || e.parentWindow
        : !1;
  }
  var n,
    r,
    i = e.document,
    s = e.location,
    o = e.navigator,
    u = e.jQuery,
    a = e.$,
    f = Array.prototype.push,
    l = Array.prototype.slice,
    c = Array.prototype.indexOf,
    h = Object.prototype.toString,
    p = Object.prototype.hasOwnProperty,
    d = String.prototype.trim,
    v = function (e, t) {
      return new v.fn.init(e, t, n);
    },
    m = /[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,
    g = /\S/,
    y = /\s+/,
    b = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,
    w = /^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,
    E = /^<(\w+)\s*\/?>(?:<\/\1>|)$/,
    S = /^[\],:{}\s]*$/,
    x = /(?:^|:|,)(?:\s*\[)+/g,
    T = /\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,
    N = /"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,
    C = /^-ms-/,
    k = /-([\da-z])/gi,
    L = function (e, t) {
      return (t + "").toUpperCase();
    },
    A = function () {
      i.addEventListener
        ? (i.removeEventListener("DOMContentLoaded", A, !1), v.ready())
        : i.readyState === "complete" &&
        (i.detachEvent("onreadystatechange", A), v.ready());
    },
    O = {};
  (v.fn = v.prototype =
  {
    constructor: v,
    init: function (e, n, r) {
      var s, o, u, a;
      if (!e) return this;
      if (e.nodeType)
        return (this.context = this[0] = e), (this.length = 1), this;
      if (typeof e == "string") {
        e.charAt(0) === "<" && e.charAt(e.length - 1) === ">" && e.length >= 3
          ? (s = [null, e, null])
          : (s = w.exec(e));
        if (s && (s[1] || !n)) {
          if (s[1])
            return (
              (n = n instanceof v ? n[0] : n),
              (a = n && n.nodeType ? n.ownerDocument || n : i),
              (e = v.parseHTML(s[1], a, !0)),
              E.test(s[1]) && v.isPlainObject(n) && this.attr.call(e, n, !0),
              v.merge(this, e)
            );
          o = i.getElementById(s[2]);
          if (o && o.parentNode) {
            if (o.id !== s[2]) return r.find(e);
            (this.length = 1), (this[0] = o);
          }
          return (this.context = i), (this.selector = e), this;
        }
        return !n || n.jquery
          ? (n || r).find(e)
          : this.constructor(n).find(e);
      }
      return v.isFunction(e)
        ? r.ready(e)
        : (e.selector !== t &&
          ((this.selector = e.selector), (this.context = e.context)),
          v.makeArray(e, this));
    },
    selector: "",
    jquery: "1.8.3",
    length: 0,
    size: function () {
      return this.length;
    },
    toArray: function () {
      return l.call(this);
    },
    get: function (e) {
      return e == null
        ? this.toArray()
        : e < 0
          ? this[this.length + e]
          : this[e];
    },
    pushStack: function (e, t, n) {
      var r = v.merge(this.constructor(), e);
      return (
        (r.prevObject = this),
        (r.context = this.context),
        t === "find"
          ? (r.selector = this.selector + (this.selector ? " " : "") + n)
          : t && (r.selector = this.selector + "." + t + "(" + n + ")"),
        r
      );
    },
    each: function (e, t) {
      return v.each(this, e, t);
    },
    ready: function (e) {
      return v.ready.promise().done(e), this;
    },
    eq: function (e) {
      return (e = +e), e === -1 ? this.slice(e) : this.slice(e, e + 1);
    },
    first: function () {
      return this.eq(0);
    },
    last: function () {
      return this.eq(-1);
    },
    slice: function () {
      return this.pushStack(
        l.apply(this, arguments),
        "slice",
        l.call(arguments).join(",")
      );
    },
    map: function (e) {
      return this.pushStack(
        v.map(this, function (t, n) {
          return e.call(t, n, t);
        })
      );
    },
    end: function () {
      return this.prevObject || this.constructor(null);
    },
    push: f,
    sort: [].sort,
    splice: [].splice,
  }),
    (v.fn.init.prototype = v.fn),
    (v.extend = v.fn.extend =
      function () {
        var e,
          n,
          r,
          i,
          s,
          o,
          u = arguments[0] || {},
          a = 1,
          f = arguments.length,
          l = !1;
        typeof u == "boolean" && ((l = u), (u = arguments[1] || {}), (a = 2)),
          typeof u != "object" && !v.isFunction(u) && (u = {}),
          f === a && ((u = this), --a);
        for (; a < f; a++)
          if ((e = arguments[a]) != null)
            for (n in e) {
              (r = u[n]), (i = e[n]);
              if (u === i) continue;
              l && i && (v.isPlainObject(i) || (s = v.isArray(i)))
                ? (s
                  ? ((s = !1), (o = r && v.isArray(r) ? r : []))
                  : (o = r && v.isPlainObject(r) ? r : {}),
                  (u[n] = v.extend(l, o, i)))
                : i !== t && (u[n] = i);
            }
        return u;
      }),
    v.extend({
      noConflict: function (t) {
        return e.$ === v && (e.$ = a), t && e.jQuery === v && (e.jQuery = u), v;
      },
      isReady: !1,
      readyWait: 1,
      holdReady: function (e) {
        e ? v.readyWait++ : v.ready(!0);
      },
      ready: function (e) {
        if (e === !0 ? --v.readyWait : v.isReady) return;
        if (!i.body) return setTimeout(v.ready, 1);
        v.isReady = !0;
        if (e !== !0 && --v.readyWait > 0) return;
        r.resolveWith(i, [v]),
          v.fn.trigger && v(i).trigger("ready").off("ready");
      },
      isFunction: function (e) {
        return v.type(e) === "function";
      },
      isArray:
        Array.isArray ||
        function (e) {
          return v.type(e) === "array";
        },
      isWindow: function (e) {
        return e != null && e == e.window;
      },
      isNumeric: function (e) {
        return !isNaN(parseFloat(e)) && isFinite(e);
      },
      type: function (e) {
        return e == null ? String(e) : O[h.call(e)] || "object";
      },
      isPlainObject: function (e) {
        if (!e || v.type(e) !== "object" || e.nodeType || v.isWindow(e))
          return !1;
        try {
          if (
            e.constructor &&
            !p.call(e, "constructor") &&
            !p.call(e.constructor.prototype, "isPrototypeOf")
          )
            return !1;
        } catch (n) {
          return !1;
        }
        var r;
        for (r in e);
        return r === t || p.call(e, r);
      },
      isEmptyObject: function (e) {
        var t;
        for (t in e) return !1;
        return !0;
      },
      error: function (e) {
        throw new Error(e);
      },
      parseHTML: function (e, t, n) {
        var r;
        return !e || typeof e != "string"
          ? null
          : (typeof t == "boolean" && ((n = t), (t = 0)),
            (t = t || i),
            (r = E.exec(e))
              ? [t.createElement(r[1])]
              : ((r = v.buildFragment([e], t, n ? null : [])),
                v.merge(
                  [],
                  (r.cacheable ? v.clone(r.fragment) : r.fragment).childNodes
                )));
      },
      parseJSON: function (t) {
        if (!t || typeof t != "string") return null;
        t = v.trim(t);
        if (e.JSON && e.JSON.parse) return e.JSON.parse(t);
        if (S.test(t.replace(T, "@").replace(N, "]").replace(x, "")))
          return new Function("return " + t)();
        v.error("Invalid JSON: " + t);
      },
      parseXML: function (n) {
        var r, i;
        if (!n || typeof n != "string") return null;
        try {
          e.DOMParser
            ? ((i = new DOMParser()), (r = i.parseFromString(n, "text/xml")))
            : ((r = new ActiveXObject("Microsoft.XMLDOM")),
              (r.async = "false"),
              r.loadXML(n));
        } catch (s) {
          r = t;
        }
        return (
          (!r ||
            !r.documentElement ||
            r.getElementsByTagName("parsererror").length) &&
          v.error("Invalid XML: " + n),
          r
        );
      },
      noop: function () { },
      globalEval: function (t) {
        t &&
          g.test(t) &&
          (
            e.execScript ||
            function (t) {
              e.eval.call(e, t);
            }
          )(t);
      },
      camelCase: function (e) {
        return e.replace(C, "ms-").replace(k, L);
      },
      nodeName: function (e, t) {
        return e.nodeName && e.nodeName.toLowerCase() === t.toLowerCase();
      },
      each: function (e, n, r) {
        var i,
          s = 0,
          o = e.length,
          u = o === t || v.isFunction(e);
        if (r) {
          if (u) {
            for (i in e) if (n.apply(e[i], r) === !1) break;
          } else for (; s < o;) if (n.apply(e[s++], r) === !1) break;
        } else if (u) {
          for (i in e) if (n.call(e[i], i, e[i]) === !1) break;
        } else for (; s < o;) if (n.call(e[s], s, e[s++]) === !1) break;
        return e;
      },
      trim:
        d && !d.call("\ufeff\u00a0")
          ? function (e) {
            return e == null ? "" : d.call(e);
          }
          : function (e) {
            return e == null ? "" : (e + "").replace(b, "");
          },
      makeArray: function (e, t) {
        var n,
          r = t || [];
        return (
          e != null &&
          ((n = v.type(e)),
            e.length == null ||
              n === "string" ||
              n === "function" ||
              n === "regexp" ||
              v.isWindow(e)
              ? f.call(r, e)
              : v.merge(r, e)),
          r
        );
      },
      inArray: function (e, t, n) {
        var r;
        if (t) {
          if (c) return c.call(t, e, n);
          (r = t.length), (n = n ? (n < 0 ? Math.max(0, r + n) : n) : 0);
          for (; n < r; n++) if (n in t && t[n] === e) return n;
        }
        return -1;
      },
      merge: function (e, n) {
        var r = n.length,
          i = e.length,
          s = 0;
        if (typeof r == "number") for (; s < r; s++) e[i++] = n[s];
        else while (n[s] !== t) e[i++] = n[s++];
        return (e.length = i), e;
      },
      grep: function (e, t, n) {
        var r,
          i = [],
          s = 0,
          o = e.length;
        n = !!n;
        for (; s < o; s++) (r = !!t(e[s], s)), n !== r && i.push(e[s]);
        return i;
      },
      map: function (e, n, r) {
        var i,
          s,
          o = [],
          u = 0,
          a = e.length,
          f =
            e instanceof v ||
            (a !== t &&
              typeof a == "number" &&
              ((a > 0 && e[0] && e[a - 1]) || a === 0 || v.isArray(e)));
        if (f)
          for (; u < a; u++)
            (i = n(e[u], u, r)), i != null && (o[o.length] = i);
        else for (s in e) (i = n(e[s], s, r)), i != null && (o[o.length] = i);
        return o.concat.apply([], o);
      },
      guid: 1,
      proxy: function (e, n) {
        var r, i, s;
        return (
          typeof n == "string" && ((r = e[n]), (n = e), (e = r)),
          v.isFunction(e)
            ? ((i = l.call(arguments, 2)),
              (s = function () {
                return e.apply(n, i.concat(l.call(arguments)));
              }),
              (s.guid = e.guid = e.guid || v.guid++),
              s)
            : t
        );
      },
      access: function (e, n, r, i, s, o, u) {
        var a,
          f = r == null,
          l = 0,
          c = e.length;
        if (r && typeof r == "object") {
          for (l in r) v.access(e, n, l, r[l], 1, o, i);
          s = 1;
        } else if (i !== t) {
          (a = u === t && v.isFunction(i)),
            f &&
            (a
              ? ((a = n),
                (n = function (e, t, n) {
                  return a.call(v(e), n);
                }))
              : (n.call(e, i), (n = null)));
          if (n)
            for (; l < c; l++)
              n(e[l], r, a ? i.call(e[l], l, n(e[l], r)) : i, u);
          s = 1;
        }
        return s ? e : f ? n.call(e) : c ? n(e[0], r) : o;
      },
      now: function () {
        return new Date().getTime();
      },
    }),
    (v.ready.promise = function (t) {
      if (!r) {
        r = v.Deferred();
        if (i.readyState === "complete") setTimeout(v.ready, 1);
        else if (i.addEventListener)
          i.addEventListener("DOMContentLoaded", A, !1),
            e.addEventListener("load", v.ready, !1);
        else {
          i.attachEvent("onreadystatechange", A),
            e.attachEvent("onload", v.ready);
          var n = !1;
          try {
            n = e.frameElement == null && i.documentElement;
          } catch (s) { }
          n &&
            n.doScroll &&
            (function o() {
              if (!v.isReady) {
                try {
                  n.doScroll("left");
                } catch (e) {
                  return setTimeout(o, 50);
                }
                v.ready();
              }
            })();
        }
      }
      return r.promise(t);
    }),
    v.each(
      "Boolean Number String Function Array Date RegExp Object".split(" "),
      function (e, t) {
        O["[object " + t + "]"] = t.toLowerCase();
      }
    ),
    (n = v(i));
  var M = {};
  (v.Callbacks = function (e) {
    e = typeof e == "string" ? M[e] || _(e) : v.extend({}, e);
    var n,
      r,
      i,
      s,
      o,
      u,
      a = [],
      f = !e.once && [],
      l = function (t) {
        (n = e.memory && t),
          (r = !0),
          (u = s || 0),
          (s = 0),
          (o = a.length),
          (i = !0);
        for (; a && u < o; u++)
          if (a[u].apply(t[0], t[1]) === !1 && e.stopOnFalse) {
            n = !1;
            break;
          }
        (i = !1),
          a && (f ? f.length && l(f.shift()) : n ? (a = []) : c.disable());
      },
      c = {
        add: function () {
          if (a) {
            var t = a.length;
            (function r(t) {
              v.each(t, function (t, n) {
                var i = v.type(n);
                i === "function"
                  ? (!e.unique || !c.has(n)) && a.push(n)
                  : n && n.length && i !== "string" && r(n);
              });
            })(arguments),
              i ? (o = a.length) : n && ((s = t), l(n));
          }
          return this;
        },
        remove: function () {
          return (
            a &&
            v.each(arguments, function (e, t) {
              var n;
              while ((n = v.inArray(t, a, n)) > -1)
                a.splice(n, 1), i && (n <= o && o--, n <= u && u--);
            }),
            this
          );
        },
        has: function (e) {
          return v.inArray(e, a) > -1;
        },
        empty: function () {
          return (a = []), this;
        },
        disable: function () {
          return (a = f = n = t), this;
        },
        disabled: function () {
          return !a;
        },
        lock: function () {
          return (f = t), n || c.disable(), this;
        },
        locked: function () {
          return !f;
        },
        fireWith: function (e, t) {
          return (
            (t = t || []),
            (t = [e, t.slice ? t.slice() : t]),
            a && (!r || f) && (i ? f.push(t) : l(t)),
            this
          );
        },
        fire: function () {
          return c.fireWith(this, arguments), this;
        },
        fired: function () {
          return !!r;
        },
      };
    return c;
  }),
    v.extend({
      Deferred: function (e) {
        var t = [
          ["resolve", "done", v.Callbacks("once memory"), "resolved"],
          ["reject", "fail", v.Callbacks("once memory"), "rejected"],
          ["notify", "progress", v.Callbacks("memory")],
        ],
          n = "pending",
          r = {
            state: function () {
              return n;
            },
            always: function () {
              return i.done(arguments).fail(arguments), this;
            },
            then: function () {
              var e = arguments;
              return v
                .Deferred(function (n) {
                  v.each(t, function (t, r) {
                    var s = r[0],
                      o = e[t];
                    i[r[1]](
                      v.isFunction(o)
                        ? function () {
                          var e = o.apply(this, arguments);
                          e && v.isFunction(e.promise)
                            ? e
                              .promise()
                              .done(n.resolve)
                              .fail(n.reject)
                              .progress(n.notify)
                            : n[s + "With"](this === i ? n : this, [e]);
                        }
                        : n[s]
                    );
                  }),
                    (e = null);
                })
                .promise();
            },
            promise: function (e) {
              return e != null ? v.extend(e, r) : r;
            },
          },
          i = {};
        return (
          (r.pipe = r.then),
          v.each(t, function (e, s) {
            var o = s[2],
              u = s[3];
            (r[s[1]] = o.add),
              u &&
              o.add(
                function () {
                  n = u;
                },
                t[e ^ 1][2].disable,
                t[2][2].lock
              ),
              (i[s[0]] = o.fire),
              (i[s[0] + "With"] = o.fireWith);
          }),
          r.promise(i),
          e && e.call(i, i),
          i
        );
      },
      when: function (e) {
        var t = 0,
          n = l.call(arguments),
          r = n.length,
          i = r !== 1 || (e && v.isFunction(e.promise)) ? r : 0,
          s = i === 1 ? e : v.Deferred(),
          o = function (e, t, n) {
            return function (r) {
              (t[e] = this),
                (n[e] = arguments.length > 1 ? l.call(arguments) : r),
                n === u ? s.notifyWith(t, n) : --i || s.resolveWith(t, n);
            };
          },
          u,
          a,
          f;
        if (r > 1) {
          (u = new Array(r)), (a = new Array(r)), (f = new Array(r));
          for (; t < r; t++)
            n[t] && v.isFunction(n[t].promise)
              ? n[t]
                .promise()
                .done(o(t, f, n))
                .fail(s.reject)
                .progress(o(t, a, u))
              : --i;
        }
        return i || s.resolveWith(f, n), s.promise();
      },
    }),
    (v.support = (function () {
      var t,
        n,
        r,
        s,
        o,
        u,
        a,
        f,
        l,
        c,
        h,
        p = i.createElement("div");
      p.setAttribute("className", "t"),
        (p.innerHTML =
          "  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>"),
        (n = p.getElementsByTagName("*")),
        (r = p.getElementsByTagName("a")[0]);
      if (!n || !r || !n.length) return {};
      (s = i.createElement("select")),
        (o = s.appendChild(i.createElement("option"))),
        (u = p.getElementsByTagName("input")[0]),
        (r.style.cssText = "top:1px;float:left;opacity:.5"),
        (t = {
          leadingWhitespace: p.firstChild.nodeType === 3,
          tbody: !p.getElementsByTagName("tbody").length,
          htmlSerialize: !!p.getElementsByTagName("link").length,
          style: /top/.test(r.getAttribute("style")),
          hrefNormalized: r.getAttribute("href") === "/a",
          opacity: /^0.5/.test(r.style.opacity),
          cssFloat: !!r.style.cssFloat,
          checkOn: u.value === "on",
          optSelected: o.selected,
          getSetAttribute: p.className !== "t",
          enctype: !!i.createElement("form").enctype,
          html5Clone:
            i.createElement("nav").cloneNode(!0).outerHTML !== "<:nav></:nav>",
          boxModel: i.compatMode === "CSS1Compat",
          submitBubbles: !0,
          changeBubbles: !0,
          focusinBubbles: !1,
          deleteExpando: !0,
          noCloneEvent: !0,
          inlineBlockNeedsLayout: !1,
          shrinkWrapBlocks: !1,
          reliableMarginRight: !0,
          boxSizingReliable: !0,
          pixelPosition: !1,
        }),
        (u.checked = !0),
        (t.noCloneChecked = u.cloneNode(!0).checked),
        (s.disabled = !0),
        (t.optDisabled = !o.disabled);
      try {
        delete p.test;
      } catch (d) {
        t.deleteExpando = !1;
      }
      !p.addEventListener &&
        p.attachEvent &&
        p.fireEvent &&
        (p.attachEvent(
          "onclick",
          (h = function () {
            t.noCloneEvent = !1;
          })
        ),
          p.cloneNode(!0).fireEvent("onclick"),
          p.detachEvent("onclick", h)),
        (u = i.createElement("input")),
        (u.value = "t"),
        u.setAttribute("type", "radio"),
        (t.radioValue = u.value === "t"),
        u.setAttribute("checked", "checked"),
        u.setAttribute("name", "t"),
        p.appendChild(u),
        (a = i.createDocumentFragment()),
        a.appendChild(p.lastChild),
        (t.checkClone = a.cloneNode(!0).cloneNode(!0).lastChild.checked),
        (t.appendChecked = u.checked),
        a.removeChild(u),
        a.appendChild(p);
      if (p.attachEvent)
        for (l in { submit: !0, change: !0, focusin: !0 })
          (f = "on" + l),
            (c = f in p),
            c ||
            (p.setAttribute(f, "return;"), (c = typeof p[f] == "function")),
            (t[l + "Bubbles"] = c);
      return (
        v(function () {
          var n,
            r,
            s,
            o,
            u = "padding:0;margin:0;border:0;display:block;overflow:hidden;",
            a = i.getElementsByTagName("body")[0];
          if (!a) return;
          (n = i.createElement("div")),
            (n.style.cssText =
              "visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px"),
            a.insertBefore(n, a.firstChild),
            (r = i.createElement("div")),
            n.appendChild(r),
            (r.innerHTML = "<table><tr><td></td><td>t</td></tr></table>"),
            (s = r.getElementsByTagName("td")),
            (s[0].style.cssText = "padding:0;margin:0;border:0;display:none"),
            (c = s[0].offsetHeight === 0),
            (s[0].style.display = ""),
            (s[1].style.display = "none"),
            (t.reliableHiddenOffsets = c && s[0].offsetHeight === 0),
            (r.innerHTML = ""),
            (r.style.cssText =
              "box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;"),
            (t.boxSizing = r.offsetWidth === 4),
            (t.doesNotIncludeMarginInBodyOffset = a.offsetTop !== 1),
            e.getComputedStyle &&
            ((t.pixelPosition =
              (e.getComputedStyle(r, null) || {}).top !== "1%"),
              (t.boxSizingReliable =
                (e.getComputedStyle(r, null) || { width: "4px" }).width ===
                "4px"),
              (o = i.createElement("div")),
              (o.style.cssText = r.style.cssText = u),
              (o.style.marginRight = o.style.width = "0"),
              (r.style.width = "1px"),
              r.appendChild(o),
              (t.reliableMarginRight = !parseFloat(
                (e.getComputedStyle(o, null) || {}).marginRight
              ))),
            typeof r.style.zoom != "undefined" &&
            ((r.innerHTML = ""),
              (r.style.cssText =
                u + "width:1px;padding:1px;display:inline;zoom:1"),
              (t.inlineBlockNeedsLayout = r.offsetWidth === 3),
              (r.style.display = "block"),
              (r.style.overflow = "visible"),
              (r.innerHTML = "<div></div>"),
              (r.firstChild.style.width = "5px"),
              (t.shrinkWrapBlocks = r.offsetWidth !== 3),
              (n.style.zoom = 1)),
            a.removeChild(n),
            (n = r = s = o = null);
        }),
        a.removeChild(p),
        (n = r = s = o = u = a = p = null),
        t
      );
    })());
  var D = /(?:\{[\s\S]*\}|\[[\s\S]*\])$/,
    P = /([A-Z])/g;
  v.extend({
    cache: {},
    deletedIds: [],
    uuid: 0,
    expando: "jQuery" + (v.fn.jquery + Math.random()).replace(/\D/g, ""),
    noData: {
      embed: !0,
      object: "clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",
      applet: !0,
    },
    hasData: function (e) {
      return (
        (e = e.nodeType ? v.cache[e[v.expando]] : e[v.expando]), !!e && !B(e)
      );
    },
    data: function (e, n, r, i) {
      if (!v.acceptData(e)) return;
      var s,
        o,
        u = v.expando,
        a = typeof n == "string",
        f = e.nodeType,
        l = f ? v.cache : e,
        c = f ? e[u] : e[u] && u;
      if ((!c || !l[c] || (!i && !l[c].data)) && a && r === t) return;
      c || (f ? (e[u] = c = v.deletedIds.pop() || v.guid++) : (c = u)),
        l[c] || ((l[c] = {}), f || (l[c].toJSON = v.noop));
      if (typeof n == "object" || typeof n == "function")
        i ? (l[c] = v.extend(l[c], n)) : (l[c].data = v.extend(l[c].data, n));
      return (
        (s = l[c]),
        i || (s.data || (s.data = {}), (s = s.data)),
        r !== t && (s[v.camelCase(n)] = r),
        a ? ((o = s[n]), o == null && (o = s[v.camelCase(n)])) : (o = s),
        o
      );
    },
    removeData: function (e, t, n) {
      if (!v.acceptData(e)) return;
      var r,
        i,
        s,
        o = e.nodeType,
        u = o ? v.cache : e,
        a = o ? e[v.expando] : v.expando;
      if (!u[a]) return;
      if (t) {
        r = n ? u[a] : u[a].data;
        if (r) {
          v.isArray(t) ||
            (t in r
              ? (t = [t])
              : ((t = v.camelCase(t)),
                t in r ? (t = [t]) : (t = t.split(" "))));
          for (i = 0, s = t.length; i < s; i++) delete r[t[i]];
          if (!(n ? B : v.isEmptyObject)(r)) return;
        }
      }
      if (!n) {
        delete u[a].data;
        if (!B(u[a])) return;
      }
      o
        ? v.cleanData([e], !0)
        : v.support.deleteExpando || u != u.window
          ? delete u[a]
          : (u[a] = null);
    },
    _data: function (e, t, n) {
      return v.data(e, t, n, !0);
    },
    acceptData: function (e) {
      var t = e.nodeName && v.noData[e.nodeName.toLowerCase()];
      return !t || (t !== !0 && e.getAttribute("classid") === t);
    },
  }),
    v.fn.extend({
      data: function (e, n) {
        var r,
          i,
          s,
          o,
          u,
          a = this[0],
          f = 0,
          l = null;
        if (e === t) {
          if (this.length) {
            l = v.data(a);
            if (a.nodeType === 1 && !v._data(a, "parsedAttrs")) {
              s = a.attributes;
              for (u = s.length; f < u; f++)
                (o = s[f].name),
                  o.indexOf("data-") ||
                  ((o = v.camelCase(o.substring(5))), H(a, o, l[o]));
              v._data(a, "parsedAttrs", !0);
            }
          }
          return l;
        }
        return typeof e == "object"
          ? this.each(function () {
            v.data(this, e);
          })
          : ((r = e.split(".", 2)),
            (r[1] = r[1] ? "." + r[1] : ""),
            (i = r[1] + "!"),
            v.access(
              this,
              function (n) {
                if (n === t)
                  return (
                    (l = this.triggerHandler("getData" + i, [r[0]])),
                    l === t && a && ((l = v.data(a, e)), (l = H(a, e, l))),
                    l === t && r[1] ? this.data(r[0]) : l
                  );
                (r[1] = n),
                  this.each(function () {
                    var t = v(this);
                    t.triggerHandler("setData" + i, r),
                      v.data(this, e, n),
                      t.triggerHandler("changeData" + i, r);
                  });
              },
              null,
              n,
              arguments.length > 1,
              null,
              !1
            ));
      },
      removeData: function (e) {
        return this.each(function () {
          v.removeData(this, e);
        });
      },
    }),
    v.extend({
      queue: function (e, t, n) {
        var r;
        if (e)
          return (
            (t = (t || "fx") + "queue"),
            (r = v._data(e, t)),
            n &&
            (!r || v.isArray(n)
              ? (r = v._data(e, t, v.makeArray(n)))
              : r.push(n)),
            r || []
          );
      },
      dequeue: function (e, t) {
        t = t || "fx";
        var n = v.queue(e, t),
          r = n.length,
          i = n.shift(),
          s = v._queueHooks(e, t),
          o = function () {
            v.dequeue(e, t);
          };
        i === "inprogress" && ((i = n.shift()), r--),
          i &&
          (t === "fx" && n.unshift("inprogress"),
            delete s.stop,
            i.call(e, o, s)),
          !r && s && s.empty.fire();
      },
      _queueHooks: function (e, t) {
        var n = t + "queueHooks";
        return (
          v._data(e, n) ||
          v._data(e, n, {
            empty: v.Callbacks("once memory").add(function () {
              v.removeData(e, t + "queue", !0), v.removeData(e, n, !0);
            }),
          })
        );
      },
    }),
    v.fn.extend({
      queue: function (e, n) {
        var r = 2;
        return (
          typeof e != "string" && ((n = e), (e = "fx"), r--),
          arguments.length < r
            ? v.queue(this[0], e)
            : n === t
              ? this
              : this.each(function () {
                var t = v.queue(this, e, n);
                v._queueHooks(this, e),
                  e === "fx" && t[0] !== "inprogress" && v.dequeue(this, e);
              })
        );
      },
      dequeue: function (e) {
        return this.each(function () {
          v.dequeue(this, e);
        });
      },
      delay: function (e, t) {
        return (
          (e = v.fx ? v.fx.speeds[e] || e : e),
          (t = t || "fx"),
          this.queue(t, function (t, n) {
            var r = setTimeout(t, e);
            n.stop = function () {
              clearTimeout(r);
            };
          })
        );
      },
      clearQueue: function (e) {
        return this.queue(e || "fx", []);
      },
      promise: function (e, n) {
        var r,
          i = 1,
          s = v.Deferred(),
          o = this,
          u = this.length,
          a = function () {
            --i || s.resolveWith(o, [o]);
          };
        typeof e != "string" && ((n = e), (e = t)), (e = e || "fx");
        while (u--)
          (r = v._data(o[u], e + "queueHooks")),
            r && r.empty && (i++, r.empty.add(a));
        return a(), s.promise(n);
      },
    });
  var j,
    F,
    I,
    q = /[\t\r\n]/g,
    R = /\r/g,
    U = /^(?:button|input)$/i,
    z = /^(?:button|input|object|select|textarea)$/i,
    W = /^a(?:rea|)$/i,
    X =
      /^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,
    V = v.support.getSetAttribute;
  v.fn.extend({
    attr: function (e, t) {
      return v.access(this, v.attr, e, t, arguments.length > 1);
    },
    removeAttr: function (e) {
      return this.each(function () {
        v.removeAttr(this, e);
      });
    },
    prop: function (e, t) {
      return v.access(this, v.prop, e, t, arguments.length > 1);
    },
    removeProp: function (e) {
      return (
        (e = v.propFix[e] || e),
        this.each(function () {
          try {
            (this[e] = t), delete this[e];
          } catch (n) { }
        })
      );
    },
    addClass: function (e) {
      var t, n, r, i, s, o, u;
      if (v.isFunction(e))
        return this.each(function (t) {
          v(this).addClass(e.call(this, t, this.className));
        });
      if (e && typeof e == "string") {
        t = e.split(y);
        for (n = 0, r = this.length; n < r; n++) {
          i = this[n];
          if (i.nodeType === 1)
            if (!i.className && t.length === 1) i.className = e;
            else {
              s = " " + i.className + " ";
              for (o = 0, u = t.length; o < u; o++)
                s.indexOf(" " + t[o] + " ") < 0 && (s += t[o] + " ");
              i.className = v.trim(s);
            }
        }
      }
      return this;
    },
    removeClass: function (e) {
      var n, r, i, s, o, u, a;
      if (v.isFunction(e))
        return this.each(function (t) {
          v(this).removeClass(e.call(this, t, this.className));
        });
      if ((e && typeof e == "string") || e === t) {
        n = (e || "").split(y);
        for (u = 0, a = this.length; u < a; u++) {
          i = this[u];
          if (i.nodeType === 1 && i.className) {
            r = (" " + i.className + " ").replace(q, " ");
            for (s = 0, o = n.length; s < o; s++)
              while (r.indexOf(" " + n[s] + " ") >= 0)
                r = r.replace(" " + n[s] + " ", " ");
            i.className = e ? v.trim(r) : "";
          }
        }
      }
      return this;
    },
    toggleClass: function (e, t) {
      var n = typeof e,
        r = typeof t == "boolean";
      return v.isFunction(e)
        ? this.each(function (n) {
          v(this).toggleClass(e.call(this, n, this.className, t), t);
        })
        : this.each(function () {
          if (n === "string") {
            var i,
              s = 0,
              o = v(this),
              u = t,
              a = e.split(y);
            while ((i = a[s++]))
              (u = r ? u : !o.hasClass(i)),
                o[u ? "addClass" : "removeClass"](i);
          } else if (n === "undefined" || n === "boolean") this.className && v._data(this, "__className__", this.className), (this.className = this.className || e === !1 ? "" : v._data(this, "__className__") || "");
        });
    },
    hasClass: function (e) {
      var t = " " + e + " ",
        n = 0,
        r = this.length;
      for (; n < r; n++)
        if (
          this[n].nodeType === 1 &&
          (" " + this[n].className + " ").replace(q, " ").indexOf(t) >= 0
        )
          return !0;
      return !1;
    },
    val: function (e) {
      var n,
        r,
        i,
        s = this[0];
      if (!arguments.length) {
        if (s)
          return (
            (n = v.valHooks[s.type] || v.valHooks[s.nodeName.toLowerCase()]),
            n && "get" in n && (r = n.get(s, "value")) !== t
              ? r
              : ((r = s.value),
                typeof r == "string" ? r.replace(R, "") : r == null ? "" : r)
          );
        return;
      }
      return (
        (i = v.isFunction(e)),
        this.each(function (r) {
          var s,
            o = v(this);
          if (this.nodeType !== 1) return;
          i ? (s = e.call(this, r, o.val())) : (s = e),
            s == null
              ? (s = "")
              : typeof s == "number"
                ? (s += "")
                : v.isArray(s) &&
                (s = v.map(s, function (e) {
                  return e == null ? "" : e + "";
                })),
            (n =
              v.valHooks[this.type] || v.valHooks[this.nodeName.toLowerCase()]);
          if (!n || !("set" in n) || n.set(this, s, "value") === t)
            this.value = s;
        })
      );
    },
  }),
    v.extend({
      valHooks: {
        option: {
          get: function (e) {
            var t = e.attributes.value;
            return !t || t.specified ? e.value : e.text;
          },
        },
        select: {
          get: function (e) {
            var t,
              n,
              r = e.options,
              i = e.selectedIndex,
              s = e.type === "select-one" || i < 0,
              o = s ? null : [],
              u = s ? i + 1 : r.length,
              a = i < 0 ? u : s ? i : 0;
            for (; a < u; a++) {
              n = r[a];
              if (
                (n.selected || a === i) &&
                (v.support.optDisabled
                  ? !n.disabled
                  : n.getAttribute("disabled") === null) &&
                (!n.parentNode.disabled ||
                  !v.nodeName(n.parentNode, "optgroup"))
              ) {
                t = v(n).val();
                if (s) return t;
                o.push(t);
              }
            }
            return o;
          },
          set: function (e, t) {
            var n = v.makeArray(t);
            return (
              v(e)
                .find("option")
                .each(function () {
                  this.selected = v.inArray(v(this).val(), n) >= 0;
                }),
              n.length || (e.selectedIndex = -1),
              n
            );
          },
        },
      },
      attrFn: {},
      attr: function (e, n, r, i) {
        var s,
          o,
          u,
          a = e.nodeType;
        if (!e || a === 3 || a === 8 || a === 2) return;
        if (i && v.isFunction(v.fn[n])) return v(e)[n](r);
        if (typeof e.getAttribute == "undefined") return v.prop(e, n, r);
        (u = a !== 1 || !v.isXMLDoc(e)),
          u &&
          ((n = n.toLowerCase()),
            (o = v.attrHooks[n] || (X.test(n) ? F : j)));
        if (r !== t) {
          if (r === null) {
            v.removeAttr(e, n);
            return;
          }
          return o && "set" in o && u && (s = o.set(e, r, n)) !== t
            ? s
            : (e.setAttribute(n, r + ""), r);
        }
        return o && "get" in o && u && (s = o.get(e, n)) !== null
          ? s
          : ((s = e.getAttribute(n)), s === null ? t : s);
      },
      removeAttr: function (e, t) {
        var n,
          r,
          i,
          s,
          o = 0;
        if (t && e.nodeType === 1) {
          r = t.split(y);
          for (; o < r.length; o++)
            (i = r[o]),
              i &&
              ((n = v.propFix[i] || i),
                (s = X.test(i)),
                s || v.attr(e, i, ""),
                e.removeAttribute(V ? i : n),
                s && n in e && (e[n] = !1));
        }
      },
      attrHooks: {
        type: {
          set: function (e, t) {
            if (U.test(e.nodeName) && e.parentNode)
              v.error("type property can't be changed");
            else if (
              !v.support.radioValue &&
              t === "radio" &&
              v.nodeName(e, "input")
            ) {
              var n = e.value;
              return e.setAttribute("type", t), n && (e.value = n), t;
            }
          },
        },
        value: {
          get: function (e, t) {
            return j && v.nodeName(e, "button")
              ? j.get(e, t)
              : t in e
                ? e.value
                : null;
          },
          set: function (e, t, n) {
            if (j && v.nodeName(e, "button")) return j.set(e, t, n);
            e.value = t;
          },
        },
      },
      propFix: {
        tabindex: "tabIndex",
        readonly: "readOnly",
        for: "htmlFor",
        class: "className",
        maxlength: "maxLength",
        cellspacing: "cellSpacing",
        cellpadding: "cellPadding",
        rowspan: "rowSpan",
        colspan: "colSpan",
        usemap: "useMap",
        frameborder: "frameBorder",
        contenteditable: "contentEditable",
      },
      prop: function (e, n, r) {
        var i,
          s,
          o,
          u = e.nodeType;
        if (!e || u === 3 || u === 8 || u === 2) return;
        return (
          (o = u !== 1 || !v.isXMLDoc(e)),
          o && ((n = v.propFix[n] || n), (s = v.propHooks[n])),
          r !== t
            ? s && "set" in s && (i = s.set(e, r, n)) !== t
              ? i
              : (e[n] = r)
            : s && "get" in s && (i = s.get(e, n)) !== null
              ? i
              : e[n]
        );
      },
      propHooks: {
        tabIndex: {
          get: function (e) {
            var n = e.getAttributeNode("tabindex");
            return n && n.specified
              ? parseInt(n.value, 10)
              : z.test(e.nodeName) || (W.test(e.nodeName) && e.href)
                ? 0
                : t;
          },
        },
      },
    }),
    (F = {
      get: function (e, n) {
        var r,
          i = v.prop(e, n);
        return i === !0 ||
          (typeof i != "boolean" &&
            (r = e.getAttributeNode(n)) &&
            r.nodeValue !== !1)
          ? n.toLowerCase()
          : t;
      },
      set: function (e, t, n) {
        var r;
        return (
          t === !1
            ? v.removeAttr(e, n)
            : ((r = v.propFix[n] || n),
              r in e && (e[r] = !0),
              e.setAttribute(n, n.toLowerCase())),
          n
        );
      },
    }),
    V ||
    ((I = { name: !0, id: !0, coords: !0 }),
      (j = v.valHooks.button =
      {
        get: function (e, n) {
          var r;
          return (
            (r = e.getAttributeNode(n)),
            r && (I[n] ? r.value !== "" : r.specified) ? r.value : t
          );
        },
        set: function (e, t, n) {
          var r = e.getAttributeNode(n);
          return (
            r || ((r = i.createAttribute(n)), e.setAttributeNode(r)),
            (r.value = t + "")
          );
        },
      }),
      v.each(["width", "height"], function (e, t) {
        v.attrHooks[t] = v.extend(v.attrHooks[t], {
          set: function (e, n) {
            if (n === "") return e.setAttribute(t, "auto"), n;
          },
        });
      }),
      (v.attrHooks.contenteditable = {
        get: j.get,
        set: function (e, t, n) {
          t === "" && (t = "false"), j.set(e, t, n);
        },
      })),
    v.support.hrefNormalized ||
    v.each(["href", "src", "width", "height"], function (e, n) {
      v.attrHooks[n] = v.extend(v.attrHooks[n], {
        get: function (e) {
          var r = e.getAttribute(n, 2);
          return r === null ? t : r;
        },
      });
    }),
    v.support.style ||
    (v.attrHooks.style = {
      get: function (e) {
        return e.style.cssText.toLowerCase() || t;
      },
      set: function (e, t) {
        return (e.style.cssText = t + "");
      },
    }),
    v.support.optSelected ||
    (v.propHooks.selected = v.extend(v.propHooks.selected, {
      get: function (e) {
        var t = e.parentNode;
        return (
          t && (t.selectedIndex, t.parentNode && t.parentNode.selectedIndex),
          null
        );
      },
    })),
    v.support.enctype || (v.propFix.enctype = "encoding"),
    v.support.checkOn ||
    v.each(["radio", "checkbox"], function () {
      v.valHooks[this] = {
        get: function (e) {
          return e.getAttribute("value") === null ? "on" : e.value;
        },
      };
    }),
    v.each(["radio", "checkbox"], function () {
      v.valHooks[this] = v.extend(v.valHooks[this], {
        set: function (e, t) {
          if (v.isArray(t)) return (e.checked = v.inArray(v(e).val(), t) >= 0);
        },
      });
    });
  var $ = /^(?:textarea|input|select)$/i,
    J = /^([^\.]*|)(?:\.(.+)|)$/,
    K = /(?:^|\s)hover(\.\S+|)\b/,
    Q = /^key/,
    G = /^(?:mouse|contextmenu)|click/,
    Y = /^(?:focusinfocus|focusoutblur)$/,
    Z = function (e) {
      return v.event.special.hover
        ? e
        : e.replace(K, "mouseenter$1 mouseleave$1");
    };
  (v.event = {
    add: function (e, n, r, i, s) {
      var o, u, a, f, l, c, h, p, d, m, g;
      if (e.nodeType === 3 || e.nodeType === 8 || !n || !r || !(o = v._data(e)))
        return;
      r.handler && ((d = r), (r = d.handler), (s = d.selector)),
        r.guid || (r.guid = v.guid++),
        (a = o.events),
        a || (o.events = a = {}),
        (u = o.handle),
        u ||
        ((o.handle = u =
          function (e) {
            return typeof v == "undefined" ||
              (!!e && v.event.triggered === e.type)
              ? t
              : v.event.dispatch.apply(u.elem, arguments);
          }),
          (u.elem = e)),
        (n = v.trim(Z(n)).split(" "));
      for (f = 0; f < n.length; f++) {
        (l = J.exec(n[f]) || []),
          (c = l[1]),
          (h = (l[2] || "").split(".").sort()),
          (g = v.event.special[c] || {}),
          (c = (s ? g.delegateType : g.bindType) || c),
          (g = v.event.special[c] || {}),
          (p = v.extend(
            {
              type: c,
              origType: l[1],
              data: i,
              handler: r,
              guid: r.guid,
              selector: s,
              needsContext: s && v.expr.match.needsContext.test(s),
              namespace: h.join("."),
            },
            d
          )),
          (m = a[c]);
        if (!m) {
          (m = a[c] = []), (m.delegateCount = 0);
          if (!g.setup || g.setup.call(e, i, h, u) === !1)
            e.addEventListener
              ? e.addEventListener(c, u, !1)
              : e.attachEvent && e.attachEvent("on" + c, u);
        }
        g.add &&
          (g.add.call(e, p), p.handler.guid || (p.handler.guid = r.guid)),
          s ? m.splice(m.delegateCount++, 0, p) : m.push(p),
          (v.event.global[c] = !0);
      }
      e = null;
    },
    global: {},
    remove: function (e, t, n, r, i) {
      var s,
        o,
        u,
        a,
        f,
        l,
        c,
        h,
        p,
        d,
        m,
        g = v.hasData(e) && v._data(e);
      if (!g || !(h = g.events)) return;
      t = v.trim(Z(t || "")).split(" ");
      for (s = 0; s < t.length; s++) {
        (o = J.exec(t[s]) || []), (u = a = o[1]), (f = o[2]);
        if (!u) {
          for (u in h) v.event.remove(e, u + t[s], n, r, !0);
          continue;
        }
        (p = v.event.special[u] || {}),
          (u = (r ? p.delegateType : p.bindType) || u),
          (d = h[u] || []),
          (l = d.length),
          (f = f
            ? new RegExp(
              "(^|\\.)" +
              f.split(".").sort().join("\\.(?:.*\\.|)") +
              "(\\.|$)"
            )
            : null);
        for (c = 0; c < d.length; c++)
          (m = d[c]),
            (i || a === m.origType) &&
            (!n || n.guid === m.guid) &&
            (!f || f.test(m.namespace)) &&
            (!r || r === m.selector || (r === "**" && m.selector)) &&
            (d.splice(c--, 1),
              m.selector && d.delegateCount--,
              p.remove && p.remove.call(e, m));
        d.length === 0 &&
          l !== d.length &&
          ((!p.teardown || p.teardown.call(e, f, g.handle) === !1) &&
            v.removeEvent(e, u, g.handle),
            delete h[u]);
      }
      v.isEmptyObject(h) && (delete g.handle, v.removeData(e, "events", !0));
    },
    customEvent: { getData: !0, setData: !0, changeData: !0 },
    trigger: function (n, r, s, o) {
      if (!s || (s.nodeType !== 3 && s.nodeType !== 8)) {
        var u,
          a,
          f,
          l,
          c,
          h,
          p,
          d,
          m,
          g,
          y = n.type || n,
          b = [];
        if (Y.test(y + v.event.triggered)) return;
        y.indexOf("!") >= 0 && ((y = y.slice(0, -1)), (a = !0)),
          y.indexOf(".") >= 0 &&
          ((b = y.split(".")), (y = b.shift()), b.sort());
        if ((!s || v.event.customEvent[y]) && !v.event.global[y]) return;
        (n =
          typeof n == "object"
            ? n[v.expando]
              ? n
              : new v.Event(y, n)
            : new v.Event(y)),
          (n.type = y),
          (n.isTrigger = !0),
          (n.exclusive = a),
          (n.namespace = b.join(".")),
          (n.namespace_re = n.namespace
            ? new RegExp("(^|\\.)" + b.join("\\.(?:.*\\.|)") + "(\\.|$)")
            : null),
          (h = y.indexOf(":") < 0 ? "on" + y : "");
        if (!s) {
          u = v.cache;
          for (f in u)
            u[f].events &&
              u[f].events[y] &&
              v.event.trigger(n, r, u[f].handle.elem, !0);
          return;
        }
        (n.result = t),
          n.target || (n.target = s),
          (r = r != null ? v.makeArray(r) : []),
          r.unshift(n),
          (p = v.event.special[y] || {});
        if (p.trigger && p.trigger.apply(s, r) === !1) return;
        m = [[s, p.bindType || y]];
        if (!o && !p.noBubble && !v.isWindow(s)) {
          (g = p.delegateType || y), (l = Y.test(g + y) ? s : s.parentNode);
          for (c = s; l; l = l.parentNode) m.push([l, g]), (c = l);
          c === (s.ownerDocument || i) &&
            m.push([c.defaultView || c.parentWindow || e, g]);
        }
        for (f = 0; f < m.length && !n.isPropagationStopped(); f++)
          (l = m[f][0]),
            (n.type = m[f][1]),
            (d = (v._data(l, "events") || {})[n.type] && v._data(l, "handle")),
            d && d.apply(l, r),
            (d = h && l[h]),
            d &&
            v.acceptData(l) &&
            d.apply &&
            d.apply(l, r) === !1 &&
            n.preventDefault();
        return (
          (n.type = y),
          !o &&
          !n.isDefaultPrevented() &&
          (!p._default || p._default.apply(s.ownerDocument, r) === !1) &&
          (y !== "click" || !v.nodeName(s, "a")) &&
          v.acceptData(s) &&
          h &&
          s[y] &&
          ((y !== "focus" && y !== "blur") || n.target.offsetWidth !== 0) &&
          !v.isWindow(s) &&
          ((c = s[h]),
            c && (s[h] = null),
            (v.event.triggered = y),
            s[y](),
            (v.event.triggered = t),
            c && (s[h] = c)),
          n.result
        );
      }
      return;
    },
    dispatch: function (n) {
      n = v.event.fix(n || e.event);
      var r,
        i,
        s,
        o,
        u,
        a,
        f,
        c,
        h,
        p,
        d = (v._data(this, "events") || {})[n.type] || [],
        m = d.delegateCount,
        g = l.call(arguments),
        y = !n.exclusive && !n.namespace,
        b = v.event.special[n.type] || {},
        w = [];
      (g[0] = n), (n.delegateTarget = this);
      if (b.preDispatch && b.preDispatch.call(this, n) === !1) return;
      if (m && (!n.button || n.type !== "click"))
        for (s = n.target; s != this; s = s.parentNode || this)
          if (s.disabled !== !0 || n.type !== "click") {
            (u = {}), (f = []);
            for (r = 0; r < m; r++)
              (c = d[r]),
                (h = c.selector),
                u[h] === t &&
                (u[h] = c.needsContext
                  ? v(h, this).index(s) >= 0
                  : v.find(h, this, null, [s]).length),
                u[h] && f.push(c);
            f.length && w.push({ elem: s, matches: f });
          }
      d.length > m && w.push({ elem: this, matches: d.slice(m) });
      for (r = 0; r < w.length && !n.isPropagationStopped(); r++) {
        (a = w[r]), (n.currentTarget = a.elem);
        for (
          i = 0;
          i < a.matches.length && !n.isImmediatePropagationStopped();
          i++
        ) {
          c = a.matches[i];
          if (
            y ||
            (!n.namespace && !c.namespace) ||
            (n.namespace_re && n.namespace_re.test(c.namespace))
          )
            (n.data = c.data),
              (n.handleObj = c),
              (o = (
                (v.event.special[c.origType] || {}).handle || c.handler
              ).apply(a.elem, g)),
              o !== t &&
              ((n.result = o),
                o === !1 && (n.preventDefault(), n.stopPropagation()));
        }
      }
      return b.postDispatch && b.postDispatch.call(this, n), n.result;
    },
    props:
      "attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(
        " "
      ),
    fixHooks: {},
    keyHooks: {
      props: "char charCode key keyCode".split(" "),
      filter: function (e, t) {
        return (
          e.which == null &&
          (e.which = t.charCode != null ? t.charCode : t.keyCode),
          e
        );
      },
    },
    mouseHooks: {
      props:
        "button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(
          " "
        ),
      filter: function (e, n) {
        var r,
          s,
          o,
          u = n.button,
          a = n.fromElement;
        return (
          e.pageX == null &&
          n.clientX != null &&
          ((r = e.target.ownerDocument || i),
            (s = r.documentElement),
            (o = r.body),
            (e.pageX =
              n.clientX +
              ((s && s.scrollLeft) || (o && o.scrollLeft) || 0) -
              ((s && s.clientLeft) || (o && o.clientLeft) || 0)),
            (e.pageY =
              n.clientY +
              ((s && s.scrollTop) || (o && o.scrollTop) || 0) -
              ((s && s.clientTop) || (o && o.clientTop) || 0))),
          !e.relatedTarget &&
          a &&
          (e.relatedTarget = a === e.target ? n.toElement : a),
          !e.which &&
          u !== t &&
          (e.which = u & 1 ? 1 : u & 2 ? 3 : u & 4 ? 2 : 0),
          e
        );
      },
    },
    fix: function (e) {
      if (e[v.expando]) return e;
      var t,
        n,
        r = e,
        s = v.event.fixHooks[e.type] || {},
        o = s.props ? this.props.concat(s.props) : this.props;
      e = v.Event(r);
      for (t = o.length; t;) (n = o[--t]), (e[n] = r[n]);
      return (
        e.target || (e.target = r.srcElement || i),
        e.target.nodeType === 3 && (e.target = e.target.parentNode),
        (e.metaKey = !!e.metaKey),
        s.filter ? s.filter(e, r) : e
      );
    },
    special: {
      load: { noBubble: !0 },
      focus: { delegateType: "focusin" },
      blur: { delegateType: "focusout" },
      beforeunload: {
        setup: function (e, t, n) {
          v.isWindow(this) && (this.onbeforeunload = n);
        },
        teardown: function (e, t) {
          this.onbeforeunload === t && (this.onbeforeunload = null);
        },
      },
    },
    simulate: function (e, t, n, r) {
      var i = v.extend(new v.Event(), n, {
        type: e,
        isSimulated: !0,
        originalEvent: {},
      });
      r ? v.event.trigger(i, null, t) : v.event.dispatch.call(t, i),
        i.isDefaultPrevented() && n.preventDefault();
    },
  }),
    (v.event.handle = v.event.dispatch),
    (v.removeEvent = i.removeEventListener
      ? function (e, t, n) {
        e.removeEventListener && e.removeEventListener(t, n, !1);
      }
      : function (e, t, n) {
        var r = "on" + t;
        e.detachEvent &&
          (typeof e[r] == "undefined" && (e[r] = null), e.detachEvent(r, n));
      }),
    (v.Event = function (e, t) {
      if (!(this instanceof v.Event)) return new v.Event(e, t);
      e && e.type
        ? ((this.originalEvent = e),
          (this.type = e.type),
          (this.isDefaultPrevented =
            e.defaultPrevented ||
              e.returnValue === !1 ||
              (e.getPreventDefault && e.getPreventDefault())
              ? tt
              : et))
        : (this.type = e),
        t && v.extend(this, t),
        (this.timeStamp = (e && e.timeStamp) || v.now()),
        (this[v.expando] = !0);
    }),
    (v.Event.prototype = {
      preventDefault: function () {
        this.isDefaultPrevented = tt;
        var e = this.originalEvent;
        if (!e) return;
        e.preventDefault ? e.preventDefault() : (e.returnValue = !1);
      },
      stopPropagation: function () {
        this.isPropagationStopped = tt;
        var e = this.originalEvent;
        if (!e) return;
        e.stopPropagation && e.stopPropagation(), (e.cancelBubble = !0);
      },
      stopImmediatePropagation: function () {
        (this.isImmediatePropagationStopped = tt), this.stopPropagation();
      },
      isDefaultPrevented: et,
      isPropagationStopped: et,
      isImmediatePropagationStopped: et,
    }),
    v.each(
      { mouseenter: "mouseover", mouseleave: "mouseout" },
      function (e, t) {
        v.event.special[e] = {
          delegateType: t,
          bindType: t,
          handle: function (e) {
            var n,
              r = this,
              i = e.relatedTarget,
              s = e.handleObj,
              o = s.selector;
            if (!i || (i !== r && !v.contains(r, i)))
              (e.type = s.origType),
                (n = s.handler.apply(this, arguments)),
                (e.type = t);
            return n;
          },
        };
      }
    ),
    v.support.submitBubbles ||
    (v.event.special.submit = {
      setup: function () {
        if (v.nodeName(this, "form")) return !1;
        v.event.add(this, "click._submit keypress._submit", function (e) {
          var n = e.target,
            r =
              v.nodeName(n, "input") || v.nodeName(n, "button") ? n.form : t;
          r &&
            !v._data(r, "_submit_attached") &&
            (v.event.add(r, "submit._submit", function (e) {
              e._submit_bubble = !0;
            }),
              v._data(r, "_submit_attached", !0));
        });
      },
      postDispatch: function (e) {
        e._submit_bubble &&
          (delete e._submit_bubble,
            this.parentNode &&
            !e.isTrigger &&
            v.event.simulate("submit", this.parentNode, e, !0));
      },
      teardown: function () {
        if (v.nodeName(this, "form")) return !1;
        v.event.remove(this, "._submit");
      },
    }),
    v.support.changeBubbles ||
    (v.event.special.change = {
      setup: function () {
        if ($.test(this.nodeName)) {
          if (this.type === "checkbox" || this.type === "radio")
            v.event.add(this, "propertychange._change", function (e) {
              e.originalEvent.propertyName === "checked" &&
                (this._just_changed = !0);
            }),
              v.event.add(this, "click._change", function (e) {
                this._just_changed &&
                  !e.isTrigger &&
                  (this._just_changed = !1),
                  v.event.simulate("change", this, e, !0);
              });
          return !1;
        }
        v.event.add(this, "beforeactivate._change", function (e) {
          var t = e.target;
          $.test(t.nodeName) &&
            !v._data(t, "_change_attached") &&
            (v.event.add(t, "change._change", function (e) {
              this.parentNode &&
                !e.isSimulated &&
                !e.isTrigger &&
                v.event.simulate("change", this.parentNode, e, !0);
            }),
              v._data(t, "_change_attached", !0));
        });
      },
      handle: function (e) {
        var t = e.target;
        if (
          this !== t ||
          e.isSimulated ||
          e.isTrigger ||
          (t.type !== "radio" && t.type !== "checkbox")
        )
          return e.handleObj.handler.apply(this, arguments);
      },
      teardown: function () {
        return v.event.remove(this, "._change"), !$.test(this.nodeName);
      },
    }),
    v.support.focusinBubbles ||
    v.each({ focus: "focusin", blur: "focusout" }, function (e, t) {
      var n = 0,
        r = function (e) {
          v.event.simulate(t, e.target, v.event.fix(e), !0);
        };
      v.event.special[t] = {
        setup: function () {
          n++ === 0 && i.addEventListener(e, r, !0);
        },
        teardown: function () {
          --n === 0 && i.removeEventListener(e, r, !0);
        },
      };
    }),
    v.fn.extend({
      on: function (e, n, r, i, s) {
        var o, u;
        if (typeof e == "object") {
          typeof n != "string" && ((r = r || n), (n = t));
          for (u in e) this.on(u, n, r, e[u], s);
          return this;
        }
        r == null && i == null
          ? ((i = n), (r = n = t))
          : i == null &&
          (typeof n == "string"
            ? ((i = r), (r = t))
            : ((i = r), (r = n), (n = t)));
        if (i === !1) i = et;
        else if (!i) return this;
        return (
          s === 1 &&
          ((o = i),
            (i = function (e) {
              return v().off(e), o.apply(this, arguments);
            }),
            (i.guid = o.guid || (o.guid = v.guid++))),
          this.each(function () {
            v.event.add(this, e, i, r, n);
          })
        );
      },
      one: function (e, t, n, r) {
        return this.on(e, t, n, r, 1);
      },
      off: function (e, n, r) {
        var i, s;
        if (e && e.preventDefault && e.handleObj)
          return (
            (i = e.handleObj),
            v(e.delegateTarget).off(
              i.namespace ? i.origType + "." + i.namespace : i.origType,
              i.selector,
              i.handler
            ),
            this
          );
        if (typeof e == "object") {
          for (s in e) this.off(s, n, e[s]);
          return this;
        }
        if (n === !1 || typeof n == "function") (r = n), (n = t);
        return (
          r === !1 && (r = et),
          this.each(function () {
            v.event.remove(this, e, r, n);
          })
        );
      },
      bind: function (e, t, n) {
        return this.on(e, null, t, n);
      },
      unbind: function (e, t) {
        return this.off(e, null, t);
      },
      live: function (e, t, n) {
        return v(this.context).on(e, this.selector, t, n), this;
      },
      die: function (e, t) {
        return v(this.context).off(e, this.selector || "**", t), this;
      },
      delegate: function (e, t, n, r) {
        return this.on(t, e, n, r);
      },
      undelegate: function (e, t, n) {
        return arguments.length === 1
          ? this.off(e, "**")
          : this.off(t, e || "**", n);
      },
      trigger: function (e, t) {
        return this.each(function () {
          v.event.trigger(e, t, this);
        });
      },
      triggerHandler: function (e, t) {
        if (this[0]) return v.event.trigger(e, t, this[0], !0);
      },
      toggle: function (e) {
        var t = arguments,
          n = e.guid || v.guid++,
          r = 0,
          i = function (n) {
            var i = (v._data(this, "lastToggle" + e.guid) || 0) % r;
            return (
              v._data(this, "lastToggle" + e.guid, i + 1),
              n.preventDefault(),
              t[i].apply(this, arguments) || !1
            );
          };
        i.guid = n;
        while (r < t.length) t[r++].guid = n;
        return this.click(i);
      },
      hover: function (e, t) {
        return this.mouseenter(e).mouseleave(t || e);
      },
    }),
    v.each(
      "blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(
        " "
      ),
      function (e, t) {
        (v.fn[t] = function (e, n) {
          return (
            n == null && ((n = e), (e = null)),
            arguments.length > 0 ? this.on(t, null, e, n) : this.trigger(t)
          );
        }),
          Q.test(t) && (v.event.fixHooks[t] = v.event.keyHooks),
          G.test(t) && (v.event.fixHooks[t] = v.event.mouseHooks);
      }
    ),
    (function (e, t) {
      function nt(e, t, n, r) {
        (n = n || []), (t = t || g);
        var i,
          s,
          a,
          f,
          l = t.nodeType;
        if (!e || typeof e != "string") return n;
        if (l !== 1 && l !== 9) return [];
        a = o(t);
        if (!a && !r)
          if ((i = R.exec(e)))
            if ((f = i[1])) {
              if (l === 9) {
                s = t.getElementById(f);
                if (!s || !s.parentNode) return n;
                if (s.id === f) return n.push(s), n;
              } else if (
                t.ownerDocument &&
                (s = t.ownerDocument.getElementById(f)) &&
                u(t, s) &&
                s.id === f
              )
                return n.push(s), n;
            } else {
              if (i[2])
                return S.apply(n, x.call(t.getElementsByTagName(e), 0)), n;
              if ((f = i[3]) && Z && t.getElementsByClassName)
                return S.apply(n, x.call(t.getElementsByClassName(f), 0)), n;
            }
        return vt(e.replace(j, "$1"), t, n, r, a);
      }
      function rt(e) {
        return function (t) {
          var n = t.nodeName.toLowerCase();
          return n === "input" && t.type === e;
        };
      }
      function it(e) {
        return function (t) {
          var n = t.nodeName.toLowerCase();
          return (n === "input" || n === "button") && t.type === e;
        };
      }
      function st(e) {
        return N(function (t) {
          return (
            (t = +t),
            N(function (n, r) {
              var i,
                s = e([], n.length, t),
                o = s.length;
              while (o--) n[(i = s[o])] && (n[i] = !(r[i] = n[i]));
            })
          );
        });
      }
      function ot(e, t, n) {
        if (e === t) return n;
        var r = e.nextSibling;
        while (r) {
          if (r === t) return -1;
          r = r.nextSibling;
        }
        return 1;
      }
      function ut(e, t) {
        var n,
          r,
          s,
          o,
          u,
          a,
          f,
          l = L[d][e + " "];
        if (l) return t ? 0 : l.slice(0);
        (u = e), (a = []), (f = i.preFilter);
        while (u) {
          if (!n || (r = F.exec(u)))
            r && (u = u.slice(r[0].length) || u), a.push((s = []));
          n = !1;
          if ((r = I.exec(u)))
            s.push((n = new m(r.shift()))),
              (u = u.slice(n.length)),
              (n.type = r[0].replace(j, " "));
          for (o in i.filter)
            (r = J[o].exec(u)) &&
              (!f[o] || (r = f[o](r))) &&
              (s.push((n = new m(r.shift()))),
                (u = u.slice(n.length)),
                (n.type = o),
                (n.matches = r));
          if (!n) break;
        }
        return t ? u.length : u ? nt.error(e) : L(e, a).slice(0);
      }
      function at(e, t, r) {
        var i = t.dir,
          s = r && t.dir === "parentNode",
          o = w++;
        return t.first
          ? function (t, n, r) {
            while ((t = t[i])) if (s || t.nodeType === 1) return e(t, n, r);
          }
          : function (t, r, u) {
            if (!u) {
              var a,
                f = b + " " + o + " ",
                l = f + n;
              while ((t = t[i]))
                if (s || t.nodeType === 1) {
                  if ((a = t[d]) === l) return t.sizset;
                  if (typeof a == "string" && a.indexOf(f) === 0) {
                    if (t.sizset) return t;
                  } else {
                    t[d] = l;
                    if (e(t, r, u)) return (t.sizset = !0), t;
                    t.sizset = !1;
                  }
                }
            } else
              while ((t = t[i]))
                if (s || t.nodeType === 1) if (e(t, r, u)) return t;
          };
      }
      function ft(e) {
        return e.length > 1
          ? function (t, n, r) {
            var i = e.length;
            while (i--) if (!e[i](t, n, r)) return !1;
            return !0;
          }
          : e[0];
      }
      function lt(e, t, n, r, i) {
        var s,
          o = [],
          u = 0,
          a = e.length,
          f = t != null;
        for (; u < a; u++)
          if ((s = e[u])) if (!n || n(s, r, i)) o.push(s), f && t.push(u);
        return o;
      }
      function ct(e, t, n, r, i, s) {
        return (
          r && !r[d] && (r = ct(r)),
          i && !i[d] && (i = ct(i, s)),
          N(function (s, o, u, a) {
            var f,
              l,
              c,
              h = [],
              p = [],
              d = o.length,
              v = s || dt(t || "*", u.nodeType ? [u] : u, []),
              m = e && (s || !t) ? lt(v, h, e, u, a) : v,
              g = n ? (i || (s ? e : d || r) ? [] : o) : m;
            n && n(m, g, u, a);
            if (r) {
              (f = lt(g, p)), r(f, [], u, a), (l = f.length);
              while (l--) if ((c = f[l])) g[p[l]] = !(m[p[l]] = c);
            }
            if (s) {
              if (i || e) {
                if (i) {
                  (f = []), (l = g.length);
                  while (l--) (c = g[l]) && f.push((m[l] = c));
                  i(null, (g = []), f, a);
                }
                l = g.length;
                while (l--)
                  (c = g[l]) &&
                    (f = i ? T.call(s, c) : h[l]) > -1 &&
                    (s[f] = !(o[f] = c));
              }
            } else (g = lt(g === o ? g.splice(d, g.length) : g)), i ? i(null, o, g, a) : S.apply(o, g);
          })
        );
      }
      function ht(e) {
        var t,
          n,
          r,
          s = e.length,
          o = i.relative[e[0].type],
          u = o || i.relative[" "],
          a = o ? 1 : 0,
          f = at(
            function (e) {
              return e === t;
            },
            u,
            !0
          ),
          l = at(
            function (e) {
              return T.call(t, e) > -1;
            },
            u,
            !0
          ),
          h = [
            function (e, n, r) {
              return (
                (!o && (r || n !== c)) ||
                ((t = n).nodeType ? f(e, n, r) : l(e, n, r))
              );
            },
          ];
        for (; a < s; a++)
          if ((n = i.relative[e[a].type])) h = [at(ft(h), n)];
          else {
            n = i.filter[e[a].type].apply(null, e[a].matches);
            if (n[d]) {
              r = ++a;
              for (; r < s; r++) if (i.relative[e[r].type]) break;
              return ct(
                a > 1 && ft(h),
                a > 1 &&
                e
                  .slice(0, a - 1)
                  .join("")
                  .replace(j, "$1"),
                n,
                a < r && ht(e.slice(a, r)),
                r < s && ht((e = e.slice(r))),
                r < s && e.join("")
              );
            }
            h.push(n);
          }
        return ft(h);
      }
      function pt(e, t) {
        var r = t.length > 0,
          s = e.length > 0,
          o = function (u, a, f, l, h) {
            var p,
              d,
              v,
              m = [],
              y = 0,
              w = "0",
              x = u && [],
              T = h != null,
              N = c,
              C = u || (s && i.find.TAG("*", (h && a.parentNode) || a)),
              k = (b += N == null ? 1 : Math.E);
            T && ((c = a !== g && a), (n = o.el));
            for (; (p = C[w]) != null; w++) {
              if (s && p) {
                for (d = 0; (v = e[d]); d++)
                  if (v(p, a, f)) {
                    l.push(p);
                    break;
                  }
                T && ((b = k), (n = ++o.el));
              }
              r && ((p = !v && p) && y--, u && x.push(p));
            }
            y += w;
            if (r && w !== y) {
              for (d = 0; (v = t[d]); d++) v(x, m, a, f);
              if (u) {
                if (y > 0) while (w--) !x[w] && !m[w] && (m[w] = E.call(l));
                m = lt(m);
              }
              S.apply(l, m),
                T && !u && m.length > 0 && y + t.length > 1 && nt.uniqueSort(l);
            }
            return T && ((b = k), (c = N)), x;
          };
        return (o.el = 0), r ? N(o) : o;
      }
      function dt(e, t, n) {
        var r = 0,
          i = t.length;
        for (; r < i; r++) nt(e, t[r], n);
        return n;
      }
      function vt(e, t, n, r, s) {
        var o,
          u,
          f,
          l,
          c,
          h = ut(e),
          p = h.length;
        if (!r && h.length === 1) {
          u = h[0] = h[0].slice(0);
          if (
            u.length > 2 &&
            (f = u[0]).type === "ID" &&
            t.nodeType === 9 &&
            !s &&
            i.relative[u[1].type]
          ) {
            t = i.find.ID(f.matches[0].replace($, ""), t, s)[0];
            if (!t) return n;
            e = e.slice(u.shift().length);
          }
          for (o = J.POS.test(e) ? -1 : u.length - 1; o >= 0; o--) {
            f = u[o];
            if (i.relative[(l = f.type)]) break;
            if ((c = i.find[l]))
              if (
                (r = c(
                  f.matches[0].replace($, ""),
                  (z.test(u[0].type) && t.parentNode) || t,
                  s
                ))
              ) {
                u.splice(o, 1), (e = r.length && u.join(""));
                if (!e) return S.apply(n, x.call(r, 0)), n;
                break;
              }
          }
        }
        return a(e, h)(r, t, s, n, z.test(e)), n;
      }
      function mt() { }
      var n,
        r,
        i,
        s,
        o,
        u,
        a,
        f,
        l,
        c,
        h = !0,
        p = "undefined",
        d = ("sizcache" + Math.random()).replace(".", ""),
        m = String,
        g = e.document,
        y = g.documentElement,
        b = 0,
        w = 0,
        E = [].pop,
        S = [].push,
        x = [].slice,
        T =
          [].indexOf ||
          function (e) {
            var t = 0,
              n = this.length;
            for (; t < n; t++) if (this[t] === e) return t;
            return -1;
          },
        N = function (e, t) {
          return (e[d] = t == null || t), e;
        },
        C = function () {
          var e = {},
            t = [];
          return N(function (n, r) {
            return (
              t.push(n) > i.cacheLength && delete e[t.shift()], (e[n + " "] = r)
            );
          }, e);
        },
        k = C(),
        L = C(),
        A = C(),
        O = "[\\x20\\t\\r\\n\\f]",
        M = "(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",
        _ = M.replace("w", "w#"),
        D = "([*^$|!~]?=)",
        P =
          "\\[" +
          O +
          "*(" +
          M +
          ")" +
          O +
          "*(?:" +
          D +
          O +
          "*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|(" +
          _ +
          ")|)|)" +
          O +
          "*\\]",
        H =
          ":(" +
          M +
          ")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:" +
          P +
          ")|[^:]|\\\\.)*|.*))\\)|)",
        B =
          ":(even|odd|eq|gt|lt|nth|first|last)(?:\\(" +
          O +
          "*((?:-\\d)?\\d*)" +
          O +
          "*\\)|)(?=[^-]|$)",
        j = new RegExp("^" + O + "+|((?:^|[^\\\\])(?:\\\\.)*)" + O + "+$", "g"),
        F = new RegExp("^" + O + "*," + O + "*"),
        I = new RegExp("^" + O + "*([\\x20\\t\\r\\n\\f>+~])" + O + "*"),
        q = new RegExp(H),
        R = /^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,
        U = /^:not/,
        z = /[\x20\t\r\n\f]*[+~]/,
        W = /:not\($/,
        X = /h\d/i,
        V = /input|select|textarea|button/i,
        $ = /\\(?!\\)/g,
        J = {
          ID: new RegExp("^#(" + M + ")"),
          CLASS: new RegExp("^\\.(" + M + ")"),
          NAME: new RegExp("^\\[name=['\"]?(" + M + ")['\"]?\\]"),
          TAG: new RegExp("^(" + M.replace("w", "w*") + ")"),
          ATTR: new RegExp("^" + P),
          PSEUDO: new RegExp("^" + H),
          POS: new RegExp(B, "i"),
          CHILD: new RegExp(
            "^:(only|nth|first|last)-child(?:\\(" +
            O +
            "*(even|odd|(([+-]|)(\\d*)n|)" +
            O +
            "*(?:([+-]|)" +
            O +
            "*(\\d+)|))" +
            O +
            "*\\)|)",
            "i"
          ),
          needsContext: new RegExp("^" + O + "*[>+~]|" + B, "i"),
        },
        K = function (e) {
          var t = g.createElement("div");
          try {
            return e(t);
          } catch (n) {
            return !1;
          } finally {
            t = null;
          }
        },
        Q = K(function (e) {
          return (
            e.appendChild(g.createComment("")),
            !e.getElementsByTagName("*").length
          );
        }),
        G = K(function (e) {
          return (
            (e.innerHTML = "<a href='#'></a>"),
            e.firstChild &&
            typeof e.firstChild.getAttribute !== p &&
            e.firstChild.getAttribute("href") === "#"
          );
        }),
        Y = K(function (e) {
          e.innerHTML = "<select></select>";
          var t = typeof e.lastChild.getAttribute("multiple");
          return t !== "boolean" && t !== "string";
        }),
        Z = K(function (e) {
          return (
            (e.innerHTML =
              "<div class='hidden e'></div><div class='hidden'></div>"),
            !e.getElementsByClassName || !e.getElementsByClassName("e").length
              ? !1
              : ((e.lastChild.className = "e"),
                e.getElementsByClassName("e").length === 2)
          );
        }),
        et = K(function (e) {
          (e.id = d + 0),
            (e.innerHTML =
              "<a name='" + d + "'></a><div name='" + d + "'></div>"),
            y.insertBefore(e, y.firstChild);
          var t =
            g.getElementsByName &&
            g.getElementsByName(d).length ===
            2 + g.getElementsByName(d + 0).length;
          return (r = !g.getElementById(d)), y.removeChild(e), t;
        });
      try {
        x.call(y.childNodes, 0)[0].nodeType;
      } catch (tt) {
        x = function (e) {
          var t,
            n = [];
          for (; (t = this[e]); e++) n.push(t);
          return n;
        };
      }
      (nt.matches = function (e, t) {
        return nt(e, null, null, t);
      }),
        (nt.matchesSelector = function (e, t) {
          return nt(t, null, null, [e]).length > 0;
        }),
        (s = nt.getText =
          function (e) {
            var t,
              n = "",
              r = 0,
              i = e.nodeType;
            if (i) {
              if (i === 1 || i === 9 || i === 11) {
                if (typeof e.textContent == "string") return e.textContent;
                for (e = e.firstChild; e; e = e.nextSibling) n += s(e);
              } else if (i === 3 || i === 4) return e.nodeValue;
            } else for (; (t = e[r]); r++) n += s(t);
            return n;
          }),
        (o = nt.isXML =
          function (e) {
            var t = e && (e.ownerDocument || e).documentElement;
            return t ? t.nodeName !== "HTML" : !1;
          }),
        (u = nt.contains =
          y.contains
            ? function (e, t) {
              var n = e.nodeType === 9 ? e.documentElement : e,
                r = t && t.parentNode;
              return (
                e === r ||
                !!(r && r.nodeType === 1 && n.contains && n.contains(r))
              );
            }
            : y.compareDocumentPosition
              ? function (e, t) {
                return t && !!(e.compareDocumentPosition(t) & 16);
              }
              : function (e, t) {
                while ((t = t.parentNode)) if (t === e) return !0;
                return !1;
              }),
        (nt.attr = function (e, t) {
          var n,
            r = o(e);
          return (
            r || (t = t.toLowerCase()),
            (n = i.attrHandle[t])
              ? n(e)
              : r || Y
                ? e.getAttribute(t)
                : ((n = e.getAttributeNode(t)),
                  n
                    ? typeof e[t] == "boolean"
                      ? e[t]
                        ? t
                        : null
                      : n.specified
                        ? n.value
                        : null
                    : null)
          );
        }),
        (i = nt.selectors =
        {
          cacheLength: 50,
          createPseudo: N,
          match: J,
          attrHandle: G
            ? {}
            : {
              href: function (e) {
                return e.getAttribute("href", 2);
              },
              type: function (e) {
                return e.getAttribute("type");
              },
            },
          find: {
            ID: r
              ? function (e, t, n) {
                if (typeof t.getElementById !== p && !n) {
                  var r = t.getElementById(e);
                  return r && r.parentNode ? [r] : [];
                }
              }
              : function (e, n, r) {
                if (typeof n.getElementById !== p && !r) {
                  var i = n.getElementById(e);
                  return i
                    ? i.id === e ||
                      (typeof i.getAttributeNode !== p &&
                        i.getAttributeNode("id").value === e)
                      ? [i]
                      : t
                    : [];
                }
              },
            TAG: Q
              ? function (e, t) {
                if (typeof t.getElementsByTagName !== p)
                  return t.getElementsByTagName(e);
              }
              : function (e, t) {
                var n = t.getElementsByTagName(e);
                if (e === "*") {
                  var r,
                    i = [],
                    s = 0;
                  for (; (r = n[s]); s++) r.nodeType === 1 && i.push(r);
                  return i;
                }
                return n;
              },
            NAME:
              et &&
              function (e, t) {
                if (typeof t.getElementsByName !== p)
                  return t.getElementsByName(name);
              },
            CLASS:
              Z &&
              function (e, t, n) {
                if (typeof t.getElementsByClassName !== p && !n)
                  return t.getElementsByClassName(e);
              },
          },
          relative: {
            ">": { dir: "parentNode", first: !0 },
            " ": { dir: "parentNode" },
            "+": { dir: "previousSibling", first: !0 },
            "~": { dir: "previousSibling" },
          },
          preFilter: {
            ATTR: function (e) {
              return (
                (e[1] = e[1].replace($, "")),
                (e[3] = (e[4] || e[5] || "").replace($, "")),
                e[2] === "~=" && (e[3] = " " + e[3] + " "),
                e.slice(0, 4)
              );
            },
            CHILD: function (e) {
              return (
                (e[1] = e[1].toLowerCase()),
                e[1] === "nth"
                  ? (e[2] || nt.error(e[0]),
                    (e[3] = +(e[3]
                      ? e[4] + (e[5] || 1)
                      : 2 * (e[2] === "even" || e[2] === "odd"))),
                    (e[4] = +(e[6] + e[7] || e[2] === "odd")))
                  : e[2] && nt.error(e[0]),
                e
              );
            },
            PSEUDO: function (e) {
              var t, n;
              if (J.CHILD.test(e[0])) return null;
              if (e[3]) e[2] = e[3];
              else if ((t = e[4]))
                q.test(t) &&
                  (n = ut(t, !0)) &&
                  (n = t.indexOf(")", t.length - n) - t.length) &&
                  ((t = t.slice(0, n)), (e[0] = e[0].slice(0, n))),
                  (e[2] = t);
              return e.slice(0, 3);
            },
          },
          filter: {
            ID: r
              ? function (e) {
                return (
                  (e = e.replace($, "")),
                  function (t) {
                    return t.getAttribute("id") === e;
                  }
                );
              }
              : function (e) {
                return (
                  (e = e.replace($, "")),
                  function (t) {
                    var n =
                      typeof t.getAttributeNode !== p &&
                      t.getAttributeNode("id");
                    return n && n.value === e;
                  }
                );
              },
            TAG: function (e) {
              return e === "*"
                ? function () {
                  return !0;
                }
                : ((e = e.replace($, "").toLowerCase()),
                  function (t) {
                    return t.nodeName && t.nodeName.toLowerCase() === e;
                  });
            },
            CLASS: function (e) {
              var t = k[d][e + " "];
              return (
                t ||
                ((t = new RegExp("(^|" + O + ")" + e + "(" + O + "|$)")) &&
                  k(e, function (e) {
                    return t.test(
                      e.className ||
                      (typeof e.getAttribute !== p &&
                        e.getAttribute("class")) ||
                      ""
                    );
                  }))
              );
            },
            ATTR: function (e, t, n) {
              return function (r, i) {
                var s = nt.attr(r, e);
                return s == null
                  ? t === "!="
                  : t
                    ? ((s += ""),
                      t === "="
                        ? s === n
                        : t === "!="
                          ? s !== n
                          : t === "^="
                            ? n && s.indexOf(n) === 0
                            : t === "*="
                              ? n && s.indexOf(n) > -1
                              : t === "$="
                                ? n && s.substr(s.length - n.length) === n
                                : t === "~="
                                  ? (" " + s + " ").indexOf(n) > -1
                                  : t === "|="
                                    ? s === n || s.substr(0, n.length + 1) === n + "-"
                                    : !1)
                    : !0;
              };
            },
            CHILD: function (e, t, n, r) {
              return e === "nth"
                ? function (e) {
                  var t,
                    i,
                    s = e.parentNode;
                  if (n === 1 && r === 0) return !0;
                  if (s) {
                    i = 0;
                    for (t = s.firstChild; t; t = t.nextSibling)
                      if (t.nodeType === 1) {
                        i++;
                        if (e === t) break;
                      }
                  }
                  return (i -= r), i === n || (i % n === 0 && i / n >= 0);
                }
                : function (t) {
                  var n = t;
                  switch (e) {
                    case "only":
                    case "first":
                      while ((n = n.previousSibling))
                        if (n.nodeType === 1) return !1;
                      if (e === "first") return !0;
                      n = t;
                    case "last":
                      while ((n = n.nextSibling))
                        if (n.nodeType === 1) return !1;
                      return !0;
                  }
                };
            },
            PSEUDO: function (e, t) {
              var n,
                r =
                  i.pseudos[e] ||
                  i.setFilters[e.toLowerCase()] ||
                  nt.error("unsupported pseudo: " + e);
              return r[d]
                ? r(t)
                : r.length > 1
                  ? ((n = [e, e, "", t]),
                    i.setFilters.hasOwnProperty(e.toLowerCase())
                      ? N(function (e, n) {
                        var i,
                          s = r(e, t),
                          o = s.length;
                        while (o--)
                          (i = T.call(e, s[o])), (e[i] = !(n[i] = s[o]));
                      })
                      : function (e) {
                        return r(e, 0, n);
                      })
                  : r;
            },
          },
          pseudos: {
            not: N(function (e) {
              var t = [],
                n = [],
                r = a(e.replace(j, "$1"));
              return r[d]
                ? N(function (e, t, n, i) {
                  var s,
                    o = r(e, null, i, []),
                    u = e.length;
                  while (u--) if ((s = o[u])) e[u] = !(t[u] = s);
                })
                : function (e, i, s) {
                  return (t[0] = e), r(t, null, s, n), !n.pop();
                };
            }),
            has: N(function (e) {
              return function (t) {
                return nt(e, t).length > 0;
              };
            }),
            contains: N(function (e) {
              return function (t) {
                return (t.textContent || t.innerText || s(t)).indexOf(e) > -1;
              };
            }),
            enabled: function (e) {
              return e.disabled === !1;
            },
            disabled: function (e) {
              return e.disabled === !0;
            },
            checked: function (e) {
              var t = e.nodeName.toLowerCase();
              return (
                (t === "input" && !!e.checked) ||
                (t === "option" && !!e.selected)
              );
            },
            selected: function (e) {
              return (
                e.parentNode && e.parentNode.selectedIndex, e.selected === !0
              );
            },
            parent: function (e) {
              return !i.pseudos.empty(e);
            },
            empty: function (e) {
              var t;
              e = e.firstChild;
              while (e) {
                if (e.nodeName > "@" || (t = e.nodeType) === 3 || t === 4)
                  return !1;
                e = e.nextSibling;
              }
              return !0;
            },
            header: function (e) {
              return X.test(e.nodeName);
            },
            text: function (e) {
              var t, n;
              return (
                e.nodeName.toLowerCase() === "input" &&
                (t = e.type) === "text" &&
                ((n = e.getAttribute("type")) == null ||
                  n.toLowerCase() === t)
              );
            },
            radio: rt("radio"),
            checkbox: rt("checkbox"),
            file: rt("file"),
            password: rt("password"),
            image: rt("image"),
            submit: it("submit"),
            reset: it("reset"),
            button: function (e) {
              var t = e.nodeName.toLowerCase();
              return (t === "input" && e.type === "button") || t === "button";
            },
            input: function (e) {
              return V.test(e.nodeName);
            },
            focus: function (e) {
              var t = e.ownerDocument;
              return (
                e === t.activeElement &&
                (!t.hasFocus || t.hasFocus()) &&
                !!(e.type || e.href || ~e.tabIndex)
              );
            },
            active: function (e) {
              return e === e.ownerDocument.activeElement;
            },
            first: st(function () {
              return [0];
            }),
            last: st(function (e, t) {
              return [t - 1];
            }),
            eq: st(function (e, t, n) {
              return [n < 0 ? n + t : n];
            }),
            even: st(function (e, t) {
              for (var n = 0; n < t; n += 2) e.push(n);
              return e;
            }),
            odd: st(function (e, t) {
              for (var n = 1; n < t; n += 2) e.push(n);
              return e;
            }),
            lt: st(function (e, t, n) {
              for (var r = n < 0 ? n + t : n; --r >= 0;) e.push(r);
              return e;
            }),
            gt: st(function (e, t, n) {
              for (var r = n < 0 ? n + t : n; ++r < t;) e.push(r);
              return e;
            }),
          },
        }),
        (f = y.compareDocumentPosition
          ? function (e, t) {
            return e === t
              ? ((l = !0), 0)
              : (
                !e.compareDocumentPosition || !t.compareDocumentPosition
                  ? e.compareDocumentPosition
                  : e.compareDocumentPosition(t) & 4
              )
                ? -1
                : 1;
          }
          : function (e, t) {
            if (e === t) return (l = !0), 0;
            if (e.sourceIndex && t.sourceIndex)
              return e.sourceIndex - t.sourceIndex;
            var n,
              r,
              i = [],
              s = [],
              o = e.parentNode,
              u = t.parentNode,
              a = o;
            if (o === u) return ot(e, t);
            if (!o) return -1;
            if (!u) return 1;
            while (a) i.unshift(a), (a = a.parentNode);
            a = u;
            while (a) s.unshift(a), (a = a.parentNode);
            (n = i.length), (r = s.length);
            for (var f = 0; f < n && f < r; f++)
              if (i[f] !== s[f]) return ot(i[f], s[f]);
            return f === n ? ot(e, s[f], -1) : ot(i[f], t, 1);
          }),
        [0, 0].sort(f),
        (h = !l),
        (nt.uniqueSort = function (e) {
          var t,
            n = [],
            r = 1,
            i = 0;
          (l = h), e.sort(f);
          if (l) {
            for (; (t = e[r]); r++) t === e[r - 1] && (i = n.push(r));
            while (i--) e.splice(n[i], 1);
          }
          return e;
        }),
        (nt.error = function (e) {
          throw new Error("Syntax error, unrecognized expression: " + e);
        }),
        (a = nt.compile =
          function (e, t) {
            var n,
              r = [],
              i = [],
              s = A[d][e + " "];
            if (!s) {
              t || (t = ut(e)), (n = t.length);
              while (n--) (s = ht(t[n])), s[d] ? r.push(s) : i.push(s);
              s = A(e, pt(i, r));
            }
            return s;
          }),
        g.querySelectorAll &&
        (function () {
          var e,
            t = vt,
            n = /'|\\/g,
            r = /\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,
            i = [":focus"],
            s = [":active"],
            u =
              y.matchesSelector ||
              y.mozMatchesSelector ||
              y.webkitMatchesSelector ||
              y.oMatchesSelector ||
              y.msMatchesSelector;
          K(function (e) {
            (e.innerHTML = "<select><option selected=''></option></select>"),
              e.querySelectorAll("[selected]").length ||
              i.push(
                "\\[" +
                O +
                "*(?:checked|disabled|ismap|multiple|readonly|selected|value)"
              ),
              e.querySelectorAll(":checked").length || i.push(":checked");
          }),
            K(function (e) {
              (e.innerHTML = "<p test=''></p>"),
                e.querySelectorAll("[test^='']").length &&
                i.push("[*^$]=" + O + "*(?:\"\"|'')"),
                (e.innerHTML = "<input type='hidden'/>"),
                e.querySelectorAll(":enabled").length ||
                i.push(":enabled", ":disabled");
            }),
            (i = new RegExp(i.join("|"))),
            (vt = function (e, r, s, o, u) {
              if (!o && !u && !i.test(e)) {
                var a,
                  f,
                  l = !0,
                  c = d,
                  h = r,
                  p = r.nodeType === 9 && e;
                if (
                  r.nodeType === 1 &&
                  r.nodeName.toLowerCase() !== "object"
                ) {
                  (a = ut(e)),
                    (l = r.getAttribute("id"))
                      ? (c = l.replace(n, "\\$&"))
                      : r.setAttribute("id", c),
                    (c = "[id='" + c + "'] "),
                    (f = a.length);
                  while (f--) a[f] = c + a[f].join("");
                  (h = (z.test(e) && r.parentNode) || r), (p = a.join(","));
                }
                if (p)
                  try {
                    return S.apply(s, x.call(h.querySelectorAll(p), 0)), s;
                  } catch (v) {
                  } finally {
                    l || r.removeAttribute("id");
                  }
              }
              return t(e, r, s, o, u);
            }),
            u &&
            (K(function (t) {
              e = u.call(t, "div");
              try {
                u.call(t, "[test!='']:sizzle"), s.push("!=", H);
              } catch (n) { }
            }),
              (s = new RegExp(s.join("|"))),
              (nt.matchesSelector = function (t, n) {
                n = n.replace(r, "='$1']");
                if (!o(t) && !s.test(n) && !i.test(n))
                  try {
                    var a = u.call(t, n);
                    if (a || e || (t.document && t.document.nodeType !== 11))
                      return a;
                  } catch (f) { }
                return nt(n, null, null, [t]).length > 0;
              }));
        })(),
        (i.pseudos.nth = i.pseudos.eq),
        (i.filters = mt.prototype = i.pseudos),
        (i.setFilters = new mt()),
        (nt.attr = v.attr),
        (v.find = nt),
        (v.expr = nt.selectors),
        (v.expr[":"] = v.expr.pseudos),
        (v.unique = nt.uniqueSort),
        (v.text = nt.getText),
        (v.isXMLDoc = nt.isXML),
        (v.contains = nt.contains);
    })(e);
  var nt = /Until$/,
    rt = /^(?:parents|prev(?:Until|All))/,
    it = /^.[^:#\[\.,]*$/,
    st = v.expr.match.needsContext,
    ot = { children: !0, contents: !0, next: !0, prev: !0 };
  v.fn.extend({
    find: function (e) {
      var t,
        n,
        r,
        i,
        s,
        o,
        u = this;
      if (typeof e != "string")
        return v(e).filter(function () {
          for (t = 0, n = u.length; t < n; t++)
            if (v.contains(u[t], this)) return !0;
        });
      o = this.pushStack("", "find", e);
      for (t = 0, n = this.length; t < n; t++) {
        (r = o.length), v.find(e, this[t], o);
        if (t > 0)
          for (i = r; i < o.length; i++)
            for (s = 0; s < r; s++)
              if (o[s] === o[i]) {
                o.splice(i--, 1);
                break;
              }
      }
      return o;
    },
    has: function (e) {
      var t,
        n = v(e, this),
        r = n.length;
      return this.filter(function () {
        for (t = 0; t < r; t++) if (v.contains(this, n[t])) return !0;
      });
    },
    not: function (e) {
      return this.pushStack(ft(this, e, !1), "not", e);
    },
    filter: function (e) {
      return this.pushStack(ft(this, e, !0), "filter", e);
    },
    is: function (e) {
      return (
        !!e &&
        (typeof e == "string"
          ? st.test(e)
            ? v(e, this.context).index(this[0]) >= 0
            : v.filter(e, this).length > 0
          : this.filter(e).length > 0)
      );
    },
    closest: function (e, t) {
      var n,
        r = 0,
        i = this.length,
        s = [],
        o = st.test(e) || typeof e != "string" ? v(e, t || this.context) : 0;
      for (; r < i; r++) {
        n = this[r];
        while (n && n.ownerDocument && n !== t && n.nodeType !== 11) {
          if (o ? o.index(n) > -1 : v.find.matchesSelector(n, e)) {
            s.push(n);
            break;
          }
          n = n.parentNode;
        }
      }
      return (
        (s = s.length > 1 ? v.unique(s) : s), this.pushStack(s, "closest", e)
      );
    },
    index: function (e) {
      return e
        ? typeof e == "string"
          ? v.inArray(this[0], v(e))
          : v.inArray(e.jquery ? e[0] : e, this)
        : this[0] && this[0].parentNode
          ? this.prevAll().length
          : -1;
    },
    add: function (e, t) {
      var n =
        typeof e == "string"
          ? v(e, t)
          : v.makeArray(e && e.nodeType ? [e] : e),
        r = v.merge(this.get(), n);
      return this.pushStack(ut(n[0]) || ut(r[0]) ? r : v.unique(r));
    },
    addBack: function (e) {
      return this.add(e == null ? this.prevObject : this.prevObject.filter(e));
    },
  }),
    (v.fn.andSelf = v.fn.addBack),
    v.each(
      {
        parent: function (e) {
          var t = e.parentNode;
          return t && t.nodeType !== 11 ? t : null;
        },
        parents: function (e) {
          return v.dir(e, "parentNode");
        },
        parentsUntil: function (e, t, n) {
          return v.dir(e, "parentNode", n);
        },
        next: function (e) {
          return at(e, "nextSibling");
        },
        prev: function (e) {
          return at(e, "previousSibling");
        },
        nextAll: function (e) {
          return v.dir(e, "nextSibling");
        },
        prevAll: function (e) {
          return v.dir(e, "previousSibling");
        },
        nextUntil: function (e, t, n) {
          return v.dir(e, "nextSibling", n);
        },
        prevUntil: function (e, t, n) {
          return v.dir(e, "previousSibling", n);
        },
        siblings: function (e) {
          return v.sibling((e.parentNode || {}).firstChild, e);
        },
        children: function (e) {
          return v.sibling(e.firstChild);
        },
        contents: function (e) {
          return v.nodeName(e, "iframe")
            ? e.contentDocument || e.contentWindow.document
            : v.merge([], e.childNodes);
        },
      },
      function (e, t) {
        v.fn[e] = function (n, r) {
          var i = v.map(this, t, n);
          return (
            nt.test(e) || (r = n),
            r && typeof r == "string" && (i = v.filter(r, i)),
            (i = this.length > 1 && !ot[e] ? v.unique(i) : i),
            this.length > 1 && rt.test(e) && (i = i.reverse()),
            this.pushStack(i, e, l.call(arguments).join(","))
          );
        };
      }
    ),
    v.extend({
      filter: function (e, t, n) {
        return (
          n && (e = ":not(" + e + ")"),
          t.length === 1
            ? v.find.matchesSelector(t[0], e)
              ? [t[0]]
              : []
            : v.find.matches(e, t)
        );
      },
      dir: function (e, n, r) {
        var i = [],
          s = e[n];
        while (
          s &&
          s.nodeType !== 9 &&
          (r === t || s.nodeType !== 1 || !v(s).is(r))
        )
          s.nodeType === 1 && i.push(s), (s = s[n]);
        return i;
      },
      sibling: function (e, t) {
        var n = [];
        for (; e; e = e.nextSibling) e.nodeType === 1 && e !== t && n.push(e);
        return n;
      },
    });
  var ct =
    "abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",
    ht = / jQuery\d+="(?:null|\d+)"/g,
    pt = /^\s+/,
    dt =
      /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,
    vt = /<([\w:]+)/,
    mt = /<tbody/i,
    gt = /<|&#?\w+;/,
    yt = /<(?:script|style|link)/i,
    bt = /<(?:script|object|embed|option|style)/i,
    wt = new RegExp("<(?:" + ct + ")[\\s/>]", "i"),
    Et = /^(?:checkbox|radio)$/,
    St = /checked\s*(?:[^=]|=\s*.checked.)/i,
    xt = /\/(java|ecma)script/i,
    Tt = /^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,
    Nt = {
      option: [1, "<select multiple='multiple'>", "</select>"],
      legend: [1, "<fieldset>", "</fieldset>"],
      thead: [1, "<table>", "</table>"],
      tr: [2, "<table><tbody>", "</tbody></table>"],
      td: [3, "<table><tbody><tr>", "</tr></tbody></table>"],
      col: [2, "<table><tbody></tbody><colgroup>", "</colgroup></table>"],
      area: [1, "<map>", "</map>"],
      _default: [0, "", ""],
    },
    Ct = lt(i),
    kt = Ct.appendChild(i.createElement("div"));
  (Nt.optgroup = Nt.option),
    (Nt.tbody = Nt.tfoot = Nt.colgroup = Nt.caption = Nt.thead),
    (Nt.th = Nt.td),
    v.support.htmlSerialize || (Nt._default = [1, "X<div>", "</div>"]),
    v.fn.extend({
      text: function (e) {
        return v.access(
          this,
          function (e) {
            return e === t
              ? v.text(this)
              : this.empty().append(
                ((this[0] && this[0].ownerDocument) || i).createTextNode(e)
              );
          },
          null,
          e,
          arguments.length
        );
      },
      wrapAll: function (e) {
        if (v.isFunction(e))
          return this.each(function (t) {
            v(this).wrapAll(e.call(this, t));
          });
        if (this[0]) {
          var t = v(e, this[0].ownerDocument).eq(0).clone(!0);
          this[0].parentNode && t.insertBefore(this[0]),
            t
              .map(function () {
                var e = this;
                while (e.firstChild && e.firstChild.nodeType === 1)
                  e = e.firstChild;
                return e;
              })
              .append(this);
        }
        return this;
      },
      wrapInner: function (e) {
        return v.isFunction(e)
          ? this.each(function (t) {
            v(this).wrapInner(e.call(this, t));
          })
          : this.each(function () {
            var t = v(this),
              n = t.contents();
            n.length ? n.wrapAll(e) : t.append(e);
          });
      },
      wrap: function (e) {
        var t = v.isFunction(e);
        return this.each(function (n) {
          v(this).wrapAll(t ? e.call(this, n) : e);
        });
      },
      unwrap: function () {
        return this.parent()
          .each(function () {
            v.nodeName(this, "body") || v(this).replaceWith(this.childNodes);
          })
          .end();
      },
      append: function () {
        return this.domManip(arguments, !0, function (e) {
          (this.nodeType === 1 || this.nodeType === 11) && this.appendChild(e);
        });
      },
      prepend: function () {
        return this.domManip(arguments, !0, function (e) {
          (this.nodeType === 1 || this.nodeType === 11) &&
            this.insertBefore(e, this.firstChild);
        });
      },
      before: function () {
        if (!ut(this[0]))
          return this.domManip(arguments, !1, function (e) {
            this.parentNode.insertBefore(e, this);
          });
        if (arguments.length) {
          var e = v.clean(arguments);
          return this.pushStack(v.merge(e, this), "before", this.selector);
        }
      },
      after: function () {
        if (!ut(this[0]))
          return this.domManip(arguments, !1, function (e) {
            this.parentNode.insertBefore(e, this.nextSibling);
          });
        if (arguments.length) {
          var e = v.clean(arguments);
          return this.pushStack(v.merge(this, e), "after", this.selector);
        }
      },
      remove: function (e, t) {
        var n,
          r = 0;
        for (; (n = this[r]) != null; r++)
          if (!e || v.filter(e, [n]).length)
            !t &&
              n.nodeType === 1 &&
              (v.cleanData(n.getElementsByTagName("*")), v.cleanData([n])),
              n.parentNode && n.parentNode.removeChild(n);
        return this;
      },
      empty: function () {
        var e,
          t = 0;
        for (; (e = this[t]) != null; t++) {
          e.nodeType === 1 && v.cleanData(e.getElementsByTagName("*"));
          while (e.firstChild) e.removeChild(e.firstChild);
        }
        return this;
      },
      clone: function (e, t) {
        return (
          (e = e == null ? !1 : e),
          (t = t == null ? e : t),
          this.map(function () {
            return v.clone(this, e, t);
          })
        );
      },
      html: function (e) {
        return v.access(
          this,
          function (e) {
            var n = this[0] || {},
              r = 0,
              i = this.length;
            if (e === t)
              return n.nodeType === 1 ? n.innerHTML.replace(ht, "") : t;
            if (
              typeof e == "string" &&
              !yt.test(e) &&
              (v.support.htmlSerialize || !wt.test(e)) &&
              (v.support.leadingWhitespace || !pt.test(e)) &&
              !Nt[(vt.exec(e) || ["", ""])[1].toLowerCase()]
            ) {
              e = e.replace(dt, "<$1></$2>");
              try {
                for (; r < i; r++)
                  (n = this[r] || {}),
                    n.nodeType === 1 &&
                    (v.cleanData(n.getElementsByTagName("*")),
                      (n.innerHTML = e));
                n = 0;
              } catch (s) { }
            }
            n && this.empty().append(e);
          },
          null,
          e,
          arguments.length
        );
      },
      replaceWith: function (e) {
        return ut(this[0])
          ? this.length
            ? this.pushStack(v(v.isFunction(e) ? e() : e), "replaceWith", e)
            : this
          : v.isFunction(e)
            ? this.each(function (t) {
              var n = v(this),
                r = n.html();
              n.replaceWith(e.call(this, t, r));
            })
            : (typeof e != "string" && (e = v(e).detach()),
              this.each(function () {
                var t = this.nextSibling,
                  n = this.parentNode;
                v(this).remove(), t ? v(t).before(e) : v(n).append(e);
              }));
      },
      detach: function (e) {
        return this.remove(e, !0);
      },
      domManip: function (e, n, r) {
        e = [].concat.apply([], e);
        var i,
          s,
          o,
          u,
          a = 0,
          f = e[0],
          l = [],
          c = this.length;
        if (
          !v.support.checkClone &&
          c > 1 &&
          typeof f == "string" &&
          St.test(f)
        )
          return this.each(function () {
            v(this).domManip(e, n, r);
          });
        if (v.isFunction(f))
          return this.each(function (i) {
            var s = v(this);
            (e[0] = f.call(this, i, n ? s.html() : t)), s.domManip(e, n, r);
          });
        if (this[0]) {
          (i = v.buildFragment(e, this, l)),
            (o = i.fragment),
            (s = o.firstChild),
            o.childNodes.length === 1 && (o = s);
          if (s) {
            n = n && v.nodeName(s, "tr");
            for (u = i.cacheable || c - 1; a < c; a++)
              r.call(
                n && v.nodeName(this[a], "table")
                  ? Lt(this[a], "tbody")
                  : this[a],
                a === u ? o : v.clone(o, !0, !0)
              );
          }
          (o = s = null),
            l.length &&
            v.each(l, function (e, t) {
              t.src
                ? v.ajax
                  ? v.ajax({
                    url: t.src,
                    type: "GET",
                    dataType: "script",
                    async: !1,
                    global: !1,
                    throws: !0,
                  })
                  : v.error("no ajax")
                : v.globalEval(
                  (t.text || t.textContent || t.innerHTML || "").replace(
                    Tt,
                    ""
                  )
                ),
                t.parentNode && t.parentNode.removeChild(t);
            });
        }
        return this;
      },
    }),
    (v.buildFragment = function (e, n, r) {
      var s,
        o,
        u,
        a = e[0];
      return (
        (n = n || i),
        (n = (!n.nodeType && n[0]) || n),
        (n = n.ownerDocument || n),
        e.length === 1 &&
        typeof a == "string" &&
        a.length < 512 &&
        n === i &&
        a.charAt(0) === "<" &&
        !bt.test(a) &&
        (v.support.checkClone || !St.test(a)) &&
        (v.support.html5Clone || !wt.test(a)) &&
        ((o = !0), (s = v.fragments[a]), (u = s !== t)),
        s ||
        ((s = n.createDocumentFragment()),
          v.clean(e, n, s, r),
          o && (v.fragments[a] = u && s)),
        { fragment: s, cacheable: o }
      );
    }),
    (v.fragments = {}),
    v.each(
      {
        appendTo: "append",
        prependTo: "prepend",
        insertBefore: "before",
        insertAfter: "after",
        replaceAll: "replaceWith",
      },
      function (e, t) {
        v.fn[e] = function (n) {
          var r,
            i = 0,
            s = [],
            o = v(n),
            u = o.length,
            a = this.length === 1 && this[0].parentNode;
          if (
            (a == null ||
              (a && a.nodeType === 11 && a.childNodes.length === 1)) &&
            u === 1
          )
            return o[t](this[0]), this;
          for (; i < u; i++)
            (r = (i > 0 ? this.clone(!0) : this).get()),
              v(o[i])[t](r),
              (s = s.concat(r));
          return this.pushStack(s, e, o.selector);
        };
      }
    ),
    v.extend({
      clone: function (e, t, n) {
        var r, i, s, o;
        v.support.html5Clone ||
          v.isXMLDoc(e) ||
          !wt.test("<" + e.nodeName + ">")
          ? (o = e.cloneNode(!0))
          : ((kt.innerHTML = e.outerHTML), kt.removeChild((o = kt.firstChild)));
        if (
          (!v.support.noCloneEvent || !v.support.noCloneChecked) &&
          (e.nodeType === 1 || e.nodeType === 11) &&
          !v.isXMLDoc(e)
        ) {
          Ot(e, o), (r = Mt(e)), (i = Mt(o));
          for (s = 0; r[s]; ++s) i[s] && Ot(r[s], i[s]);
        }
        if (t) {
          At(e, o);
          if (n) {
            (r = Mt(e)), (i = Mt(o));
            for (s = 0; r[s]; ++s) At(r[s], i[s]);
          }
        }
        return (r = i = null), o;
      },
      clean: function (e, t, n, r) {
        var s,
          o,
          u,
          a,
          f,
          l,
          c,
          h,
          p,
          d,
          m,
          g,
          y = t === i && Ct,
          b = [];
        if (!t || typeof t.createDocumentFragment == "undefined") t = i;
        for (s = 0; (u = e[s]) != null; s++) {
          typeof u == "number" && (u += "");
          if (!u) continue;
          if (typeof u == "string")
            if (!gt.test(u)) u = t.createTextNode(u);
            else {
              (y = y || lt(t)),
                (c = t.createElement("div")),
                y.appendChild(c),
                (u = u.replace(dt, "<$1></$2>")),
                (a = (vt.exec(u) || ["", ""])[1].toLowerCase()),
                (f = Nt[a] || Nt._default),
                (l = f[0]),
                (c.innerHTML = f[1] + u + f[2]);
              while (l--) c = c.lastChild;
              if (!v.support.tbody) {
                (h = mt.test(u)),
                  (p =
                    a === "table" && !h
                      ? c.firstChild && c.firstChild.childNodes
                      : f[1] === "<table>" && !h
                        ? c.childNodes
                        : []);
                for (o = p.length - 1; o >= 0; --o)
                  v.nodeName(p[o], "tbody") &&
                    !p[o].childNodes.length &&
                    p[o].parentNode.removeChild(p[o]);
              }
              !v.support.leadingWhitespace &&
                pt.test(u) &&
                c.insertBefore(t.createTextNode(pt.exec(u)[0]), c.firstChild),
                (u = c.childNodes),
                c.parentNode.removeChild(c);
            }
          u.nodeType ? b.push(u) : v.merge(b, u);
        }
        c && (u = c = y = null);
        if (!v.support.appendChecked)
          for (s = 0; (u = b[s]) != null; s++)
            v.nodeName(u, "input")
              ? _t(u)
              : typeof u.getElementsByTagName != "undefined" &&
              v.grep(u.getElementsByTagName("input"), _t);
        if (n) {
          m = function (e) {
            if (!e.type || xt.test(e.type))
              return r
                ? r.push(e.parentNode ? e.parentNode.removeChild(e) : e)
                : n.appendChild(e);
          };
          for (s = 0; (u = b[s]) != null; s++)
            if (!v.nodeName(u, "script") || !m(u))
              n.appendChild(u),
                typeof u.getElementsByTagName != "undefined" &&
                ((g = v.grep(
                  v.merge([], u.getElementsByTagName("script")),
                  m
                )),
                  b.splice.apply(b, [s + 1, 0].concat(g)),
                  (s += g.length));
        }
        return b;
      },
      cleanData: function (e, t) {
        var n,
          r,
          i,
          s,
          o = 0,
          u = v.expando,
          a = v.cache,
          f = v.support.deleteExpando,
          l = v.event.special;
        for (; (i = e[o]) != null; o++)
          if (t || v.acceptData(i)) {
            (r = i[u]), (n = r && a[r]);
            if (n) {
              if (n.events)
                for (s in n.events)
                  l[s] ? v.event.remove(i, s) : v.removeEvent(i, s, n.handle);
              a[r] &&
                (delete a[r],
                  f
                    ? delete i[u]
                    : i.removeAttribute
                      ? i.removeAttribute(u)
                      : (i[u] = null),
                  v.deletedIds.push(r));
            }
          }
      },
    }),
    (function () {
      var e, t;
      (v.uaMatch = function (e) {
        e = e.toLowerCase();
        var t =
          /(chrome)[ \/]([\w.]+)/.exec(e) ||
          /(webkit)[ \/]([\w.]+)/.exec(e) ||
          /(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e) ||
          /(msie) ([\w.]+)/.exec(e) ||
          (e.indexOf("compatible") < 0 &&
            /(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)) ||
          [];
        return { browser: t[1] || "", version: t[2] || "0" };
      }),
        (e = v.uaMatch(o.userAgent)),
        (t = {}),
        e.browser && ((t[e.browser] = !0), (t.version = e.version)),
        t.chrome ? (t.webkit = !0) : t.webkit && (t.safari = !0),
        (v.browser = t),
        (v.sub = function () {
          function e(t, n) {
            return new e.fn.init(t, n);
          }
          v.extend(!0, e, this),
            (e.superclass = this),
            (e.fn = e.prototype = this()),
            (e.fn.constructor = e),
            (e.sub = this.sub),
            (e.fn.init = function (r, i) {
              return (
                i && i instanceof v && !(i instanceof e) && (i = e(i)),
                v.fn.init.call(this, r, i, t)
              );
            }),
            (e.fn.init.prototype = e.fn);
          var t = e(i);
          return e;
        });
    })();
  var Dt,
    Pt,
    Ht,
    Bt = /alpha\([^)]*\)/i,
    jt = /opacity=([^)]*)/,
    Ft = /^(top|right|bottom|left)$/,
    It = /^(none|table(?!-c[ea]).+)/,
    qt = /^margin/,
    Rt = new RegExp("^(" + m + ")(.*)$", "i"),
    Ut = new RegExp("^(" + m + ")(?!px)[a-z%]+$", "i"),
    zt = new RegExp("^([-+])=(" + m + ")", "i"),
    Wt = { BODY: "block" },
    Xt = { position: "absolute", visibility: "hidden", display: "block" },
    Vt = { letterSpacing: 0, fontWeight: 400 },
    $t = ["Top", "Right", "Bottom", "Left"],
    Jt = ["Webkit", "O", "Moz", "ms"],
    Kt = v.fn.toggle;
  v.fn.extend({
    css: function (e, n) {
      return v.access(
        this,
        function (e, n, r) {
          return r !== t ? v.style(e, n, r) : v.css(e, n);
        },
        e,
        n,
        arguments.length > 1
      );
    },
    show: function () {
      return Yt(this, !0);
    },
    hide: function () {
      return Yt(this);
    },
    toggle: function (e, t) {
      var n = typeof e == "boolean";
      return v.isFunction(e) && v.isFunction(t)
        ? Kt.apply(this, arguments)
        : this.each(function () {
          (n ? e : Gt(this)) ? v(this).show() : v(this).hide();
        });
    },
  }),
    v.extend({
      cssHooks: {
        opacity: {
          get: function (e, t) {
            if (t) {
              var n = Dt(e, "opacity");
              return n === "" ? "1" : n;
            }
          },
        },
      },
      cssNumber: {
        fillOpacity: !0,
        fontWeight: !0,
        lineHeight: !0,
        opacity: !0,
        orphans: !0,
        widows: !0,
        zIndex: !0,
        zoom: !0,
      },
      cssProps: { float: v.support.cssFloat ? "cssFloat" : "styleFloat" },
      style: function (e, n, r, i) {
        if (!e || e.nodeType === 3 || e.nodeType === 8 || !e.style) return;
        var s,
          o,
          u,
          a = v.camelCase(n),
          f = e.style;
        (n = v.cssProps[a] || (v.cssProps[a] = Qt(f, a))),
          (u = v.cssHooks[n] || v.cssHooks[a]);
        if (r === t)
          return u && "get" in u && (s = u.get(e, !1, i)) !== t ? s : f[n];
        (o = typeof r),
          o === "string" &&
          (s = zt.exec(r)) &&
          ((r = (s[1] + 1) * s[2] + parseFloat(v.css(e, n))), (o = "number"));
        if (r == null || (o === "number" && isNaN(r))) return;
        o === "number" && !v.cssNumber[a] && (r += "px");
        if (!u || !("set" in u) || (r = u.set(e, r, i)) !== t)
          try {
            f[n] = r;
          } catch (l) { }
      },
      css: function (e, n, r, i) {
        var s,
          o,
          u,
          a = v.camelCase(n);
        return (
          (n = v.cssProps[a] || (v.cssProps[a] = Qt(e.style, a))),
          (u = v.cssHooks[n] || v.cssHooks[a]),
          u && "get" in u && (s = u.get(e, !0, i)),
          s === t && (s = Dt(e, n)),
          s === "normal" && n in Vt && (s = Vt[n]),
          r || i !== t
            ? ((o = parseFloat(s)), r || v.isNumeric(o) ? o || 0 : s)
            : s
        );
      },
      swap: function (e, t, n) {
        var r,
          i,
          s = {};
        for (i in t) (s[i] = e.style[i]), (e.style[i] = t[i]);
        r = n.call(e);
        for (i in t) e.style[i] = s[i];
        return r;
      },
    }),
    e.getComputedStyle
      ? (Dt = function (t, n) {
        var r,
          i,
          s,
          o,
          u = e.getComputedStyle(t, null),
          a = t.style;
        return (
          u &&
          ((r = u.getPropertyValue(n) || u[n]),
            r === "" &&
            !v.contains(t.ownerDocument, t) &&
            (r = v.style(t, n)),
            Ut.test(r) &&
            qt.test(n) &&
            ((i = a.width),
              (s = a.minWidth),
              (o = a.maxWidth),
              (a.minWidth = a.maxWidth = a.width = r),
              (r = u.width),
              (a.width = i),
              (a.minWidth = s),
              (a.maxWidth = o))),
          r
        );
      })
      : i.documentElement.currentStyle &&
      (Dt = function (e, t) {
        var n,
          r,
          i = e.currentStyle && e.currentStyle[t],
          s = e.style;
        return (
          i == null && s && s[t] && (i = s[t]),
          Ut.test(i) &&
          !Ft.test(t) &&
          ((n = s.left),
            (r = e.runtimeStyle && e.runtimeStyle.left),
            r && (e.runtimeStyle.left = e.currentStyle.left),
            (s.left = t === "fontSize" ? "1em" : i),
            (i = s.pixelLeft + "px"),
            (s.left = n),
            r && (e.runtimeStyle.left = r)),
          i === "" ? "auto" : i
        );
      }),
    v.each(["height", "width"], function (e, t) {
      v.cssHooks[t] = {
        get: function (e, n, r) {
          if (n)
            return e.offsetWidth === 0 && It.test(Dt(e, "display"))
              ? v.swap(e, Xt, function () {
                return tn(e, t, r);
              })
              : tn(e, t, r);
        },
        set: function (e, n, r) {
          return Zt(
            e,
            n,
            r
              ? en(
                e,
                t,
                r,
                v.support.boxSizing && v.css(e, "boxSizing") === "border-box"
              )
              : 0
          );
        },
      };
    }),
    v.support.opacity ||
    (v.cssHooks.opacity = {
      get: function (e, t) {
        return jt.test(
          (t && e.currentStyle ? e.currentStyle.filter : e.style.filter) || ""
        )
          ? 0.01 * parseFloat(RegExp.$1) + ""
          : t
            ? "1"
            : "";
      },
      set: function (e, t) {
        var n = e.style,
          r = e.currentStyle,
          i = v.isNumeric(t) ? "alpha(opacity=" + t * 100 + ")" : "",
          s = (r && r.filter) || n.filter || "";
        n.zoom = 1;
        if (t >= 1 && v.trim(s.replace(Bt, "")) === "" && n.removeAttribute) {
          n.removeAttribute("filter");
          if (r && !r.filter) return;
        }
        n.filter = Bt.test(s) ? s.replace(Bt, i) : s + " " + i;
      },
    }),
    v(function () {
      v.support.reliableMarginRight ||
        (v.cssHooks.marginRight = {
          get: function (e, t) {
            return v.swap(e, { display: "inline-block" }, function () {
              if (t) return Dt(e, "marginRight");
            });
          },
        }),
        !v.support.pixelPosition &&
        v.fn.position &&
        v.each(["top", "left"], function (e, t) {
          v.cssHooks[t] = {
            get: function (e, n) {
              if (n) {
                var r = Dt(e, t);
                return Ut.test(r) ? v(e).position()[t] + "px" : r;
              }
            },
          };
        });
    }),
    v.expr &&
    v.expr.filters &&
    ((v.expr.filters.hidden = function (e) {
      return (
        (e.offsetWidth === 0 && e.offsetHeight === 0) ||
        (!v.support.reliableHiddenOffsets &&
          ((e.style && e.style.display) || Dt(e, "display")) === "none")
      );
    }),
      (v.expr.filters.visible = function (e) {
        return !v.expr.filters.hidden(e);
      })),
    v.each({ margin: "", padding: "", border: "Width" }, function (e, t) {
      (v.cssHooks[e + t] = {
        expand: function (n) {
          var r,
            i = typeof n == "string" ? n.split(" ") : [n],
            s = {};
          for (r = 0; r < 4; r++) s[e + $t[r] + t] = i[r] || i[r - 2] || i[0];
          return s;
        },
      }),
        qt.test(e) || (v.cssHooks[e + t].set = Zt);
    });
  var rn = /%20/g,
    sn = /\[\]$/,
    on = /\r?\n/g,
    un =
      /^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,
    an = /^(?:select|textarea)/i;
  v.fn.extend({
    serialize: function () {
      return v.param(this.serializeArray());
    },
    serializeArray: function () {
      return this.map(function () {
        return this.elements ? v.makeArray(this.elements) : this;
      })
        .filter(function () {
          return (
            this.name &&
            !this.disabled &&
            (this.checked || an.test(this.nodeName) || un.test(this.type))
          );
        })
        .map(function (e, t) {
          var n = v(this).val();
          return n == null
            ? null
            : v.isArray(n)
              ? v.map(n, function (e, n) {
                return { name: t.name, value: e.replace(on, "\r\n") };
              })
              : { name: t.name, value: n.replace(on, "\r\n") };
        })
        .get();
    },
  }),
    (v.param = function (e, n) {
      var r,
        i = [],
        s = function (e, t) {
          (t = v.isFunction(t) ? t() : t == null ? "" : t),
            (i[i.length] = encodeURIComponent(e) + "=" + encodeURIComponent(t));
        };
      n === t && (n = v.ajaxSettings && v.ajaxSettings.traditional);
      if (v.isArray(e) || (e.jquery && !v.isPlainObject(e)))
        v.each(e, function () {
          s(this.name, this.value);
        });
      else for (r in e) fn(r, e[r], n, s);
      return i.join("&").replace(rn, "+");
    });
  var ln,
    cn,
    hn = /#.*$/,
    pn = /^(.*?):[ \t]*([^\r\n]*)\r?$/gm,
    dn = /^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,
    vn = /^(?:GET|HEAD)$/,
    mn = /^\/\//,
    gn = /\?/,
    yn = /<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,
    bn = /([?&])_=[^&]*/,
    wn = /^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,
    En = v.fn.load,
    Sn = {},
    xn = {},
    Tn = ["*/"] + ["*"];
  try {
    cn = s.href;
  } catch (Nn) {
    (cn = i.createElement("a")), (cn.href = ""), (cn = cn.href);
  }
  (ln = wn.exec(cn.toLowerCase()) || []),
    (v.fn.load = function (e, n, r) {
      if (typeof e != "string" && En) return En.apply(this, arguments);
      if (!this.length) return this;
      var i,
        s,
        o,
        u = this,
        a = e.indexOf(" ");
      return (
        a >= 0 && ((i = e.slice(a, e.length)), (e = e.slice(0, a))),
        v.isFunction(n)
          ? ((r = n), (n = t))
          : n && typeof n == "object" && (s = "POST"),
        v
          .ajax({
            url: e,
            type: s,
            dataType: "html",
            data: n,
            complete: function (e, t) {
              r && u.each(r, o || [e.responseText, t, e]);
            },
          })
          .done(function (e) {
            (o = arguments),
              u.html(i ? v("<div>").append(e.replace(yn, "")).find(i) : e);
          }),
        this
      );
    }),
    v.each(
      "ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(
        " "
      ),
      function (e, t) {
        v.fn[t] = function (e) {
          return this.on(t, e);
        };
      }
    ),
    v.each(["get", "post"], function (e, n) {
      v[n] = function (e, r, i, s) {
        return (
          v.isFunction(r) && ((s = s || i), (i = r), (r = t)),
          v.ajax({ type: n, url: e, data: r, success: i, dataType: s })
        );
      };
    }),
    v.extend({
      getScript: function (e, n) {
        return v.get(e, t, n, "script");
      },
      getJSON: function (e, t, n) {
        return v.get(e, t, n, "json");
      },
      ajaxSetup: function (e, t) {
        return (
          t ? Ln(e, v.ajaxSettings) : ((t = e), (e = v.ajaxSettings)),
          Ln(e, t),
          e
        );
      },
      ajaxSettings: {
        url: cn,
        isLocal: dn.test(ln[1]),
        global: !0,
        type: "GET",
        contentType: "application/x-www-form-urlencoded; charset=UTF-8",
        processData: !0,
        async: !0,
        accepts: {
          xml: "application/xml, text/xml",
          html: "text/html",
          text: "text/plain",
          json: "application/json, text/javascript",
          "*": Tn,
        },
        contents: { xml: /xml/, html: /html/, json: /json/ },
        responseFields: { xml: "responseXML", text: "responseText" },
        converters: {
          "* text": e.String,
          "text html": !0,
          "text json": v.parseJSON,
          "text xml": v.parseXML,
        },
        flatOptions: { context: !0, url: !0 },
      },
      ajaxPrefilter: Cn(Sn),
      ajaxTransport: Cn(xn),
      ajax: function (e, n) {
        function T(e, n, s, a) {
          var l,
            y,
            b,
            w,
            S,
            T = n;
          if (E === 2) return;
          (E = 2),
            u && clearTimeout(u),
            (o = t),
            (i = a || ""),
            (x.readyState = e > 0 ? 4 : 0),
            s && (w = An(c, x, s));
          if ((e >= 200 && e < 300) || e === 304)
            c.ifModified &&
              ((S = x.getResponseHeader("Last-Modified")),
                S && (v.lastModified[r] = S),
                (S = x.getResponseHeader("Etag")),
                S && (v.etag[r] = S)),
              e === 304
                ? ((T = "notmodified"), (l = !0))
                : ((l = On(c, w)),
                  (T = l.state),
                  (y = l.data),
                  (b = l.error),
                  (l = !b));
          else {
            b = T;
            if (!T || e) (T = "error"), e < 0 && (e = 0);
          }
          (x.status = e),
            (x.statusText = (n || T) + ""),
            l ? d.resolveWith(h, [y, T, x]) : d.rejectWith(h, [x, T, b]),
            x.statusCode(g),
            (g = t),
            f &&
            p.trigger("ajax" + (l ? "Success" : "Error"), [x, c, l ? y : b]),
            m.fireWith(h, [x, T]),
            f &&
            (p.trigger("ajaxComplete", [x, c]),
              --v.active || v.event.trigger("ajaxStop"));
        }
        typeof e == "object" && ((n = e), (e = t)), (n = n || {});
        var r,
          i,
          s,
          o,
          u,
          a,
          f,
          l,
          c = v.ajaxSetup({}, n),
          h = c.context || c,
          p = h !== c && (h.nodeType || h instanceof v) ? v(h) : v.event,
          d = v.Deferred(),
          m = v.Callbacks("once memory"),
          g = c.statusCode || {},
          b = {},
          w = {},
          E = 0,
          S = "canceled",
          x = {
            readyState: 0,
            setRequestHeader: function (e, t) {
              if (!E) {
                var n = e.toLowerCase();
                (e = w[n] = w[n] || e), (b[e] = t);
              }
              return this;
            },
            getAllResponseHeaders: function () {
              return E === 2 ? i : null;
            },
            getResponseHeader: function (e) {
              var n;
              if (E === 2) {
                if (!s) {
                  s = {};
                  while ((n = pn.exec(i))) s[n[1].toLowerCase()] = n[2];
                }
                n = s[e.toLowerCase()];
              }
              return n === t ? null : n;
            },
            overrideMimeType: function (e) {
              return E || (c.mimeType = e), this;
            },
            abort: function (e) {
              return (e = e || S), o && o.abort(e), T(0, e), this;
            },
          };
        d.promise(x),
          (x.success = x.done),
          (x.error = x.fail),
          (x.complete = m.add),
          (x.statusCode = function (e) {
            if (e) {
              var t;
              if (E < 2) for (t in e) g[t] = [g[t], e[t]];
              else (t = e[x.status]), x.always(t);
            }
            return this;
          }),
          (c.url = ((e || c.url) + "")
            .replace(hn, "")
            .replace(mn, ln[1] + "//")),
          (c.dataTypes = v
            .trim(c.dataType || "*")
            .toLowerCase()
            .split(y)),
          c.crossDomain == null &&
          ((a = wn.exec(c.url.toLowerCase())),
            (c.crossDomain = !(
              !a ||
              (a[1] === ln[1] &&
                a[2] === ln[2] &&
                (a[3] || (a[1] === "http:" ? 80 : 443)) ==
                (ln[3] || (ln[1] === "http:" ? 80 : 443)))
            ))),
          c.data &&
          c.processData &&
          typeof c.data != "string" &&
          (c.data = v.param(c.data, c.traditional)),
          kn(Sn, c, n, x);
        if (E === 2) return x;
        (f = c.global),
          (c.type = c.type.toUpperCase()),
          (c.hasContent = !vn.test(c.type)),
          f && v.active++ === 0 && v.event.trigger("ajaxStart");
        if (!c.hasContent) {
          c.data &&
            ((c.url += (gn.test(c.url) ? "&" : "?") + c.data), delete c.data),
            (r = c.url);
          if (c.cache === !1) {
            var N = v.now(),
              C = c.url.replace(bn, "$1_=" + N);
            c.url =
              C + (C === c.url ? (gn.test(c.url) ? "&" : "?") + "_=" + N : "");
          }
        }
        ((c.data && c.hasContent && c.contentType !== !1) || n.contentType) &&
          x.setRequestHeader("Content-Type", c.contentType),
          c.ifModified &&
          ((r = r || c.url),
            v.lastModified[r] &&
            x.setRequestHeader("If-Modified-Since", v.lastModified[r]),
            v.etag[r] && x.setRequestHeader("If-None-Match", v.etag[r])),
          x.setRequestHeader(
            "Accept",
            c.dataTypes[0] && c.accepts[c.dataTypes[0]]
              ? c.accepts[c.dataTypes[0]] +
              (c.dataTypes[0] !== "*" ? ", " + Tn + "; q=0.01" : "")
              : c.accepts["*"]
          );
        for (l in c.headers) x.setRequestHeader(l, c.headers[l]);
        if (!c.beforeSend || (c.beforeSend.call(h, x, c) !== !1 && E !== 2)) {
          S = "abort";
          for (l in { success: 1, error: 1, complete: 1 }) x[l](c[l]);
          o = kn(xn, c, n, x);
          if (!o) T(-1, "No Transport");
          else {
            (x.readyState = 1),
              f && p.trigger("ajaxSend", [x, c]),
              c.async &&
              c.timeout > 0 &&
              (u = setTimeout(function () {
                x.abort("timeout");
              }, c.timeout));
            try {
              (E = 1), o.send(b, T);
            } catch (k) {
              if (!(E < 2)) throw k;
              T(-1, k);
            }
          }
          return x;
        }
        return x.abort();
      },
      active: 0,
      lastModified: {},
      etag: {},
    });
  var Mn = [],
    _n = /\?/,
    Dn = /(=)\?(?=&|$)|\?\?/,
    Pn = v.now();
  v.ajaxSetup({
    jsonp: "callback",
    jsonpCallback: function () {
      var e = Mn.pop() || v.expando + "_" + Pn++;
      return (this[e] = !0), e;
    },
  }),
    v.ajaxPrefilter("json jsonp", function (n, r, i) {
      var s,
        o,
        u,
        a = n.data,
        f = n.url,
        l = n.jsonp !== !1,
        c = l && Dn.test(f),
        h =
          l &&
          !c &&
          typeof a == "string" &&
          !(n.contentType || "").indexOf("application/x-www-form-urlencoded") &&
          Dn.test(a);
      if (n.dataTypes[0] === "jsonp" || c || h)
        return (
          (s = n.jsonpCallback =
            v.isFunction(n.jsonpCallback)
              ? n.jsonpCallback()
              : n.jsonpCallback),
          (o = e[s]),
          c
            ? (n.url = f.replace(Dn, "$1" + s))
            : h
              ? (n.data = a.replace(Dn, "$1" + s))
              : l && (n.url += (_n.test(f) ? "&" : "?") + n.jsonp + "=" + s),
          (n.converters["script json"] = function () {
            return u || v.error(s + " was not called"), u[0];
          }),
          (n.dataTypes[0] = "json"),
          (e[s] = function () {
            u = arguments;
          }),
          i.always(function () {
            (e[s] = o),
              n[s] && ((n.jsonpCallback = r.jsonpCallback), Mn.push(s)),
              u && v.isFunction(o) && o(u[0]),
              (u = o = t);
          }),
          "script"
        );
    }),
    v.ajaxSetup({
      accepts: {
        script:
          "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript",
      },
      contents: { script: /javascript|ecmascript/ },
      converters: {
        "text script": function (e) {
          return v.globalEval(e), e;
        },
      },
    }),
    v.ajaxPrefilter("script", function (e) {
      e.cache === t && (e.cache = !1),
        e.crossDomain && ((e.type = "GET"), (e.global = !1));
    }),
    v.ajaxTransport("script", function (e) {
      if (e.crossDomain) {
        var n,
          r = i.head || i.getElementsByTagName("head")[0] || i.documentElement;
        return {
          send: function (s, o) {
            (n = i.createElement("script")),
              (n.async = "async"),
              e.scriptCharset && (n.charset = e.scriptCharset),
              (n.src = e.url),
              (n.onload = n.onreadystatechange =
                function (e, i) {
                  if (
                    i ||
                    !n.readyState ||
                    /loaded|complete/.test(n.readyState)
                  )
                    (n.onload = n.onreadystatechange = null),
                      r && n.parentNode && r.removeChild(n),
                      (n = t),
                      i || o(200, "success");
                }),
              r.insertBefore(n, r.firstChild);
          },
          abort: function () {
            n && n.onload(0, 1);
          },
        };
      }
    });
  var Hn,
    Bn = e.ActiveXObject
      ? function () {
        for (var e in Hn) Hn[e](0, 1);
      }
      : !1,
    jn = 0;
  (v.ajaxSettings.xhr = e.ActiveXObject
    ? function () {
      return (!this.isLocal && Fn()) || In();
    }
    : Fn),
    (function (e) {
      v.extend(v.support, { ajax: !!e, cors: !!e && "withCredentials" in e });
    })(v.ajaxSettings.xhr()),
    v.support.ajax &&
    v.ajaxTransport(function (n) {
      if (!n.crossDomain || v.support.cors) {
        var r;
        return {
          send: function (i, s) {
            var o,
              u,
              a = n.xhr();
            n.username
              ? a.open(n.type, n.url, n.async, n.username, n.password)
              : a.open(n.type, n.url, n.async);
            if (n.xhrFields) for (u in n.xhrFields) a[u] = n.xhrFields[u];
            n.mimeType &&
              a.overrideMimeType &&
              a.overrideMimeType(n.mimeType),
              !n.crossDomain &&
              !i["X-Requested-With"] &&
              (i["X-Requested-With"] = "XMLHttpRequest");
            try {
              for (u in i) a.setRequestHeader(u, i[u]);
            } catch (f) { }
            a.send((n.hasContent && n.data) || null),
              (r = function (e, i) {
                var u, f, l, c, h;
                try {
                  if (r && (i || a.readyState === 4)) {
                    (r = t),
                      o &&
                      ((a.onreadystatechange = v.noop), Bn && delete Hn[o]);
                    if (i) a.readyState !== 4 && a.abort();
                    else {
                      (u = a.status),
                        (l = a.getAllResponseHeaders()),
                        (c = {}),
                        (h = a.responseXML),
                        h && h.documentElement && (c.xml = h);
                      try {
                        c.text = a.responseText;
                      } catch (p) { }
                      try {
                        f = a.statusText;
                      } catch (p) {
                        f = "";
                      }
                      !u && n.isLocal && !n.crossDomain
                        ? (u = c.text ? 200 : 404)
                        : u === 1223 && (u = 204);
                    }
                  }
                } catch (d) {
                  i || s(-1, d);
                }
                c && s(u, f, c, l);
              }),
              n.async
                ? a.readyState === 4
                  ? setTimeout(r, 0)
                  : ((o = ++jn),
                    Bn && (Hn || ((Hn = {}), v(e).unload(Bn)), (Hn[o] = r)),
                    (a.onreadystatechange = r))
                : r();
          },
          abort: function () {
            r && r(0, 1);
          },
        };
      }
    });
  var qn,
    Rn,
    Un = /^(?:toggle|show|hide)$/,
    zn = new RegExp("^(?:([-+])=|)(" + m + ")([a-z%]*)$", "i"),
    Wn = /queueHooks$/,
    Xn = [Gn],
    Vn = {
      "*": [
        function (e, t) {
          var n,
            r,
            i = this.createTween(e, t),
            s = zn.exec(t),
            o = i.cur(),
            u = +o || 0,
            a = 1,
            f = 20;
          if (s) {
            (n = +s[2]), (r = s[3] || (v.cssNumber[e] ? "" : "px"));
            if (r !== "px" && u) {
              u = v.css(i.elem, e, !0) || n || 1;
              do (a = a || ".5"), (u /= a), v.style(i.elem, e, u + r);
              while (a !== (a = i.cur() / o) && a !== 1 && --f);
            }
            (i.unit = r),
              (i.start = u),
              (i.end = s[1] ? u + (s[1] + 1) * n : n);
          }
          return i;
        },
      ],
    };
  (v.Animation = v.extend(Kn, {
    tweener: function (e, t) {
      v.isFunction(e) ? ((t = e), (e = ["*"])) : (e = e.split(" "));
      var n,
        r = 0,
        i = e.length;
      for (; r < i; r++) (n = e[r]), (Vn[n] = Vn[n] || []), Vn[n].unshift(t);
    },
    prefilter: function (e, t) {
      t ? Xn.unshift(e) : Xn.push(e);
    },
  })),
    (v.Tween = Yn),
    (Yn.prototype = {
      constructor: Yn,
      init: function (e, t, n, r, i, s) {
        (this.elem = e),
          (this.prop = n),
          (this.easing = i || "swing"),
          (this.options = t),
          (this.start = this.now = this.cur()),
          (this.end = r),
          (this.unit = s || (v.cssNumber[n] ? "" : "px"));
      },
      cur: function () {
        var e = Yn.propHooks[this.prop];
        return e && e.get ? e.get(this) : Yn.propHooks._default.get(this);
      },
      run: function (e) {
        var t,
          n = Yn.propHooks[this.prop];
        return (
          this.options.duration
            ? (this.pos = t =
              v.easing[this.easing](
                e,
                this.options.duration * e,
                0,
                1,
                this.options.duration
              ))
            : (this.pos = t = e),
          (this.now = (this.end - this.start) * t + this.start),
          this.options.step &&
          this.options.step.call(this.elem, this.now, this),
          n && n.set ? n.set(this) : Yn.propHooks._default.set(this),
          this
        );
      },
    }),
    (Yn.prototype.init.prototype = Yn.prototype),
    (Yn.propHooks = {
      _default: {
        get: function (e) {
          var t;
          return e.elem[e.prop] == null ||
            (!!e.elem.style && e.elem.style[e.prop] != null)
            ? ((t = v.css(e.elem, e.prop, !1, "")), !t || t === "auto" ? 0 : t)
            : e.elem[e.prop];
        },
        set: function (e) {
          v.fx.step[e.prop]
            ? v.fx.step[e.prop](e)
            : e.elem.style &&
              (e.elem.style[v.cssProps[e.prop]] != null || v.cssHooks[e.prop])
              ? v.style(e.elem, e.prop, e.now + e.unit)
              : (e.elem[e.prop] = e.now);
        },
      },
    }),
    (Yn.propHooks.scrollTop = Yn.propHooks.scrollLeft =
    {
      set: function (e) {
        e.elem.nodeType && e.elem.parentNode && (e.elem[e.prop] = e.now);
      },
    }),
    v.each(["toggle", "show", "hide"], function (e, t) {
      var n = v.fn[t];
      v.fn[t] = function (r, i, s) {
        return r == null ||
          typeof r == "boolean" ||
          (!e && v.isFunction(r) && v.isFunction(i))
          ? n.apply(this, arguments)
          : this.animate(Zn(t, !0), r, i, s);
      };
    }),
    v.fn.extend({
      fadeTo: function (e, t, n, r) {
        return this.filter(Gt)
          .css("opacity", 0)
          .show()
          .end()
          .animate({ opacity: t }, e, n, r);
      },
      animate: function (e, t, n, r) {
        var i = v.isEmptyObject(e),
          s = v.speed(t, n, r),
          o = function () {
            var t = Kn(this, v.extend({}, e), s);
            i && t.stop(!0);
          };
        return i || s.queue === !1 ? this.each(o) : this.queue(s.queue, o);
      },
      stop: function (e, n, r) {
        var i = function (e) {
          var t = e.stop;
          delete e.stop, t(r);
        };
        return (
          typeof e != "string" && ((r = n), (n = e), (e = t)),
          n && e !== !1 && this.queue(e || "fx", []),
          this.each(function () {
            var t = !0,
              n = e != null && e + "queueHooks",
              s = v.timers,
              o = v._data(this);
            if (n) o[n] && o[n].stop && i(o[n]);
            else for (n in o) o[n] && o[n].stop && Wn.test(n) && i(o[n]);
            for (n = s.length; n--;)
              s[n].elem === this &&
                (e == null || s[n].queue === e) &&
                (s[n].anim.stop(r), (t = !1), s.splice(n, 1));
            (t || !r) && v.dequeue(this, e);
          })
        );
      },
    }),
    v.each(
      {
        slideDown: Zn("show"),
        slideUp: Zn("hide"),
        slideToggle: Zn("toggle"),
        fadeIn: { opacity: "show" },
        fadeOut: { opacity: "hide" },
        fadeToggle: { opacity: "toggle" },
      },
      function (e, t) {
        v.fn[e] = function (e, n, r) {
          return this.animate(t, e, n, r);
        };
      }
    ),
    (v.speed = function (e, t, n) {
      var r =
        e && typeof e == "object"
          ? v.extend({}, e)
          : {
            complete: n || (!n && t) || (v.isFunction(e) && e),
            duration: e,
            easing: (n && t) || (t && !v.isFunction(t) && t),
          };
      r.duration = v.fx.off
        ? 0
        : typeof r.duration == "number"
          ? r.duration
          : r.duration in v.fx.speeds
            ? v.fx.speeds[r.duration]
            : v.fx.speeds._default;
      if (r.queue == null || r.queue === !0) r.queue = "fx";
      return (
        (r.old = r.complete),
        (r.complete = function () {
          v.isFunction(r.old) && r.old.call(this),
            r.queue && v.dequeue(this, r.queue);
        }),
        r
      );
    }),
    (v.easing = {
      linear: function (e) {
        return e;
      },
      swing: function (e) {
        return 0.5 - Math.cos(e * Math.PI) / 2;
      },
    }),
    (v.timers = []),
    (v.fx = Yn.prototype.init),
    (v.fx.tick = function () {
      var e,
        n = v.timers,
        r = 0;
      qn = v.now();
      for (; r < n.length; r++)
        (e = n[r]), !e() && n[r] === e && n.splice(r--, 1);
      n.length || v.fx.stop(), (qn = t);
    }),
    (v.fx.timer = function (e) {
      e() &&
        v.timers.push(e) &&
        !Rn &&
        (Rn = setInterval(v.fx.tick, v.fx.interval));
    }),
    (v.fx.interval = 13),
    (v.fx.stop = function () {
      clearInterval(Rn), (Rn = null);
    }),
    (v.fx.speeds = { slow: 600, fast: 200, _default: 400 }),
    (v.fx.step = {}),
    v.expr &&
    v.expr.filters &&
    (v.expr.filters.animated = function (e) {
      return v.grep(v.timers, function (t) {
        return e === t.elem;
      }).length;
    });
  var er = /^(?:body|html)$/i;
  (v.fn.offset = function (e) {
    if (arguments.length)
      return e === t
        ? this
        : this.each(function (t) {
          v.offset.setOffset(this, e, t);
        });
    var n,
      r,
      i,
      s,
      o,
      u,
      a,
      f = { top: 0, left: 0 },
      l = this[0],
      c = l && l.ownerDocument;
    if (!c) return;
    return (r = c.body) === l
      ? v.offset.bodyOffset(l)
      : ((n = c.documentElement),
        v.contains(n, l)
          ? (typeof l.getBoundingClientRect != "undefined" &&
            (f = l.getBoundingClientRect()),
            (i = tr(c)),
            (s = n.clientTop || r.clientTop || 0),
            (o = n.clientLeft || r.clientLeft || 0),
            (u = i.pageYOffset || n.scrollTop),
            (a = i.pageXOffset || n.scrollLeft),
            { top: f.top + u - s, left: f.left + a - o })
          : f);
  }),
    (v.offset = {
      bodyOffset: function (e) {
        var t = e.offsetTop,
          n = e.offsetLeft;
        return (
          v.support.doesNotIncludeMarginInBodyOffset &&
          ((t += parseFloat(v.css(e, "marginTop")) || 0),
            (n += parseFloat(v.css(e, "marginLeft")) || 0)),
          { top: t, left: n }
        );
      },
      setOffset: function (e, t, n) {
        var r = v.css(e, "position");
        r === "static" && (e.style.position = "relative");
        var i = v(e),
          s = i.offset(),
          o = v.css(e, "top"),
          u = v.css(e, "left"),
          a =
            (r === "absolute" || r === "fixed") &&
            v.inArray("auto", [o, u]) > -1,
          f = {},
          l = {},
          c,
          h;
        a
          ? ((l = i.position()), (c = l.top), (h = l.left))
          : ((c = parseFloat(o) || 0), (h = parseFloat(u) || 0)),
          v.isFunction(t) && (t = t.call(e, n, s)),
          t.top != null && (f.top = t.top - s.top + c),
          t.left != null && (f.left = t.left - s.left + h),
          "using" in t ? t.using.call(e, f) : i.css(f);
      },
    }),
    v.fn.extend({
      position: function () {
        if (!this[0]) return;
        var e = this[0],
          t = this.offsetParent(),
          n = this.offset(),
          r = er.test(t[0].nodeName) ? { top: 0, left: 0 } : t.offset();
        return (
          (n.top -= parseFloat(v.css(e, "marginTop")) || 0),
          (n.left -= parseFloat(v.css(e, "marginLeft")) || 0),
          (r.top += parseFloat(v.css(t[0], "borderTopWidth")) || 0),
          (r.left += parseFloat(v.css(t[0], "borderLeftWidth")) || 0),
          { top: n.top - r.top, left: n.left - r.left }
        );
      },
      offsetParent: function () {
        return this.map(function () {
          var e = this.offsetParent || i.body;
          while (e && !er.test(e.nodeName) && v.css(e, "position") === "static")
            e = e.offsetParent;
          return e || i.body;
        });
      },
    }),
    v.each(
      { scrollLeft: "pageXOffset", scrollTop: "pageYOffset" },
      function (e, n) {
        var r = /Y/.test(n);
        v.fn[e] = function (i) {
          return v.access(
            this,
            function (e, i, s) {
              var o = tr(e);
              if (s === t)
                return o
                  ? n in o
                    ? o[n]
                    : o.document.documentElement[i]
                  : e[i];
              o
                ? o.scrollTo(
                  r ? v(o).scrollLeft() : s,
                  r ? s : v(o).scrollTop()
                )
                : (e[i] = s);
            },
            e,
            i,
            arguments.length,
            null
          );
        };
      }
    ),
    v.each({ Height: "height", Width: "width" }, function (e, n) {
      v.each(
        { padding: "inner" + e, content: n, "": "outer" + e },
        function (r, i) {
          v.fn[i] = function (i, s) {
            var o = arguments.length && (r || typeof i != "boolean"),
              u = r || (i === !0 || s === !0 ? "margin" : "border");
            return v.access(
              this,
              function (n, r, i) {
                var s;
                return v.isWindow(n)
                  ? n.document.documentElement["client" + e]
                  : n.nodeType === 9
                    ? ((s = n.documentElement),
                      Math.max(
                        n.body["scroll" + e],
                        s["scroll" + e],
                        n.body["offset" + e],
                        s["offset" + e],
                        s["client" + e]
                      ))
                    : i === t
                      ? v.css(n, r, i, u)
                      : v.style(n, r, i, u);
              },
              n,
              o ? i : t,
              o,
              null
            );
          };
        }
      );
    }),
    (e.jQuery = e.$ = v),
    typeof define == "function" &&
    define.amd &&
    define.amd.jQuery &&
    define("jquery", [], function () {
      return v;
    });
})(window);
/*! jQuery UI - v1.9.2 - 2012-11-23
 * http://jqueryui.com
 * Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.position.js, jquery.ui.accordion.js, jquery.ui.autocomplete.js, jquery.ui.button.js, jquery.ui.datepicker.js, jquery.ui.dialog.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.effect.js, jquery.ui.effect-blind.js, jquery.ui.effect-bounce.js, jquery.ui.effect-clip.js, jquery.ui.effect-drop.js, jquery.ui.effect-explode.js, jquery.ui.effect-fade.js, jquery.ui.effect-fold.js, jquery.ui.effect-highlight.js, jquery.ui.effect-pulsate.js, jquery.ui.effect-scale.js, jquery.ui.effect-shake.js, jquery.ui.effect-slide.js, jquery.ui.effect-transfer.js, jquery.ui.menu.js, jquery.ui.progressbar.js, jquery.ui.resizable.js, jquery.ui.selectable.js, jquery.ui.slider.js, jquery.ui.sortable.js, jquery.ui.spinner.js, jquery.ui.tabs.js, jquery.ui.tooltip.js
 * Copyright (c) 2012 jQuery Foundation and other contributors Licensed MIT */

(function (e, t) {
  function i(t, n) {
    var r,
      i,
      o,
      u = t.nodeName.toLowerCase();
    return "area" === u
      ? ((r = t.parentNode),
        (i = r.name),
        !t.href || !i || r.nodeName.toLowerCase() !== "map"
          ? !1
          : ((o = e("img[usemap=#" + i + "]")[0]), !!o && s(o)))
      : (/input|select|textarea|button|object/.test(u)
        ? !t.disabled
        : "a" === u
          ? t.href || n
          : n) && s(t);
  }
  function s(t) {
    return (
      e.expr.filters.visible(t) &&
      !e(t)
        .parents()
        .andSelf()
        .filter(function () {
          return e.css(this, "visibility") === "hidden";
        }).length
    );
  }
  var n = 0,
    r = /^ui-id-\d+$/;
  e.ui = e.ui || {};
  if (e.ui.version) return;
  e.extend(e.ui, {
    version: "1.9.2",
    keyCode: {
      BACKSPACE: 8,
      COMMA: 188,
      DELETE: 46,
      DOWN: 40,
      END: 35,
      ENTER: 13,
      ESCAPE: 27,
      HOME: 36,
      LEFT: 37,
      NUMPAD_ADD: 107,
      NUMPAD_DECIMAL: 110,
      NUMPAD_DIVIDE: 111,
      NUMPAD_ENTER: 108,
      NUMPAD_MULTIPLY: 106,
      NUMPAD_SUBTRACT: 109,
      PAGE_DOWN: 34,
      PAGE_UP: 33,
      PERIOD: 190,
      RIGHT: 39,
      SPACE: 32,
      TAB: 9,
      UP: 38,
    },
  }),
    e.fn.extend({
      _focus: e.fn.focus,
      focus: function (t, n) {
        return typeof t == "number"
          ? this.each(function () {
            var r = this;
            setTimeout(function () {
              e(r).focus(), n && n.call(r);
            }, t);
          })
          : this._focus.apply(this, arguments);
      },
      scrollParent: function () {
        var t;
        return (
          (e.ui.ie && /(static|relative)/.test(this.css("position"))) ||
            /absolute/.test(this.css("position"))
            ? (t = this.parents()
              .filter(function () {
                return (
                  /(relative|absolute|fixed)/.test(e.css(this, "position")) &&
                  /(auto|scroll)/.test(
                    e.css(this, "overflow") +
                    e.css(this, "overflow-y") +
                    e.css(this, "overflow-x")
                  )
                );
              })
              .eq(0))
            : (t = this.parents()
              .filter(function () {
                return /(auto|scroll)/.test(
                  e.css(this, "overflow") +
                  e.css(this, "overflow-y") +
                  e.css(this, "overflow-x")
                );
              })
              .eq(0)),
          /fixed/.test(this.css("position")) || !t.length ? e(document) : t
        );
      },
      zIndex: function (n) {
        if (n !== t) return this.css("zIndex", n);
        if (this.length) {
          var r = e(this[0]),
            i,
            s;
          while (r.length && r[0] !== document) {
            i = r.css("position");
            if (i === "absolute" || i === "relative" || i === "fixed") {
              s = parseInt(r.css("zIndex"), 10);
              if (!isNaN(s) && s !== 0) return s;
            }
            r = r.parent();
          }
        }
        return 0;
      },
      uniqueId: function () {
        return this.each(function () {
          this.id || (this.id = "ui-id-" + ++n);
        });
      },
      removeUniqueId: function () {
        return this.each(function () {
          r.test(this.id) && e(this).removeAttr("id");
        });
      },
    }),
    e.extend(e.expr[":"], {
      data: e.expr.createPseudo
        ? e.expr.createPseudo(function (t) {
          return function (n) {
            return !!e.data(n, t);
          };
        })
        : function (t, n, r) {
          return !!e.data(t, r[3]);
        },
      focusable: function (t) {
        return i(t, !isNaN(e.attr(t, "tabindex")));
      },
      tabbable: function (t) {
        var n = e.attr(t, "tabindex"),
          r = isNaN(n);
        return (r || n >= 0) && i(t, !r);
      },
    }),
    e(function () {
      var t = document.body,
        n = t.appendChild((n = document.createElement("div")));
      n.offsetHeight,
        e.extend(n.style, {
          minHeight: "100px",
          height: "auto",
          padding: 0,
          borderWidth: 0,
        }),
        (e.support.minHeight = n.offsetHeight === 100),
        (e.support.selectstart = "onselectstart" in n),
        (t.removeChild(n).style.display = "none");
    }),
    e("<a>").outerWidth(1).jquery ||
    e.each(["Width", "Height"], function (n, r) {
      function u(t, n, r, s) {
        return (
          e.each(i, function () {
            (n -= parseFloat(e.css(t, "padding" + this)) || 0),
              r &&
              (n -= parseFloat(e.css(t, "border" + this + "Width")) || 0),
              s && (n -= parseFloat(e.css(t, "margin" + this)) || 0);
          }),
          n
        );
      }
      var i = r === "Width" ? ["Left", "Right"] : ["Top", "Bottom"],
        s = r.toLowerCase(),
        o = {
          innerWidth: e.fn.innerWidth,
          innerHeight: e.fn.innerHeight,
          outerWidth: e.fn.outerWidth,
          outerHeight: e.fn.outerHeight,
        };
      (e.fn["inner" + r] = function (n) {
        return n === t
          ? o["inner" + r].call(this)
          : this.each(function () {
            e(this).css(s, u(this, n) + "px");
          });
      }),
        (e.fn["outer" + r] = function (t, n) {
          return typeof t != "number"
            ? o["outer" + r].call(this, t)
            : this.each(function () {
              e(this).css(s, u(this, t, !0, n) + "px");
            });
        });
    }),
    e("<a>").data("a-b", "a").removeData("a-b").data("a-b") &&
    (e.fn.removeData = (function (t) {
      return function (n) {
        return arguments.length ? t.call(this, e.camelCase(n)) : t.call(this);
      };
    })(e.fn.removeData)),
    (function () {
      var t = /msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase()) || [];
      (e.ui.ie = t.length ? !0 : !1), (e.ui.ie6 = parseFloat(t[1], 10) === 6);
    })(),
    e.fn.extend({
      disableSelection: function () {
        return this.bind(
          (e.support.selectstart ? "selectstart" : "mousedown") +
          ".ui-disableSelection",
          function (e) {
            e.preventDefault();
          }
        );
      },
      enableSelection: function () {
        return this.unbind(".ui-disableSelection");
      },
    }),
    e.extend(e.ui, {
      plugin: {
        add: function (t, n, r) {
          var i,
            s = e.ui[t].prototype;
          for (i in r)
            (s.plugins[i] = s.plugins[i] || []), s.plugins[i].push([n, r[i]]);
        },
        call: function (e, t, n) {
          var r,
            i = e.plugins[t];
          if (
            !i ||
            !e.element[0].parentNode ||
            e.element[0].parentNode.nodeType === 11
          )
            return;
          for (r = 0; r < i.length; r++)
            e.options[i[r][0]] && i[r][1].apply(e.element, n);
        },
      },
      contains: e.contains,
      hasScroll: function (t, n) {
        if (e(t).css("overflow") === "hidden") return !1;
        var r = n && n === "left" ? "scrollLeft" : "scrollTop",
          i = !1;
        return t[r] > 0 ? !0 : ((t[r] = 1), (i = t[r] > 0), (t[r] = 0), i);
      },
      isOverAxis: function (e, t, n) {
        return e > t && e < t + n;
      },
      isOver: function (t, n, r, i, s, o) {
        return e.ui.isOverAxis(t, r, s) && e.ui.isOverAxis(n, i, o);
      },
    });
})(jQuery);
(function (e, t) {
  var n = 0,
    r = Array.prototype.slice,
    i = e.cleanData;
  (e.cleanData = function (t) {
    for (var n = 0, r; (r = t[n]) != null; n++)
      try {
        e(r).triggerHandler("remove");
      } catch (s) { }
    i(t);
  }),
    (e.widget = function (t, n, r) {
      var i,
        s,
        o,
        u,
        a = t.split(".")[0];
      (t = t.split(".")[1]),
        (i = a + "-" + t),
        r || ((r = n), (n = e.Widget)),
        (e.expr[":"][i.toLowerCase()] = function (t) {
          return !!e.data(t, i);
        }),
        (e[a] = e[a] || {}),
        (s = e[a][t]),
        (o = e[a][t] =
          function (e, t) {
            if (!this._createWidget) return new o(e, t);
            arguments.length && this._createWidget(e, t);
          }),
        e.extend(o, s, {
          version: r.version,
          _proto: e.extend({}, r),
          _childConstructors: [],
        }),
        (u = new n()),
        (u.options = e.widget.extend({}, u.options)),
        e.each(r, function (t, i) {
          e.isFunction(i) &&
            (r[t] = (function () {
              var e = function () {
                return n.prototype[t].apply(this, arguments);
              },
                r = function (e) {
                  return n.prototype[t].apply(this, e);
                };
              return function () {
                var t = this._super,
                  n = this._superApply,
                  s;
                return (
                  (this._super = e),
                  (this._superApply = r),
                  (s = i.apply(this, arguments)),
                  (this._super = t),
                  (this._superApply = n),
                  s
                );
              };
            })());
        }),
        (o.prototype = e.widget.extend(
          u,
          { widgetEventPrefix: s ? u.widgetEventPrefix : t },
          r,
          {
            constructor: o,
            namespace: a,
            widgetName: t,
            widgetBaseClass: i,
            widgetFullName: i,
          }
        )),
        s
          ? (e.each(s._childConstructors, function (t, n) {
            var r = n.prototype;
            e.widget(r.namespace + "." + r.widgetName, o, n._proto);
          }),
            delete s._childConstructors)
          : n._childConstructors.push(o),
        e.widget.bridge(t, o);
    }),
    (e.widget.extend = function (n) {
      var i = r.call(arguments, 1),
        s = 0,
        o = i.length,
        u,
        a;
      for (; s < o; s++)
        for (u in i[s])
          (a = i[s][u]),
            i[s].hasOwnProperty(u) &&
            a !== t &&
            (e.isPlainObject(a)
              ? (n[u] = e.isPlainObject(n[u])
                ? e.widget.extend({}, n[u], a)
                : e.widget.extend({}, a))
              : (n[u] = a));
      return n;
    }),
    (e.widget.bridge = function (n, i) {
      var s = i.prototype.widgetFullName || n;
      e.fn[n] = function (o) {
        var u = typeof o == "string",
          a = r.call(arguments, 1),
          f = this;
        return (
          (o = !u && a.length ? e.widget.extend.apply(null, [o].concat(a)) : o),
          u
            ? this.each(function () {
              var r,
                i = e.data(this, s);
              if (!i)
                return e.error(
                  "cannot call methods on " +
                  n +
                  " prior to initialization; " +
                  "attempted to call method '" +
                  o +
                  "'"
                );
              if (!e.isFunction(i[o]) || o.charAt(0) === "_")
                return e.error(
                  "no such method '" + o + "' for " + n + " widget instance"
                );
              r = i[o].apply(i, a);
              if (r !== i && r !== t)
                return (f = r && r.jquery ? f.pushStack(r.get()) : r), !1;
            })
            : this.each(function () {
              var t = e.data(this, s);
              t ? t.option(o || {})._init() : e.data(this, s, new i(o, this));
            }),
          f
        );
      };
    }),
    (e.Widget = function () { }),
    (e.Widget._childConstructors = []),
    (e.Widget.prototype = {
      widgetName: "widget",
      widgetEventPrefix: "",
      defaultElement: "<div>",
      options: { disabled: !1, create: null },
      _createWidget: function (t, r) {
        (r = e(r || this.defaultElement || this)[0]),
          (this.element = e(r)),
          (this.uuid = n++),
          (this.eventNamespace = "." + this.widgetName + this.uuid),
          (this.options = e.widget.extend(
            {},
            this.options,
            this._getCreateOptions(),
            t
          )),
          (this.bindings = e()),
          (this.hoverable = e()),
          (this.focusable = e()),
          r !== this &&
          (e.data(r, this.widgetName, this),
            e.data(r, this.widgetFullName, this),
            this._on(!0, this.element, {
              remove: function (e) {
                e.target === r && this.destroy();
              },
            }),
            (this.document = e(r.style ? r.ownerDocument : r.document || r)),
            (this.window = e(
              this.document[0].defaultView || this.document[0].parentWindow
            ))),
          this._create(),
          this._trigger("create", null, this._getCreateEventData()),
          this._init();
      },
      _getCreateOptions: e.noop,
      _getCreateEventData: e.noop,
      _create: e.noop,
      _init: e.noop,
      destroy: function () {
        this._destroy(),
          this.element
            .unbind(this.eventNamespace)
            .removeData(this.widgetName)
            .removeData(this.widgetFullName)
            .removeData(e.camelCase(this.widgetFullName)),
          this.widget()
            .unbind(this.eventNamespace)
            .removeAttr("aria-disabled")
            .removeClass(
              this.widgetFullName + "-disabled " + "ui-state-disabled"
            ),
          this.bindings.unbind(this.eventNamespace),
          this.hoverable.removeClass("ui-state-hover"),
          this.focusable.removeClass("ui-state-focus");
      },
      _destroy: e.noop,
      widget: function () {
        return this.element;
      },
      option: function (n, r) {
        var i = n,
          s,
          o,
          u;
        if (arguments.length === 0) return e.widget.extend({}, this.options);
        if (typeof n == "string") {
          (i = {}), (s = n.split(".")), (n = s.shift());
          if (s.length) {
            o = i[n] = e.widget.extend({}, this.options[n]);
            for (u = 0; u < s.length - 1; u++)
              (o[s[u]] = o[s[u]] || {}), (o = o[s[u]]);
            n = s.pop();
            if (r === t) return o[n] === t ? null : o[n];
            o[n] = r;
          } else {
            if (r === t) return this.options[n] === t ? null : this.options[n];
            i[n] = r;
          }
        }
        return this._setOptions(i), this;
      },
      _setOptions: function (e) {
        var t;
        for (t in e) this._setOption(t, e[t]);
        return this;
      },
      _setOption: function (e, t) {
        return (
          (this.options[e] = t),
          e === "disabled" &&
          (this.widget()
            .toggleClass(
              this.widgetFullName + "-disabled ui-state-disabled",
              !!t
            )
            .attr("aria-disabled", t),
            this.hoverable.removeClass("ui-state-hover"),
            this.focusable.removeClass("ui-state-focus")),
          this
        );
      },
      enable: function () {
        return this._setOption("disabled", !1);
      },
      disable: function () {
        return this._setOption("disabled", !0);
      },
      _on: function (t, n, r) {
        var i,
          s = this;
        typeof t != "boolean" && ((r = n), (n = t), (t = !1)),
          r
            ? ((n = i = e(n)), (this.bindings = this.bindings.add(n)))
            : ((r = n), (n = this.element), (i = this.widget())),
          e.each(r, function (r, o) {
            function u() {
              if (
                !t &&
                (s.options.disabled === !0 ||
                  e(this).hasClass("ui-state-disabled"))
              )
                return;
              return (typeof o == "string" ? s[o] : o).apply(s, arguments);
            }
            typeof o != "string" &&
              (u.guid = o.guid = o.guid || u.guid || e.guid++);
            var a = r.match(/^(\w+)\s*(.*)$/),
              f = a[1] + s.eventNamespace,
              l = a[2];
            l ? i.delegate(l, f, u) : n.bind(f, u);
          });
      },
      _off: function (e, t) {
        (t =
          (t || "").split(" ").join(this.eventNamespace + " ") +
          this.eventNamespace),
          e.unbind(t).undelegate(t);
      },
      _delay: function (e, t) {
        function n() {
          return (typeof e == "string" ? r[e] : e).apply(r, arguments);
        }
        var r = this;
        return setTimeout(n, t || 0);
      },
      _hoverable: function (t) {
        (this.hoverable = this.hoverable.add(t)),
          this._on(t, {
            mouseenter: function (t) {
              e(t.currentTarget).addClass("ui-state-hover");
            },
            mouseleave: function (t) {
              e(t.currentTarget).removeClass("ui-state-hover");
            },
          });
      },
      _focusable: function (t) {
        (this.focusable = this.focusable.add(t)),
          this._on(t, {
            focusin: function (t) {
              e(t.currentTarget).addClass("ui-state-focus");
            },
            focusout: function (t) {
              e(t.currentTarget).removeClass("ui-state-focus");
            },
          });
      },
      _trigger: function (t, n, r) {
        var i,
          s,
          o = this.options[t];
        (r = r || {}),
          (n = e.Event(n)),
          (n.type = (
            t === this.widgetEventPrefix ? t : this.widgetEventPrefix + t
          ).toLowerCase()),
          (n.target = this.element[0]),
          (s = n.originalEvent);
        if (s) for (i in s) i in n || (n[i] = s[i]);
        return (
          this.element.trigger(n, r),
          !(
            (e.isFunction(o) &&
              o.apply(this.element[0], [n].concat(r)) === !1) ||
            n.isDefaultPrevented()
          )
        );
      },
    }),
    e.each({ show: "fadeIn", hide: "fadeOut" }, function (t, n) {
      e.Widget.prototype["_" + t] = function (r, i, s) {
        typeof i == "string" && (i = { effect: i });
        var o,
          u = i ? (i === !0 || typeof i == "number" ? n : i.effect || n) : t;
        (i = i || {}),
          typeof i == "number" && (i = { duration: i }),
          (o = !e.isEmptyObject(i)),
          (i.complete = s),
          i.delay && r.delay(i.delay),
          o &&
            e.effects &&
            (e.effects.effect[u] || (e.uiBackCompat !== !1 && e.effects[u]))
            ? r[t](i)
            : u !== t && r[u]
              ? r[u](i.duration, i.easing, s)
              : r.queue(function (n) {
                e(this)[t](), s && s.call(r[0]), n();
              });
      };
    }),
    e.uiBackCompat !== !1 &&
    (e.Widget.prototype._getCreateOptions = function () {
      return e.metadata && e.metadata.get(this.element[0])[this.widgetName];
    });
})(jQuery);
(function (e, t) {
  var n = !1;
  e(document).mouseup(function (e) {
    n = !1;
  }),
    e.widget("ui.mouse", {
      version: "1.9.2",
      options: {
        cancel: "input,textarea,button,select,option",
        distance: 1,
        delay: 0,
      },
      _mouseInit: function () {
        var t = this;
        this.element
          .bind("mousedown." + this.widgetName, function (e) {
            return t._mouseDown(e);
          })
          .bind("click." + this.widgetName, function (n) {
            if (!0 === e.data(n.target, t.widgetName + ".preventClickEvent"))
              return (
                e.removeData(n.target, t.widgetName + ".preventClickEvent"),
                n.stopImmediatePropagation(),
                !1
              );
          }),
          (this.started = !1);
      },
      _mouseDestroy: function () {
        this.element.unbind("." + this.widgetName),
          this._mouseMoveDelegate &&
          e(document)
            .unbind("mousemove." + this.widgetName, this._mouseMoveDelegate)
            .unbind("mouseup." + this.widgetName, this._mouseUpDelegate);
      },
      _mouseDown: function (t) {
        if (n) return;
        this._mouseStarted && this._mouseUp(t), (this._mouseDownEvent = t);
        var r = this,
          i = t.which === 1,
          s =
            typeof this.options.cancel == "string" && t.target.nodeName
              ? e(t.target).closest(this.options.cancel).length
              : !1;
        if (!i || s || !this._mouseCapture(t)) return !0;
        (this.mouseDelayMet = !this.options.delay),
          this.mouseDelayMet ||
          (this._mouseDelayTimer = setTimeout(function () {
            r.mouseDelayMet = !0;
          }, this.options.delay));
        if (this._mouseDistanceMet(t) && this._mouseDelayMet(t)) {
          this._mouseStarted = this._mouseStart(t) !== !1;
          if (!this._mouseStarted) return t.preventDefault(), !0;
        }
        return (
          !0 === e.data(t.target, this.widgetName + ".preventClickEvent") &&
          e.removeData(t.target, this.widgetName + ".preventClickEvent"),
          (this._mouseMoveDelegate = function (e) {
            return r._mouseMove(e);
          }),
          (this._mouseUpDelegate = function (e) {
            return r._mouseUp(e);
          }),
          e(document)
            .bind("mousemove." + this.widgetName, this._mouseMoveDelegate)
            .bind("mouseup." + this.widgetName, this._mouseUpDelegate),
          t.preventDefault(),
          (n = !0),
          !0
        );
      },
      _mouseMove: function (t) {
        return !e.ui.ie || document.documentMode >= 9 || !!t.button
          ? this._mouseStarted
            ? (this._mouseDrag(t), t.preventDefault())
            : (this._mouseDistanceMet(t) &&
              this._mouseDelayMet(t) &&
              ((this._mouseStarted =
                this._mouseStart(this._mouseDownEvent, t) !== !1),
                this._mouseStarted ? this._mouseDrag(t) : this._mouseUp(t)),
              !this._mouseStarted)
          : this._mouseUp(t);
      },
      _mouseUp: function (t) {
        return (
          e(document)
            .unbind("mousemove." + this.widgetName, this._mouseMoveDelegate)
            .unbind("mouseup." + this.widgetName, this._mouseUpDelegate),
          this._mouseStarted &&
          ((this._mouseStarted = !1),
            t.target === this._mouseDownEvent.target &&
            e.data(t.target, this.widgetName + ".preventClickEvent", !0),
            this._mouseStop(t)),
          !1
        );
      },
      _mouseDistanceMet: function (e) {
        return (
          Math.max(
            Math.abs(this._mouseDownEvent.pageX - e.pageX),
            Math.abs(this._mouseDownEvent.pageY - e.pageY)
          ) >= this.options.distance
        );
      },
      _mouseDelayMet: function (e) {
        return this.mouseDelayMet;
      },
      _mouseStart: function (e) { },
      _mouseDrag: function (e) { },
      _mouseStop: function (e) { },
      _mouseCapture: function (e) {
        return !0;
      },
    });
})(jQuery);
(function (e, t) {
  function h(e, t, n) {
    return [
      parseInt(e[0], 10) * (l.test(e[0]) ? t / 100 : 1),
      parseInt(e[1], 10) * (l.test(e[1]) ? n / 100 : 1),
    ];
  }
  function p(t, n) {
    return parseInt(e.css(t, n), 10) || 0;
  }
  e.ui = e.ui || {};
  var n,
    r = Math.max,
    i = Math.abs,
    s = Math.round,
    o = /left|center|right/,
    u = /top|center|bottom/,
    a = /[\+\-]\d+%?/,
    f = /^\w+/,
    l = /%$/,
    c = e.fn.position;
  (e.position = {
    scrollbarWidth: function () {
      if (n !== t) return n;
      var r,
        i,
        s = e(
          "<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"
        ),
        o = s.children()[0];
      return (
        e("body").append(s),
        (r = o.offsetWidth),
        s.css("overflow", "scroll"),
        (i = o.offsetWidth),
        r === i && (i = s[0].clientWidth),
        s.remove(),
        (n = r - i)
      );
    },
    getScrollInfo: function (t) {
      var n = t.isWindow ? "" : t.element.css("overflow-x"),
        r = t.isWindow ? "" : t.element.css("overflow-y"),
        i =
          n === "scroll" ||
          (n === "auto" && t.width < t.element[0].scrollWidth),
        s =
          r === "scroll" ||
          (r === "auto" && t.height < t.element[0].scrollHeight);
      return {
        width: i ? e.position.scrollbarWidth() : 0,
        height: s ? e.position.scrollbarWidth() : 0,
      };
    },
    getWithinInfo: function (t) {
      var n = e(t || window),
        r = e.isWindow(n[0]);
      return {
        element: n,
        isWindow: r,
        offset: n.offset() || { left: 0, top: 0 },
        scrollLeft: n.scrollLeft(),
        scrollTop: n.scrollTop(),
        width: r ? n.width() : n.outerWidth(),
        height: r ? n.height() : n.outerHeight(),
      };
    },
  }),
    (e.fn.position = function (t) {
      if (!t || !t.of) return c.apply(this, arguments);
      t = e.extend({}, t);
      var n,
        l,
        d,
        v,
        m,
        g = e(t.of),
        y = e.position.getWithinInfo(t.within),
        b = e.position.getScrollInfo(y),
        w = g[0],
        E = (t.collision || "flip").split(" "),
        S = {};
      return (
        w.nodeType === 9
          ? ((l = g.width()), (d = g.height()), (v = { top: 0, left: 0 }))
          : e.isWindow(w)
            ? ((l = g.width()),
              (d = g.height()),
              (v = { top: g.scrollTop(), left: g.scrollLeft() }))
            : w.preventDefault
              ? ((t.at = "left top"),
                (l = d = 0),
                (v = { top: w.pageY, left: w.pageX }))
              : ((l = g.outerWidth()), (d = g.outerHeight()), (v = g.offset())),
        (m = e.extend({}, v)),
        e.each(["my", "at"], function () {
          var e = (t[this] || "").split(" "),
            n,
            r;
          e.length === 1 &&
            (e = o.test(e[0])
              ? e.concat(["center"])
              : u.test(e[0])
                ? ["center"].concat(e)
                : ["center", "center"]),
            (e[0] = o.test(e[0]) ? e[0] : "center"),
            (e[1] = u.test(e[1]) ? e[1] : "center"),
            (n = a.exec(e[0])),
            (r = a.exec(e[1])),
            (S[this] = [n ? n[0] : 0, r ? r[0] : 0]),
            (t[this] = [f.exec(e[0])[0], f.exec(e[1])[0]]);
        }),
        E.length === 1 && (E[1] = E[0]),
        t.at[0] === "right"
          ? (m.left += l)
          : t.at[0] === "center" && (m.left += l / 2),
        t.at[1] === "bottom"
          ? (m.top += d)
          : t.at[1] === "center" && (m.top += d / 2),
        (n = h(S.at, l, d)),
        (m.left += n[0]),
        (m.top += n[1]),
        this.each(function () {
          var o,
            u,
            a = e(this),
            f = a.outerWidth(),
            c = a.outerHeight(),
            w = p(this, "marginLeft"),
            x = p(this, "marginTop"),
            T = f + w + p(this, "marginRight") + b.width,
            N = c + x + p(this, "marginBottom") + b.height,
            C = e.extend({}, m),
            k = h(S.my, a.outerWidth(), a.outerHeight());
          t.my[0] === "right"
            ? (C.left -= f)
            : t.my[0] === "center" && (C.left -= f / 2),
            t.my[1] === "bottom"
              ? (C.top -= c)
              : t.my[1] === "center" && (C.top -= c / 2),
            (C.left += k[0]),
            (C.top += k[1]),
            e.support.offsetFractions ||
            ((C.left = s(C.left)), (C.top = s(C.top))),
            (o = { marginLeft: w, marginTop: x }),
            e.each(["left", "top"], function (r, i) {
              e.ui.position[E[r]] &&
                e.ui.position[E[r]][i](C, {
                  targetWidth: l,
                  targetHeight: d,
                  elemWidth: f,
                  elemHeight: c,
                  collisionPosition: o,
                  collisionWidth: T,
                  collisionHeight: N,
                  offset: [n[0] + k[0], n[1] + k[1]],
                  my: t.my,
                  at: t.at,
                  within: y,
                  elem: a,
                });
            }),
            e.fn.bgiframe && a.bgiframe(),
            t.using &&
            (u = function (e) {
              var n = v.left - C.left,
                s = n + l - f,
                o = v.top - C.top,
                u = o + d - c,
                h = {
                  target: {
                    element: g,
                    left: v.left,
                    top: v.top,
                    width: l,
                    height: d,
                  },
                  element: {
                    element: a,
                    left: C.left,
                    top: C.top,
                    width: f,
                    height: c,
                  },
                  horizontal: s < 0 ? "left" : n > 0 ? "right" : "center",
                  vertical: u < 0 ? "top" : o > 0 ? "bottom" : "middle",
                };
              l < f && i(n + s) < l && (h.horizontal = "center"),
                d < c && i(o + u) < d && (h.vertical = "middle"),
                r(i(n), i(s)) > r(i(o), i(u))
                  ? (h.important = "horizontal")
                  : (h.important = "vertical"),
                t.using.call(this, e, h);
            }),
            a.offset(e.extend(C, { using: u }));
        })
      );
    }),
    (e.ui.position = {
      fit: {
        left: function (e, t) {
          var n = t.within,
            i = n.isWindow ? n.scrollLeft : n.offset.left,
            s = n.width,
            o = e.left - t.collisionPosition.marginLeft,
            u = i - o,
            a = o + t.collisionWidth - s - i,
            f;
          t.collisionWidth > s
            ? u > 0 && a <= 0
              ? ((f = e.left + u + t.collisionWidth - s - i), (e.left += u - f))
              : a > 0 && u <= 0
                ? (e.left = i)
                : u > a
                  ? (e.left = i + s - t.collisionWidth)
                  : (e.left = i)
            : u > 0
              ? (e.left += u)
              : a > 0
                ? (e.left -= a)
                : (e.left = r(e.left - o, e.left));
        },
        top: function (e, t) {
          var n = t.within,
            i = n.isWindow ? n.scrollTop : n.offset.top,
            s = t.within.height,
            o = e.top - t.collisionPosition.marginTop,
            u = i - o,
            a = o + t.collisionHeight - s - i,
            f;
          t.collisionHeight > s
            ? u > 0 && a <= 0
              ? ((f = e.top + u + t.collisionHeight - s - i), (e.top += u - f))
              : a > 0 && u <= 0
                ? (e.top = i)
                : u > a
                  ? (e.top = i + s - t.collisionHeight)
                  : (e.top = i)
            : u > 0
              ? (e.top += u)
              : a > 0
                ? (e.top -= a)
                : (e.top = r(e.top - o, e.top));
        },
      },
      flip: {
        left: function (e, t) {
          var n = t.within,
            r = n.offset.left + n.scrollLeft,
            s = n.width,
            o = n.isWindow ? n.scrollLeft : n.offset.left,
            u = e.left - t.collisionPosition.marginLeft,
            a = u - o,
            f = u + t.collisionWidth - s - o,
            l =
              t.my[0] === "left"
                ? -t.elemWidth
                : t.my[0] === "right"
                  ? t.elemWidth
                  : 0,
            c =
              t.at[0] === "left"
                ? t.targetWidth
                : t.at[0] === "right"
                  ? -t.targetWidth
                  : 0,
            h = -2 * t.offset[0],
            p,
            d;
          if (a < 0) {
            p = e.left + l + c + h + t.collisionWidth - s - r;
            if (p < 0 || p < i(a)) e.left += l + c + h;
          } else if (f > 0) {
            d = e.left - t.collisionPosition.marginLeft + l + c + h - o;
            if (d > 0 || i(d) < f) e.left += l + c + h;
          }
        },
        top: function (e, t) {
          var n = t.within,
            r = n.offset.top + n.scrollTop,
            s = n.height,
            o = n.isWindow ? n.scrollTop : n.offset.top,
            u = e.top - t.collisionPosition.marginTop,
            a = u - o,
            f = u + t.collisionHeight - s - o,
            l = t.my[1] === "top",
            c = l ? -t.elemHeight : t.my[1] === "bottom" ? t.elemHeight : 0,
            h =
              t.at[1] === "top"
                ? t.targetHeight
                : t.at[1] === "bottom"
                  ? -t.targetHeight
                  : 0,
            p = -2 * t.offset[1],
            d,
            v;
          a < 0
            ? ((v = e.top + c + h + p + t.collisionHeight - s - r),
              e.top + c + h + p > a &&
              (v < 0 || v < i(a)) &&
              (e.top += c + h + p))
            : f > 0 &&
            ((d = e.top - t.collisionPosition.marginTop + c + h + p - o),
              e.top + c + h + p > f &&
              (d > 0 || i(d) < f) &&
              (e.top += c + h + p));
        },
      },
      flipfit: {
        left: function () {
          e.ui.position.flip.left.apply(this, arguments),
            e.ui.position.fit.left.apply(this, arguments);
        },
        top: function () {
          e.ui.position.flip.top.apply(this, arguments),
            e.ui.position.fit.top.apply(this, arguments);
        },
      },
    }),
    (function () {
      var t,
        n,
        r,
        i,
        s,
        o = document.getElementsByTagName("body")[0],
        u = document.createElement("div");
      (t = document.createElement(o ? "div" : "body")),
        (r = {
          visibility: "hidden",
          width: 0,
          height: 0,
          border: 0,
          margin: 0,
          background: "none",
        }),
        o &&
        e.extend(r, {
          position: "absolute",
          left: "-1000px",
          top: "-1000px",
        });
      for (s in r) t.style[s] = r[s];
      t.appendChild(u),
        (n = o || document.documentElement),
        n.insertBefore(t, n.firstChild),
        (u.style.cssText = "position: absolute; left: 10.7432222px;"),
        (i = e(u).offset().left),
        (e.support.offsetFractions = i > 10 && i < 11),
        (t.innerHTML = ""),
        n.removeChild(t);
    })(),
    e.uiBackCompat !== !1 &&
    (function (e) {
      var n = e.fn.position;
      e.fn.position = function (r) {
        if (!r || !r.offset) return n.call(this, r);
        var i = r.offset.split(" "),
          s = r.at.split(" ");
        return (
          i.length === 1 && (i[1] = i[0]),
          /^\d/.test(i[0]) && (i[0] = "+" + i[0]),
          /^\d/.test(i[1]) && (i[1] = "+" + i[1]),
          s.length === 1 &&
          (/left|center|right/.test(s[0])
            ? (s[1] = "center")
            : ((s[1] = s[0]), (s[0] = "center"))),
          n.call(
            this,
            e.extend(r, { at: s[0] + i[0] + " " + s[1] + i[1], offset: t })
          )
        );
      };
    })(jQuery);
})(jQuery);
(function (e, t) {
  var n = 0,
    r = {},
    i = {};
  (r.height =
    r.paddingTop =
    r.paddingBottom =
    r.borderTopWidth =
    r.borderBottomWidth =
    "hide"),
    (i.height =
      i.paddingTop =
      i.paddingBottom =
      i.borderTopWidth =
      i.borderBottomWidth =
      "show"),
    e.widget("ui.accordion", {
      version: "1.9.2",
      options: {
        active: 0,
        animate: {},
        collapsible: !1,
        event: "click",
        header: "> li > :first-child,> :not(li):even",
        heightStyle: "auto",
        icons: {
          activeHeader: "ui-icon-triangle-1-s",
          header: "ui-icon-triangle-1-e",
        },
        activate: null,
        beforeActivate: null,
      },
      _create: function () {
        var t = (this.accordionId =
          "ui-accordion-" + (this.element.attr("id") || ++n)),
          r = this.options;
        (this.prevShow = this.prevHide = e()),
          this.element.addClass("ui-accordion ui-widget ui-helper-reset"),
          (this.headers = this.element
            .find(r.header)
            .addClass(
              "ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"
            )),
          this._hoverable(this.headers),
          this._focusable(this.headers),
          this.headers
            .next()
            .addClass(
              "ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom"
            )
            .hide(),
          !r.collapsible &&
          (r.active === !1 || r.active == null) &&
          (r.active = 0),
          r.active < 0 && (r.active += this.headers.length),
          (this.active = this._findActive(r.active)
            .addClass("ui-accordion-header-active ui-state-active")
            .toggleClass("ui-corner-all ui-corner-top")),
          this.active.next().addClass("ui-accordion-content-active").show(),
          this._createIcons(),
          this.refresh(),
          this.element.attr("role", "tablist"),
          this.headers
            .attr("role", "tab")
            .each(function (n) {
              var r = e(this),
                i = r.attr("id"),
                s = r.next(),
                o = s.attr("id");
              i || ((i = t + "-header-" + n), r.attr("id", i)),
                o || ((o = t + "-panel-" + n), s.attr("id", o)),
                r.attr("aria-controls", o),
                s.attr("aria-labelledby", i);
            })
            .next()
            .attr("role", "tabpanel"),
          this.headers
            .not(this.active)
            .attr({ "aria-selected": "false", tabIndex: -1 })
            .next()
            .attr({ "aria-expanded": "false", "aria-hidden": "true" })
            .hide(),
          this.active.length
            ? this.active
              .attr({ "aria-selected": "true", tabIndex: 0 })
              .next()
              .attr({ "aria-expanded": "true", "aria-hidden": "false" })
            : this.headers.eq(0).attr("tabIndex", 0),
          this._on(this.headers, { keydown: "_keydown" }),
          this._on(this.headers.next(), { keydown: "_panelKeyDown" }),
          this._setupEvents(r.event);
      },
      _getCreateEventData: function () {
        return {
          header: this.active,
          content: this.active.length ? this.active.next() : e(),
        };
      },
      _createIcons: function () {
        var t = this.options.icons;
        t &&
          (e("<span>")
            .addClass("ui-accordion-header-icon ui-icon " + t.header)
            .prependTo(this.headers),
            this.active
              .children(".ui-accordion-header-icon")
              .removeClass(t.header)
              .addClass(t.activeHeader),
            this.headers.addClass("ui-accordion-icons"));
      },
      _destroyIcons: function () {
        this.headers
          .removeClass("ui-accordion-icons")
          .children(".ui-accordion-header-icon")
          .remove();
      },
      _destroy: function () {
        var e;
        this.element
          .removeClass("ui-accordion ui-widget ui-helper-reset")
          .removeAttr("role"),
          this.headers
            .removeClass(
              "ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top"
            )
            .removeAttr("role")
            .removeAttr("aria-selected")
            .removeAttr("aria-controls")
            .removeAttr("tabIndex")
            .each(function () {
              /^ui-accordion/.test(this.id) && this.removeAttribute("id");
            }),
          this._destroyIcons(),
          (e = this.headers
            .next()
            .css("display", "")
            .removeAttr("role")
            .removeAttr("aria-expanded")
            .removeAttr("aria-hidden")
            .removeAttr("aria-labelledby")
            .removeClass(
              "ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled"
            )
            .each(function () {
              /^ui-accordion/.test(this.id) && this.removeAttribute("id");
            })),
          this.options.heightStyle !== "content" && e.css("height", "");
      },
      _setOption: function (e, t) {
        if (e === "active") {
          this._activate(t);
          return;
        }
        e === "event" &&
          (this.options.event && this._off(this.headers, this.options.event),
            this._setupEvents(t)),
          this._super(e, t),
          e === "collapsible" &&
          !t &&
          this.options.active === !1 &&
          this._activate(0),
          e === "icons" && (this._destroyIcons(), t && this._createIcons()),
          e === "disabled" &&
          this.headers
            .add(this.headers.next())
            .toggleClass("ui-state-disabled", !!t);
      },
      _keydown: function (t) {
        if (t.altKey || t.ctrlKey) return;
        var n = e.ui.keyCode,
          r = this.headers.length,
          i = this.headers.index(t.target),
          s = !1;
        switch (t.keyCode) {
          case n.RIGHT:
          case n.DOWN:
            s = this.headers[(i + 1) % r];
            break;
          case n.LEFT:
          case n.UP:
            s = this.headers[(i - 1 + r) % r];
            break;
          case n.SPACE:
          case n.ENTER:
            this._eventHandler(t);
            break;
          case n.HOME:
            s = this.headers[0];
            break;
          case n.END:
            s = this.headers[r - 1];
        }
        s &&
          (e(t.target).attr("tabIndex", -1),
            e(s).attr("tabIndex", 0),
            s.focus(),
            t.preventDefault());
      },
      _panelKeyDown: function (t) {
        t.keyCode === e.ui.keyCode.UP &&
          t.ctrlKey &&
          e(t.currentTarget).prev().focus();
      },
      refresh: function () {
        var t,
          n,
          r = this.options.heightStyle,
          i = this.element.parent();
        r === "fill"
          ? (e.support.minHeight ||
            ((n = i.css("overflow")), i.css("overflow", "hidden")),
            (t = i.height()),
            this.element.siblings(":visible").each(function () {
              var n = e(this),
                r = n.css("position");
              if (r === "absolute" || r === "fixed") return;
              t -= n.outerHeight(!0);
            }),
            n && i.css("overflow", n),
            this.headers.each(function () {
              t -= e(this).outerHeight(!0);
            }),
            this.headers
              .next()
              .each(function () {
                e(this).height(
                  Math.max(0, t - e(this).innerHeight() + e(this).height())
                );
              })
              .css("overflow", "auto"))
          : r === "auto" &&
          ((t = 0),
            this.headers
              .next()
              .each(function () {
                t = Math.max(t, e(this).css("height", "").height());
              })
              .height(t));
      },
      _activate: function (t) {
        var n = this._findActive(t)[0];
        if (n === this.active[0]) return;
        (n = n || this.active[0]),
          this._eventHandler({
            target: n,
            currentTarget: n,
            preventDefault: e.noop,
          });
      },
      _findActive: function (t) {
        return typeof t == "number" ? this.headers.eq(t) : e();
      },
      _setupEvents: function (t) {
        var n = {};
        if (!t) return;
        e.each(t.split(" "), function (e, t) {
          n[t] = "_eventHandler";
        }),
          this._on(this.headers, n);
      },
      _eventHandler: function (t) {
        var n = this.options,
          r = this.active,
          i = e(t.currentTarget),
          s = i[0] === r[0],
          o = s && n.collapsible,
          u = o ? e() : i.next(),
          a = r.next(),
          f = {
            oldHeader: r,
            oldPanel: a,
            newHeader: o ? e() : i,
            newPanel: u,
          };
        t.preventDefault();
        if (
          (s && !n.collapsible) ||
          this._trigger("beforeActivate", t, f) === !1
        )
          return;
        (n.active = o ? !1 : this.headers.index(i)),
          (this.active = s ? e() : i),
          this._toggle(f),
          r.removeClass("ui-accordion-header-active ui-state-active"),
          n.icons &&
          r
            .children(".ui-accordion-header-icon")
            .removeClass(n.icons.activeHeader)
            .addClass(n.icons.header),
          s ||
          (i
            .removeClass("ui-corner-all")
            .addClass(
              "ui-accordion-header-active ui-state-active ui-corner-top"
            ),
            n.icons &&
            i
              .children(".ui-accordion-header-icon")
              .removeClass(n.icons.header)
              .addClass(n.icons.activeHeader),
            i.next().addClass("ui-accordion-content-active"));
      },
      _toggle: function (t) {
        var n = t.newPanel,
          r = this.prevShow.length ? this.prevShow : t.oldPanel;
        this.prevShow.add(this.prevHide).stop(!0, !0),
          (this.prevShow = n),
          (this.prevHide = r),
          this.options.animate
            ? this._animate(n, r, t)
            : (r.hide(), n.show(), this._toggleComplete(t)),
          r.attr({ "aria-expanded": "false", "aria-hidden": "true" }),
          r.prev().attr("aria-selected", "false"),
          n.length && r.length
            ? r.prev().attr("tabIndex", -1)
            : n.length &&
            this.headers
              .filter(function () {
                return e(this).attr("tabIndex") === 0;
              })
              .attr("tabIndex", -1),
          n
            .attr({ "aria-expanded": "true", "aria-hidden": "false" })
            .prev()
            .attr({ "aria-selected": "true", tabIndex: 0 });
      },
      _animate: function (e, t, n) {
        var s,
          o,
          u,
          a = this,
          f = 0,
          l = e.length && (!t.length || e.index() < t.index()),
          c = this.options.animate || {},
          h = (l && c.down) || c,
          p = function () {
            a._toggleComplete(n);
          };
        typeof h == "number" && (u = h),
          typeof h == "string" && (o = h),
          (o = o || h.easing || c.easing),
          (u = u || h.duration || c.duration);
        if (!t.length) return e.animate(i, u, o, p);
        if (!e.length) return t.animate(r, u, o, p);
        (s = e.show().outerHeight()),
          t.animate(r, {
            duration: u,
            easing: o,
            step: function (e, t) {
              t.now = Math.round(e);
            },
          }),
          e.hide().animate(i, {
            duration: u,
            easing: o,
            complete: p,
            step: function (e, n) {
              (n.now = Math.round(e)),
                n.prop !== "height"
                  ? (f += n.now)
                  : a.options.heightStyle !== "content" &&
                  ((n.now = Math.round(s - t.outerHeight() - f)), (f = 0));
            },
          });
      },
      _toggleComplete: function (e) {
        var t = e.oldPanel;
        t
          .removeClass("ui-accordion-content-active")
          .prev()
          .removeClass("ui-corner-top")
          .addClass("ui-corner-all"),
          t.length && (t.parent()[0].className = t.parent()[0].className),
          this._trigger("activate", null, e);
      },
    }),
    e.uiBackCompat !== !1 &&
    ((function (e, t) {
      e.extend(t.options, {
        navigation: !1,
        navigationFilter: function () {
          return this.href.toLowerCase() === location.href.toLowerCase();
        },
      });
      var n = t._create;
      t._create = function () {
        if (this.options.navigation) {
          var t = this,
            r = this.element.find(this.options.header),
            i = r.next(),
            s = r.add(i).find("a").filter(this.options.navigationFilter)[0];
          s &&
            r.add(i).each(function (n) {
              if (e.contains(this, s))
                return (t.options.active = Math.floor(n / 2)), !1;
            });
        }
        n.call(this);
      };
    })(jQuery, jQuery.ui.accordion.prototype),
      (function (e, t) {
        e.extend(t.options, {
          heightStyle: null,
          autoHeight: !0,
          clearStyle: !1,
          fillSpace: !1,
        });
        var n = t._create,
          r = t._setOption;
        e.extend(t, {
          _create: function () {
            (this.options.heightStyle =
              this.options.heightStyle || this._mergeHeightStyle()),
              n.call(this);
          },
          _setOption: function (e) {
            if (e === "autoHeight" || e === "clearStyle" || e === "fillSpace")
              this.options.heightStyle = this._mergeHeightStyle();
            r.apply(this, arguments);
          },
          _mergeHeightStyle: function () {
            var e = this.options;
            if (e.fillSpace) return "fill";
            if (e.clearStyle) return "content";
            if (e.autoHeight) return "auto";
          },
        });
      })(jQuery, jQuery.ui.accordion.prototype),
      (function (e, t) {
        e.extend(t.options.icons, {
          activeHeader: null,
          headerSelected: "ui-icon-triangle-1-s",
        });
        var n = t._createIcons;
        t._createIcons = function () {
          this.options.icons &&
            (this.options.icons.activeHeader =
              this.options.icons.activeHeader ||
              this.options.icons.headerSelected),
            n.call(this);
        };
      })(jQuery, jQuery.ui.accordion.prototype),
      (function (e, t) {
        t.activate = t._activate;
        var n = t._findActive;
        t._findActive = function (e) {
          return (
            e === -1 && (e = !1),
            e &&
            typeof e != "number" &&
            ((e = this.headers.index(this.headers.filter(e))),
              e === -1 && (e = !1)),
            n.call(this, e)
          );
        };
      })(jQuery, jQuery.ui.accordion.prototype),
      (jQuery.ui.accordion.prototype.resize =
        jQuery.ui.accordion.prototype.refresh),
      (function (e, t) {
        e.extend(t.options, { change: null, changestart: null });
        var n = t._trigger;
        t._trigger = function (e, t, r) {
          var i = n.apply(this, arguments);
          return i
            ? (e === "beforeActivate"
              ? (i = n.call(this, "changestart", t, {
                oldHeader: r.oldHeader,
                oldContent: r.oldPanel,
                newHeader: r.newHeader,
                newContent: r.newPanel,
              }))
              : e === "activate" &&
              (i = n.call(this, "change", t, {
                oldHeader: r.oldHeader,
                oldContent: r.oldPanel,
                newHeader: r.newHeader,
                newContent: r.newPanel,
              })),
              i)
            : !1;
        };
      })(jQuery, jQuery.ui.accordion.prototype),
      (function (e, t) {
        e.extend(t.options, { animate: null, animated: "slide" });
        var n = t._create;
        t._create = function () {
          var e = this.options;
          e.animate === null &&
            (e.animated
              ? e.animated === "slide"
                ? (e.animate = 300)
                : e.animated === "bounceslide"
                  ? (e.animate = {
                    duration: 200,
                    down: { easing: "easeOutBounce", duration: 1e3 },
                  })
                  : (e.animate = e.animated)
              : (e.animate = !1)),
            n.call(this);
        };
      })(jQuery, jQuery.ui.accordion.prototype));
})(jQuery);
(function (e, t) {
  var n = 0;
  e.widget("ui.autocomplete", {
    version: "1.9.2",
    defaultElement: "<input>",
    options: {
      appendTo: "body",
      autoFocus: !1,
      delay: 300,
      minLength: 1,
      position: { my: "left top", at: "left bottom", collision: "none" },
      source: null,
      change: null,
      close: null,
      focus: null,
      open: null,
      response: null,
      search: null,
      select: null,
    },
    pending: 0,
    _create: function () {
      var t, n, r;
      (this.isMultiLine = this._isMultiLine()),
        (this.valueMethod =
          this.element[this.element.is("input,textarea") ? "val" : "text"]),
        (this.isNewMenu = !0),
        this.element
          .addClass("ui-autocomplete-input")
          .attr("autocomplete", "off"),
        this._on(this.element, {
          keydown: function (i) {
            if (this.element.prop("readOnly")) {
              (t = !0), (r = !0), (n = !0);
              return;
            }
            (t = !1), (r = !1), (n = !1);
            var s = e.ui.keyCode;
            switch (i.keyCode) {
              case s.PAGE_UP:
                (t = !0), this._move("previousPage", i);
                break;
              case s.PAGE_DOWN:
                (t = !0), this._move("nextPage", i);
                break;
              case s.UP:
                (t = !0), this._keyEvent("previous", i);
                break;
              case s.DOWN:
                (t = !0), this._keyEvent("next", i);
                break;
              case s.ENTER:
              case s.NUMPAD_ENTER:
                this.menu.active &&
                  ((t = !0), i.preventDefault(), this.menu.select(i));
                break;
              case s.TAB:
                this.menu.active && this.menu.select(i);
                break;
              case s.ESCAPE:
                this.menu.element.is(":visible") &&
                  (this._value(this.term), this.close(i), i.preventDefault());
                break;
              default:
                (n = !0), this._searchTimeout(i);
            }
          },
          keypress: function (r) {
            if (t) {
              (t = !1), r.preventDefault();
              return;
            }
            if (n) return;
            var i = e.ui.keyCode;
            switch (r.keyCode) {
              case i.PAGE_UP:
                this._move("previousPage", r);
                break;
              case i.PAGE_DOWN:
                this._move("nextPage", r);
                break;
              case i.UP:
                this._keyEvent("previous", r);
                break;
              case i.DOWN:
                this._keyEvent("next", r);
            }
          },
          input: function (e) {
            if (r) {
              (r = !1), e.preventDefault();
              return;
            }
            this._searchTimeout(e);
          },
          focus: function () {
            (this.selectedItem = null), (this.previous = this._value());
          },
          blur: function (e) {
            if (this.cancelBlur) {
              delete this.cancelBlur;
              return;
            }
            clearTimeout(this.searching), this.close(e), this._change(e);
          },
        }),
        this._initSource(),
        (this.menu = e("<ul>")
          .addClass("ui-autocomplete")
          .appendTo(this.document.find(this.options.appendTo || "body")[0])
          .menu({ input: e(), role: null })
          .zIndex(this.element.zIndex() + 1)
          .hide()
          .data("menu")),
        this._on(this.menu.element, {
          mousedown: function (t) {
            t.preventDefault(),
              (this.cancelBlur = !0),
              this._delay(function () {
                delete this.cancelBlur;
              });
            var n = this.menu.element[0];
            e(t.target).closest(".ui-menu-item").length ||
              this._delay(function () {
                var t = this;
                this.document.one("mousedown", function (r) {
                  r.target !== t.element[0] &&
                    r.target !== n &&
                    !e.contains(n, r.target) &&
                    t.close();
                });
              });
          },
          menufocus: function (t, n) {
            if (this.isNewMenu) {
              this.isNewMenu = !1;
              if (t.originalEvent && /^mouse/.test(t.originalEvent.type)) {
                this.menu.blur(),
                  this.document.one("mousemove", function () {
                    e(t.target).trigger(t.originalEvent);
                  });
                return;
              }
            }
            var r =
              n.item.data("ui-autocomplete-item") ||
              n.item.data("item.autocomplete");
            !1 !== this._trigger("focus", t, { item: r })
              ? t.originalEvent &&
              /^key/.test(t.originalEvent.type) &&
              this._value(r.value)
              : this.liveRegion.text(r.value);
          },
          menuselect: function (e, t) {
            var n =
              t.item.data("ui-autocomplete-item") ||
              t.item.data("item.autocomplete"),
              r = this.previous;
            this.element[0] !== this.document[0].activeElement &&
              (this.element.focus(),
                (this.previous = r),
                this._delay(function () {
                  (this.previous = r), (this.selectedItem = n);
                })),
              !1 !== this._trigger("select", e, { item: n }) &&
              this._value(n.value),
              (this.term = this._value()),
              this.close(e),
              (this.selectedItem = n);
          },
        }),
        (this.liveRegion = e("<span>", {
          role: "status",
          "aria-live": "polite",
        })
          .addClass("ui-helper-hidden-accessible")
          .insertAfter(this.element)),
        e.fn.bgiframe && this.menu.element.bgiframe(),
        this._on(this.window, {
          beforeunload: function () {
            this.element.removeAttr("autocomplete");
          },
        });
    },
    _destroy: function () {
      clearTimeout(this.searching),
        this.element
          .removeClass("ui-autocomplete-input")
          .removeAttr("autocomplete"),
        this.menu.element.remove(),
        this.liveRegion.remove();
    },
    _setOption: function (e, t) {
      this._super(e, t),
        e === "source" && this._initSource(),
        e === "appendTo" &&
        this.menu.element.appendTo(this.document.find(t || "body")[0]),
        e === "disabled" && t && this.xhr && this.xhr.abort();
    },
    _isMultiLine: function () {
      return this.element.is("textarea")
        ? !0
        : this.element.is("input")
          ? !1
          : this.element.prop("isContentEditable");
    },
    _initSource: function () {
      var t,
        n,
        r = this;
      e.isArray(this.options.source)
        ? ((t = this.options.source),
          (this.source = function (n, r) {
            r(e.ui.autocomplete.filter(t, n.term));
          }))
        : typeof this.options.source == "string"
          ? ((n = this.options.source),
            (this.source = function (t, i) {
              r.xhr && r.xhr.abort(),
                (r.xhr = e.ajax({
                  url: n,
                  data: t,
                  dataType: "json",
                  success: function (e) {
                    i(e);
                  },
                  error: function () {
                    i([]);
                  },
                }));
            }))
          : (this.source = this.options.source);
    },
    _searchTimeout: function (e) {
      clearTimeout(this.searching),
        (this.searching = this._delay(function () {
          this.term !== this._value() &&
            ((this.selectedItem = null), this.search(null, e));
        }, this.options.delay));
    },
    search: function (e, t) {
      (e = e != null ? e : this._value()), (this.term = this._value());
      if (e.length < this.options.minLength) return this.close(t);
      if (this._trigger("search", t) === !1) return;
      return this._search(e);
    },
    _search: function (e) {
      this.pending++,
        this.element.addClass("ui-autocomplete-loading"),
        (this.cancelSearch = !1),
        this.source({ term: e }, this._response());
    },
    _response: function () {
      var e = this,
        t = ++n;
      return function (r) {
        t === n && e.__response(r),
          e.pending--,
          e.pending || e.element.removeClass("ui-autocomplete-loading");
      };
    },
    __response: function (e) {
      e && (e = this._normalize(e)),
        this._trigger("response", null, { content: e }),
        !this.options.disabled && e && e.length && !this.cancelSearch
          ? (this._suggest(e), this._trigger("open"))
          : this._close();
    },
    close: function (e) {
      (this.cancelSearch = !0), this._close(e);
    },
    _close: function (e) {
      this.menu.element.is(":visible") &&
        (this.menu.element.hide(),
          this.menu.blur(),
          (this.isNewMenu = !0),
          this._trigger("close", e));
    },
    _change: function (e) {
      this.previous !== this._value() &&
        this._trigger("change", e, { item: this.selectedItem });
    },
    _normalize: function (t) {
      return t.length && t[0].label && t[0].value
        ? t
        : e.map(t, function (t) {
          return typeof t == "string"
            ? { label: t, value: t }
            : e.extend(
              { label: t.label || t.value, value: t.value || t.label },
              t
            );
        });
    },
    _suggest: function (t) {
      var n = this.menu.element.empty().zIndex(this.element.zIndex() + 1);
      this._renderMenu(n, t),
        this.menu.refresh(),
        n.show(),
        this._resizeMenu(),
        n.position(e.extend({ of: this.element }, this.options.position)),
        this.options.autoFocus && this.menu.next();
    },
    _resizeMenu: function () {
      var e = this.menu.element;
      e.outerWidth(
        Math.max(e.width("").outerWidth() + 1, this.element.outerWidth())
      );
    },
    _renderMenu: function (t, n) {
      var r = this;
      e.each(n, function (e, n) {
        r._renderItemData(t, n);
      });
    },
    _renderItemData: function (e, t) {
      return this._renderItem(e, t).data("ui-autocomplete-item", t);
    },
    _renderItem: function (t, n) {
      return e("<li>").append(e("<a>").text(n.label)).appendTo(t);
    },
    _move: function (e, t) {
      if (!this.menu.element.is(":visible")) {
        this.search(null, t);
        return;
      }
      if (
        (this.menu.isFirstItem() && /^previous/.test(e)) ||
        (this.menu.isLastItem() && /^next/.test(e))
      ) {
        this._value(this.term), this.menu.blur();
        return;
      }
      this.menu[e](t);
    },
    widget: function () {
      return this.menu.element;
    },
    _value: function () {
      return this.valueMethod.apply(this.element, arguments);
    },
    _keyEvent: function (e, t) {
      if (!this.isMultiLine || this.menu.element.is(":visible"))
        this._move(e, t), t.preventDefault();
    },
  }),
    e.extend(e.ui.autocomplete, {
      escapeRegex: function (e) {
        return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&");
      },
      filter: function (t, n) {
        var r = new RegExp(e.ui.autocomplete.escapeRegex(n), "i");
        return e.grep(t, function (e) {
          return r.test(e.label || e.value || e);
        });
      },
    }),
    e.widget("ui.autocomplete", e.ui.autocomplete, {
      options: {
        messages: {
          noResults: "No search results.",
          results: function (e) {
            return (
              e +
              (e > 1 ? " results are" : " result is") +
              " available, use up and down arrow keys to navigate."
            );
          },
        },
      },
      __response: function (e) {
        var t;
        this._superApply(arguments);
        if (this.options.disabled || this.cancelSearch) return;
        e && e.length
          ? (t = this.options.messages.results(e.length))
          : (t = this.options.messages.noResults),
          this.liveRegion.text(t);
      },
    });
})(jQuery);
(function (e, t) {
  var n,
    r,
    i,
    s,
    o = "ui-button ui-widget ui-state-default ui-corner-all",
    u = "ui-state-hover ui-state-active ",
    a =
      "ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",
    f = function () {
      var t = e(this).find(":ui-button");
      setTimeout(function () {
        t.button("refresh");
      }, 1);
    },
    l = function (t) {
      var n = t.name,
        r = t.form,
        i = e([]);
      return (
        n &&
        (r
          ? (i = e(r).find("[name='" + n + "']"))
          : (i = e("[name='" + n + "']", t.ownerDocument).filter(function () {
            return !this.form;
          }))),
        i
      );
    };
  e.widget("ui.button", {
    version: "1.9.2",
    defaultElement: "<button>",
    options: {
      disabled: null,
      text: !0,
      label: null,
      icons: { primary: null, secondary: null },
    },
    _create: function () {
      this.element
        .closest("form")
        .unbind("reset" + this.eventNamespace)
        .bind("reset" + this.eventNamespace, f),
        typeof this.options.disabled != "boolean"
          ? (this.options.disabled = !!this.element.prop("disabled"))
          : this.element.prop("disabled", this.options.disabled),
        this._determineButtonType(),
        (this.hasTitle = !!this.buttonElement.attr("title"));
      var t = this,
        u = this.options,
        a = this.type === "checkbox" || this.type === "radio",
        c = a ? "" : "ui-state-active",
        h = "ui-state-focus";
      u.label === null &&
        (u.label =
          this.type === "input"
            ? this.buttonElement.val()
            : this.buttonElement.html()),
        this._hoverable(this.buttonElement),
        this.buttonElement
          .addClass(o)
          .attr("role", "button")
          .bind("mouseenter" + this.eventNamespace, function () {
            if (u.disabled) return;
            this === n && e(this).addClass("ui-state-active");
          })
          .bind("mouseleave" + this.eventNamespace, function () {
            if (u.disabled) return;
            e(this).removeClass(c);
          })
          .bind("click" + this.eventNamespace, function (e) {
            u.disabled && (e.preventDefault(), e.stopImmediatePropagation());
          }),
        this.element
          .bind("focus" + this.eventNamespace, function () {
            t.buttonElement.addClass(h);
          })
          .bind("blur" + this.eventNamespace, function () {
            t.buttonElement.removeClass(h);
          }),
        a &&
        (this.element.bind("change" + this.eventNamespace, function () {
          if (s) return;
          t.refresh();
        }),
          this.buttonElement
            .bind("mousedown" + this.eventNamespace, function (e) {
              if (u.disabled) return;
              (s = !1), (r = e.pageX), (i = e.pageY);
            })
            .bind("mouseup" + this.eventNamespace, function (e) {
              if (u.disabled) return;
              if (r !== e.pageX || i !== e.pageY) s = !0;
            })),
        this.type === "checkbox"
          ? this.buttonElement.bind("click" + this.eventNamespace, function () {
            if (u.disabled || s) return !1;
            e(this).toggleClass("ui-state-active"),
              t.buttonElement.attr("aria-pressed", t.element[0].checked);
          })
          : this.type === "radio"
            ? this.buttonElement.bind("click" + this.eventNamespace, function () {
              if (u.disabled || s) return !1;
              e(this).addClass("ui-state-active"),
                t.buttonElement.attr("aria-pressed", "true");
              var n = t.element[0];
              l(n)
                .not(n)
                .map(function () {
                  return e(this).button("widget")[0];
                })
                .removeClass("ui-state-active")
                .attr("aria-pressed", "false");
            })
            : (this.buttonElement
              .bind("mousedown" + this.eventNamespace, function () {
                if (u.disabled) return !1;
                e(this).addClass("ui-state-active"),
                  (n = this),
                  t.document.one("mouseup", function () {
                    n = null;
                  });
              })
              .bind("mouseup" + this.eventNamespace, function () {
                if (u.disabled) return !1;
                e(this).removeClass("ui-state-active");
              })
              .bind("keydown" + this.eventNamespace, function (t) {
                if (u.disabled) return !1;
                (t.keyCode === e.ui.keyCode.SPACE ||
                  t.keyCode === e.ui.keyCode.ENTER) &&
                  e(this).addClass("ui-state-active");
              })
              .bind("keyup" + this.eventNamespace, function () {
                e(this).removeClass("ui-state-active");
              }),
              this.buttonElement.is("a") &&
              this.buttonElement.keyup(function (t) {
                t.keyCode === e.ui.keyCode.SPACE && e(this).click();
              })),
        this._setOption("disabled", u.disabled),
        this._resetButton();
    },
    _determineButtonType: function () {
      var e, t, n;
      this.element.is("[type=checkbox]")
        ? (this.type = "checkbox")
        : this.element.is("[type=radio]")
          ? (this.type = "radio")
          : this.element.is("input")
            ? (this.type = "input")
            : (this.type = "button"),
        this.type === "checkbox" || this.type === "radio"
          ? ((e = this.element.parents().last()),
            (t = "label[for='" + this.element.attr("id") + "']"),
            (this.buttonElement = e.find(t)),
            this.buttonElement.length ||
            ((e = e.length ? e.siblings() : this.element.siblings()),
              (this.buttonElement = e.filter(t)),
              this.buttonElement.length || (this.buttonElement = e.find(t))),
            this.element.addClass("ui-helper-hidden-accessible"),
            (n = this.element.is(":checked")),
            n && this.buttonElement.addClass("ui-state-active"),
            this.buttonElement.prop("aria-pressed", n))
          : (this.buttonElement = this.element);
    },
    widget: function () {
      return this.buttonElement;
    },
    _destroy: function () {
      this.element.removeClass("ui-helper-hidden-accessible"),
        this.buttonElement
          .removeClass(o + " " + u + " " + a)
          .removeAttr("role")
          .removeAttr("aria-pressed")
          .html(this.buttonElement.find(".ui-button-text").html()),
        this.hasTitle || this.buttonElement.removeAttr("title");
    },
    _setOption: function (e, t) {
      this._super(e, t);
      if (e === "disabled") {
        t
          ? this.element.prop("disabled", !0)
          : this.element.prop("disabled", !1);
        return;
      }
      this._resetButton();
    },
    refresh: function () {
      var t = this.element.is("input, button")
        ? this.element.is(":disabled")
        : this.element.hasClass("ui-button-disabled");
      t !== this.options.disabled && this._setOption("disabled", t),
        this.type === "radio"
          ? l(this.element[0]).each(function () {
            e(this).is(":checked")
              ? e(this)
                .button("widget")
                .addClass("ui-state-active")
                .attr("aria-pressed", "true")
              : e(this)
                .button("widget")
                .removeClass("ui-state-active")
                .attr("aria-pressed", "false");
          })
          : this.type === "checkbox" &&
          (this.element.is(":checked")
            ? this.buttonElement
              .addClass("ui-state-active")
              .attr("aria-pressed", "true")
            : this.buttonElement
              .removeClass("ui-state-active")
              .attr("aria-pressed", "false"));
    },
    _resetButton: function () {
      if (this.type === "input") {
        this.options.label && this.element.val(this.options.label);
        return;
      }
      var t = this.buttonElement.removeClass(a),
        n = e("<span></span>", this.document[0])
          .addClass("ui-button-text")
          .html(this.options.label)
          .appendTo(t.empty())
          .text(),
        r = this.options.icons,
        i = r.primary && r.secondary,
        s = [];
      r.primary || r.secondary
        ? (this.options.text &&
          s.push(
            "ui-button-text-icon" +
            (i ? "s" : r.primary ? "-primary" : "-secondary")
          ),
          r.primary &&
          t.prepend(
            "<span class='ui-button-icon-primary ui-icon " +
            r.primary +
            "'></span>"
          ),
          r.secondary &&
          t.append(
            "<span class='ui-button-icon-secondary ui-icon " +
            r.secondary +
            "'></span>"
          ),
          this.options.text ||
          (s.push(i ? "ui-button-icons-only" : "ui-button-icon-only"),
            this.hasTitle || t.attr("title", e.trim(n))))
        : s.push("ui-button-text-only"),
        t.addClass(s.join(" "));
    },
  }),
    e.widget("ui.buttonset", {
      version: "1.9.2",
      options: {
        items:
          "button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(button)",
      },
      _create: function () {
        this.element.addClass("ui-buttonset");
      },
      _init: function () {
        this.refresh();
      },
      _setOption: function (e, t) {
        e === "disabled" && this.buttons.button("option", e, t),
          this._super(e, t);
      },
      refresh: function () {
        var t = this.element.css("direction") === "rtl";
        this.buttons = this.element
          .find(this.options.items)
          .filter(":ui-button")
          .button("refresh")
          .end()
          .not(":ui-button")
          .button()
          .end()
          .map(function () {
            return e(this).button("widget")[0];
          })
          .removeClass("ui-corner-all ui-corner-left ui-corner-right")
          .filter(":first")
          .addClass(t ? "ui-corner-right" : "ui-corner-left")
          .end()
          .filter(":last")
          .addClass(t ? "ui-corner-left" : "ui-corner-right")
          .end()
          .end();
      },
      _destroy: function () {
        this.element.removeClass("ui-buttonset"),
          this.buttons
            .map(function () {
              return e(this).button("widget")[0];
            })
            .removeClass("ui-corner-left ui-corner-right")
            .end()
            .button("destroy");
      },
    });
})(jQuery);
(function ($, undefined) {
  function Datepicker() {
    (this.debug = !1),
      (this._curInst = null),
      (this._keyEvent = !1),
      (this._disabledInputs = []),
      (this._datepickerShowing = !1),
      (this._inDialog = !1),
      (this._mainDivId = "ui-datepicker-div"),
      (this._inlineClass = "ui-datepicker-inline"),
      (this._appendClass = "ui-datepicker-append"),
      (this._triggerClass = "ui-datepicker-trigger"),
      (this._dialogClass = "ui-datepicker-dialog"),
      (this._disableClass = "ui-datepicker-disabled"),
      (this._unselectableClass = "ui-datepicker-unselectable"),
      (this._currentClass = "ui-datepicker-current-day"),
      (this._dayOverClass = "ui-datepicker-days-cell-over"),
      (this.regional = []),
      (this.regional[""] = {
        closeText: "Done",
        prevText: "Prev",
        nextText: "Next",
        currentText: "Today",
        monthNames: [
          "January",
          "February",
          "March",
          "April",
          "May",
          "June",
          "July",
          "August",
          "September",
          "October",
          "November",
          "December",
        ],
        monthNamesShort: [
          "Jan",
          "Feb",
          "Mar",
          "Apr",
          "May",
          "Jun",
          "Jul",
          "Aug",
          "Sep",
          "Oct",
          "Nov",
          "Dec",
        ],
        dayNames: [
          "Sunday",
          "Monday",
          "Tuesday",
          "Wednesday",
          "Thursday",
          "Friday",
          "Saturday",
        ],
        dayNamesShort: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
        dayNamesMin: ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"],
        weekHeader: "Wk",
        dateFormat: "mm/dd/yy",
        firstDay: 0,
        isRTL: !1,
        showMonthAfterYear: !1,
        yearSuffix: "",
      }),
      (this._defaults = {
        showOn: "focus",
        showAnim: "fadeIn",
        showOptions: {},
        defaultDate: null,
        appendText: "",
        buttonText: "...",
        buttonImage: "",
        buttonImageOnly: !1,
        hideIfNoPrevNext: !1,
        navigationAsDateFormat: !1,
        gotoCurrent: !1,
        changeMonth: !1,
        changeYear: !1,
        yearRange: "c-10:c+10",
        showOtherMonths: !1,
        selectOtherMonths: !1,
        showWeek: !1,
        calculateWeek: this.iso8601Week,
        shortYearCutoff: "+10",
        minDate: null,
        maxDate: null,
        duration: "fast",
        beforeShowDay: null,
        beforeShow: null,
        onSelect: null,
        onChangeMonthYear: null,
        onClose: null,
        numberOfMonths: 1,
        showCurrentAtPos: 0,
        stepMonths: 1,
        stepBigMonths: 12,
        altField: "",
        altFormat: "",
        constrainInput: !0,
        showButtonPanel: !1,
        autoSize: !1,
        disabled: !1,
      }),
      $.extend(this._defaults, this.regional[""]),
      (this.dpDiv = bindHover(
        $(
          '<div id="' +
          this._mainDivId +
          '" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'
        )
      ));
  }
  function bindHover(e) {
    var t =
      "button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";
    return e
      .delegate(t, "mouseout", function () {
        $(this).removeClass("ui-state-hover"),
          this.className.indexOf("ui-datepicker-prev") != -1 &&
          $(this).removeClass("ui-datepicker-prev-hover"),
          this.className.indexOf("ui-datepicker-next") != -1 &&
          $(this).removeClass("ui-datepicker-next-hover");
      })
      .delegate(t, "mouseover", function () {
        $.datepicker._isDisabledDatepicker(
          instActive.inline ? e.parent()[0] : instActive.input[0]
        ) ||
          ($(this)
            .parents(".ui-datepicker-calendar")
            .find("a")
            .removeClass("ui-state-hover"),
            $(this).addClass("ui-state-hover"),
            this.className.indexOf("ui-datepicker-prev") != -1 &&
            $(this).addClass("ui-datepicker-prev-hover"),
            this.className.indexOf("ui-datepicker-next") != -1 &&
            $(this).addClass("ui-datepicker-next-hover"));
      });
  }
  function extendRemove(e, t) {
    $.extend(e, t);
    for (var n in t) if (t[n] == null || t[n] == undefined) e[n] = t[n];
    return e;
  }
  $.extend($.ui, { datepicker: { version: "1.9.2" } });
  var PROP_NAME = "datepicker",
    dpuuid = new Date().getTime(),
    instActive;
  $.extend(Datepicker.prototype, {
    markerClassName: "hasDatepicker",
    maxRows: 4,
    log: function () {
      this.debug && console.log.apply("", arguments);
    },
    _widgetDatepicker: function () {
      return this.dpDiv;
    },
    setDefaults: function (e) {
      return extendRemove(this._defaults, e || {}), this;
    },
    _attachDatepicker: function (target, settings) {
      var inlineSettings = null;
      for (var attrName in this._defaults) {
        var attrValue = target.getAttribute("date:" + attrName);
        if (attrValue) {
          inlineSettings = inlineSettings || {};
          try {
            inlineSettings[attrName] = eval(attrValue);
          } catch (err) {
            inlineSettings[attrName] = attrValue;
          }
        }
      }
      var nodeName = target.nodeName.toLowerCase(),
        inline = nodeName == "div" || nodeName == "span";
      target.id || ((this.uuid += 1), (target.id = "dp" + this.uuid));
      var inst = this._newInst($(target), inline);
      (inst.settings = $.extend({}, settings || {}, inlineSettings || {})),
        nodeName == "input"
          ? this._connectDatepicker(target, inst)
          : inline && this._inlineDatepicker(target, inst);
    },
    _newInst: function (e, t) {
      var n = e[0].id.replace(/([^A-Za-z0-9_-])/g, "\\\\$1");
      return {
        id: n,
        input: e,
        selectedDay: 0,
        selectedMonth: 0,
        selectedYear: 0,
        drawMonth: 0,
        drawYear: 0,
        inline: t,
        dpDiv: t
          ? bindHover(
            $(
              '<div class="' +
              this._inlineClass +
              ' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'
            )
          )
          : this.dpDiv,
      };
    },
    _connectDatepicker: function (e, t) {
      var n = $(e);
      (t.append = $([])), (t.trigger = $([]));
      if (n.hasClass(this.markerClassName)) return;
      this._attachments(n, t),
        n
          .addClass(this.markerClassName)
          .keydown(this._doKeyDown)
          .keypress(this._doKeyPress)
          .keyup(this._doKeyUp)
          .bind("setData.datepicker", function (e, n, r) {
            t.settings[n] = r;
          })
          .bind("getData.datepicker", function (e, n) {
            return this._get(t, n);
          }),
        this._autoSize(t),
        $.data(e, PROP_NAME, t),
        t.settings.disabled && this._disableDatepicker(e);
    },
    _attachments: function (e, t) {
      var n = this._get(t, "appendText"),
        r = this._get(t, "isRTL");
      t.append && t.append.remove(),
        n &&
        ((t.append = $(
          '<span class="' + this._appendClass + '">' + n + "</span>"
        )),
          e[r ? "before" : "after"](t.append)),
        e.unbind("focus", this._showDatepicker),
        t.trigger && t.trigger.remove();
      var i = this._get(t, "showOn");
      (i == "focus" || i == "both") && e.focus(this._showDatepicker);
      if (i == "button" || i == "both") {
        var s = this._get(t, "buttonText"),
          o = this._get(t, "buttonImage");
        (t.trigger = $(
          this._get(t, "buttonImageOnly")
            ? $("<img/>")
              .addClass(this._triggerClass)
              .attr({ src: o, alt: s, title: s })
            : $('<button type="button"></button>')
              .addClass(this._triggerClass)
              .html(
                o == "" ? s : $("<img/>").attr({ src: o, alt: s, title: s })
              )
        )),
          e[r ? "before" : "after"](t.trigger),
          t.trigger.click(function () {
            return (
              $.datepicker._datepickerShowing && $.datepicker._lastInput == e[0]
                ? $.datepicker._hideDatepicker()
                : $.datepicker._datepickerShowing &&
                  $.datepicker._lastInput != e[0]
                  ? ($.datepicker._hideDatepicker(),
                    $.datepicker._showDatepicker(e[0]))
                  : $.datepicker._showDatepicker(e[0]),
              !1
            );
          });
      }
    },
    _autoSize: function (e) {
      if (this._get(e, "autoSize") && !e.inline) {
        var t = new Date(2009, 11, 20),
          n = this._get(e, "dateFormat");
        if (n.match(/[DM]/)) {
          var r = function (e) {
            var t = 0,
              n = 0;
            for (var r = 0; r < e.length; r++)
              e[r].length > t && ((t = e[r].length), (n = r));
            return n;
          };
          t.setMonth(
            r(this._get(e, n.match(/MM/) ? "monthNames" : "monthNamesShort"))
          ),
            t.setDate(
              r(this._get(e, n.match(/DD/) ? "dayNames" : "dayNamesShort")) +
              20 -
              t.getDay()
            );
        }
        e.input.attr("size", this._formatDate(e, t).length);
      }
    },
    _inlineDatepicker: function (e, t) {
      var n = $(e);
      if (n.hasClass(this.markerClassName)) return;
      n
        .addClass(this.markerClassName)
        .append(t.dpDiv)
        .bind("setData.datepicker", function (e, n, r) {
          t.settings[n] = r;
        })
        .bind("getData.datepicker", function (e, n) {
          return this._get(t, n);
        }),
        $.data(e, PROP_NAME, t),
        this._setDate(t, this._getDefaultDate(t), !0),
        this._updateDatepicker(t),
        this._updateAlternate(t),
        t.settings.disabled && this._disableDatepicker(e),
        t.dpDiv.css("display", "block");
    },
    _dialogDatepicker: function (e, t, n, r, i) {
      var s = this._dialogInst;
      if (!s) {
        this.uuid += 1;
        var o = "dp" + this.uuid;
        (this._dialogInput = $(
          '<input type="text" id="' +
          o +
          '" style="position: absolute; top: -100px; width: 0px;"/>'
        )),
          this._dialogInput.keydown(this._doKeyDown),
          $("body").append(this._dialogInput),
          (s = this._dialogInst = this._newInst(this._dialogInput, !1)),
          (s.settings = {}),
          $.data(this._dialogInput[0], PROP_NAME, s);
      }
      extendRemove(s.settings, r || {}),
        (t = t && t.constructor == Date ? this._formatDate(s, t) : t),
        this._dialogInput.val(t),
        (this._pos = i ? (i.length ? i : [i.pageX, i.pageY]) : null);
      if (!this._pos) {
        var u = document.documentElement.clientWidth,
          a = document.documentElement.clientHeight,
          f = document.documentElement.scrollLeft || document.body.scrollLeft,
          l = document.documentElement.scrollTop || document.body.scrollTop;
        this._pos = [u / 2 - 100 + f, a / 2 - 150 + l];
      }
      return (
        this._dialogInput
          .css("left", this._pos[0] + 20 + "px")
          .css("top", this._pos[1] + "px"),
        (s.settings.onSelect = n),
        (this._inDialog = !0),
        this.dpDiv.addClass(this._dialogClass),
        this._showDatepicker(this._dialogInput[0]),
        $.blockUI && $.blockUI(this.dpDiv),
        $.data(this._dialogInput[0], PROP_NAME, s),
        this
      );
    },
    _destroyDatepicker: function (e) {
      var t = $(e),
        n = $.data(e, PROP_NAME);
      if (!t.hasClass(this.markerClassName)) return;
      var r = e.nodeName.toLowerCase();
      $.removeData(e, PROP_NAME),
        r == "input"
          ? (n.append.remove(),
            n.trigger.remove(),
            t
              .removeClass(this.markerClassName)
              .unbind("focus", this._showDatepicker)
              .unbind("keydown", this._doKeyDown)
              .unbind("keypress", this._doKeyPress)
              .unbind("keyup", this._doKeyUp))
          : (r == "div" || r == "span") &&
          t.removeClass(this.markerClassName).empty();
    },
    _enableDatepicker: function (e) {
      var t = $(e),
        n = $.data(e, PROP_NAME);
      if (!t.hasClass(this.markerClassName)) return;
      var r = e.nodeName.toLowerCase();
      if (r == "input")
        (e.disabled = !1),
          n.trigger
            .filter("button")
            .each(function () {
              this.disabled = !1;
            })
            .end()
            .filter("img")
            .css({ opacity: "1.0", cursor: "" });
      else if (r == "div" || r == "span") {
        var i = t.children("." + this._inlineClass);
        i.children().removeClass("ui-state-disabled"),
          i
            .find("select.ui-datepicker-month, select.ui-datepicker-year")
            .prop("disabled", !1);
      }
      this._disabledInputs = $.map(this._disabledInputs, function (t) {
        return t == e ? null : t;
      });
    },
    _disableDatepicker: function (e) {
      var t = $(e),
        n = $.data(e, PROP_NAME);
      if (!t.hasClass(this.markerClassName)) return;
      var r = e.nodeName.toLowerCase();
      if (r == "input")
        (e.disabled = !0),
          n.trigger
            .filter("button")
            .each(function () {
              this.disabled = !0;
            })
            .end()
            .filter("img")
            .css({ opacity: "0.5", cursor: "default" });
      else if (r == "div" || r == "span") {
        var i = t.children("." + this._inlineClass);
        i.children().addClass("ui-state-disabled"),
          i
            .find("select.ui-datepicker-month, select.ui-datepicker-year")
            .prop("disabled", !0);
      }
      (this._disabledInputs = $.map(this._disabledInputs, function (t) {
        return t == e ? null : t;
      })),
        (this._disabledInputs[this._disabledInputs.length] = e);
    },
    _isDisabledDatepicker: function (e) {
      if (!e) return !1;
      for (var t = 0; t < this._disabledInputs.length; t++)
        if (this._disabledInputs[t] == e) return !0;
      return !1;
    },
    _getInst: function (e) {
      try {
        return $.data(e, PROP_NAME);
      } catch (t) {
        throw "Missing instance data for this datepicker";
      }
    },
    _optionDatepicker: function (e, t, n) {
      var r = this._getInst(e);
      if (arguments.length == 2 && typeof t == "string")
        return t == "defaults"
          ? $.extend({}, $.datepicker._defaults)
          : r
            ? t == "all"
              ? $.extend({}, r.settings)
              : this._get(r, t)
            : null;
      var i = t || {};
      typeof t == "string" && ((i = {}), (i[t] = n));
      if (r) {
        this._curInst == r && this._hideDatepicker();
        var s = this._getDateDatepicker(e, !0),
          o = this._getMinMaxDate(r, "min"),
          u = this._getMinMaxDate(r, "max");
        extendRemove(r.settings, i),
          o !== null &&
          i.dateFormat !== undefined &&
          i.minDate === undefined &&
          (r.settings.minDate = this._formatDate(r, o)),
          u !== null &&
          i.dateFormat !== undefined &&
          i.maxDate === undefined &&
          (r.settings.maxDate = this._formatDate(r, u)),
          this._attachments($(e), r),
          this._autoSize(r),
          this._setDate(r, s),
          this._updateAlternate(r),
          this._updateDatepicker(r);
      }
    },
    _changeDatepicker: function (e, t, n) {
      this._optionDatepicker(e, t, n);
    },
    _refreshDatepicker: function (e) {
      var t = this._getInst(e);
      t && this._updateDatepicker(t);
    },
    _setDateDatepicker: function (e, t) {
      var n = this._getInst(e);
      n &&
        (this._setDate(n, t),
          this._updateDatepicker(n),
          this._updateAlternate(n));
    },
    _getDateDatepicker: function (e, t) {
      var n = this._getInst(e);
      return (
        n && !n.inline && this._setDateFromField(n, t),
        n ? this._getDate(n) : null
      );
    },
    _doKeyDown: function (e) {
      var t = $.datepicker._getInst(e.target),
        n = !0,
        r = t.dpDiv.is(".ui-datepicker-rtl");
      t._keyEvent = !0;
      if ($.datepicker._datepickerShowing)
        switch (e.keyCode) {
          case 9:
            $.datepicker._hideDatepicker(), (n = !1);
            break;
          case 13:
            var i = $(
              "td." +
              $.datepicker._dayOverClass +
              ":not(." +
              $.datepicker._currentClass +
              ")",
              t.dpDiv
            );
            i[0] &&
              $.datepicker._selectDay(
                e.target,
                t.selectedMonth,
                t.selectedYear,
                i[0]
              );
            var s = $.datepicker._get(t, "onSelect");
            if (s) {
              var o = $.datepicker._formatDate(t);
              s.apply(t.input ? t.input[0] : null, [o, t]);
            } else $.datepicker._hideDatepicker();
            return !1;
          case 27:
            $.datepicker._hideDatepicker();
            break;
          case 33:
            $.datepicker._adjustDate(
              e.target,
              e.ctrlKey
                ? -$.datepicker._get(t, "stepBigMonths")
                : -$.datepicker._get(t, "stepMonths"),
              "M"
            );
            break;
          case 34:
            $.datepicker._adjustDate(
              e.target,
              e.ctrlKey
                ? +$.datepicker._get(t, "stepBigMonths")
                : +$.datepicker._get(t, "stepMonths"),
              "M"
            );
            break;
          case 35:
            (e.ctrlKey || e.metaKey) && $.datepicker._clearDate(e.target),
              (n = e.ctrlKey || e.metaKey);
            break;
          case 36:
            (e.ctrlKey || e.metaKey) && $.datepicker._gotoToday(e.target),
              (n = e.ctrlKey || e.metaKey);
            break;
          case 37:
            (e.ctrlKey || e.metaKey) &&
              $.datepicker._adjustDate(e.target, r ? 1 : -1, "D"),
              (n = e.ctrlKey || e.metaKey),
              e.originalEvent.altKey &&
              $.datepicker._adjustDate(
                e.target,
                e.ctrlKey
                  ? -$.datepicker._get(t, "stepBigMonths")
                  : -$.datepicker._get(t, "stepMonths"),
                "M"
              );
            break;
          case 38:
            (e.ctrlKey || e.metaKey) &&
              $.datepicker._adjustDate(e.target, -7, "D"),
              (n = e.ctrlKey || e.metaKey);
            break;
          case 39:
            (e.ctrlKey || e.metaKey) &&
              $.datepicker._adjustDate(e.target, r ? -1 : 1, "D"),
              (n = e.ctrlKey || e.metaKey),
              e.originalEvent.altKey &&
              $.datepicker._adjustDate(
                e.target,
                e.ctrlKey
                  ? +$.datepicker._get(t, "stepBigMonths")
                  : +$.datepicker._get(t, "stepMonths"),
                "M"
              );
            break;
          case 40:
            (e.ctrlKey || e.metaKey) &&
              $.datepicker._adjustDate(e.target, 7, "D"),
              (n = e.ctrlKey || e.metaKey);
            break;
          default:
            n = !1;
        }
      else
        e.keyCode == 36 && e.ctrlKey
          ? $.datepicker._showDatepicker(this)
          : (n = !1);
      n && (e.preventDefault(), e.stopPropagation());
    },
    _doKeyPress: function (e) {
      var t = $.datepicker._getInst(e.target);
      if ($.datepicker._get(t, "constrainInput")) {
        var n = $.datepicker._possibleChars($.datepicker._get(t, "dateFormat")),
          r = String.fromCharCode(
            e.charCode == undefined ? e.keyCode : e.charCode
          );
        return e.ctrlKey || e.metaKey || r < " " || !n || n.indexOf(r) > -1;
      }
    },
    _doKeyUp: function (e) {
      var t = $.datepicker._getInst(e.target);
      if (t.input.val() != t.lastVal)
        try {
          var n = $.datepicker.parseDate(
            $.datepicker._get(t, "dateFormat"),
            t.input ? t.input.val() : null,
            $.datepicker._getFormatConfig(t)
          );
          n &&
            ($.datepicker._setDateFromField(t),
              $.datepicker._updateAlternate(t),
              $.datepicker._updateDatepicker(t));
        } catch (r) {
          $.datepicker.log(r);
        }
      return !0;
    },
    _showDatepicker: function (e) {
      (e = e.target || e),
        e.nodeName.toLowerCase() != "input" &&
        (e = $("input", e.parentNode)[0]);
      if ($.datepicker._isDisabledDatepicker(e) || $.datepicker._lastInput == e)
        return;
      var t = $.datepicker._getInst(e);
      $.datepicker._curInst &&
        $.datepicker._curInst != t &&
        ($.datepicker._curInst.dpDiv.stop(!0, !0),
          t &&
          $.datepicker._datepickerShowing &&
          $.datepicker._hideDatepicker($.datepicker._curInst.input[0]));
      var n = $.datepicker._get(t, "beforeShow"),
        r = n ? n.apply(e, [e, t]) : {};
      if (r === !1) return;
      extendRemove(t.settings, r),
        (t.lastVal = null),
        ($.datepicker._lastInput = e),
        $.datepicker._setDateFromField(t),
        $.datepicker._inDialog && (e.value = ""),
        $.datepicker._pos ||
        (($.datepicker._pos = $.datepicker._findPos(e)),
          ($.datepicker._pos[1] += e.offsetHeight));
      var i = !1;
      $(e)
        .parents()
        .each(function () {
          return (i |= $(this).css("position") == "fixed"), !i;
        });
      var s = { left: $.datepicker._pos[0], top: $.datepicker._pos[1] };
      ($.datepicker._pos = null),
        t.dpDiv.empty(),
        t.dpDiv.css({ position: "absolute", display: "block", top: "-1000px" }),
        $.datepicker._updateDatepicker(t),
        (s = $.datepicker._checkOffset(t, s, i)),
        t.dpDiv.css({
          position:
            $.datepicker._inDialog && $.blockUI
              ? "static"
              : i
                ? "fixed"
                : "absolute",
          display: "none",
          left: s.left + "px",
          top: s.top + "px",
        });
      if (!t.inline) {
        var o = $.datepicker._get(t, "showAnim"),
          u = $.datepicker._get(t, "duration"),
          a = function () {
            var e = t.dpDiv.find("iframe.ui-datepicker-cover");
            if (!!e.length) {
              var n = $.datepicker._getBorders(t.dpDiv);
              e.css({
                left: -n[0],
                top: -n[1],
                width: t.dpDiv.outerWidth(),
                height: t.dpDiv.outerHeight(),
              });
            }
          };
        t.dpDiv.zIndex($(e).zIndex() + 1),
          ($.datepicker._datepickerShowing = !0),
          $.effects && ($.effects.effect[o] || $.effects[o])
            ? t.dpDiv.show(o, $.datepicker._get(t, "showOptions"), u, a)
            : t.dpDiv[o || "show"](o ? u : null, a),
          (!o || !u) && a(),
          t.input.is(":visible") && !t.input.is(":disabled") && t.input.focus(),
          ($.datepicker._curInst = t);
      }
    },
    _updateDatepicker: function (e) {
      this.maxRows = 4;
      var t = $.datepicker._getBorders(e.dpDiv);
      (instActive = e),
        e.dpDiv.empty().append(this._generateHTML(e)),
        this._attachHandlers(e);
      var n = e.dpDiv.find("iframe.ui-datepicker-cover");
      !n.length ||
        n.css({
          left: -t[0],
          top: -t[1],
          width: e.dpDiv.outerWidth(),
          height: e.dpDiv.outerHeight(),
        }),
        e.dpDiv.find("." + this._dayOverClass + " a").mouseover();
      var r = this._getNumberOfMonths(e),
        i = r[1],
        s = 17;
      e.dpDiv
        .removeClass(
          "ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4"
        )
        .width(""),
        i > 1 &&
        e.dpDiv
          .addClass("ui-datepicker-multi-" + i)
          .css("width", s * i + "em"),
        e.dpDiv[(r[0] != 1 || r[1] != 1 ? "add" : "remove") + "Class"](
          "ui-datepicker-multi"
        ),
        e.dpDiv[(this._get(e, "isRTL") ? "add" : "remove") + "Class"](
          "ui-datepicker-rtl"
        ),
        e == $.datepicker._curInst &&
        $.datepicker._datepickerShowing &&
        e.input &&
        e.input.is(":visible") &&
        !e.input.is(":disabled") &&
        e.input[0] != document.activeElement &&
        e.input.focus();
      if (e.yearshtml) {
        var o = e.yearshtml;
        setTimeout(function () {
          o === e.yearshtml &&
            e.yearshtml &&
            e.dpDiv
              .find("select.ui-datepicker-year:first")
              .replaceWith(e.yearshtml),
            (o = e.yearshtml = null);
        }, 0);
      }
    },
    _getBorders: function (e) {
      var t = function (e) {
        return { thin: 1, medium: 2, thick: 3 }[e] || e;
      };
      return [
        parseFloat(t(e.css("border-left-width"))),
        parseFloat(t(e.css("border-top-width"))),
      ];
    },
    _checkOffset: function (e, t, n) {
      var r = e.dpDiv.outerWidth(),
        i = e.dpDiv.outerHeight(),
        s = e.input ? e.input.outerWidth() : 0,
        o = e.input ? e.input.outerHeight() : 0,
        u =
          document.documentElement.clientWidth +
          (n ? 0 : $(document).scrollLeft()),
        a =
          document.documentElement.clientHeight +
          (n ? 0 : $(document).scrollTop());
      return (
        (t.left -= this._get(e, "isRTL") ? r - s : 0),
        (t.left -=
          n && t.left == e.input.offset().left ? $(document).scrollLeft() : 0),
        (t.top -=
          n && t.top == e.input.offset().top + o ? $(document).scrollTop() : 0),
        (t.left -= Math.min(
          t.left,
          t.left + r > u && u > r ? Math.abs(t.left + r - u) : 0
        )),
        (t.top -= Math.min(
          t.top,
          t.top + i > a && a > i ? Math.abs(i + o) : 0
        )),
        t
      );
    },
    _findPos: function (e) {
      var t = this._getInst(e),
        n = this._get(t, "isRTL");
      while (
        e &&
        (e.type == "hidden" || e.nodeType != 1 || $.expr.filters.hidden(e))
      )
        e = e[n ? "previousSibling" : "nextSibling"];
      var r = $(e).offset();
      return [r.left, r.top];
    },
    _hideDatepicker: function (e) {
      var t = this._curInst;
      if (!t || (e && t != $.data(e, PROP_NAME))) return;
      if (this._datepickerShowing) {
        var n = this._get(t, "showAnim"),
          r = this._get(t, "duration"),
          i = function () {
            $.datepicker._tidyDialog(t);
          };
        $.effects && ($.effects.effect[n] || $.effects[n])
          ? t.dpDiv.hide(n, $.datepicker._get(t, "showOptions"), r, i)
          : t.dpDiv[
            n == "slideDown" ? "slideUp" : n == "fadeIn" ? "fadeOut" : "hide"
          ](n ? r : null, i),
          n || i(),
          (this._datepickerShowing = !1);
        var s = this._get(t, "onClose");
        s &&
          s.apply(t.input ? t.input[0] : null, [
            t.input ? t.input.val() : "",
            t,
          ]),
          (this._lastInput = null),
          this._inDialog &&
          (this._dialogInput.css({
            position: "absolute",
            left: "0",
            top: "-100px",
          }),
            $.blockUI && ($.unblockUI(), $("body").append(this.dpDiv))),
          (this._inDialog = !1);
      }
    },
    _tidyDialog: function (e) {
      e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar");
    },
    _checkExternalClick: function (e) {
      if (!$.datepicker._curInst) return;
      var t = $(e.target),
        n = $.datepicker._getInst(t[0]);
      ((t[0].id != $.datepicker._mainDivId &&
        t.parents("#" + $.datepicker._mainDivId).length == 0 &&
        !t.hasClass($.datepicker.markerClassName) &&
        !t.closest("." + $.datepicker._triggerClass).length &&
        $.datepicker._datepickerShowing &&
        (!$.datepicker._inDialog || !$.blockUI)) ||
        (t.hasClass($.datepicker.markerClassName) &&
          $.datepicker._curInst != n)) &&
        $.datepicker._hideDatepicker();
    },
    _adjustDate: function (e, t, n) {
      var r = $(e),
        i = this._getInst(r[0]);
      if (this._isDisabledDatepicker(r[0])) return;
      this._adjustInstDate(
        i,
        t + (n == "M" ? this._get(i, "showCurrentAtPos") : 0),
        n
      ),
        this._updateDatepicker(i);
    },
    _gotoToday: function (e) {
      var t = $(e),
        n = this._getInst(t[0]);
      if (this._get(n, "gotoCurrent") && n.currentDay)
        (n.selectedDay = n.currentDay),
          (n.drawMonth = n.selectedMonth = n.currentMonth),
          (n.drawYear = n.selectedYear = n.currentYear);
      else {
        var r = new Date();
        (n.selectedDay = r.getDate()),
          (n.drawMonth = n.selectedMonth = r.getMonth()),
          (n.drawYear = n.selectedYear = r.getFullYear());
      }
      this._notifyChange(n), this._adjustDate(t);
    },
    _selectMonthYear: function (e, t, n) {
      var r = $(e),
        i = this._getInst(r[0]);
      (i["selected" + (n == "M" ? "Month" : "Year")] = i[
        "draw" + (n == "M" ? "Month" : "Year")
      ] =
        parseInt(t.options[t.selectedIndex].value, 10)),
        this._notifyChange(i),
        this._adjustDate(r);
    },
    _selectDay: function (e, t, n, r) {
      var i = $(e);
      if (
        $(r).hasClass(this._unselectableClass) ||
        this._isDisabledDatepicker(i[0])
      )
        return;
      var s = this._getInst(i[0]);
      (s.selectedDay = s.currentDay = $("a", r).html()),
        (s.selectedMonth = s.currentMonth = t),
        (s.selectedYear = s.currentYear = n),
        this._selectDate(
          e,
          this._formatDate(s, s.currentDay, s.currentMonth, s.currentYear)
        );
    },
    _clearDate: function (e) {
      var t = $(e),
        n = this._getInst(t[0]);
      this._selectDate(t, "");
    },
    _selectDate: function (e, t) {
      var n = $(e),
        r = this._getInst(n[0]);
      (t = t != null ? t : this._formatDate(r)),
        r.input && r.input.val(t),
        this._updateAlternate(r);
      var i = this._get(r, "onSelect");
      i
        ? i.apply(r.input ? r.input[0] : null, [t, r])
        : r.input && r.input.trigger("change"),
        r.inline
          ? this._updateDatepicker(r)
          : (this._hideDatepicker(),
            (this._lastInput = r.input[0]),
            typeof r.input[0] != "object" && r.input.focus(),
            (this._lastInput = null));
    },
    _updateAlternate: function (e) {
      var t = this._get(e, "altField");
      if (t) {
        var n = this._get(e, "altFormat") || this._get(e, "dateFormat"),
          r = this._getDate(e),
          i = this.formatDate(n, r, this._getFormatConfig(e));
        $(t).each(function () {
          $(this).val(i);
        });
      }
    },
    noWeekends: function (e) {
      var t = e.getDay();
      return [t > 0 && t < 6, ""];
    },
    iso8601Week: function (e) {
      var t = new Date(e.getTime());
      t.setDate(t.getDate() + 4 - (t.getDay() || 7));
      var n = t.getTime();
      return (
        t.setMonth(0),
        t.setDate(1),
        Math.floor(Math.round((n - t) / 864e5) / 7) + 1
      );
    },
    parseDate: function (e, t, n) {
      if (e == null || t == null) throw "Invalid arguments";
      t = typeof t == "object" ? t.toString() : t + "";
      if (t == "") return null;
      var r = (n ? n.shortYearCutoff : null) || this._defaults.shortYearCutoff;
      r =
        typeof r != "string"
          ? r
          : (new Date().getFullYear() % 100) + parseInt(r, 10);
      var i = (n ? n.dayNamesShort : null) || this._defaults.dayNamesShort,
        s = (n ? n.dayNames : null) || this._defaults.dayNames,
        o = (n ? n.monthNamesShort : null) || this._defaults.monthNamesShort,
        u = (n ? n.monthNames : null) || this._defaults.monthNames,
        a = -1,
        f = -1,
        l = -1,
        c = -1,
        h = !1,
        p = function (t) {
          var n = y + 1 < e.length && e.charAt(y + 1) == t;
          return n && y++, n;
        },
        d = function (e) {
          var n = p(e),
            r =
              e == "@"
                ? 14
                : e == "!"
                  ? 20
                  : e == "y" && n
                    ? 4
                    : e == "o"
                      ? 3
                      : 2,
            i = new RegExp("^\\d{1," + r + "}"),
            s = t.substring(g).match(i);
          if (!s) throw "Missing number at position " + g;
          return (g += s[0].length), parseInt(s[0], 10);
        },
        v = function (e, n, r) {
          var i = $.map(p(e) ? r : n, function (e, t) {
            return [[t, e]];
          }).sort(function (e, t) {
            return -(e[1].length - t[1].length);
          }),
            s = -1;
          $.each(i, function (e, n) {
            var r = n[1];
            if (t.substr(g, r.length).toLowerCase() == r.toLowerCase())
              return (s = n[0]), (g += r.length), !1;
          });
          if (s != -1) return s + 1;
          throw "Unknown name at position " + g;
        },
        m = function () {
          if (t.charAt(g) != e.charAt(y))
            throw "Unexpected literal at position " + g;
          g++;
        },
        g = 0;
      for (var y = 0; y < e.length; y++)
        if (h) e.charAt(y) == "'" && !p("'") ? (h = !1) : m();
        else
          switch (e.charAt(y)) {
            case "d":
              l = d("d");
              break;
            case "D":
              v("D", i, s);
              break;
            case "o":
              c = d("o");
              break;
            case "m":
              f = d("m");
              break;
            case "M":
              f = v("M", o, u);
              break;
            case "y":
              a = d("y");
              break;
            case "@":
              var b = new Date(d("@"));
              (a = b.getFullYear()), (f = b.getMonth() + 1), (l = b.getDate());
              break;
            case "!":
              var b = new Date((d("!") - this._ticksTo1970) / 1e4);
              (a = b.getFullYear()), (f = b.getMonth() + 1), (l = b.getDate());
              break;
            case "'":
              p("'") ? m() : (h = !0);
              break;
            default:
              m();
          }
      if (g < t.length) {
        var w = t.substr(g);
        if (!/^\s+/.test(w))
          throw "Extra/unparsed characters found in date: " + w;
      }
      a == -1
        ? (a = new Date().getFullYear())
        : a < 100 &&
        (a +=
          new Date().getFullYear() -
          (new Date().getFullYear() % 100) +
          (a <= r ? 0 : -100));
      if (c > -1) {
        (f = 1), (l = c);
        do {
          var E = this._getDaysInMonth(a, f - 1);
          if (l <= E) break;
          f++, (l -= E);
        } while (!0);
      }
      var b = this._daylightSavingAdjust(new Date(a, f - 1, l));
      if (b.getFullYear() != a || b.getMonth() + 1 != f || b.getDate() != l)
        throw "Invalid date";
      return b;
    },
    ATOM: "yy-mm-dd",
    COOKIE: "D, dd M yy",
    ISO_8601: "yy-mm-dd",
    RFC_822: "D, d M y",
    RFC_850: "DD, dd-M-y",
    RFC_1036: "D, d M y",
    RFC_1123: "D, d M yy",
    RFC_2822: "D, d M yy",
    RSS: "D, d M y",
    TICKS: "!",
    TIMESTAMP: "@",
    W3C: "yy-mm-dd",
    _ticksTo1970:
      (718685 + Math.floor(492.5) - Math.floor(19.7) + Math.floor(4.925)) *
      24 *
      60 *
      60 *
      1e7,
    formatDate: function (e, t, n) {
      if (!t) return "";
      var r = (n ? n.dayNamesShort : null) || this._defaults.dayNamesShort,
        i = (n ? n.dayNames : null) || this._defaults.dayNames,
        s = (n ? n.monthNamesShort : null) || this._defaults.monthNamesShort,
        o = (n ? n.monthNames : null) || this._defaults.monthNames,
        u = function (t) {
          var n = h + 1 < e.length && e.charAt(h + 1) == t;
          return n && h++, n;
        },
        a = function (e, t, n) {
          var r = "" + t;
          if (u(e)) while (r.length < n) r = "0" + r;
          return r;
        },
        f = function (e, t, n, r) {
          return u(e) ? r[t] : n[t];
        },
        l = "",
        c = !1;
      if (t)
        for (var h = 0; h < e.length; h++)
          if (c) e.charAt(h) == "'" && !u("'") ? (c = !1) : (l += e.charAt(h));
          else
            switch (e.charAt(h)) {
              case "d":
                l += a("d", t.getDate(), 2);
                break;
              case "D":
                l += f("D", t.getDay(), r, i);
                break;
              case "o":
                l += a(
                  "o",
                  Math.round(
                    (new Date(
                      t.getFullYear(),
                      t.getMonth(),
                      t.getDate()
                    ).getTime() -
                      new Date(t.getFullYear(), 0, 0).getTime()) /
                    864e5
                  ),
                  3
                );
                break;
              case "m":
                l += a("m", t.getMonth() + 1, 2);
                break;
              case "M":
                l += f("M", t.getMonth(), s, o);
                break;
              case "y":
                l += u("y")
                  ? t.getFullYear()
                  : (t.getYear() % 100 < 10 ? "0" : "") + (t.getYear() % 100);
                break;
              case "@":
                l += t.getTime();
                break;
              case "!":
                l += t.getTime() * 1e4 + this._ticksTo1970;
                break;
              case "'":
                u("'") ? (l += "'") : (c = !0);
                break;
              default:
                l += e.charAt(h);
            }
      return l;
    },
    _possibleChars: function (e) {
      var t = "",
        n = !1,
        r = function (t) {
          var n = i + 1 < e.length && e.charAt(i + 1) == t;
          return n && i++, n;
        };
      for (var i = 0; i < e.length; i++)
        if (n) e.charAt(i) == "'" && !r("'") ? (n = !1) : (t += e.charAt(i));
        else
          switch (e.charAt(i)) {
            case "d":
            case "m":
            case "y":
            case "@":
              t += "0123456789";
              break;
            case "D":
            case "M":
              return null;
            case "'":
              r("'") ? (t += "'") : (n = !0);
              break;
            default:
              t += e.charAt(i);
          }
      return t;
    },
    _get: function (e, t) {
      return e.settings[t] !== undefined ? e.settings[t] : this._defaults[t];
    },
    _setDateFromField: function (e, t) {
      if (e.input.val() == e.lastVal) return;
      var n = this._get(e, "dateFormat"),
        r = (e.lastVal = e.input ? e.input.val() : null),
        i,
        s;
      i = s = this._getDefaultDate(e);
      var o = this._getFormatConfig(e);
      try {
        i = this.parseDate(n, r, o) || s;
      } catch (u) {
        this.log(u), (r = t ? "" : r);
      }
      (e.selectedDay = i.getDate()),
        (e.drawMonth = e.selectedMonth = i.getMonth()),
        (e.drawYear = e.selectedYear = i.getFullYear()),
        (e.currentDay = r ? i.getDate() : 0),
        (e.currentMonth = r ? i.getMonth() : 0),
        (e.currentYear = r ? i.getFullYear() : 0),
        this._adjustInstDate(e);
    },
    _getDefaultDate: function (e) {
      return this._restrictMinMax(
        e,
        this._determineDate(e, this._get(e, "defaultDate"), new Date())
      );
    },
    _determineDate: function (e, t, n) {
      var r = function (e) {
        var t = new Date();
        return t.setDate(t.getDate() + e), t;
      },
        i = function (t) {
          try {
            return $.datepicker.parseDate(
              $.datepicker._get(e, "dateFormat"),
              t,
              $.datepicker._getFormatConfig(e)
            );
          } catch (n) { }
          var r =
            (t.toLowerCase().match(/^c/) ? $.datepicker._getDate(e) : null) ||
            new Date(),
            i = r.getFullYear(),
            s = r.getMonth(),
            o = r.getDate(),
            u = /([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,
            a = u.exec(t);
          while (a) {
            switch (a[2] || "d") {
              case "d":
              case "D":
                o += parseInt(a[1], 10);
                break;
              case "w":
              case "W":
                o += parseInt(a[1], 10) * 7;
                break;
              case "m":
              case "M":
                (s += parseInt(a[1], 10)),
                  (o = Math.min(o, $.datepicker._getDaysInMonth(i, s)));
                break;
              case "y":
              case "Y":
                (i += parseInt(a[1], 10)),
                  (o = Math.min(o, $.datepicker._getDaysInMonth(i, s)));
            }
            a = u.exec(t);
          }
          return new Date(i, s, o);
        },
        s =
          t == null || t === ""
            ? n
            : typeof t == "string"
              ? i(t)
              : typeof t == "number"
                ? isNaN(t)
                  ? n
                  : r(t)
                : new Date(t.getTime());
      return (
        (s = s && s.toString() == "Invalid Date" ? n : s),
        s &&
        (s.setHours(0),
          s.setMinutes(0),
          s.setSeconds(0),
          s.setMilliseconds(0)),
        this._daylightSavingAdjust(s)
      );
    },
    _daylightSavingAdjust: function (e) {
      return e
        ? (e.setHours(e.getHours() > 12 ? e.getHours() + 2 : 0), e)
        : null;
    },
    _setDate: function (e, t, n) {
      var r = !t,
        i = e.selectedMonth,
        s = e.selectedYear,
        o = this._restrictMinMax(e, this._determineDate(e, t, new Date()));
      (e.selectedDay = e.currentDay = o.getDate()),
        (e.drawMonth = e.selectedMonth = e.currentMonth = o.getMonth()),
        (e.drawYear = e.selectedYear = e.currentYear = o.getFullYear()),
        (i != e.selectedMonth || s != e.selectedYear) &&
        !n &&
        this._notifyChange(e),
        this._adjustInstDate(e),
        e.input && e.input.val(r ? "" : this._formatDate(e));
    },
    _getDate: function (e) {
      var t =
        !e.currentYear || (e.input && e.input.val() == "")
          ? null
          : this._daylightSavingAdjust(
            new Date(e.currentYear, e.currentMonth, e.currentDay)
          );
      return t;
    },
    _attachHandlers: function (e) {
      var t = this._get(e, "stepMonths"),
        n = "#" + e.id.replace(/\\\\/g, "\\");
      e.dpDiv.find("[data-handler]").map(function () {
        var e = {
          prev: function () {
            window["DP_jQuery_" + dpuuid].datepicker._adjustDate(n, -t, "M");
          },
          next: function () {
            window["DP_jQuery_" + dpuuid].datepicker._adjustDate(n, +t, "M");
          },
          hide: function () {
            window["DP_jQuery_" + dpuuid].datepicker._hideDatepicker();
          },
          today: function () {
            window["DP_jQuery_" + dpuuid].datepicker._gotoToday(n);
          },
          selectDay: function () {
            return (
              window["DP_jQuery_" + dpuuid].datepicker._selectDay(
                n,
                +this.getAttribute("data-month"),
                +this.getAttribute("data-year"),
                this
              ),
              !1
            );
          },
          selectMonth: function () {
            return (
              window["DP_jQuery_" + dpuuid].datepicker._selectMonthYear(
                n,
                this,
                "M"
              ),
              !1
            );
          },
          selectYear: function () {
            return (
              window["DP_jQuery_" + dpuuid].datepicker._selectMonthYear(
                n,
                this,
                "Y"
              ),
              !1
            );
          },
        };
        $(this).bind(
          this.getAttribute("data-event"),
          e[this.getAttribute("data-handler")]
        );
      });
    },
    _generateHTML: function (e) {
      var t = new Date();
      t = this._daylightSavingAdjust(
        new Date(t.getFullYear(), t.getMonth(), t.getDate())
      );
      var n = this._get(e, "isRTL"),
        r = this._get(e, "showButtonPanel"),
        i = this._get(e, "hideIfNoPrevNext"),
        s = this._get(e, "navigationAsDateFormat"),
        o = this._getNumberOfMonths(e),
        u = this._get(e, "showCurrentAtPos"),
        a = this._get(e, "stepMonths"),
        f = o[0] != 1 || o[1] != 1,
        l = this._daylightSavingAdjust(
          e.currentDay
            ? new Date(e.currentYear, e.currentMonth, e.currentDay)
            : new Date(9999, 9, 9)
        ),
        c = this._getMinMaxDate(e, "min"),
        h = this._getMinMaxDate(e, "max"),
        p = e.drawMonth - u,
        d = e.drawYear;
      p < 0 && ((p += 12), d--);
      if (h) {
        var v = this._daylightSavingAdjust(
          new Date(h.getFullYear(), h.getMonth() - o[0] * o[1] + 1, h.getDate())
        );
        v = c && v < c ? c : v;
        while (this._daylightSavingAdjust(new Date(d, p, 1)) > v)
          p--, p < 0 && ((p = 11), d--);
      }
      (e.drawMonth = p), (e.drawYear = d);
      var m = this._get(e, "prevText");
      m = s
        ? this.formatDate(
          m,
          this._daylightSavingAdjust(new Date(d, p - a, 1)),
          this._getFormatConfig(e)
        )
        : m;
      var g = this._canAdjustMonth(e, -1, d, p)
        ? '<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="' +
        m +
        '"><span class="ui-icon ui-icon-circle-triangle-' +
        (n ? "e" : "w") +
        '">' +
        m +
        "</span></a>"
        : i
          ? ""
          : '<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="' +
          m +
          '"><span class="ui-icon ui-icon-circle-triangle-' +
          (n ? "e" : "w") +
          '">' +
          m +
          "</span></a>",
        y = this._get(e, "nextText");
      y = s
        ? this.formatDate(
          y,
          this._daylightSavingAdjust(new Date(d, p + a, 1)),
          this._getFormatConfig(e)
        )
        : y;
      var b = this._canAdjustMonth(e, 1, d, p)
        ? '<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="' +
        y +
        '"><span class="ui-icon ui-icon-circle-triangle-' +
        (n ? "w" : "e") +
        '">' +
        y +
        "</span></a>"
        : i
          ? ""
          : '<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="' +
          y +
          '"><span class="ui-icon ui-icon-circle-triangle-' +
          (n ? "w" : "e") +
          '">' +
          y +
          "</span></a>",
        w = this._get(e, "currentText"),
        E = this._get(e, "gotoCurrent") && e.currentDay ? l : t;
      w = s ? this.formatDate(w, E, this._getFormatConfig(e)) : w;
      var S = e.inline
        ? ""
        : '<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">' +
        this._get(e, "closeText") +
        "</button>",
        x = r
          ? '<div class="ui-datepicker-buttonpane ui-widget-content">' +
          (n ? S : "") +
          (this._isInRange(e, E)
            ? '<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">' +
            w +
            "</button>"
            : "") +
          (n ? "" : S) +
          "</div>"
          : "",
        T = parseInt(this._get(e, "firstDay"), 10);
      T = isNaN(T) ? 0 : T;
      var N = this._get(e, "showWeek"),
        C = this._get(e, "dayNames"),
        k = this._get(e, "dayNamesShort"),
        L = this._get(e, "dayNamesMin"),
        A = this._get(e, "monthNames"),
        O = this._get(e, "monthNamesShort"),
        M = this._get(e, "beforeShowDay"),
        _ = this._get(e, "showOtherMonths"),
        D = this._get(e, "selectOtherMonths"),
        P = this._get(e, "calculateWeek") || this.iso8601Week,
        H = this._getDefaultDate(e),
        B = "";
      for (var j = 0; j < o[0]; j++) {
        var F = "";
        this.maxRows = 4;
        for (var I = 0; I < o[1]; I++) {
          var q = this._daylightSavingAdjust(new Date(d, p, e.selectedDay)),
            R = " ui-corner-all",
            U = "";
          if (f) {
            U += '<div class="ui-datepicker-group';
            if (o[1] > 1)
              switch (I) {
                case 0:
                  (U += " ui-datepicker-group-first"),
                    (R = " ui-corner-" + (n ? "right" : "left"));
                  break;
                case o[1] - 1:
                  (U += " ui-datepicker-group-last"),
                    (R = " ui-corner-" + (n ? "left" : "right"));
                  break;
                default:
                  (U += " ui-datepicker-group-middle"), (R = "");
              }
            U += '">';
          }
          U +=
            '<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix' +
            R +
            '">' +
            (/all|left/.test(R) && j == 0 ? (n ? b : g) : "") +
            (/all|right/.test(R) && j == 0 ? (n ? g : b) : "") +
            this._generateMonthYearHeader(e, p, d, c, h, j > 0 || I > 0, A, O) +
            '</div><table class="ui-datepicker-calendar"><thead>' +
            "<tr>";
          var z = N
            ? '<th class="ui-datepicker-week-col">' +
            this._get(e, "weekHeader") +
            "</th>"
            : "";
          for (var W = 0; W < 7; W++) {
            var X = (W + T) % 7;
            z +=
              "<th" +
              ((W + T + 6) % 7 >= 5 ? ' class="ui-datepicker-week-end"' : "") +
              ">" +
              '<span title="' +
              C[X] +
              '">' +
              L[X] +
              "</span></th>";
          }
          U += z + "</tr></thead><tbody>";
          var V = this._getDaysInMonth(d, p);
          d == e.selectedYear &&
            p == e.selectedMonth &&
            (e.selectedDay = Math.min(e.selectedDay, V));
          var J = (this._getFirstDayOfMonth(d, p) - T + 7) % 7,
            K = Math.ceil((J + V) / 7),
            Q = f ? (this.maxRows > K ? this.maxRows : K) : K;
          this.maxRows = Q;
          var G = this._daylightSavingAdjust(new Date(d, p, 1 - J));
          for (var Y = 0; Y < Q; Y++) {
            U += "<tr>";
            var Z = N
              ? '<td class="ui-datepicker-week-col">' +
              this._get(e, "calculateWeek")(G) +
              "</td>"
              : "";
            for (var W = 0; W < 7; W++) {
              var et = M ? M.apply(e.input ? e.input[0] : null, [G]) : [!0, ""],
                tt = G.getMonth() != p,
                nt = (tt && !D) || !et[0] || (c && G < c) || (h && G > h);
              (Z +=
                '<td class="' +
                ((W + T + 6) % 7 >= 5 ? " ui-datepicker-week-end" : "") +
                (tt ? " ui-datepicker-other-month" : "") +
                ((G.getTime() == q.getTime() &&
                  p == e.selectedMonth &&
                  e._keyEvent) ||
                  (H.getTime() == G.getTime() && H.getTime() == q.getTime())
                  ? " " + this._dayOverClass
                  : "") +
                (nt
                  ? " " + this._unselectableClass + " ui-state-disabled"
                  : "") +
                (tt && !_
                  ? ""
                  : " " +
                  et[1] +
                  (G.getTime() == l.getTime()
                    ? " " + this._currentClass
                    : "") +
                  (G.getTime() == t.getTime()
                    ? " ui-datepicker-today"
                    : "")) +
                '"' +
                ((!tt || _) && et[2] ? ' title="' + et[2] + '"' : "") +
                (nt
                  ? ""
                  : ' data-handler="selectDay" data-event="click" data-month="' +
                  G.getMonth() +
                  '" data-year="' +
                  G.getFullYear() +
                  '"') +
                ">" +
                (tt && !_
                  ? "&#xa0;"
                  : nt
                    ? '<span class="ui-state-default">' + G.getDate() + "</span>"
                    : '<a class="ui-state-default' +
                    (G.getTime() == t.getTime() ? " ui-state-highlight" : "") +
                    (G.getTime() == l.getTime() ? " ui-state-active" : "") +
                    (tt ? " ui-priority-secondary" : "") +
                    '" href="#">' +
                    G.getDate() +
                    "</a>") +
                "</td>"),
                G.setDate(G.getDate() + 1),
                (G = this._daylightSavingAdjust(G));
            }
            U += Z + "</tr>";
          }
          p++,
            p > 11 && ((p = 0), d++),
            (U +=
              "</tbody></table>" +
              (f
                ? "</div>" +
                (o[0] > 0 && I == o[1] - 1
                  ? '<div class="ui-datepicker-row-break"></div>'
                  : "")
                : "")),
            (F += U);
        }
        B += F;
      }
      return (
        (B +=
          x +
          ($.ui.ie6 && !e.inline
            ? '<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>'
            : "")),
        (e._keyEvent = !1),
        B
      );
    },
    _generateMonthYearHeader: function (e, t, n, r, i, s, o, u) {
      var a = this._get(e, "changeMonth"),
        f = this._get(e, "changeYear"),
        l = this._get(e, "showMonthAfterYear"),
        c = '<div class="ui-datepicker-title">',
        h = "";
      if (s || !a) h += '<span class="ui-datepicker-month">' + o[t] + "</span>";
      else {
        var p = r && r.getFullYear() == n,
          d = i && i.getFullYear() == n;
        h +=
          '<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">';
        for (var v = 0; v < 12; v++)
          (!p || v >= r.getMonth()) &&
            (!d || v <= i.getMonth()) &&
            (h +=
              '<option value="' +
              v +
              '"' +
              (v == t ? ' selected="selected"' : "") +
              ">" +
              u[v] +
              "</option>");
        h += "</select>";
      }
      l || (c += h + (s || !a || !f ? "&#xa0;" : ""));
      if (!e.yearshtml) {
        e.yearshtml = "";
        if (s || !f) c += '<span class="ui-datepicker-year">' + n + "</span>";
        else {
          var m = this._get(e, "yearRange").split(":"),
            g = new Date().getFullYear(),
            y = function (e) {
              var t = e.match(/c[+-].*/)
                ? n + parseInt(e.substring(1), 10)
                : e.match(/[+-].*/)
                  ? g + parseInt(e, 10)
                  : parseInt(e, 10);
              return isNaN(t) ? g : t;
            },
            b = y(m[0]),
            w = Math.max(b, y(m[1] || ""));
          (b = r ? Math.max(b, r.getFullYear()) : b),
            (w = i ? Math.min(w, i.getFullYear()) : w),
            (e.yearshtml +=
              '<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">');
          for (; b <= w; b++)
            e.yearshtml +=
              '<option value="' +
              b +
              '"' +
              (b == n ? ' selected="selected"' : "") +
              ">" +
              b +
              "</option>";
          (e.yearshtml += "</select>"),
            (c += e.yearshtml),
            (e.yearshtml = null);
        }
      }
      return (
        (c += this._get(e, "yearSuffix")),
        l && (c += (s || !a || !f ? "&#xa0;" : "") + h),
        (c += "</div>"),
        c
      );
    },
    _adjustInstDate: function (e, t, n) {
      var r = e.drawYear + (n == "Y" ? t : 0),
        i = e.drawMonth + (n == "M" ? t : 0),
        s =
          Math.min(e.selectedDay, this._getDaysInMonth(r, i)) +
          (n == "D" ? t : 0),
        o = this._restrictMinMax(
          e,
          this._daylightSavingAdjust(new Date(r, i, s))
        );
      (e.selectedDay = o.getDate()),
        (e.drawMonth = e.selectedMonth = o.getMonth()),
        (e.drawYear = e.selectedYear = o.getFullYear()),
        (n == "M" || n == "Y") && this._notifyChange(e);
    },
    _restrictMinMax: function (e, t) {
      var n = this._getMinMaxDate(e, "min"),
        r = this._getMinMaxDate(e, "max"),
        i = n && t < n ? n : t;
      return (i = r && i > r ? r : i), i;
    },
    _notifyChange: function (e) {
      var t = this._get(e, "onChangeMonthYear");
      t &&
        t.apply(e.input ? e.input[0] : null, [
          e.selectedYear,
          e.selectedMonth + 1,
          e,
        ]);
    },
    _getNumberOfMonths: function (e) {
      var t = this._get(e, "numberOfMonths");
      return t == null ? [1, 1] : typeof t == "number" ? [1, t] : t;
    },
    _getMinMaxDate: function (e, t) {
      return this._determineDate(e, this._get(e, t + "Date"), null);
    },
    _getDaysInMonth: function (e, t) {
      return 32 - this._daylightSavingAdjust(new Date(e, t, 32)).getDate();
    },
    _getFirstDayOfMonth: function (e, t) {
      return new Date(e, t, 1).getDay();
    },
    _canAdjustMonth: function (e, t, n, r) {
      var i = this._getNumberOfMonths(e),
        s = this._daylightSavingAdjust(
          new Date(n, r + (t < 0 ? t : i[0] * i[1]), 1)
        );
      return (
        t < 0 && s.setDate(this._getDaysInMonth(s.getFullYear(), s.getMonth())),
        this._isInRange(e, s)
      );
    },
    _isInRange: function (e, t) {
      var n = this._getMinMaxDate(e, "min"),
        r = this._getMinMaxDate(e, "max");
      return (
        (!n || t.getTime() >= n.getTime()) && (!r || t.getTime() <= r.getTime())
      );
    },
    _getFormatConfig: function (e) {
      var t = this._get(e, "shortYearCutoff");
      return (
        (t =
          typeof t != "string"
            ? t
            : (new Date().getFullYear() % 100) + parseInt(t, 10)),
        {
          shortYearCutoff: t,
          dayNamesShort: this._get(e, "dayNamesShort"),
          dayNames: this._get(e, "dayNames"),
          monthNamesShort: this._get(e, "monthNamesShort"),
          monthNames: this._get(e, "monthNames"),
        }
      );
    },
    _formatDate: function (e, t, n, r) {
      t ||
        ((e.currentDay = e.selectedDay),
          (e.currentMonth = e.selectedMonth),
          (e.currentYear = e.selectedYear));
      var i = t
        ? typeof t == "object"
          ? t
          : this._daylightSavingAdjust(new Date(r, n, t))
        : this._daylightSavingAdjust(
          new Date(e.currentYear, e.currentMonth, e.currentDay)
        );
      return this.formatDate(
        this._get(e, "dateFormat"),
        i,
        this._getFormatConfig(e)
      );
    },
  }),
    ($.fn.datepicker = function (e) {
      if (!this.length) return this;
      $.datepicker.initialized ||
        ($(document)
          .mousedown($.datepicker._checkExternalClick)
          .find(document.body)
          .append($.datepicker.dpDiv),
          ($.datepicker.initialized = !0));
      var t = Array.prototype.slice.call(arguments, 1);
      return typeof e != "string" ||
        (e != "isDisabled" && e != "getDate" && e != "widget")
        ? e == "option" &&
          arguments.length == 2 &&
          typeof arguments[1] == "string"
          ? $.datepicker["_" + e + "Datepicker"].apply(
            $.datepicker,
            [this[0]].concat(t)
          )
          : this.each(function () {
            typeof e == "string"
              ? $.datepicker["_" + e + "Datepicker"].apply(
                $.datepicker,
                [this].concat(t)
              )
              : $.datepicker._attachDatepicker(this, e);
          })
        : $.datepicker["_" + e + "Datepicker"].apply(
          $.datepicker,
          [this[0]].concat(t)
        );
    }),
    ($.datepicker = new Datepicker()),
    ($.datepicker.initialized = !1),
    ($.datepicker.uuid = new Date().getTime()),
    ($.datepicker.version = "1.9.2"),
    (window["DP_jQuery_" + dpuuid] = $);
})(jQuery);
(function (e, t) {
  var n = "ui-dialog ui-widget ui-widget-content ui-corner-all ",
    r = {
      buttons: !0,
      height: !0,
      maxHeight: !0,
      maxWidth: !0,
      minHeight: !0,
      minWidth: !0,
      width: !0,
    },
    i = { maxHeight: !0, maxWidth: !0, minHeight: !0, minWidth: !0 };
  e.widget("ui.dialog", {
    version: "1.9.2",
    options: {
      autoOpen: !0,
      buttons: {},
      closeOnEscape: !0,
      closeText: "close",
      dialogClass: "",
      draggable: !0,
      hide: null,
      height: "auto",
      maxHeight: !1,
      maxWidth: !1,
      minHeight: 150,
      minWidth: 150,
      modal: !1,
      position: {
        my: "center",
        at: "center",
        of: window,
        collision: "fit",
        using: function (t) {
          var n = e(this).css(t).offset().top;
          n < 0 && e(this).css("top", t.top - n);
        },
      },
      resizable: !0,
      show: null,
      stack: !0,
      title: "",
      width: 300,
      zIndex: 1e3,
    },
    _create: function () {
      (this.originalTitle = this.element.attr("title")),
        typeof this.originalTitle != "string" && (this.originalTitle = ""),
        (this.oldPosition = {
          parent: this.element.parent(),
          index: this.element.parent().children().index(this.element),
        }),
        (this.options.title = this.options.title || this.originalTitle);
      var t = this,
        r = this.options,
        i = r.title || "&#160;",
        s,
        o,
        u,
        a,
        f;
      (s = (this.uiDialog = e("<div>"))
        .addClass(n + r.dialogClass)
        .css({ display: "none", outline: 0, zIndex: r.zIndex })
        .attr("tabIndex", -1)
        .keydown(function (n) {
          r.closeOnEscape &&
            !n.isDefaultPrevented() &&
            n.keyCode &&
            n.keyCode === e.ui.keyCode.ESCAPE &&
            (t.close(n), n.preventDefault());
        })
        .mousedown(function (e) {
          t.moveToTop(!1, e);
        })
        .appendTo("body")),
        this.element
          .show()
          .removeAttr("title")
          .addClass("ui-dialog-content ui-widget-content")
          .appendTo(s),
        (o = (this.uiDialogTitlebar = e("<div>"))
          .addClass(
            "ui-dialog-titlebar  ui-widget-header  ui-corner-all  ui-helper-clearfix"
          )
          .bind("mousedown", function () {
            s.focus();
          })
          .prependTo(s)),
        (u = e("<a href='#'></a>")
          .addClass("ui-dialog-titlebar-close  ui-corner-all")
          .attr("role", "button")
          .click(function (e) {
            e.preventDefault(), t.close(e);
          })
          .appendTo(o)),
        (this.uiDialogTitlebarCloseText = e("<span>"))
          .addClass("ui-icon ui-icon-closethick")
          .text(r.closeText)
          .appendTo(u),
        (a = e("<span>")
          .uniqueId()
          .addClass("ui-dialog-title")
          .html(i)
          .prependTo(o)),
        (f = (this.uiDialogButtonPane = e("<div>")).addClass(
          "ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"
        )),
        (this.uiButtonSet = e("<div>"))
          .addClass("ui-dialog-buttonset")
          .appendTo(f),
        s.attr({ role: "dialog", "aria-labelledby": a.attr("id") }),
        o.find("*").add(o).disableSelection(),
        this._hoverable(u),
        this._focusable(u),
        r.draggable && e.fn.draggable && this._makeDraggable(),
        r.resizable && e.fn.resizable && this._makeResizable(),
        this._createButtons(r.buttons),
        (this._isOpen = !1),
        e.fn.bgiframe && s.bgiframe(),
        this._on(s, {
          keydown: function (t) {
            if (!r.modal || t.keyCode !== e.ui.keyCode.TAB) return;
            var n = e(":tabbable", s),
              i = n.filter(":first"),
              o = n.filter(":last");
            if (t.target === o[0] && !t.shiftKey) return i.focus(1), !1;
            if (t.target === i[0] && t.shiftKey) return o.focus(1), !1;
          },
        });
    },
    _init: function () {
      this.options.autoOpen && this.open();
    },
    _destroy: function () {
      var e,
        t = this.oldPosition;
      this.overlay && this.overlay.destroy(),
        this.uiDialog.hide(),
        this.element
          .removeClass("ui-dialog-content ui-widget-content")
          .hide()
          .appendTo("body"),
        this.uiDialog.remove(),
        this.originalTitle && this.element.attr("title", this.originalTitle),
        (e = t.parent.children().eq(t.index)),
        e.length && e[0] !== this.element[0]
          ? e.before(this.element)
          : t.parent.append(this.element);
    },
    widget: function () {
      return this.uiDialog;
    },
    close: function (t) {
      var n = this,
        r,
        i;
      if (!this._isOpen) return;
      if (!1 === this._trigger("beforeClose", t)) return;
      return (
        (this._isOpen = !1),
        this.overlay && this.overlay.destroy(),
        this.options.hide
          ? this._hide(this.uiDialog, this.options.hide, function () {
            n._trigger("close", t);
          })
          : (this.uiDialog.hide(), this._trigger("close", t)),
        e.ui.dialog.overlay.resize(),
        this.options.modal &&
        ((r = 0),
          e(".ui-dialog").each(function () {
            this !== n.uiDialog[0] &&
              ((i = e(this).css("z-index")), isNaN(i) || (r = Math.max(r, i)));
          }),
          (e.ui.dialog.maxZ = r)),
        this
      );
    },
    isOpen: function () {
      return this._isOpen;
    },
    moveToTop: function (t, n) {
      var r = this.options,
        i;
      return (r.modal && !t) || (!r.stack && !r.modal)
        ? this._trigger("focus", n)
        : (r.zIndex > e.ui.dialog.maxZ && (e.ui.dialog.maxZ = r.zIndex),
          this.overlay &&
          ((e.ui.dialog.maxZ += 1),
            (e.ui.dialog.overlay.maxZ = e.ui.dialog.maxZ),
            this.overlay.$el.css("z-index", e.ui.dialog.overlay.maxZ)),
          (i = {
            scrollTop: this.element.scrollTop(),
            scrollLeft: this.element.scrollLeft(),
          }),
          (e.ui.dialog.maxZ += 1),
          this.uiDialog.css("z-index", e.ui.dialog.maxZ),
          this.element.attr(i),
          this._trigger("focus", n),
          this);
    },
    open: function () {
      if (this._isOpen) return;
      var t,
        n = this.options,
        r = this.uiDialog;
      return (
        this._size(),
        this._position(n.position),
        r.show(n.show),
        (this.overlay = n.modal ? new e.ui.dialog.overlay(this) : null),
        this.moveToTop(!0),
        (t = this.element.find(":tabbable")),
        t.length ||
        ((t = this.uiDialogButtonPane.find(":tabbable")),
          t.length || (t = r)),
        t.eq(0).focus(),
        (this._isOpen = !0),
        this._trigger("open"),
        this
      );
    },
    _createButtons: function (t) {
      var n = this,
        r = !1;
      this.uiDialogButtonPane.remove(),
        this.uiButtonSet.empty(),
        typeof t == "object" &&
        t !== null &&
        e.each(t, function () {
          return !(r = !0);
        }),
        r
          ? (e.each(t, function (t, r) {
            var i, s;
            (r = e.isFunction(r) ? { click: r, text: t } : r),
              (r = e.extend({ type: "button" }, r)),
              (s = r.click),
              (r.click = function () {
                s.apply(n.element[0], arguments);
              }),
              (i = e("<button></button>", r).appendTo(n.uiButtonSet)),
              e.fn.button && i.button();
          }),
            this.uiDialog.addClass("ui-dialog-buttons"),
            this.uiDialogButtonPane.appendTo(this.uiDialog))
          : this.uiDialog.removeClass("ui-dialog-buttons");
    },
    _makeDraggable: function () {
      function r(e) {
        return { position: e.position, offset: e.offset };
      }
      var t = this,
        n = this.options;
      this.uiDialog.draggable({
        cancel: ".ui-dialog-content, .ui-dialog-titlebar-close",
        handle: ".ui-dialog-titlebar",
        containment: "document",
        start: function (n, i) {
          e(this).addClass("ui-dialog-dragging"),
            t._trigger("dragStart", n, r(i));
        },
        drag: function (e, n) {
          t._trigger("drag", e, r(n));
        },
        stop: function (i, s) {
          (n.position = [
            s.position.left - t.document.scrollLeft(),
            s.position.top - t.document.scrollTop(),
          ]),
            e(this).removeClass("ui-dialog-dragging"),
            t._trigger("dragStop", i, r(s)),
            e.ui.dialog.overlay.resize();
        },
      });
    },
    _makeResizable: function (n) {
      function u(e) {
        return {
          originalPosition: e.originalPosition,
          originalSize: e.originalSize,
          position: e.position,
          size: e.size,
        };
      }
      n = n === t ? this.options.resizable : n;
      var r = this,
        i = this.options,
        s = this.uiDialog.css("position"),
        o = typeof n == "string" ? n : "n,e,s,w,se,sw,ne,nw";
      this.uiDialog
        .resizable({
          cancel: ".ui-dialog-content",
          containment: "document",
          alsoResize: this.element,
          maxWidth: i.maxWidth,
          maxHeight: i.maxHeight,
          minWidth: i.minWidth,
          minHeight: this._minHeight(),
          handles: o,
          start: function (t, n) {
            e(this).addClass("ui-dialog-resizing"),
              r._trigger("resizeStart", t, u(n));
          },
          resize: function (e, t) {
            r._trigger("resize", e, u(t));
          },
          stop: function (t, n) {
            e(this).removeClass("ui-dialog-resizing"),
              (i.height = e(this).height()),
              (i.width = e(this).width()),
              r._trigger("resizeStop", t, u(n)),
              e.ui.dialog.overlay.resize();
          },
        })
        .css("position", s)
        .find(".ui-resizable-se")
        .addClass("ui-icon ui-icon-grip-diagonal-se");
    },
    _minHeight: function () {
      var e = this.options;
      return e.height === "auto"
        ? e.minHeight
        : Math.min(e.minHeight, e.height);
    },
    _position: function (t) {
      var n = [],
        r = [0, 0],
        i;
      if (t) {
        if (typeof t == "string" || (typeof t == "object" && "0" in t))
          (n = t.split ? t.split(" ") : [t[0], t[1]]),
            n.length === 1 && (n[1] = n[0]),
            e.each(["left", "top"], function (e, t) {
              +n[e] === n[e] && ((r[e] = n[e]), (n[e] = t));
            }),
            (t = {
              my:
                n[0] +
                (r[0] < 0 ? r[0] : "+" + r[0]) +
                " " +
                n[1] +
                (r[1] < 0 ? r[1] : "+" + r[1]),
              at: n.join(" "),
            });
        t = e.extend({}, e.ui.dialog.prototype.options.position, t);
      } else t = e.ui.dialog.prototype.options.position;
      (i = this.uiDialog.is(":visible")),
        i || this.uiDialog.show(),
        this.uiDialog.position(t),
        i || this.uiDialog.hide();
    },
    _setOptions: function (t) {
      var n = this,
        s = {},
        o = !1;
      e.each(t, function (e, t) {
        n._setOption(e, t), e in r && (o = !0), e in i && (s[e] = t);
      }),
        o && this._size(),
        this.uiDialog.is(":data(resizable)") &&
        this.uiDialog.resizable("option", s);
    },
    _setOption: function (t, r) {
      var i,
        s,
        o = this.uiDialog;
      switch (t) {
        case "buttons":
          this._createButtons(r);
          break;
        case "closeText":
          this.uiDialogTitlebarCloseText.text("" + r);
          break;
        case "dialogClass":
          o.removeClass(this.options.dialogClass).addClass(n + r);
          break;
        case "disabled":
          r
            ? o.addClass("ui-dialog-disabled")
            : o.removeClass("ui-dialog-disabled");
          break;
        case "draggable":
          (i = o.is(":data(draggable)")),
            i && !r && o.draggable("destroy"),
            !i && r && this._makeDraggable();
          break;
        case "position":
          this._position(r);
          break;
        case "resizable":
          (s = o.is(":data(resizable)")),
            s && !r && o.resizable("destroy"),
            s && typeof r == "string" && o.resizable("option", "handles", r),
            !s && r !== !1 && this._makeResizable(r);
          break;
        case "title":
          e(".ui-dialog-title", this.uiDialogTitlebar).html(
            "" + (r || "&#160;")
          );
      }
      this._super(t, r);
    },
    _size: function () {
      var t,
        n,
        r,
        i = this.options,
        s = this.uiDialog.is(":visible");
      this.element.show().css({ width: "auto", minHeight: 0, height: 0 }),
        i.minWidth > i.width && (i.width = i.minWidth),
        (t = this.uiDialog
          .css({ height: "auto", width: i.width })
          .outerHeight()),
        (n = Math.max(0, i.minHeight - t)),
        i.height === "auto"
          ? e.support.minHeight
            ? this.element.css({ minHeight: n, height: "auto" })
            : (this.uiDialog.show(),
              (r = this.element.css("height", "auto").height()),
              s || this.uiDialog.hide(),
              this.element.height(Math.max(r, n)))
          : this.element.height(Math.max(i.height - t, 0)),
        this.uiDialog.is(":data(resizable)") &&
        this.uiDialog.resizable("option", "minHeight", this._minHeight());
    },
  }),
    e.extend(e.ui.dialog, {
      uuid: 0,
      maxZ: 0,
      getTitleId: function (e) {
        var t = e.attr("id");
        return t || ((this.uuid += 1), (t = this.uuid)), "ui-dialog-title-" + t;
      },
      overlay: function (t) {
        this.$el = e.ui.dialog.overlay.create(t);
      },
    }),
    e.extend(e.ui.dialog.overlay, {
      instances: [],
      oldInstances: [],
      maxZ: 0,
      events: e
        .map(
          "focus,mousedown,mouseup,keydown,keypress,click".split(","),
          function (e) {
            return e + ".dialog-overlay";
          }
        )
        .join(" "),
      create: function (t) {
        this.instances.length === 0 &&
          (setTimeout(function () {
            e.ui.dialog.overlay.instances.length &&
              e(document).bind(e.ui.dialog.overlay.events, function (t) {
                if (e(t.target).zIndex() < e.ui.dialog.overlay.maxZ) return !1;
              });
          }, 1),
            e(window).bind("resize.dialog-overlay", e.ui.dialog.overlay.resize));
        var n =
          this.oldInstances.pop() || e("<div>").addClass("ui-widget-overlay");
        return (
          e(document).bind("keydown.dialog-overlay", function (r) {
            var i = e.ui.dialog.overlay.instances;
            i.length !== 0 &&
              i[i.length - 1] === n &&
              t.options.closeOnEscape &&
              !r.isDefaultPrevented() &&
              r.keyCode &&
              r.keyCode === e.ui.keyCode.ESCAPE &&
              (t.close(r), r.preventDefault());
          }),
          n
            .appendTo(document.body)
            .css({ width: this.width(), height: this.height() }),
          e.fn.bgiframe && n.bgiframe(),
          this.instances.push(n),
          n
        );
      },
      destroy: function (t) {
        var n = e.inArray(t, this.instances),
          r = 0;
        n !== -1 && this.oldInstances.push(this.instances.splice(n, 1)[0]),
          this.instances.length === 0 &&
          e([document, window]).unbind(".dialog-overlay"),
          t.height(0).width(0).remove(),
          e.each(this.instances, function () {
            r = Math.max(r, this.css("z-index"));
          }),
          (this.maxZ = r);
      },
      height: function () {
        var t, n;
        return e.ui.ie
          ? ((t = Math.max(
            document.documentElement.scrollHeight,
            document.body.scrollHeight
          )),
            (n = Math.max(
              document.documentElement.offsetHeight,
              document.body.offsetHeight
            )),
            t < n ? e(window).height() + "px" : t + "px")
          : e(document).height() + "px";
      },
      width: function () {
        var t, n;
        return e.ui.ie
          ? ((t = Math.max(
            document.documentElement.scrollWidth,
            document.body.scrollWidth
          )),
            (n = Math.max(
              document.documentElement.offsetWidth,
              document.body.offsetWidth
            )),
            t < n ? e(window).width() + "px" : t + "px")
          : e(document).width() + "px";
      },
      resize: function () {
        var t = e([]);
        e.each(e.ui.dialog.overlay.instances, function () {
          t = t.add(this);
        }),
          t
            .css({ width: 0, height: 0 })
            .css({
              width: e.ui.dialog.overlay.width(),
              height: e.ui.dialog.overlay.height(),
            });
      },
    }),
    e.extend(e.ui.dialog.overlay.prototype, {
      destroy: function () {
        e.ui.dialog.overlay.destroy(this.$el);
      },
    });
})(jQuery);
(function (e, t) {
  e.widget("ui.draggable", e.ui.mouse, {
    version: "1.9.2",
    widgetEventPrefix: "drag",
    options: {
      addClasses: !0,
      appendTo: "parent",
      axis: !1,
      connectToSortable: !1,
      containment: !1,
      cursor: "auto",
      cursorAt: !1,
      grid: !1,
      handle: !1,
      helper: "original",
      iframeFix: !1,
      opacity: !1,
      refreshPositions: !1,
      revert: !1,
      revertDuration: 500,
      scope: "default",
      scroll: !0,
      scrollSensitivity: 20,
      scrollSpeed: 20,
      snap: !1,
      snapMode: "both",
      snapTolerance: 20,
      stack: !1,
      zIndex: !1,
    },
    _create: function () {
      this.options.helper == "original" &&
        !/^(?:r|a|f)/.test(this.element.css("position")) &&
        (this.element[0].style.position = "relative"),
        this.options.addClasses && this.element.addClass("ui-draggable"),
        this.options.disabled && this.element.addClass("ui-draggable-disabled"),
        this._mouseInit();
    },
    _destroy: function () {
      this.element.removeClass(
        "ui-draggable ui-draggable-dragging ui-draggable-disabled"
      ),
        this._mouseDestroy();
    },
    _mouseCapture: function (t) {
      var n = this.options;
      return this.helper || n.disabled || e(t.target).is(".ui-resizable-handle")
        ? !1
        : ((this.handle = this._getHandle(t)),
          this.handle
            ? (e(n.iframeFix === !0 ? "iframe" : n.iframeFix).each(function () {
              e(
                '<div class="ui-draggable-iframeFix" style="background: #fff;"></div>'
              )
                .css({
                  width: this.offsetWidth + "px",
                  height: this.offsetHeight + "px",
                  position: "absolute",
                  opacity: "0.001",
                  zIndex: 1e3,
                })
                .css(e(this).offset())
                .appendTo("body");
            }),
              !0)
            : !1);
    },
    _mouseStart: function (t) {
      var n = this.options;
      return (
        (this.helper = this._createHelper(t)),
        this.helper.addClass("ui-draggable-dragging"),
        this._cacheHelperProportions(),
        e.ui.ddmanager && (e.ui.ddmanager.current = this),
        this._cacheMargins(),
        (this.cssPosition = this.helper.css("position")),
        (this.scrollParent = this.helper.scrollParent()),
        (this.offset = this.positionAbs = this.element.offset()),
        (this.offset = {
          top: this.offset.top - this.margins.top,
          left: this.offset.left - this.margins.left,
        }),
        e.extend(this.offset, {
          click: {
            left: t.pageX - this.offset.left,
            top: t.pageY - this.offset.top,
          },
          parent: this._getParentOffset(),
          relative: this._getRelativeOffset(),
        }),
        (this.originalPosition = this.position = this._generatePosition(t)),
        (this.originalPageX = t.pageX),
        (this.originalPageY = t.pageY),
        n.cursorAt && this._adjustOffsetFromHelper(n.cursorAt),
        n.containment && this._setContainment(),
        this._trigger("start", t) === !1
          ? (this._clear(), !1)
          : (this._cacheHelperProportions(),
            e.ui.ddmanager &&
            !n.dropBehaviour &&
            e.ui.ddmanager.prepareOffsets(this, t),
            this._mouseDrag(t, !0),
            e.ui.ddmanager && e.ui.ddmanager.dragStart(this, t),
            !0)
      );
    },
    _mouseDrag: function (t, n) {
      (this.position = this._generatePosition(t)),
        (this.positionAbs = this._convertPositionTo("absolute"));
      if (!n) {
        var r = this._uiHash();
        if (this._trigger("drag", t, r) === !1) return this._mouseUp({}), !1;
        this.position = r.position;
      }
      if (!this.options.axis || this.options.axis != "y")
        this.helper[0].style.left = this.position.left + "px";
      if (!this.options.axis || this.options.axis != "x")
        this.helper[0].style.top = this.position.top + "px";
      return e.ui.ddmanager && e.ui.ddmanager.drag(this, t), !1;
    },
    _mouseStop: function (t) {
      var n = !1;
      e.ui.ddmanager &&
        !this.options.dropBehaviour &&
        (n = e.ui.ddmanager.drop(this, t)),
        this.dropped && ((n = this.dropped), (this.dropped = !1));
      var r = this.element[0],
        i = !1;
      while (r && (r = r.parentNode)) r == document && (i = !0);
      if (!i && this.options.helper === "original") return !1;
      if (
        (this.options.revert == "invalid" && !n) ||
        (this.options.revert == "valid" && n) ||
        this.options.revert === !0 ||
        (e.isFunction(this.options.revert) &&
          this.options.revert.call(this.element, n))
      ) {
        var s = this;
        e(this.helper).animate(
          this.originalPosition,
          parseInt(this.options.revertDuration, 10),
          function () {
            s._trigger("stop", t) !== !1 && s._clear();
          }
        );
      } else this._trigger("stop", t) !== !1 && this._clear();
      return !1;
    },
    _mouseUp: function (t) {
      return (
        e("div.ui-draggable-iframeFix").each(function () {
          this.parentNode.removeChild(this);
        }),
        e.ui.ddmanager && e.ui.ddmanager.dragStop(this, t),
        e.ui.mouse.prototype._mouseUp.call(this, t)
      );
    },
    cancel: function () {
      return (
        this.helper.is(".ui-draggable-dragging")
          ? this._mouseUp({})
          : this._clear(),
        this
      );
    },
    _getHandle: function (t) {
      var n =
        !this.options.handle || !e(this.options.handle, this.element).length
          ? !0
          : !1;
      return (
        e(this.options.handle, this.element)
          .find("*")
          .andSelf()
          .each(function () {
            this == t.target && (n = !0);
          }),
        n
      );
    },
    _createHelper: function (t) {
      var n = this.options,
        r = e.isFunction(n.helper)
          ? e(n.helper.apply(this.element[0], [t]))
          : n.helper == "clone"
            ? this.element.clone().removeAttr("id")
            : this.element;
      return (
        r.parents("body").length ||
        r.appendTo(
          n.appendTo == "parent" ? this.element[0].parentNode : n.appendTo
        ),
        r[0] != this.element[0] &&
        !/(fixed|absolute)/.test(r.css("position")) &&
        r.css("position", "absolute"),
        r
      );
    },
    _adjustOffsetFromHelper: function (t) {
      typeof t == "string" && (t = t.split(" ")),
        e.isArray(t) && (t = { left: +t[0], top: +t[1] || 0 }),
        "left" in t && (this.offset.click.left = t.left + this.margins.left),
        "right" in t &&
        (this.offset.click.left =
          this.helperProportions.width - t.right + this.margins.left),
        "top" in t && (this.offset.click.top = t.top + this.margins.top),
        "bottom" in t &&
        (this.offset.click.top =
          this.helperProportions.height - t.bottom + this.margins.top);
    },
    _getParentOffset: function () {
      this.offsetParent = this.helper.offsetParent();
      var t = this.offsetParent.offset();
      this.cssPosition == "absolute" &&
        this.scrollParent[0] != document &&
        e.contains(this.scrollParent[0], this.offsetParent[0]) &&
        ((t.left += this.scrollParent.scrollLeft()),
          (t.top += this.scrollParent.scrollTop()));
      if (
        this.offsetParent[0] == document.body ||
        (this.offsetParent[0].tagName &&
          this.offsetParent[0].tagName.toLowerCase() == "html" &&
          e.ui.ie)
      )
        t = { top: 0, left: 0 };
      return {
        top:
          t.top + (parseInt(this.offsetParent.css("borderTopWidth"), 10) || 0),
        left:
          t.left +
          (parseInt(this.offsetParent.css("borderLeftWidth"), 10) || 0),
      };
    },
    _getRelativeOffset: function () {
      if (this.cssPosition == "relative") {
        var e = this.element.position();
        return {
          top:
            e.top -
            (parseInt(this.helper.css("top"), 10) || 0) +
            this.scrollParent.scrollTop(),
          left:
            e.left -
            (parseInt(this.helper.css("left"), 10) || 0) +
            this.scrollParent.scrollLeft(),
        };
      }
      return { top: 0, left: 0 };
    },
    _cacheMargins: function () {
      this.margins = {
        left: parseInt(this.element.css("marginLeft"), 10) || 0,
        top: parseInt(this.element.css("marginTop"), 10) || 0,
        right: parseInt(this.element.css("marginRight"), 10) || 0,
        bottom: parseInt(this.element.css("marginBottom"), 10) || 0,
      };
    },
    _cacheHelperProportions: function () {
      this.helperProportions = {
        width: this.helper.outerWidth(),
        height: this.helper.outerHeight(),
      };
    },
    _setContainment: function () {
      var t = this.options;
      t.containment == "parent" && (t.containment = this.helper[0].parentNode);
      if (t.containment == "document" || t.containment == "window")
        this.containment = [
          t.containment == "document"
            ? 0
            : e(window).scrollLeft() -
            this.offset.relative.left -
            this.offset.parent.left,
          t.containment == "document"
            ? 0
            : e(window).scrollTop() -
            this.offset.relative.top -
            this.offset.parent.top,
          (t.containment == "document" ? 0 : e(window).scrollLeft()) +
          e(t.containment == "document" ? document : window).width() -
          this.helperProportions.width -
          this.margins.left,
          (t.containment == "document" ? 0 : e(window).scrollTop()) +
          (e(t.containment == "document" ? document : window).height() ||
            document.body.parentNode.scrollHeight) -
          this.helperProportions.height -
          this.margins.top,
        ];
      if (
        !/^(document|window|parent)$/.test(t.containment) &&
        t.containment.constructor != Array
      ) {
        var n = e(t.containment),
          r = n[0];
        if (!r) return;
        var i = n.offset(),
          s = e(r).css("overflow") != "hidden";
        (this.containment = [
          (parseInt(e(r).css("borderLeftWidth"), 10) || 0) +
          (parseInt(e(r).css("paddingLeft"), 10) || 0),
          (parseInt(e(r).css("borderTopWidth"), 10) || 0) +
          (parseInt(e(r).css("paddingTop"), 10) || 0),
          (s ? Math.max(r.scrollWidth, r.offsetWidth) : r.offsetWidth) -
          (parseInt(e(r).css("borderLeftWidth"), 10) || 0) -
          (parseInt(e(r).css("paddingRight"), 10) || 0) -
          this.helperProportions.width -
          this.margins.left -
          this.margins.right,
          (s ? Math.max(r.scrollHeight, r.offsetHeight) : r.offsetHeight) -
          (parseInt(e(r).css("borderTopWidth"), 10) || 0) -
          (parseInt(e(r).css("paddingBottom"), 10) || 0) -
          this.helperProportions.height -
          this.margins.top -
          this.margins.bottom,
        ]),
          (this.relative_container = n);
      } else
        t.containment.constructor == Array &&
          (this.containment = t.containment);
    },
    _convertPositionTo: function (t, n) {
      n || (n = this.position);
      var r = t == "absolute" ? 1 : -1,
        i = this.options,
        s =
          this.cssPosition != "absolute" ||
            (this.scrollParent[0] != document &&
              !!e.contains(this.scrollParent[0], this.offsetParent[0]))
            ? this.scrollParent
            : this.offsetParent,
        o = /(html|body)/i.test(s[0].tagName);
      return {
        top:
          n.top +
          this.offset.relative.top * r +
          this.offset.parent.top * r -
          (this.cssPosition == "fixed"
            ? -this.scrollParent.scrollTop()
            : o
              ? 0
              : s.scrollTop()) *
          r,
        left:
          n.left +
          this.offset.relative.left * r +
          this.offset.parent.left * r -
          (this.cssPosition == "fixed"
            ? -this.scrollParent.scrollLeft()
            : o
              ? 0
              : s.scrollLeft()) *
          r,
      };
    },
    _generatePosition: function (t) {
      var n = this.options,
        r =
          this.cssPosition != "absolute" ||
            (this.scrollParent[0] != document &&
              !!e.contains(this.scrollParent[0], this.offsetParent[0]))
            ? this.scrollParent
            : this.offsetParent,
        i = /(html|body)/i.test(r[0].tagName),
        s = t.pageX,
        o = t.pageY;
      if (this.originalPosition) {
        var u;
        if (this.containment) {
          if (this.relative_container) {
            var a = this.relative_container.offset();
            u = [
              this.containment[0] + a.left,
              this.containment[1] + a.top,
              this.containment[2] + a.left,
              this.containment[3] + a.top,
            ];
          } else u = this.containment;
          t.pageX - this.offset.click.left < u[0] &&
            (s = u[0] + this.offset.click.left),
            t.pageY - this.offset.click.top < u[1] &&
            (o = u[1] + this.offset.click.top),
            t.pageX - this.offset.click.left > u[2] &&
            (s = u[2] + this.offset.click.left),
            t.pageY - this.offset.click.top > u[3] &&
            (o = u[3] + this.offset.click.top);
        }
        if (n.grid) {
          var f = n.grid[1]
            ? this.originalPageY +
            Math.round((o - this.originalPageY) / n.grid[1]) * n.grid[1]
            : this.originalPageY;
          o = u
            ? f - this.offset.click.top < u[1] ||
              f - this.offset.click.top > u[3]
              ? f - this.offset.click.top < u[1]
                ? f + n.grid[1]
                : f - n.grid[1]
              : f
            : f;
          var l = n.grid[0]
            ? this.originalPageX +
            Math.round((s - this.originalPageX) / n.grid[0]) * n.grid[0]
            : this.originalPageX;
          s = u
            ? l - this.offset.click.left < u[0] ||
              l - this.offset.click.left > u[2]
              ? l - this.offset.click.left < u[0]
                ? l + n.grid[0]
                : l - n.grid[0]
              : l
            : l;
        }
      }
      return {
        top:
          o -
          this.offset.click.top -
          this.offset.relative.top -
          this.offset.parent.top +
          (this.cssPosition == "fixed"
            ? -this.scrollParent.scrollTop()
            : i
              ? 0
              : r.scrollTop()),
        left:
          s -
          this.offset.click.left -
          this.offset.relative.left -
          this.offset.parent.left +
          (this.cssPosition == "fixed"
            ? -this.scrollParent.scrollLeft()
            : i
              ? 0
              : r.scrollLeft()),
      };
    },
    _clear: function () {
      this.helper.removeClass("ui-draggable-dragging"),
        this.helper[0] != this.element[0] &&
        !this.cancelHelperRemoval &&
        this.helper.remove(),
        (this.helper = null),
        (this.cancelHelperRemoval = !1);
    },
    _trigger: function (t, n, r) {
      return (
        (r = r || this._uiHash()),
        e.ui.plugin.call(this, t, [n, r]),
        t == "drag" && (this.positionAbs = this._convertPositionTo("absolute")),
        e.Widget.prototype._trigger.call(this, t, n, r)
      );
    },
    plugins: {},
    _uiHash: function (e) {
      return {
        helper: this.helper,
        position: this.position,
        originalPosition: this.originalPosition,
        offset: this.positionAbs,
      };
    },
  }),
    e.ui.plugin.add("draggable", "connectToSortable", {
      start: function (t, n) {
        var r = e(this).data("draggable"),
          i = r.options,
          s = e.extend({}, n, { item: r.element });
        (r.sortables = []),
          e(i.connectToSortable).each(function () {
            var n = e.data(this, "sortable");
            n &&
              !n.options.disabled &&
              (r.sortables.push({
                instance: n,
                shouldRevert: n.options.revert,
              }),
                n.refreshPositions(),
                n._trigger("activate", t, s));
          });
      },
      stop: function (t, n) {
        var r = e(this).data("draggable"),
          i = e.extend({}, n, { item: r.element });
        e.each(r.sortables, function () {
          this.instance.isOver
            ? ((this.instance.isOver = 0),
              (r.cancelHelperRemoval = !0),
              (this.instance.cancelHelperRemoval = !1),
              this.shouldRevert && (this.instance.options.revert = !0),
              this.instance._mouseStop(t),
              (this.instance.options.helper = this.instance.options._helper),
              r.options.helper == "original" &&
              this.instance.currentItem.css({ top: "auto", left: "auto" }))
            : ((this.instance.cancelHelperRemoval = !1),
              this.instance._trigger("deactivate", t, i));
        });
      },
      drag: function (t, n) {
        var r = e(this).data("draggable"),
          i = this,
          s = function (t) {
            var n = this.offset.click.top,
              r = this.offset.click.left,
              i = this.positionAbs.top,
              s = this.positionAbs.left,
              o = t.height,
              u = t.width,
              a = t.top,
              f = t.left;
            return e.ui.isOver(i + n, s + r, a, f, o, u);
          };
        e.each(r.sortables, function (s) {
          var o = !1,
            u = this;
          (this.instance.positionAbs = r.positionAbs),
            (this.instance.helperProportions = r.helperProportions),
            (this.instance.offset.click = r.offset.click),
            this.instance._intersectsWith(this.instance.containerCache) &&
            ((o = !0),
              e.each(r.sortables, function () {
                return (
                  (this.instance.positionAbs = r.positionAbs),
                  (this.instance.helperProportions = r.helperProportions),
                  (this.instance.offset.click = r.offset.click),
                  this != u &&
                  this.instance._intersectsWith(
                    this.instance.containerCache
                  ) &&
                  e.ui.contains(
                    u.instance.element[0],
                    this.instance.element[0]
                  ) &&
                  (o = !1),
                  o
                );
              })),
            o
              ? (this.instance.isOver ||
                ((this.instance.isOver = 1),
                  (this.instance.currentItem = e(i)
                    .clone()
                    .removeAttr("id")
                    .appendTo(this.instance.element)
                    .data("sortable-item", !0)),
                  (this.instance.options._helper =
                    this.instance.options.helper),
                  (this.instance.options.helper = function () {
                    return n.helper[0];
                  }),
                  (t.target = this.instance.currentItem[0]),
                  this.instance._mouseCapture(t, !0),
                  this.instance._mouseStart(t, !0, !0),
                  (this.instance.offset.click.top = r.offset.click.top),
                  (this.instance.offset.click.left = r.offset.click.left),
                  (this.instance.offset.parent.left -=
                    r.offset.parent.left - this.instance.offset.parent.left),
                  (this.instance.offset.parent.top -=
                    r.offset.parent.top - this.instance.offset.parent.top),
                  r._trigger("toSortable", t),
                  (r.dropped = this.instance.element),
                  (r.currentItem = r.element),
                  (this.instance.fromOutside = r)),
                this.instance.currentItem && this.instance._mouseDrag(t))
              : this.instance.isOver &&
              ((this.instance.isOver = 0),
                (this.instance.cancelHelperRemoval = !0),
                (this.instance.options.revert = !1),
                this.instance._trigger(
                  "out",
                  t,
                  this.instance._uiHash(this.instance)
                ),
                this.instance._mouseStop(t, !0),
                (this.instance.options.helper = this.instance.options._helper),
                this.instance.currentItem.remove(),
                this.instance.placeholder && this.instance.placeholder.remove(),
                r._trigger("fromSortable", t),
                (r.dropped = !1));
        });
      },
    }),
    e.ui.plugin.add("draggable", "cursor", {
      start: function (t, n) {
        var r = e("body"),
          i = e(this).data("draggable").options;
        r.css("cursor") && (i._cursor = r.css("cursor")),
          r.css("cursor", i.cursor);
      },
      stop: function (t, n) {
        var r = e(this).data("draggable").options;
        r._cursor && e("body").css("cursor", r._cursor);
      },
    }),
    e.ui.plugin.add("draggable", "opacity", {
      start: function (t, n) {
        var r = e(n.helper),
          i = e(this).data("draggable").options;
        r.css("opacity") && (i._opacity = r.css("opacity")),
          r.css("opacity", i.opacity);
      },
      stop: function (t, n) {
        var r = e(this).data("draggable").options;
        r._opacity && e(n.helper).css("opacity", r._opacity);
      },
    }),
    e.ui.plugin.add("draggable", "scroll", {
      start: function (t, n) {
        var r = e(this).data("draggable");
        r.scrollParent[0] != document &&
          r.scrollParent[0].tagName != "HTML" &&
          (r.overflowOffset = r.scrollParent.offset());
      },
      drag: function (t, n) {
        var r = e(this).data("draggable"),
          i = r.options,
          s = !1;
        if (
          r.scrollParent[0] != document &&
          r.scrollParent[0].tagName != "HTML"
        ) {
          if (!i.axis || i.axis != "x")
            r.overflowOffset.top + r.scrollParent[0].offsetHeight - t.pageY <
              i.scrollSensitivity
              ? (r.scrollParent[0].scrollTop = s =
                r.scrollParent[0].scrollTop + i.scrollSpeed)
              : t.pageY - r.overflowOffset.top < i.scrollSensitivity &&
              (r.scrollParent[0].scrollTop = s =
                r.scrollParent[0].scrollTop - i.scrollSpeed);
          if (!i.axis || i.axis != "y")
            r.overflowOffset.left + r.scrollParent[0].offsetWidth - t.pageX <
              i.scrollSensitivity
              ? (r.scrollParent[0].scrollLeft = s =
                r.scrollParent[0].scrollLeft + i.scrollSpeed)
              : t.pageX - r.overflowOffset.left < i.scrollSensitivity &&
              (r.scrollParent[0].scrollLeft = s =
                r.scrollParent[0].scrollLeft - i.scrollSpeed);
        } else {
          if (!i.axis || i.axis != "x")
            t.pageY - e(document).scrollTop() < i.scrollSensitivity
              ? (s = e(document).scrollTop(
                e(document).scrollTop() - i.scrollSpeed
              ))
              : e(window).height() - (t.pageY - e(document).scrollTop()) <
              i.scrollSensitivity &&
              (s = e(document).scrollTop(
                e(document).scrollTop() + i.scrollSpeed
              ));
          if (!i.axis || i.axis != "y")
            t.pageX - e(document).scrollLeft() < i.scrollSensitivity
              ? (s = e(document).scrollLeft(
                e(document).scrollLeft() - i.scrollSpeed
              ))
              : e(window).width() - (t.pageX - e(document).scrollLeft()) <
              i.scrollSensitivity &&
              (s = e(document).scrollLeft(
                e(document).scrollLeft() + i.scrollSpeed
              ));
        }
        s !== !1 &&
          e.ui.ddmanager &&
          !i.dropBehaviour &&
          e.ui.ddmanager.prepareOffsets(r, t);
      },
    }),
    e.ui.plugin.add("draggable", "snap", {
      start: function (t, n) {
        var r = e(this).data("draggable"),
          i = r.options;
        (r.snapElements = []),
          e(
            i.snap.constructor != String
              ? i.snap.items || ":data(draggable)"
              : i.snap
          ).each(function () {
            var t = e(this),
              n = t.offset();
            this != r.element[0] &&
              r.snapElements.push({
                item: this,
                width: t.outerWidth(),
                height: t.outerHeight(),
                top: n.top,
                left: n.left,
              });
          });
      },
      drag: function (t, n) {
        var r = e(this).data("draggable"),
          i = r.options,
          s = i.snapTolerance,
          o = n.offset.left,
          u = o + r.helperProportions.width,
          a = n.offset.top,
          f = a + r.helperProportions.height;
        for (var l = r.snapElements.length - 1; l >= 0; l--) {
          var c = r.snapElements[l].left,
            h = c + r.snapElements[l].width,
            p = r.snapElements[l].top,
            d = p + r.snapElements[l].height;
          if (
            !(
              (c - s < o && o < h + s && p - s < a && a < d + s) ||
              (c - s < o && o < h + s && p - s < f && f < d + s) ||
              (c - s < u && u < h + s && p - s < a && a < d + s) ||
              (c - s < u && u < h + s && p - s < f && f < d + s)
            )
          ) {
            r.snapElements[l].snapping &&
              r.options.snap.release &&
              r.options.snap.release.call(
                r.element,
                t,
                e.extend(r._uiHash(), { snapItem: r.snapElements[l].item })
              ),
              (r.snapElements[l].snapping = !1);
            continue;
          }
          if (i.snapMode != "inner") {
            var v = Math.abs(p - f) <= s,
              m = Math.abs(d - a) <= s,
              g = Math.abs(c - u) <= s,
              y = Math.abs(h - o) <= s;
            v &&
              (n.position.top =
                r._convertPositionTo("relative", {
                  top: p - r.helperProportions.height,
                  left: 0,
                }).top - r.margins.top),
              m &&
              (n.position.top =
                r._convertPositionTo("relative", { top: d, left: 0 }).top -
                r.margins.top),
              g &&
              (n.position.left =
                r._convertPositionTo("relative", {
                  top: 0,
                  left: c - r.helperProportions.width,
                }).left - r.margins.left),
              y &&
              (n.position.left =
                r._convertPositionTo("relative", { top: 0, left: h }).left -
                r.margins.left);
          }
          var b = v || m || g || y;
          if (i.snapMode != "outer") {
            var v = Math.abs(p - a) <= s,
              m = Math.abs(d - f) <= s,
              g = Math.abs(c - o) <= s,
              y = Math.abs(h - u) <= s;
            v &&
              (n.position.top =
                r._convertPositionTo("relative", { top: p, left: 0 }).top -
                r.margins.top),
              m &&
              (n.position.top =
                r._convertPositionTo("relative", {
                  top: d - r.helperProportions.height,
                  left: 0,
                }).top - r.margins.top),
              g &&
              (n.position.left =
                r._convertPositionTo("relative", { top: 0, left: c }).left -
                r.margins.left),
              y &&
              (n.position.left =
                r._convertPositionTo("relative", {
                  top: 0,
                  left: h - r.helperProportions.width,
                }).left - r.margins.left);
          }
          !r.snapElements[l].snapping &&
            (v || m || g || y || b) &&
            r.options.snap.snap &&
            r.options.snap.snap.call(
              r.element,
              t,
              e.extend(r._uiHash(), { snapItem: r.snapElements[l].item })
            ),
            (r.snapElements[l].snapping = v || m || g || y || b);
        }
      },
    }),
    e.ui.plugin.add("draggable", "stack", {
      start: function (t, n) {
        var r = e(this).data("draggable").options,
          i = e.makeArray(e(r.stack)).sort(function (t, n) {
            return (
              (parseInt(e(t).css("zIndex"), 10) || 0) -
              (parseInt(e(n).css("zIndex"), 10) || 0)
            );
          });
        if (!i.length) return;
        var s = parseInt(i[0].style.zIndex) || 0;
        e(i).each(function (e) {
          this.style.zIndex = s + e;
        }),
          (this[0].style.zIndex = s + i.length);
      },
    }),
    e.ui.plugin.add("draggable", "zIndex", {
      start: function (t, n) {
        var r = e(n.helper),
          i = e(this).data("draggable").options;
        r.css("zIndex") && (i._zIndex = r.css("zIndex")),
          r.css("zIndex", i.zIndex);
      },
      stop: function (t, n) {
        var r = e(this).data("draggable").options;
        r._zIndex && e(n.helper).css("zIndex", r._zIndex);
      },
    });
})(jQuery);
(function (e, t) {
  e.widget("ui.droppable", {
    version: "1.9.2",
    widgetEventPrefix: "drop",
    options: {
      accept: "*",
      activeClass: !1,
      addClasses: !0,
      greedy: !1,
      hoverClass: !1,
      scope: "default",
      tolerance: "intersect",
    },
    _create: function () {
      var t = this.options,
        n = t.accept;
      (this.isover = 0),
        (this.isout = 1),
        (this.accept = e.isFunction(n)
          ? n
          : function (e) {
            return e.is(n);
          }),
        (this.proportions = {
          width: this.element[0].offsetWidth,
          height: this.element[0].offsetHeight,
        }),
        (e.ui.ddmanager.droppables[t.scope] =
          e.ui.ddmanager.droppables[t.scope] || []),
        e.ui.ddmanager.droppables[t.scope].push(this),
        t.addClasses && this.element.addClass("ui-droppable");
    },
    _destroy: function () {
      var t = e.ui.ddmanager.droppables[this.options.scope];
      for (var n = 0; n < t.length; n++) t[n] == this && t.splice(n, 1);
      this.element.removeClass("ui-droppable ui-droppable-disabled");
    },
    _setOption: function (t, n) {
      t == "accept" &&
        (this.accept = e.isFunction(n)
          ? n
          : function (e) {
            return e.is(n);
          }),
        e.Widget.prototype._setOption.apply(this, arguments);
    },
    _activate: function (t) {
      var n = e.ui.ddmanager.current;
      this.options.activeClass &&
        this.element.addClass(this.options.activeClass),
        n && this._trigger("activate", t, this.ui(n));
    },
    _deactivate: function (t) {
      var n = e.ui.ddmanager.current;
      this.options.activeClass &&
        this.element.removeClass(this.options.activeClass),
        n && this._trigger("deactivate", t, this.ui(n));
    },
    _over: function (t) {
      var n = e.ui.ddmanager.current;
      if (!n || (n.currentItem || n.element)[0] == this.element[0]) return;
      this.accept.call(this.element[0], n.currentItem || n.element) &&
        (this.options.hoverClass &&
          this.element.addClass(this.options.hoverClass),
          this._trigger("over", t, this.ui(n)));
    },
    _out: function (t) {
      var n = e.ui.ddmanager.current;
      if (!n || (n.currentItem || n.element)[0] == this.element[0]) return;
      this.accept.call(this.element[0], n.currentItem || n.element) &&
        (this.options.hoverClass &&
          this.element.removeClass(this.options.hoverClass),
          this._trigger("out", t, this.ui(n)));
    },
    _drop: function (t, n) {
      var r = n || e.ui.ddmanager.current;
      if (!r || (r.currentItem || r.element)[0] == this.element[0]) return !1;
      var i = !1;
      return (
        this.element
          .find(":data(droppable)")
          .not(".ui-draggable-dragging")
          .each(function () {
            var t = e.data(this, "droppable");
            if (
              t.options.greedy &&
              !t.options.disabled &&
              t.options.scope == r.options.scope &&
              t.accept.call(t.element[0], r.currentItem || r.element) &&
              e.ui.intersect(
                r,
                e.extend(t, { offset: t.element.offset() }),
                t.options.tolerance
              )
            )
              return (i = !0), !1;
          }),
        i
          ? !1
          : this.accept.call(this.element[0], r.currentItem || r.element)
            ? (this.options.activeClass &&
              this.element.removeClass(this.options.activeClass),
              this.options.hoverClass &&
              this.element.removeClass(this.options.hoverClass),
              this._trigger("drop", t, this.ui(r)),
              this.element)
            : !1
      );
    },
    ui: function (e) {
      return {
        draggable: e.currentItem || e.element,
        helper: e.helper,
        position: e.position,
        offset: e.positionAbs,
      };
    },
  }),
    (e.ui.intersect = function (t, n, r) {
      if (!n.offset) return !1;
      var i = (t.positionAbs || t.position.absolute).left,
        s = i + t.helperProportions.width,
        o = (t.positionAbs || t.position.absolute).top,
        u = o + t.helperProportions.height,
        a = n.offset.left,
        f = a + n.proportions.width,
        l = n.offset.top,
        c = l + n.proportions.height;
      switch (r) {
        case "fit":
          return a <= i && s <= f && l <= o && u <= c;
        case "intersect":
          return (
            a < i + t.helperProportions.width / 2 &&
            s - t.helperProportions.width / 2 < f &&
            l < o + t.helperProportions.height / 2 &&
            u - t.helperProportions.height / 2 < c
          );
        case "pointer":
          var h =
            (t.positionAbs || t.position.absolute).left +
            (t.clickOffset || t.offset.click).left,
            p =
              (t.positionAbs || t.position.absolute).top +
              (t.clickOffset || t.offset.click).top,
            d = e.ui.isOver(
              p,
              h,
              l,
              a,
              n.proportions.height,
              n.proportions.width
            );
          return d;
        case "touch":
          return (
            ((o >= l && o <= c) || (u >= l && u <= c) || (o < l && u > c)) &&
            ((i >= a && i <= f) || (s >= a && s <= f) || (i < a && s > f))
          );
        default:
          return !1;
      }
    }),
    (e.ui.ddmanager = {
      current: null,
      droppables: { default: [] },
      prepareOffsets: function (t, n) {
        var r = e.ui.ddmanager.droppables[t.options.scope] || [],
          i = n ? n.type : null,
          s = (t.currentItem || t.element).find(":data(droppable)").andSelf();
        e: for (var o = 0; o < r.length; o++) {
          if (
            r[o].options.disabled ||
            (t &&
              !r[o].accept.call(r[o].element[0], t.currentItem || t.element))
          )
            continue;
          for (var u = 0; u < s.length; u++)
            if (s[u] == r[o].element[0]) {
              r[o].proportions.height = 0;
              continue e;
            }
          r[o].visible = r[o].element.css("display") != "none";
          if (!r[o].visible) continue;
          i == "mousedown" && r[o]._activate.call(r[o], n),
            (r[o].offset = r[o].element.offset()),
            (r[o].proportions = {
              width: r[o].element[0].offsetWidth,
              height: r[o].element[0].offsetHeight,
            });
        }
      },
      drop: function (t, n) {
        var r = !1;
        return (
          e.each(e.ui.ddmanager.droppables[t.options.scope] || [], function () {
            if (!this.options) return;
            !this.options.disabled &&
              this.visible &&
              e.ui.intersect(t, this, this.options.tolerance) &&
              (r = this._drop.call(this, n) || r),
              !this.options.disabled &&
              this.visible &&
              this.accept.call(this.element[0], t.currentItem || t.element) &&
              ((this.isout = 1),
                (this.isover = 0),
                this._deactivate.call(this, n));
          }),
          r
        );
      },
      dragStart: function (t, n) {
        t.element.parentsUntil("body").bind("scroll.droppable", function () {
          t.options.refreshPositions || e.ui.ddmanager.prepareOffsets(t, n);
        });
      },
      drag: function (t, n) {
        t.options.refreshPositions && e.ui.ddmanager.prepareOffsets(t, n),
          e.each(e.ui.ddmanager.droppables[t.options.scope] || [], function () {
            if (this.options.disabled || this.greedyChild || !this.visible)
              return;
            var r = e.ui.intersect(t, this, this.options.tolerance),
              i =
                !r && this.isover == 1
                  ? "isout"
                  : r && this.isover == 0
                    ? "isover"
                    : null;
            if (!i) return;
            var s;
            if (this.options.greedy) {
              var o = this.options.scope,
                u = this.element
                  .parents(":data(droppable)")
                  .filter(function () {
                    return e.data(this, "droppable").options.scope === o;
                  });
              u.length &&
                ((s = e.data(u[0], "droppable")),
                  (s.greedyChild = i == "isover" ? 1 : 0));
            }
            s &&
              i == "isover" &&
              ((s.isover = 0), (s.isout = 1), s._out.call(s, n)),
              (this[i] = 1),
              (this[i == "isout" ? "isover" : "isout"] = 0),
              this[i == "isover" ? "_over" : "_out"].call(this, n),
              s &&
              i == "isout" &&
              ((s.isout = 0), (s.isover = 1), s._over.call(s, n));
          });
      },
      dragStop: function (t, n) {
        t.element.parentsUntil("body").unbind("scroll.droppable"),
          t.options.refreshPositions || e.ui.ddmanager.prepareOffsets(t, n);
      },
    });
})(jQuery);
jQuery.effects ||
  (function (e, t) {
    var n = e.uiBackCompat !== !1,
      r = "ui-effects-";
    (e.effects = { effect: {} }),
      (function (t, n) {
        function p(e, t, n) {
          var r = a[t.type] || {};
          return e == null
            ? n || !t.def
              ? null
              : t.def
            : ((e = r.floor ? ~~e : parseFloat(e)),
              isNaN(e)
                ? t.def
                : r.mod
                  ? (e + r.mod) % r.mod
                  : 0 > e
                    ? 0
                    : r.max < e
                      ? r.max
                      : e);
        }
        function d(e) {
          var n = o(),
            r = (n._rgba = []);
          return (
            (e = e.toLowerCase()),
            h(s, function (t, i) {
              var s,
                o = i.re.exec(e),
                a = o && i.parse(o),
                f = i.space || "rgba";
              if (a)
                return (
                  (s = n[f](a)),
                  (n[u[f].cache] = s[u[f].cache]),
                  (r = n._rgba = s._rgba),
                  !1
                );
            }),
            r.length
              ? (r.join() === "0,0,0,0" && t.extend(r, c.transparent), n)
              : c[e]
          );
        }
        function v(e, t, n) {
          return (
            (n = (n + 1) % 1),
            n * 6 < 1
              ? e + (t - e) * n * 6
              : n * 2 < 1
                ? t
                : n * 3 < 2
                  ? e + (t - e) * (2 / 3 - n) * 6
                  : e
          );
        }
        var r =
          "backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor".split(
            " "
          ),
          i = /^([\-+])=\s*(\d+\.?\d*)/,
          s = [
            {
              re: /rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,
              parse: function (e) {
                return [e[1], e[2], e[3], e[4]];
              },
            },
            {
              re: /rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,
              parse: function (e) {
                return [e[1] * 2.55, e[2] * 2.55, e[3] * 2.55, e[4]];
              },
            },
            {
              re: /#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,
              parse: function (e) {
                return [
                  parseInt(e[1], 16),
                  parseInt(e[2], 16),
                  parseInt(e[3], 16),
                ];
              },
            },
            {
              re: /#([a-f0-9])([a-f0-9])([a-f0-9])/,
              parse: function (e) {
                return [
                  parseInt(e[1] + e[1], 16),
                  parseInt(e[2] + e[2], 16),
                  parseInt(e[3] + e[3], 16),
                ];
              },
            },
            {
              re: /hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,
              space: "hsla",
              parse: function (e) {
                return [e[1], e[2] / 100, e[3] / 100, e[4]];
              },
            },
          ],
          o = (t.Color = function (e, n, r, i) {
            return new t.Color.fn.parse(e, n, r, i);
          }),
          u = {
            rgba: {
              props: {
                red: { idx: 0, type: "byte" },
                green: { idx: 1, type: "byte" },
                blue: { idx: 2, type: "byte" },
              },
            },
            hsla: {
              props: {
                hue: { idx: 0, type: "degrees" },
                saturation: { idx: 1, type: "percent" },
                lightness: { idx: 2, type: "percent" },
              },
            },
          },
          a = {
            byte: { floor: !0, max: 255 },
            percent: { max: 1 },
            degrees: { mod: 360, floor: !0 },
          },
          f = (o.support = {}),
          l = t("<p>")[0],
          c,
          h = t.each;
        (l.style.cssText = "background-color:rgba(1,1,1,.5)"),
          (f.rgba = l.style.backgroundColor.indexOf("rgba") > -1),
          h(u, function (e, t) {
            (t.cache = "_" + e),
              (t.props.alpha = { idx: 3, type: "percent", def: 1 });
          }),
          (o.fn = t.extend(o.prototype, {
            parse: function (r, i, s, a) {
              if (r === n) return (this._rgba = [null, null, null, null]), this;
              if (r.jquery || r.nodeType) (r = t(r).css(i)), (i = n);
              var f = this,
                l = t.type(r),
                v = (this._rgba = []);
              i !== n && ((r = [r, i, s, a]), (l = "array"));
              if (l === "string") return this.parse(d(r) || c._default);
              if (l === "array")
                return (
                  h(u.rgba.props, function (e, t) {
                    v[t.idx] = p(r[t.idx], t);
                  }),
                  this
                );
              if (l === "object")
                return (
                  r instanceof o
                    ? h(u, function (e, t) {
                      r[t.cache] && (f[t.cache] = r[t.cache].slice());
                    })
                    : h(u, function (t, n) {
                      var i = n.cache;
                      h(n.props, function (e, t) {
                        if (!f[i] && n.to) {
                          if (e === "alpha" || r[e] == null) return;
                          f[i] = n.to(f._rgba);
                        }
                        f[i][t.idx] = p(r[e], t, !0);
                      }),
                        f[i] &&
                        e.inArray(null, f[i].slice(0, 3)) < 0 &&
                        ((f[i][3] = 1), n.from && (f._rgba = n.from(f[i])));
                    }),
                  this
                );
            },
            is: function (e) {
              var t = o(e),
                n = !0,
                r = this;
              return (
                h(u, function (e, i) {
                  var s,
                    o = t[i.cache];
                  return (
                    o &&
                    ((s = r[i.cache] || (i.to && i.to(r._rgba)) || []),
                      h(i.props, function (e, t) {
                        if (o[t.idx] != null)
                          return (n = o[t.idx] === s[t.idx]), n;
                      })),
                    n
                  );
                }),
                n
              );
            },
            _space: function () {
              var e = [],
                t = this;
              return (
                h(u, function (n, r) {
                  t[r.cache] && e.push(n);
                }),
                e.pop()
              );
            },
            transition: function (e, t) {
              var n = o(e),
                r = n._space(),
                i = u[r],
                s = this.alpha() === 0 ? o("transparent") : this,
                f = s[i.cache] || i.to(s._rgba),
                l = f.slice();
              return (
                (n = n[i.cache]),
                h(i.props, function (e, r) {
                  var i = r.idx,
                    s = f[i],
                    o = n[i],
                    u = a[r.type] || {};
                  if (o === null) return;
                  s === null
                    ? (l[i] = o)
                    : (u.mod &&
                      (o - s > u.mod / 2
                        ? (s += u.mod)
                        : s - o > u.mod / 2 && (s -= u.mod)),
                      (l[i] = p((o - s) * t + s, r)));
                }),
                this[r](l)
              );
            },
            blend: function (e) {
              if (this._rgba[3] === 1) return this;
              var n = this._rgba.slice(),
                r = n.pop(),
                i = o(e)._rgba;
              return o(
                t.map(n, function (e, t) {
                  return (1 - r) * i[t] + r * e;
                })
              );
            },
            toRgbaString: function () {
              var e = "rgba(",
                n = t.map(this._rgba, function (e, t) {
                  return e == null ? (t > 2 ? 1 : 0) : e;
                });
              return n[3] === 1 && (n.pop(), (e = "rgb(")), e + n.join() + ")";
            },
            toHslaString: function () {
              var e = "hsla(",
                n = t.map(this.hsla(), function (e, t) {
                  return (
                    e == null && (e = t > 2 ? 1 : 0),
                    t && t < 3 && (e = Math.round(e * 100) + "%"),
                    e
                  );
                });
              return n[3] === 1 && (n.pop(), (e = "hsl(")), e + n.join() + ")";
            },
            toHexString: function (e) {
              var n = this._rgba.slice(),
                r = n.pop();
              return (
                e && n.push(~~(r * 255)),
                "#" +
                t
                  .map(n, function (e) {
                    return (
                      (e = (e || 0).toString(16)),
                      e.length === 1 ? "0" + e : e
                    );
                  })
                  .join("")
              );
            },
            toString: function () {
              return this._rgba[3] === 0 ? "transparent" : this.toRgbaString();
            },
          })),
          (o.fn.parse.prototype = o.fn),
          (u.hsla.to = function (e) {
            if (e[0] == null || e[1] == null || e[2] == null)
              return [null, null, null, e[3]];
            var t = e[0] / 255,
              n = e[1] / 255,
              r = e[2] / 255,
              i = e[3],
              s = Math.max(t, n, r),
              o = Math.min(t, n, r),
              u = s - o,
              a = s + o,
              f = a * 0.5,
              l,
              c;
            return (
              o === s
                ? (l = 0)
                : t === s
                  ? (l = (60 * (n - r)) / u + 360)
                  : n === s
                    ? (l = (60 * (r - t)) / u + 120)
                    : (l = (60 * (t - n)) / u + 240),
              f === 0 || f === 1
                ? (c = f)
                : f <= 0.5
                  ? (c = u / a)
                  : (c = u / (2 - a)),
              [Math.round(l) % 360, c, f, i == null ? 1 : i]
            );
          }),
          (u.hsla.from = function (e) {
            if (e[0] == null || e[1] == null || e[2] == null)
              return [null, null, null, e[3]];
            var t = e[0] / 360,
              n = e[1],
              r = e[2],
              i = e[3],
              s = r <= 0.5 ? r * (1 + n) : r + n - r * n,
              o = 2 * r - s;
            return [
              Math.round(v(o, s, t + 1 / 3) * 255),
              Math.round(v(o, s, t) * 255),
              Math.round(v(o, s, t - 1 / 3) * 255),
              i,
            ];
          }),
          h(u, function (e, r) {
            var s = r.props,
              u = r.cache,
              a = r.to,
              f = r.from;
            (o.fn[e] = function (e) {
              a && !this[u] && (this[u] = a(this._rgba));
              if (e === n) return this[u].slice();
              var r,
                i = t.type(e),
                l = i === "array" || i === "object" ? e : arguments,
                c = this[u].slice();
              return (
                h(s, function (e, t) {
                  var n = l[i === "object" ? e : t.idx];
                  n == null && (n = c[t.idx]), (c[t.idx] = p(n, t));
                }),
                f ? ((r = o(f(c))), (r[u] = c), r) : o(c)
              );
            }),
              h(s, function (n, r) {
                if (o.fn[n]) return;
                o.fn[n] = function (s) {
                  var o = t.type(s),
                    u = n === "alpha" ? (this._hsla ? "hsla" : "rgba") : e,
                    a = this[u](),
                    f = a[r.idx],
                    l;
                  return o === "undefined"
                    ? f
                    : (o === "function" &&
                      ((s = s.call(this, f)), (o = t.type(s))),
                      s == null && r.empty
                        ? this
                        : (o === "string" &&
                          ((l = i.exec(s)),
                            l &&
                            (s =
                              f +
                              parseFloat(l[2]) * (l[1] === "+" ? 1 : -1))),
                          (a[r.idx] = s),
                          this[u](a)));
                };
              });
          }),
          h(r, function (e, n) {
            (t.cssHooks[n] = {
              set: function (e, r) {
                var i,
                  s,
                  u = "";
                if (t.type(r) !== "string" || (i = d(r))) {
                  r = o(i || r);
                  if (!f.rgba && r._rgba[3] !== 1) {
                    s = n === "backgroundColor" ? e.parentNode : e;
                    while ((u === "" || u === "transparent") && s && s.style)
                      try {
                        (u = t.css(s, "backgroundColor")), (s = s.parentNode);
                      } catch (a) { }
                    r = r.blend(u && u !== "transparent" ? u : "_default");
                  }
                  r = r.toRgbaString();
                }
                try {
                  e.style[n] = r;
                } catch (l) { }
              },
            }),
              (t.fx.step[n] = function (e) {
                e.colorInit ||
                  ((e.start = o(e.elem, n)),
                    (e.end = o(e.end)),
                    (e.colorInit = !0)),
                  t.cssHooks[n].set(e.elem, e.start.transition(e.end, e.pos));
              });
          }),
          (t.cssHooks.borderColor = {
            expand: function (e) {
              var t = {};
              return (
                h(["Top", "Right", "Bottom", "Left"], function (n, r) {
                  t["border" + r + "Color"] = e;
                }),
                t
              );
            },
          }),
          (c = t.Color.names =
          {
            aqua: "#00ffff",
            black: "#000000",
            blue: "#0000ff",
            fuchsia: "#ff00ff",
            gray: "#808080",
            green: "#008000",
            lime: "#00ff00",
            maroon: "#800000",
            navy: "#000080",
            olive: "#808000",
            purple: "#800080",
            red: "#ff0000",
            silver: "#c0c0c0",
            teal: "#008080",
            white: "#ffffff",
            yellow: "#ffff00",
            transparent: [null, null, null, 0],
            _default: "#ffffff",
          });
      })(jQuery),
      (function () {
        function i() {
          var t = this.ownerDocument.defaultView
            ? this.ownerDocument.defaultView.getComputedStyle(this, null)
            : this.currentStyle,
            n = {},
            r,
            i;
          if (t && t.length && t[0] && t[t[0]]) {
            i = t.length;
            while (i--)
              (r = t[i]), typeof t[r] == "string" && (n[e.camelCase(r)] = t[r]);
          } else for (r in t) typeof t[r] == "string" && (n[r] = t[r]);
          return n;
        }
        function s(t, n) {
          var i = {},
            s,
            o;
          for (s in n)
            (o = n[s]),
              t[s] !== o &&
              !r[s] &&
              (e.fx.step[s] || !isNaN(parseFloat(o))) &&
              (i[s] = o);
          return i;
        }
        var n = ["add", "remove", "toggle"],
          r = {
            border: 1,
            borderBottom: 1,
            borderColor: 1,
            borderLeft: 1,
            borderRight: 1,
            borderTop: 1,
            borderWidth: 1,
            margin: 1,
            padding: 1,
          };
        e.each(
          [
            "borderLeftStyle",
            "borderRightStyle",
            "borderBottomStyle",
            "borderTopStyle",
          ],
          function (t, n) {
            e.fx.step[n] = function (e) {
              if (
                (e.end !== "none" && !e.setAttr) ||
                (e.pos === 1 && !e.setAttr)
              )
                jQuery.style(e.elem, n, e.end), (e.setAttr = !0);
            };
          }
        ),
          (e.effects.animateClass = function (t, r, o, u) {
            var a = e.speed(r, o, u);
            return this.queue(function () {
              var r = e(this),
                o = r.attr("class") || "",
                u,
                f = a.children ? r.find("*").andSelf() : r;
              (f = f.map(function () {
                var t = e(this);
                return { el: t, start: i.call(this) };
              })),
                (u = function () {
                  e.each(n, function (e, n) {
                    t[n] && r[n + "Class"](t[n]);
                  });
                }),
                u(),
                (f = f.map(function () {
                  return (
                    (this.end = i.call(this.el[0])),
                    (this.diff = s(this.start, this.end)),
                    this
                  );
                })),
                r.attr("class", o),
                (f = f.map(function () {
                  var t = this,
                    n = e.Deferred(),
                    r = jQuery.extend({}, a, {
                      queue: !1,
                      complete: function () {
                        n.resolve(t);
                      },
                    });
                  return this.el.animate(this.diff, r), n.promise();
                })),
                e.when.apply(e, f.get()).done(function () {
                  u(),
                    e.each(arguments, function () {
                      var t = this.el;
                      e.each(this.diff, function (e) {
                        t.css(e, "");
                      });
                    }),
                    a.complete.call(r[0]);
                });
            });
          }),
          e.fn.extend({
            _addClass: e.fn.addClass,
            addClass: function (t, n, r, i) {
              return n
                ? e.effects.animateClass.call(this, { add: t }, n, r, i)
                : this._addClass(t);
            },
            _removeClass: e.fn.removeClass,
            removeClass: function (t, n, r, i) {
              return n
                ? e.effects.animateClass.call(this, { remove: t }, n, r, i)
                : this._removeClass(t);
            },
            _toggleClass: e.fn.toggleClass,
            toggleClass: function (n, r, i, s, o) {
              return typeof r == "boolean" || r === t
                ? i
                  ? e.effects.animateClass.call(
                    this,
                    r ? { add: n } : { remove: n },
                    i,
                    s,
                    o
                  )
                  : this._toggleClass(n, r)
                : e.effects.animateClass.call(this, { toggle: n }, r, i, s);
            },
            switchClass: function (t, n, r, i, s) {
              return e.effects.animateClass.call(
                this,
                { add: n, remove: t },
                r,
                i,
                s
              );
            },
          });
      })(),
      (function () {
        function i(t, n, r, i) {
          e.isPlainObject(t) && ((n = t), (t = t.effect)),
            (t = { effect: t }),
            n == null && (n = {}),
            e.isFunction(n) && ((i = n), (r = null), (n = {}));
          if (typeof n == "number" || e.fx.speeds[n])
            (i = r), (r = n), (n = {});
          return (
            e.isFunction(r) && ((i = r), (r = null)),
            n && e.extend(t, n),
            (r = r || n.duration),
            (t.duration = e.fx.off
              ? 0
              : typeof r == "number"
                ? r
                : r in e.fx.speeds
                  ? e.fx.speeds[r]
                  : e.fx.speeds._default),
            (t.complete = i || n.complete),
            t
          );
        }
        function s(t) {
          return !t || typeof t == "number" || e.fx.speeds[t]
            ? !0
            : typeof t == "string" && !e.effects.effect[t]
              ? n && e.effects[t]
                ? !1
                : !0
              : !1;
        }
        e.extend(e.effects, {
          version: "1.9.2",
          save: function (e, t) {
            for (var n = 0; n < t.length; n++)
              t[n] !== null && e.data(r + t[n], e[0].style[t[n]]);
          },
          restore: function (e, n) {
            var i, s;
            for (s = 0; s < n.length; s++)
              n[s] !== null &&
                ((i = e.data(r + n[s])), i === t && (i = ""), e.css(n[s], i));
          },
          setMode: function (e, t) {
            return t === "toggle" && (t = e.is(":hidden") ? "show" : "hide"), t;
          },
          getBaseline: function (e, t) {
            var n, r;
            switch (e[0]) {
              case "top":
                n = 0;
                break;
              case "middle":
                n = 0.5;
                break;
              case "bottom":
                n = 1;
                break;
              default:
                n = e[0] / t.height;
            }
            switch (e[1]) {
              case "left":
                r = 0;
                break;
              case "center":
                r = 0.5;
                break;
              case "right":
                r = 1;
                break;
              default:
                r = e[1] / t.width;
            }
            return { x: r, y: n };
          },
          createWrapper: function (t) {
            if (t.parent().is(".ui-effects-wrapper")) return t.parent();
            var n = {
              width: t.outerWidth(!0),
              height: t.outerHeight(!0),
              float: t.css("float"),
            },
              r = e("<div></div>")
                .addClass("ui-effects-wrapper")
                .css({
                  fontSize: "100%",
                  background: "transparent",
                  border: "none",
                  margin: 0,
                  padding: 0,
                }),
              i = { width: t.width(), height: t.height() },
              s = document.activeElement;
            try {
              s.id;
            } catch (o) {
              s = document.body;
            }
            return (
              t.wrap(r),
              (t[0] === s || e.contains(t[0], s)) && e(s).focus(),
              (r = t.parent()),
              t.css("position") === "static"
                ? (r.css({ position: "relative" }),
                  t.css({ position: "relative" }))
                : (e.extend(n, {
                  position: t.css("position"),
                  zIndex: t.css("z-index"),
                }),
                  e.each(["top", "left", "bottom", "right"], function (e, r) {
                    (n[r] = t.css(r)),
                      isNaN(parseInt(n[r], 10)) && (n[r] = "auto");
                  }),
                  t.css({
                    position: "relative",
                    top: 0,
                    left: 0,
                    right: "auto",
                    bottom: "auto",
                  })),
              t.css(i),
              r.css(n).show()
            );
          },
          removeWrapper: function (t) {
            var n = document.activeElement;
            return (
              t.parent().is(".ui-effects-wrapper") &&
              (t.parent().replaceWith(t),
                (t[0] === n || e.contains(t[0], n)) && e(n).focus()),
              t
            );
          },
          setTransition: function (t, n, r, i) {
            return (
              (i = i || {}),
              e.each(n, function (e, n) {
                var s = t.cssUnit(n);
                s[0] > 0 && (i[n] = s[0] * r + s[1]);
              }),
              i
            );
          },
        }),
          e.fn.extend({
            effect: function () {
              function a(n) {
                function u() {
                  e.isFunction(i) && i.call(r[0]), e.isFunction(n) && n();
                }
                var r = e(this),
                  i = t.complete,
                  s = t.mode;
                (r.is(":hidden") ? s === "hide" : s === "show")
                  ? u()
                  : o.call(r[0], t, u);
              }
              var t = i.apply(this, arguments),
                r = t.mode,
                s = t.queue,
                o = e.effects.effect[t.effect],
                u = !o && n && e.effects[t.effect];
              return e.fx.off || (!o && !u)
                ? r
                  ? this[r](t.duration, t.complete)
                  : this.each(function () {
                    t.complete && t.complete.call(this);
                  })
                : o
                  ? s === !1
                    ? this.each(a)
                    : this.queue(s || "fx", a)
                  : u.call(this, {
                    options: t,
                    duration: t.duration,
                    callback: t.complete,
                    mode: t.mode,
                  });
            },
            _show: e.fn.show,
            show: function (e) {
              if (s(e)) return this._show.apply(this, arguments);
              var t = i.apply(this, arguments);
              return (t.mode = "show"), this.effect.call(this, t);
            },
            _hide: e.fn.hide,
            hide: function (e) {
              if (s(e)) return this._hide.apply(this, arguments);
              var t = i.apply(this, arguments);
              return (t.mode = "hide"), this.effect.call(this, t);
            },
            __toggle: e.fn.toggle,
            toggle: function (t) {
              if (s(t) || typeof t == "boolean" || e.isFunction(t))
                return this.__toggle.apply(this, arguments);
              var n = i.apply(this, arguments);
              return (n.mode = "toggle"), this.effect.call(this, n);
            },
            cssUnit: function (t) {
              var n = this.css(t),
                r = [];
              return (
                e.each(["em", "px", "%", "pt"], function (e, t) {
                  n.indexOf(t) > 0 && (r = [parseFloat(n), t]);
                }),
                r
              );
            },
          });
      })(),
      (function () {
        var t = {};
        e.each(["Quad", "Cubic", "Quart", "Quint", "Expo"], function (e, n) {
          t[n] = function (t) {
            return Math.pow(t, e + 2);
          };
        }),
          e.extend(t, {
            Sine: function (e) {
              return 1 - Math.cos((e * Math.PI) / 2);
            },
            Circ: function (e) {
              return 1 - Math.sqrt(1 - e * e);
            },
            Elastic: function (e) {
              return e === 0 || e === 1
                ? e
                : -Math.pow(2, 8 * (e - 1)) *
                Math.sin((((e - 1) * 80 - 7.5) * Math.PI) / 15);
            },
            Back: function (e) {
              return e * e * (3 * e - 2);
            },
            Bounce: function (e) {
              var t,
                n = 4;
              while (e < ((t = Math.pow(2, --n)) - 1) / 11);
              return (
                1 / Math.pow(4, 3 - n) -
                7.5625 * Math.pow((t * 3 - 2) / 22 - e, 2)
              );
            },
          }),
          e.each(t, function (t, n) {
            (e.easing["easeIn" + t] = n),
              (e.easing["easeOut" + t] = function (e) {
                return 1 - n(1 - e);
              }),
              (e.easing["easeInOut" + t] = function (e) {
                return e < 0.5 ? n(e * 2) / 2 : 1 - n(e * -2 + 2) / 2;
              });
          });
      })();
  })(jQuery);
(function (e, t) {
  var n = /up|down|vertical/,
    r = /up|left|vertical|horizontal/;
  e.effects.effect.blind = function (t, i) {
    var s = e(this),
      o = ["position", "top", "bottom", "left", "right", "height", "width"],
      u = e.effects.setMode(s, t.mode || "hide"),
      a = t.direction || "up",
      f = n.test(a),
      l = f ? "height" : "width",
      c = f ? "top" : "left",
      h = r.test(a),
      p = {},
      d = u === "show",
      v,
      m,
      g;
    s.parent().is(".ui-effects-wrapper")
      ? e.effects.save(s.parent(), o)
      : e.effects.save(s, o),
      s.show(),
      (v = e.effects.createWrapper(s).css({ overflow: "hidden" })),
      (m = v[l]()),
      (g = parseFloat(v.css(c)) || 0),
      (p[l] = d ? m : 0),
      h ||
      (s
        .css(f ? "bottom" : "right", 0)
        .css(f ? "top" : "left", "auto")
        .css({ position: "absolute" }),
        (p[c] = d ? g : m + g)),
      d && (v.css(l, 0), h || v.css(c, g + m)),
      v.animate(p, {
        duration: t.duration,
        easing: t.easing,
        queue: !1,
        complete: function () {
          u === "hide" && s.hide(),
            e.effects.restore(s, o),
            e.effects.removeWrapper(s),
            i();
        },
      });
  };
})(jQuery);
(function (e, t) {
  e.effects.effect.bounce = function (t, n) {
    var r = e(this),
      i = ["position", "top", "bottom", "left", "right", "height", "width"],
      s = e.effects.setMode(r, t.mode || "effect"),
      o = s === "hide",
      u = s === "show",
      a = t.direction || "up",
      f = t.distance,
      l = t.times || 5,
      c = l * 2 + (u || o ? 1 : 0),
      h = t.duration / c,
      p = t.easing,
      d = a === "up" || a === "down" ? "top" : "left",
      v = a === "up" || a === "left",
      m,
      g,
      y,
      b = r.queue(),
      w = b.length;
    (u || o) && i.push("opacity"),
      e.effects.save(r, i),
      r.show(),
      e.effects.createWrapper(r),
      f || (f = r[d === "top" ? "outerHeight" : "outerWidth"]() / 3),
      u &&
      ((y = { opacity: 1 }),
        (y[d] = 0),
        r
          .css("opacity", 0)
          .css(d, v ? -f * 2 : f * 2)
          .animate(y, h, p)),
      o && (f /= Math.pow(2, l - 1)),
      (y = {}),
      (y[d] = 0);
    for (m = 0; m < l; m++)
      (g = {}),
        (g[d] = (v ? "-=" : "+=") + f),
        r.animate(g, h, p).animate(y, h, p),
        (f = o ? f * 2 : f / 2);
    o &&
      ((g = { opacity: 0 }),
        (g[d] = (v ? "-=" : "+=") + f),
        r.animate(g, h, p)),
      r.queue(function () {
        o && r.hide(), e.effects.restore(r, i), e.effects.removeWrapper(r), n();
      }),
      w > 1 && b.splice.apply(b, [1, 0].concat(b.splice(w, c + 1))),
      r.dequeue();
  };
})(jQuery);
(function (e, t) {
  e.effects.effect.clip = function (t, n) {
    var r = e(this),
      i = ["position", "top", "bottom", "left", "right", "height", "width"],
      s = e.effects.setMode(r, t.mode || "hide"),
      o = s === "show",
      u = t.direction || "vertical",
      a = u === "vertical",
      f = a ? "height" : "width",
      l = a ? "top" : "left",
      c = {},
      h,
      p,
      d;
    e.effects.save(r, i),
      r.show(),
      (h = e.effects.createWrapper(r).css({ overflow: "hidden" })),
      (p = r[0].tagName === "IMG" ? h : r),
      (d = p[f]()),
      o && (p.css(f, 0), p.css(l, d / 2)),
      (c[f] = o ? d : 0),
      (c[l] = o ? 0 : d / 2),
      p.animate(c, {
        queue: !1,
        duration: t.duration,
        easing: t.easing,
        complete: function () {
          o || r.hide(),
            e.effects.restore(r, i),
            e.effects.removeWrapper(r),
            n();
        },
      });
  };
})(jQuery);
(function (e, t) {
  e.effects.effect.drop = function (t, n) {
    var r = e(this),
      i = [
        "position",
        "top",
        "bottom",
        "left",
        "right",
        "opacity",
        "height",
        "width",
      ],
      s = e.effects.setMode(r, t.mode || "hide"),
      o = s === "show",
      u = t.direction || "left",
      a = u === "up" || u === "down" ? "top" : "left",
      f = u === "up" || u === "left" ? "pos" : "neg",
      l = { opacity: o ? 1 : 0 },
      c;
    e.effects.save(r, i),
      r.show(),
      e.effects.createWrapper(r),
      (c = t.distance || r[a === "top" ? "outerHeight" : "outerWidth"](!0) / 2),
      o && r.css("opacity", 0).css(a, f === "pos" ? -c : c),
      (l[a] =
        (o ? (f === "pos" ? "+=" : "-=") : f === "pos" ? "-=" : "+=") + c),
      r.animate(l, {
        queue: !1,
        duration: t.duration,
        easing: t.easing,
        complete: function () {
          s === "hide" && r.hide(),
            e.effects.restore(r, i),
            e.effects.removeWrapper(r),
            n();
        },
      });
  };
})(jQuery);
(function (e, t) {
  e.effects.effect.explode = function (t, n) {
    function y() {
      c.push(this), c.length === r * i && b();
    }
    function b() {
      s.css({ visibility: "visible" }), e(c).remove(), u || s.hide(), n();
    }
    var r = t.pieces ? Math.round(Math.sqrt(t.pieces)) : 3,
      i = r,
      s = e(this),
      o = e.effects.setMode(s, t.mode || "hide"),
      u = o === "show",
      a = s.show().css("visibility", "hidden").offset(),
      f = Math.ceil(s.outerWidth() / i),
      l = Math.ceil(s.outerHeight() / r),
      c = [],
      h,
      p,
      d,
      v,
      m,
      g;
    for (h = 0; h < r; h++) {
      (v = a.top + h * l), (g = h - (r - 1) / 2);
      for (p = 0; p < i; p++)
        (d = a.left + p * f),
          (m = p - (i - 1) / 2),
          s
            .clone()
            .appendTo("body")
            .wrap("<div></div>")
            .css({
              position: "absolute",
              visibility: "visible",
              left: -p * f,
              top: -h * l,
            })
            .parent()
            .addClass("ui-effects-explode")
            .css({
              position: "absolute",
              overflow: "hidden",
              width: f,
              height: l,
              left: d + (u ? m * f : 0),
              top: v + (u ? g * l : 0),
              opacity: u ? 0 : 1,
            })
            .animate(
              {
                left: d + (u ? 0 : m * f),
                top: v + (u ? 0 : g * l),
                opacity: u ? 1 : 0,
              },
              t.duration || 500,
              t.easing,
              y
            );
    }
  };
})(jQuery);
(function (e, t) {
  e.effects.effect.fade = function (t, n) {
    var r = e(this),
      i = e.effects.setMode(r, t.mode || "toggle");
    r.animate(
      { opacity: i },
      { queue: !1, duration: t.duration, easing: t.easing, complete: n }
    );
  };
})(jQuery);
(function (e, t) {
  e.effects.effect.fold = function (t, n) {
    var r = e(this),
      i = ["position", "top", "bottom", "left", "right", "height", "width"],
      s = e.effects.setMode(r, t.mode || "hide"),
      o = s === "show",
      u = s === "hide",
      a = t.size || 15,
      f = /([0-9]+)%/.exec(a),
      l = !!t.horizFirst,
      c = o !== l,
      h = c ? ["width", "height"] : ["height", "width"],
      p = t.duration / 2,
      d,
      v,
      m = {},
      g = {};
    e.effects.save(r, i),
      r.show(),
      (d = e.effects.createWrapper(r).css({ overflow: "hidden" })),
      (v = c ? [d.width(), d.height()] : [d.height(), d.width()]),
      f && (a = (parseInt(f[1], 10) / 100) * v[u ? 0 : 1]),
      o && d.css(l ? { height: 0, width: a } : { height: a, width: 0 }),
      (m[h[0]] = o ? v[0] : a),
      (g[h[1]] = o ? v[1] : 0),
      d.animate(m, p, t.easing).animate(g, p, t.easing, function () {
        u && r.hide(), e.effects.restore(r, i), e.effects.removeWrapper(r), n();
      });
  };
})(jQuery);
(function (e, t) {
  e.effects.effect.highlight = function (t, n) {
    var r = e(this),
      i = ["backgroundImage", "backgroundColor", "opacity"],
      s = e.effects.setMode(r, t.mode || "show"),
      o = { backgroundColor: r.css("backgroundColor") };
    s === "hide" && (o.opacity = 0),
      e.effects.save(r, i),
      r
        .show()
        .css({ backgroundImage: "none", backgroundColor: t.color || "#ffff99" })
        .animate(o, {
          queue: !1,
          duration: t.duration,
          easing: t.easing,
          complete: function () {
            s === "hide" && r.hide(), e.effects.restore(r, i), n();
          },
        });
  };
})(jQuery);
(function (e, t) {
  e.effects.effect.pulsate = function (t, n) {
    var r = e(this),
      i = e.effects.setMode(r, t.mode || "show"),
      s = i === "show",
      o = i === "hide",
      u = s || i === "hide",
      a = (t.times || 5) * 2 + (u ? 1 : 0),
      f = t.duration / a,
      l = 0,
      c = r.queue(),
      h = c.length,
      p;
    if (s || !r.is(":visible")) r.css("opacity", 0).show(), (l = 1);
    for (p = 1; p < a; p++) r.animate({ opacity: l }, f, t.easing), (l = 1 - l);
    r.animate({ opacity: l }, f, t.easing),
      r.queue(function () {
        o && r.hide(), n();
      }),
      h > 1 && c.splice.apply(c, [1, 0].concat(c.splice(h, a + 1))),
      r.dequeue();
  };
})(jQuery);
(function (e, t) {
  (e.effects.effect.puff = function (t, n) {
    var r = e(this),
      i = e.effects.setMode(r, t.mode || "hide"),
      s = i === "hide",
      o = parseInt(t.percent, 10) || 150,
      u = o / 100,
      a = {
        height: r.height(),
        width: r.width(),
        outerHeight: r.outerHeight(),
        outerWidth: r.outerWidth(),
      };
    e.extend(t, {
      effect: "scale",
      queue: !1,
      fade: !0,
      mode: i,
      complete: n,
      percent: s ? o : 100,
      from: s
        ? a
        : {
          height: a.height * u,
          width: a.width * u,
          outerHeight: a.outerHeight * u,
          outerWidth: a.outerWidth * u,
        },
    }),
      r.effect(t);
  }),
    (e.effects.effect.scale = function (t, n) {
      var r = e(this),
        i = e.extend(!0, {}, t),
        s = e.effects.setMode(r, t.mode || "effect"),
        o =
          parseInt(t.percent, 10) ||
          (parseInt(t.percent, 10) === 0 ? 0 : s === "hide" ? 0 : 100),
        u = t.direction || "both",
        a = t.origin,
        f = {
          height: r.height(),
          width: r.width(),
          outerHeight: r.outerHeight(),
          outerWidth: r.outerWidth(),
        },
        l = {
          y: u !== "horizontal" ? o / 100 : 1,
          x: u !== "vertical" ? o / 100 : 1,
        };
      (i.effect = "size"),
        (i.queue = !1),
        (i.complete = n),
        s !== "effect" &&
        ((i.origin = a || ["middle", "center"]), (i.restore = !0)),
        (i.from =
          t.from ||
          (s === "show"
            ? { height: 0, width: 0, outerHeight: 0, outerWidth: 0 }
            : f)),
        (i.to = {
          height: f.height * l.y,
          width: f.width * l.x,
          outerHeight: f.outerHeight * l.y,
          outerWidth: f.outerWidth * l.x,
        }),
        i.fade &&
        (s === "show" && ((i.from.opacity = 0), (i.to.opacity = 1)),
          s === "hide" && ((i.from.opacity = 1), (i.to.opacity = 0))),
        r.effect(i);
    }),
    (e.effects.effect.size = function (t, n) {
      var r,
        i,
        s,
        o = e(this),
        u = [
          "position",
          "top",
          "bottom",
          "left",
          "right",
          "width",
          "height",
          "overflow",
          "opacity",
        ],
        a = [
          "position",
          "top",
          "bottom",
          "left",
          "right",
          "overflow",
          "opacity",
        ],
        f = ["width", "height", "overflow"],
        l = ["fontSize"],
        c = [
          "borderTopWidth",
          "borderBottomWidth",
          "paddingTop",
          "paddingBottom",
        ],
        h = [
          "borderLeftWidth",
          "borderRightWidth",
          "paddingLeft",
          "paddingRight",
        ],
        p = e.effects.setMode(o, t.mode || "effect"),
        d = t.restore || p !== "effect",
        v = t.scale || "both",
        m = t.origin || ["middle", "center"],
        g = o.css("position"),
        y = d ? u : a,
        b = { height: 0, width: 0, outerHeight: 0, outerWidth: 0 };
      p === "show" && o.show(),
        (r = {
          height: o.height(),
          width: o.width(),
          outerHeight: o.outerHeight(),
          outerWidth: o.outerWidth(),
        }),
        t.mode === "toggle" && p === "show"
          ? ((o.from = t.to || b), (o.to = t.from || r))
          : ((o.from = t.from || (p === "show" ? b : r)),
            (o.to = t.to || (p === "hide" ? b : r))),
        (s = {
          from: { y: o.from.height / r.height, x: o.from.width / r.width },
          to: { y: o.to.height / r.height, x: o.to.width / r.width },
        });
      if (v === "box" || v === "both")
        s.from.y !== s.to.y &&
          ((y = y.concat(c)),
            (o.from = e.effects.setTransition(o, c, s.from.y, o.from)),
            (o.to = e.effects.setTransition(o, c, s.to.y, o.to))),
          s.from.x !== s.to.x &&
          ((y = y.concat(h)),
            (o.from = e.effects.setTransition(o, h, s.from.x, o.from)),
            (o.to = e.effects.setTransition(o, h, s.to.x, o.to)));
      (v === "content" || v === "both") &&
        s.from.y !== s.to.y &&
        ((y = y.concat(l).concat(f)),
          (o.from = e.effects.setTransition(o, l, s.from.y, o.from)),
          (o.to = e.effects.setTransition(o, l, s.to.y, o.to))),
        e.effects.save(o, y),
        o.show(),
        e.effects.createWrapper(o),
        o.css("overflow", "hidden").css(o.from),
        m &&
        ((i = e.effects.getBaseline(m, r)),
          (o.from.top = (r.outerHeight - o.outerHeight()) * i.y),
          (o.from.left = (r.outerWidth - o.outerWidth()) * i.x),
          (o.to.top = (r.outerHeight - o.to.outerHeight) * i.y),
          (o.to.left = (r.outerWidth - o.to.outerWidth) * i.x)),
        o.css(o.from);
      if (v === "content" || v === "both")
        (c = c.concat(["marginTop", "marginBottom"]).concat(l)),
          (h = h.concat(["marginLeft", "marginRight"])),
          (f = u.concat(c).concat(h)),
          o.find("*[width]").each(function () {
            var n = e(this),
              r = {
                height: n.height(),
                width: n.width(),
                outerHeight: n.outerHeight(),
                outerWidth: n.outerWidth(),
              };
            d && e.effects.save(n, f),
              (n.from = {
                height: r.height * s.from.y,
                width: r.width * s.from.x,
                outerHeight: r.outerHeight * s.from.y,
                outerWidth: r.outerWidth * s.from.x,
              }),
              (n.to = {
                height: r.height * s.to.y,
                width: r.width * s.to.x,
                outerHeight: r.height * s.to.y,
                outerWidth: r.width * s.to.x,
              }),
              s.from.y !== s.to.y &&
              ((n.from = e.effects.setTransition(n, c, s.from.y, n.from)),
                (n.to = e.effects.setTransition(n, c, s.to.y, n.to))),
              s.from.x !== s.to.x &&
              ((n.from = e.effects.setTransition(n, h, s.from.x, n.from)),
                (n.to = e.effects.setTransition(n, h, s.to.x, n.to))),
              n.css(n.from),
              n.animate(n.to, t.duration, t.easing, function () {
                d && e.effects.restore(n, f);
              });
          });
      o.animate(o.to, {
        queue: !1,
        duration: t.duration,
        easing: t.easing,
        complete: function () {
          o.to.opacity === 0 && o.css("opacity", o.from.opacity),
            p === "hide" && o.hide(),
            e.effects.restore(o, y),
            d ||
            (g === "static"
              ? o.css({
                position: "relative",
                top: o.to.top,
                left: o.to.left,
              })
              : e.each(["top", "left"], function (e, t) {
                o.css(t, function (t, n) {
                  var r = parseInt(n, 10),
                    i = e ? o.to.left : o.to.top;
                  return n === "auto" ? i + "px" : r + i + "px";
                });
              })),
            e.effects.removeWrapper(o),
            n();
        },
      });
    });
})(jQuery);
(function (e, t) {
  e.effects.effect.shake = function (t, n) {
    var r = e(this),
      i = ["position", "top", "bottom", "left", "right", "height", "width"],
      s = e.effects.setMode(r, t.mode || "effect"),
      o = t.direction || "left",
      u = t.distance || 20,
      a = t.times || 3,
      f = a * 2 + 1,
      l = Math.round(t.duration / f),
      c = o === "up" || o === "down" ? "top" : "left",
      h = o === "up" || o === "left",
      p = {},
      d = {},
      v = {},
      m,
      g = r.queue(),
      y = g.length;
    e.effects.save(r, i),
      r.show(),
      e.effects.createWrapper(r),
      (p[c] = (h ? "-=" : "+=") + u),
      (d[c] = (h ? "+=" : "-=") + u * 2),
      (v[c] = (h ? "-=" : "+=") + u * 2),
      r.animate(p, l, t.easing);
    for (m = 1; m < a; m++) r.animate(d, l, t.easing).animate(v, l, t.easing);
    r
      .animate(d, l, t.easing)
      .animate(p, l / 2, t.easing)
      .queue(function () {
        s === "hide" && r.hide(),
          e.effects.restore(r, i),
          e.effects.removeWrapper(r),
          n();
      }),
      y > 1 && g.splice.apply(g, [1, 0].concat(g.splice(y, f + 1))),
      r.dequeue();
  };
})(jQuery);
(function (e, t) {
  e.effects.effect.slide = function (t, n) {
    var r = e(this),
      i = ["position", "top", "bottom", "left", "right", "width", "height"],
      s = e.effects.setMode(r, t.mode || "show"),
      o = s === "show",
      u = t.direction || "left",
      a = u === "up" || u === "down" ? "top" : "left",
      f = u === "up" || u === "left",
      l,
      c = {};
    e.effects.save(r, i),
      r.show(),
      (l = t.distance || r[a === "top" ? "outerHeight" : "outerWidth"](!0)),
      e.effects.createWrapper(r).css({ overflow: "hidden" }),
      o && r.css(a, f ? (isNaN(l) ? "-" + l : -l) : l),
      (c[a] = (o ? (f ? "+=" : "-=") : f ? "-=" : "+=") + l),
      r.animate(c, {
        queue: !1,
        duration: t.duration,
        easing: t.easing,
        complete: function () {
          s === "hide" && r.hide(),
            e.effects.restore(r, i),
            e.effects.removeWrapper(r),
            n();
        },
      });
  };
})(jQuery);
(function (e, t) {
  e.effects.effect.transfer = function (t, n) {
    var r = e(this),
      i = e(t.to),
      s = i.css("position") === "fixed",
      o = e("body"),
      u = s ? o.scrollTop() : 0,
      a = s ? o.scrollLeft() : 0,
      f = i.offset(),
      l = {
        top: f.top - u,
        left: f.left - a,
        height: i.innerHeight(),
        width: i.innerWidth(),
      },
      c = r.offset(),
      h = e('<div class="ui-effects-transfer"></div>')
        .appendTo(document.body)
        .addClass(t.className)
        .css({
          top: c.top - u,
          left: c.left - a,
          height: r.innerHeight(),
          width: r.innerWidth(),
          position: s ? "fixed" : "absolute",
        })
        .animate(l, t.duration, t.easing, function () {
          h.remove(), n();
        });
  };
})(jQuery);
(function (e, t) {
  var n = !1;
  e.widget("ui.menu", {
    version: "1.9.2",
    defaultElement: "<ul>",
    delay: 300,
    options: {
      icons: { submenu: "ui-icon-carat-1-e" },
      menus: "ul",
      position: { my: "left top", at: "right top" },
      role: "menu",
      blur: null,
      focus: null,
      select: null,
    },
    _create: function () {
      (this.activeMenu = this.element),
        this.element
          .uniqueId()
          .addClass("ui-menu ui-widget ui-widget-content ui-corner-all")
          .toggleClass("ui-menu-icons", !!this.element.find(".ui-icon").length)
          .attr({ role: this.options.role, tabIndex: 0 })
          .bind(
            "click" + this.eventNamespace,
            e.proxy(function (e) {
              this.options.disabled && e.preventDefault();
            }, this)
          ),
        this.options.disabled &&
        this.element
          .addClass("ui-state-disabled")
          .attr("aria-disabled", "true"),
        this._on({
          "mousedown .ui-menu-item > a": function (e) {
            e.preventDefault();
          },
          "click .ui-state-disabled > a": function (e) {
            e.preventDefault();
          },
          "click .ui-menu-item:has(a)": function (t) {
            var r = e(t.target).closest(".ui-menu-item");
            !n &&
              r.not(".ui-state-disabled").length &&
              ((n = !0),
                this.select(t),
                r.has(".ui-menu").length
                  ? this.expand(t)
                  : this.element.is(":focus") ||
                  (this.element.trigger("focus", [!0]),
                    this.active &&
                    this.active.parents(".ui-menu").length === 1 &&
                    clearTimeout(this.timer)));
          },
          "mouseenter .ui-menu-item": function (t) {
            var n = e(t.currentTarget);
            n
              .siblings()
              .children(".ui-state-active")
              .removeClass("ui-state-active"),
              this.focus(t, n);
          },
          mouseleave: "collapseAll",
          "mouseleave .ui-menu": "collapseAll",
          focus: function (e, t) {
            var n = this.active || this.element.children(".ui-menu-item").eq(0);
            t || this.focus(e, n);
          },
          blur: function (t) {
            this._delay(function () {
              e.contains(this.element[0], this.document[0].activeElement) ||
                this.collapseAll(t);
            });
          },
          keydown: "_keydown",
        }),
        this.refresh(),
        this._on(this.document, {
          click: function (t) {
            e(t.target).closest(".ui-menu").length || this.collapseAll(t),
              (n = !1);
          },
        });
    },
    _destroy: function () {
      this.element
        .removeAttr("aria-activedescendant")
        .find(".ui-menu")
        .andSelf()
        .removeClass(
          "ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons"
        )
        .removeAttr("role")
        .removeAttr("tabIndex")
        .removeAttr("aria-labelledby")
        .removeAttr("aria-expanded")
        .removeAttr("aria-hidden")
        .removeAttr("aria-disabled")
        .removeUniqueId()
        .show(),
        this.element
          .find(".ui-menu-item")
          .removeClass("ui-menu-item")
          .removeAttr("role")
          .removeAttr("aria-disabled")
          .children("a")
          .removeUniqueId()
          .removeClass("ui-corner-all ui-state-hover")
          .removeAttr("tabIndex")
          .removeAttr("role")
          .removeAttr("aria-haspopup")
          .children()
          .each(function () {
            var t = e(this);
            t.data("ui-menu-submenu-carat") && t.remove();
          }),
        this.element
          .find(".ui-menu-divider")
          .removeClass("ui-menu-divider ui-widget-content");
    },
    _keydown: function (t) {
      function a(e) {
        return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&");
      }
      var n,
        r,
        i,
        s,
        o,
        u = !0;
      switch (t.keyCode) {
        case e.ui.keyCode.PAGE_UP:
          this.previousPage(t);
          break;
        case e.ui.keyCode.PAGE_DOWN:
          this.nextPage(t);
          break;
        case e.ui.keyCode.HOME:
          this._move("first", "first", t);
          break;
        case e.ui.keyCode.END:
          this._move("last", "last", t);
          break;
        case e.ui.keyCode.UP:
          this.previous(t);
          break;
        case e.ui.keyCode.DOWN:
          this.next(t);
          break;
        case e.ui.keyCode.LEFT:
          this.collapse(t);
          break;
        case e.ui.keyCode.RIGHT:
          this.active &&
            !this.active.is(".ui-state-disabled") &&
            this.expand(t);
          break;
        case e.ui.keyCode.ENTER:
        case e.ui.keyCode.SPACE:
          this._activate(t);
          break;
        case e.ui.keyCode.ESCAPE:
          this.collapse(t);
          break;
        default:
          (u = !1),
            (r = this.previousFilter || ""),
            (i = String.fromCharCode(t.keyCode)),
            (s = !1),
            clearTimeout(this.filterTimer),
            i === r ? (s = !0) : (i = r + i),
            (o = new RegExp("^" + a(i), "i")),
            (n = this.activeMenu.children(".ui-menu-item").filter(function () {
              return o.test(e(this).children("a").text());
            })),
            (n =
              s && n.index(this.active.next()) !== -1
                ? this.active.nextAll(".ui-menu-item")
                : n),
            n.length ||
            ((i = String.fromCharCode(t.keyCode)),
              (o = new RegExp("^" + a(i), "i")),
              (n = this.activeMenu
                .children(".ui-menu-item")
                .filter(function () {
                  return o.test(e(this).children("a").text());
                }))),
            n.length
              ? (this.focus(t, n),
                n.length > 1
                  ? ((this.previousFilter = i),
                    (this.filterTimer = this._delay(function () {
                      delete this.previousFilter;
                    }, 1e3)))
                  : delete this.previousFilter)
              : delete this.previousFilter;
      }
      u && t.preventDefault();
    },
    _activate: function (e) {
      this.active.is(".ui-state-disabled") ||
        (this.active.children("a[aria-haspopup='true']").length
          ? this.expand(e)
          : this.select(e));
    },
    refresh: function () {
      var t,
        n = this.options.icons.submenu,
        r = this.element.find(this.options.menus);
      r
        .filter(":not(.ui-menu)")
        .addClass("ui-menu ui-widget ui-widget-content ui-corner-all")
        .hide()
        .attr({
          role: this.options.role,
          "aria-hidden": "true",
          "aria-expanded": "false",
        })
        .each(function () {
          var t = e(this),
            r = t.prev("a"),
            i = e("<span>")
              .addClass("ui-menu-icon ui-icon " + n)
              .data("ui-menu-submenu-carat", !0);
          r.attr("aria-haspopup", "true").prepend(i),
            t.attr("aria-labelledby", r.attr("id"));
        }),
        (t = r.add(this.element)),
        t
          .children(":not(.ui-menu-item):has(a)")
          .addClass("ui-menu-item")
          .attr("role", "presentation")
          .children("a")
          .uniqueId()
          .addClass("ui-corner-all")
          .attr({ tabIndex: -1, role: this._itemRole() }),
        t.children(":not(.ui-menu-item)").each(function () {
          var t = e(this);
          /[^\-â€”â€“\s]/.test(t.text()) ||
            t.addClass("ui-widget-content ui-menu-divider");
        }),
        t.children(".ui-state-disabled").attr("aria-disabled", "true"),
        this.active &&
        !e.contains(this.element[0], this.active[0]) &&
        this.blur();
    },
    _itemRole: function () {
      return { menu: "menuitem", listbox: "option" }[this.options.role];
    },
    focus: function (e, t) {
      var n, r;
      this.blur(e, e && e.type === "focus"),
        this._scrollIntoView(t),
        (this.active = t.first()),
        (r = this.active.children("a").addClass("ui-state-focus")),
        this.options.role &&
        this.element.attr("aria-activedescendant", r.attr("id")),
        this.active
          .parent()
          .closest(".ui-menu-item")
          .children("a:first")
          .addClass("ui-state-active"),
        e && e.type === "keydown"
          ? this._close()
          : (this.timer = this._delay(function () {
            this._close();
          }, this.delay)),
        (n = t.children(".ui-menu")),
        n.length && /^mouse/.test(e.type) && this._startOpening(n),
        (this.activeMenu = t.parent()),
        this._trigger("focus", e, { item: t });
    },
    _scrollIntoView: function (t) {
      var n, r, i, s, o, u;
      this._hasScroll() &&
        ((n = parseFloat(e.css(this.activeMenu[0], "borderTopWidth")) || 0),
          (r = parseFloat(e.css(this.activeMenu[0], "paddingTop")) || 0),
          (i = t.offset().top - this.activeMenu.offset().top - n - r),
          (s = this.activeMenu.scrollTop()),
          (o = this.activeMenu.height()),
          (u = t.height()),
          i < 0
            ? this.activeMenu.scrollTop(s + i)
            : i + u > o && this.activeMenu.scrollTop(s + i - o + u));
    },
    blur: function (e, t) {
      t || clearTimeout(this.timer);
      if (!this.active) return;
      this.active.children("a").removeClass("ui-state-focus"),
        (this.active = null),
        this._trigger("blur", e, { item: this.active });
    },
    _startOpening: function (e) {
      clearTimeout(this.timer);
      if (e.attr("aria-hidden") !== "true") return;
      this.timer = this._delay(function () {
        this._close(), this._open(e);
      }, this.delay);
    },
    _open: function (t) {
      var n = e.extend({ of: this.active }, this.options.position);
      clearTimeout(this.timer),
        this.element
          .find(".ui-menu")
          .not(t.parents(".ui-menu"))
          .hide()
          .attr("aria-hidden", "true"),
        t
          .show()
          .removeAttr("aria-hidden")
          .attr("aria-expanded", "true")
          .position(n);
    },
    collapseAll: function (t, n) {
      clearTimeout(this.timer),
        (this.timer = this._delay(function () {
          var r = n
            ? this.element
            : e(t && t.target).closest(this.element.find(".ui-menu"));
          r.length || (r = this.element),
            this._close(r),
            this.blur(t),
            (this.activeMenu = r);
        }, this.delay));
    },
    _close: function (e) {
      e || (e = this.active ? this.active.parent() : this.element),
        e
          .find(".ui-menu")
          .hide()
          .attr("aria-hidden", "true")
          .attr("aria-expanded", "false")
          .end()
          .find("a.ui-state-active")
          .removeClass("ui-state-active");
    },
    collapse: function (e) {
      var t =
        this.active &&
        this.active.parent().closest(".ui-menu-item", this.element);
      t && t.length && (this._close(), this.focus(e, t));
    },
    expand: function (e) {
      var t =
        this.active &&
        this.active.children(".ui-menu ").children(".ui-menu-item").first();
      t &&
        t.length &&
        (this._open(t.parent()),
          this._delay(function () {
            this.focus(e, t);
          }));
    },
    next: function (e) {
      this._move("next", "first", e);
    },
    previous: function (e) {
      this._move("prev", "last", e);
    },
    isFirstItem: function () {
      return this.active && !this.active.prevAll(".ui-menu-item").length;
    },
    isLastItem: function () {
      return this.active && !this.active.nextAll(".ui-menu-item").length;
    },
    _move: function (e, t, n) {
      var r;
      this.active &&
        (e === "first" || e === "last"
          ? (r =
            this.active[e === "first" ? "prevAll" : "nextAll"](
              ".ui-menu-item"
            ).eq(-1))
          : (r = this.active[e + "All"](".ui-menu-item").eq(0)));
      if (!r || !r.length || !this.active)
        r = this.activeMenu.children(".ui-menu-item")[t]();
      this.focus(n, r);
    },
    nextPage: function (t) {
      var n, r, i;
      if (!this.active) {
        this.next(t);
        return;
      }
      if (this.isLastItem()) return;
      this._hasScroll()
        ? ((r = this.active.offset().top),
          (i = this.element.height()),
          this.active.nextAll(".ui-menu-item").each(function () {
            return (n = e(this)), n.offset().top - r - i < 0;
          }),
          this.focus(t, n))
        : this.focus(
          t,
          this.activeMenu
            .children(".ui-menu-item")
          [this.active ? "last" : "first"]()
        );
    },
    previousPage: function (t) {
      var n, r, i;
      if (!this.active) {
        this.next(t);
        return;
      }
      if (this.isFirstItem()) return;
      this._hasScroll()
        ? ((r = this.active.offset().top),
          (i = this.element.height()),
          this.active.prevAll(".ui-menu-item").each(function () {
            return (n = e(this)), n.offset().top - r + i > 0;
          }),
          this.focus(t, n))
        : this.focus(t, this.activeMenu.children(".ui-menu-item").first());
    },
    _hasScroll: function () {
      return this.element.outerHeight() < this.element.prop("scrollHeight");
    },
    select: function (t) {
      this.active = this.active || e(t.target).closest(".ui-menu-item");
      var n = { item: this.active };
      this.active.has(".ui-menu").length || this.collapseAll(t, !0),
        this._trigger("select", t, n);
    },
  });
})(jQuery);
(function (e, t) {
  e.widget("ui.progressbar", {
    version: "1.9.2",
    options: { value: 0, max: 100 },
    min: 0,
    _create: function () {
      this.element
        .addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all")
        .attr({
          role: "progressbar",
          "aria-valuemin": this.min,
          "aria-valuemax": this.options.max,
          "aria-valuenow": this._value(),
        }),
        (this.valueDiv = e(
          "<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>"
        ).appendTo(this.element)),
        (this.oldValue = this._value()),
        this._refreshValue();
    },
    _destroy: function () {
      this.element
        .removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all")
        .removeAttr("role")
        .removeAttr("aria-valuemin")
        .removeAttr("aria-valuemax")
        .removeAttr("aria-valuenow"),
        this.valueDiv.remove();
    },
    value: function (e) {
      return e === t ? this._value() : (this._setOption("value", e), this);
    },
    _setOption: function (e, t) {
      e === "value" &&
        ((this.options.value = t),
          this._refreshValue(),
          this._value() === this.options.max && this._trigger("complete")),
        this._super(e, t);
    },
    _value: function () {
      var e = this.options.value;
      return (
        typeof e != "number" && (e = 0),
        Math.min(this.options.max, Math.max(this.min, e))
      );
    },
    _percentage: function () {
      return (100 * this._value()) / this.options.max;
    },
    _refreshValue: function () {
      var e = this.value(),
        t = this._percentage();
      this.oldValue !== e && ((this.oldValue = e), this._trigger("change")),
        this.valueDiv
          .toggle(e > this.min)
          .toggleClass("ui-corner-right", e === this.options.max)
          .width(t.toFixed(0) + "%"),
        this.element.attr("aria-valuenow", e);
    },
  });
})(jQuery);
(function (e, t) {
  e.widget("ui.resizable", e.ui.mouse, {
    version: "1.9.2",
    widgetEventPrefix: "resize",
    options: {
      alsoResize: !1,
      animate: !1,
      animateDuration: "slow",
      animateEasing: "swing",
      aspectRatio: !1,
      autoHide: !1,
      containment: !1,
      ghost: !1,
      grid: !1,
      handles: "e,s,se",
      helper: !1,
      maxHeight: null,
      maxWidth: null,
      minHeight: 10,
      minWidth: 10,
      zIndex: 1e3,
    },
    _create: function () {
      var t = this,
        n = this.options;
      this.element.addClass("ui-resizable"),
        e.extend(this, {
          _aspectRatio: !!n.aspectRatio,
          aspectRatio: n.aspectRatio,
          originalElement: this.element,
          _proportionallyResizeElements: [],
          _helper:
            n.helper || n.ghost || n.animate
              ? n.helper || "ui-resizable-helper"
              : null,
        }),
        this.element[0].nodeName.match(
          /canvas|textarea|input|select|button|img/i
        ) &&
        (this.element.wrap(
          e('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({
            position: this.element.css("position"),
            width: this.element.outerWidth(),
            height: this.element.outerHeight(),
            top: this.element.css("top"),
            left: this.element.css("left"),
          })
        ),
          (this.element = this.element
            .parent()
            .data("resizable", this.element.data("resizable"))),
          (this.elementIsWrapper = !0),
          this.element.css({
            marginLeft: this.originalElement.css("marginLeft"),
            marginTop: this.originalElement.css("marginTop"),
            marginRight: this.originalElement.css("marginRight"),
            marginBottom: this.originalElement.css("marginBottom"),
          }),
          this.originalElement.css({
            marginLeft: 0,
            marginTop: 0,
            marginRight: 0,
            marginBottom: 0,
          }),
          (this.originalResizeStyle = this.originalElement.css("resize")),
          this.originalElement.css("resize", "none"),
          this._proportionallyResizeElements.push(
            this.originalElement.css({
              position: "static",
              zoom: 1,
              display: "block",
            })
          ),
          this.originalElement.css({
            margin: this.originalElement.css("margin"),
          }),
          this._proportionallyResize()),
        (this.handles =
          n.handles ||
          (e(".ui-resizable-handle", this.element).length
            ? {
              n: ".ui-resizable-n",
              e: ".ui-resizable-e",
              s: ".ui-resizable-s",
              w: ".ui-resizable-w",
              se: ".ui-resizable-se",
              sw: ".ui-resizable-sw",
              ne: ".ui-resizable-ne",
              nw: ".ui-resizable-nw",
            }
            : "e,s,se"));
      if (this.handles.constructor == String) {
        this.handles == "all" && (this.handles = "n,e,s,w,se,sw,ne,nw");
        var r = this.handles.split(",");
        this.handles = {};
        for (var i = 0; i < r.length; i++) {
          var s = e.trim(r[i]),
            o = "ui-resizable-" + s,
            u = e('<div class="ui-resizable-handle ' + o + '"></div>');
          u.css({ zIndex: n.zIndex }),
            "se" == s && u.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),
            (this.handles[s] = ".ui-resizable-" + s),
            this.element.append(u);
        }
      }
      (this._renderAxis = function (t) {
        t = t || this.element;
        for (var n in this.handles) {
          this.handles[n].constructor == String &&
            (this.handles[n] = e(this.handles[n], this.element).show());
          if (
            this.elementIsWrapper &&
            this.originalElement[0].nodeName.match(
              /textarea|input|select|button/i
            )
          ) {
            var r = e(this.handles[n], this.element),
              i = 0;
            i = /sw|ne|nw|se|n|s/.test(n) ? r.outerHeight() : r.outerWidth();
            var s = [
              "padding",
              /ne|nw|n/.test(n)
                ? "Top"
                : /se|sw|s/.test(n)
                  ? "Bottom"
                  : /^e$/.test(n)
                    ? "Right"
                    : "Left",
            ].join("");
            t.css(s, i), this._proportionallyResize();
          }
          if (!e(this.handles[n]).length) continue;
        }
      }),
        this._renderAxis(this.element),
        (this._handles = e(
          ".ui-resizable-handle",
          this.element
        ).disableSelection()),
        this._handles.mouseover(function () {
          if (!t.resizing) {
            if (this.className)
              var e = this.className.match(
                /ui-resizable-(se|sw|ne|nw|n|e|s|w)/i
              );
            t.axis = e && e[1] ? e[1] : "se";
          }
        }),
        n.autoHide &&
        (this._handles.hide(),
          e(this.element)
            .addClass("ui-resizable-autohide")
            .mouseenter(function () {
              if (n.disabled) return;
              e(this).removeClass("ui-resizable-autohide"), t._handles.show();
            })
            .mouseleave(function () {
              if (n.disabled) return;
              t.resizing ||
                (e(this).addClass("ui-resizable-autohide"), t._handles.hide());
            })),
        this._mouseInit();
    },
    _destroy: function () {
      this._mouseDestroy();
      var t = function (t) {
        e(t)
          .removeClass(
            "ui-resizable ui-resizable-disabled ui-resizable-resizing"
          )
          .removeData("resizable")
          .removeData("ui-resizable")
          .unbind(".resizable")
          .find(".ui-resizable-handle")
          .remove();
      };
      if (this.elementIsWrapper) {
        t(this.element);
        var n = this.element;
        this.originalElement
          .css({
            position: n.css("position"),
            width: n.outerWidth(),
            height: n.outerHeight(),
            top: n.css("top"),
            left: n.css("left"),
          })
          .insertAfter(n),
          n.remove();
      }
      return (
        this.originalElement.css("resize", this.originalResizeStyle),
        t(this.originalElement),
        this
      );
    },
    _mouseCapture: function (t) {
      var n = !1;
      for (var r in this.handles) e(this.handles[r])[0] == t.target && (n = !0);
      return !this.options.disabled && n;
    },
    _mouseStart: function (t) {
      var r = this.options,
        i = this.element.position(),
        s = this.element;
      (this.resizing = !0),
        (this.documentScroll = {
          top: e(document).scrollTop(),
          left: e(document).scrollLeft(),
        }),
        (s.is(".ui-draggable") || /absolute/.test(s.css("position"))) &&
        s.css({ position: "absolute", top: i.top, left: i.left }),
        this._renderProxy();
      var o = n(this.helper.css("left")),
        u = n(this.helper.css("top"));
      r.containment &&
        ((o += e(r.containment).scrollLeft() || 0),
          (u += e(r.containment).scrollTop() || 0)),
        (this.offset = this.helper.offset()),
        (this.position = { left: o, top: u }),
        (this.size = this._helper
          ? { width: s.outerWidth(), height: s.outerHeight() }
          : { width: s.width(), height: s.height() }),
        (this.originalSize = this._helper
          ? { width: s.outerWidth(), height: s.outerHeight() }
          : { width: s.width(), height: s.height() }),
        (this.originalPosition = { left: o, top: u }),
        (this.sizeDiff = {
          width: s.outerWidth() - s.width(),
          height: s.outerHeight() - s.height(),
        }),
        (this.originalMousePosition = { left: t.pageX, top: t.pageY }),
        (this.aspectRatio =
          typeof r.aspectRatio == "number"
            ? r.aspectRatio
            : this.originalSize.width / this.originalSize.height || 1);
      var a = e(".ui-resizable-" + this.axis).css("cursor");
      return (
        e("body").css("cursor", a == "auto" ? this.axis + "-resize" : a),
        s.addClass("ui-resizable-resizing"),
        this._propagate("start", t),
        !0
      );
    },
    _mouseDrag: function (e) {
      var t = this.helper,
        n = this.options,
        r = {},
        i = this,
        s = this.originalMousePosition,
        o = this.axis,
        u = e.pageX - s.left || 0,
        a = e.pageY - s.top || 0,
        f = this._change[o];
      if (!f) return !1;
      var l = f.apply(this, [e, u, a]);
      this._updateVirtualBoundaries(e.shiftKey);
      if (this._aspectRatio || e.shiftKey) l = this._updateRatio(l, e);
      return (
        (l = this._respectSize(l, e)),
        this._propagate("resize", e),
        t.css({
          top: this.position.top + "px",
          left: this.position.left + "px",
          width: this.size.width + "px",
          height: this.size.height + "px",
        }),
        !this._helper &&
        this._proportionallyResizeElements.length &&
        this._proportionallyResize(),
        this._updateCache(l),
        this._trigger("resize", e, this.ui()),
        !1
      );
    },
    _mouseStop: function (t) {
      this.resizing = !1;
      var n = this.options,
        r = this;
      if (this._helper) {
        var i = this._proportionallyResizeElements,
          s = i.length && /textarea/i.test(i[0].nodeName),
          o = s && e.ui.hasScroll(i[0], "left") ? 0 : r.sizeDiff.height,
          u = s ? 0 : r.sizeDiff.width,
          a = { width: r.helper.width() - u, height: r.helper.height() - o },
          f =
            parseInt(r.element.css("left"), 10) +
            (r.position.left - r.originalPosition.left) || null,
          l =
            parseInt(r.element.css("top"), 10) +
            (r.position.top - r.originalPosition.top) || null;
        n.animate || this.element.css(e.extend(a, { top: l, left: f })),
          r.helper.height(r.size.height),
          r.helper.width(r.size.width),
          this._helper && !n.animate && this._proportionallyResize();
      }
      return (
        e("body").css("cursor", "auto"),
        this.element.removeClass("ui-resizable-resizing"),
        this._propagate("stop", t),
        this._helper && this.helper.remove(),
        !1
      );
    },
    _updateVirtualBoundaries: function (e) {
      var t = this.options,
        n,
        i,
        s,
        o,
        u;
      u = {
        minWidth: r(t.minWidth) ? t.minWidth : 0,
        maxWidth: r(t.maxWidth) ? t.maxWidth : Infinity,
        minHeight: r(t.minHeight) ? t.minHeight : 0,
        maxHeight: r(t.maxHeight) ? t.maxHeight : Infinity,
      };
      if (this._aspectRatio || e)
        (n = u.minHeight * this.aspectRatio),
          (s = u.minWidth / this.aspectRatio),
          (i = u.maxHeight * this.aspectRatio),
          (o = u.maxWidth / this.aspectRatio),
          n > u.minWidth && (u.minWidth = n),
          s > u.minHeight && (u.minHeight = s),
          i < u.maxWidth && (u.maxWidth = i),
          o < u.maxHeight && (u.maxHeight = o);
      this._vBoundaries = u;
    },
    _updateCache: function (e) {
      var t = this.options;
      (this.offset = this.helper.offset()),
        r(e.left) && (this.position.left = e.left),
        r(e.top) && (this.position.top = e.top),
        r(e.height) && (this.size.height = e.height),
        r(e.width) && (this.size.width = e.width);
    },
    _updateRatio: function (e, t) {
      var n = this.options,
        i = this.position,
        s = this.size,
        o = this.axis;
      return (
        r(e.height)
          ? (e.width = e.height * this.aspectRatio)
          : r(e.width) && (e.height = e.width / this.aspectRatio),
        o == "sw" && ((e.left = i.left + (s.width - e.width)), (e.top = null)),
        o == "nw" &&
        ((e.top = i.top + (s.height - e.height)),
          (e.left = i.left + (s.width - e.width))),
        e
      );
    },
    _respectSize: function (e, t) {
      var n = this.helper,
        i = this._vBoundaries,
        s = this._aspectRatio || t.shiftKey,
        o = this.axis,
        u = r(e.width) && i.maxWidth && i.maxWidth < e.width,
        a = r(e.height) && i.maxHeight && i.maxHeight < e.height,
        f = r(e.width) && i.minWidth && i.minWidth > e.width,
        l = r(e.height) && i.minHeight && i.minHeight > e.height;
      f && (e.width = i.minWidth),
        l && (e.height = i.minHeight),
        u && (e.width = i.maxWidth),
        a && (e.height = i.maxHeight);
      var c = this.originalPosition.left + this.originalSize.width,
        h = this.position.top + this.size.height,
        p = /sw|nw|w/.test(o),
        d = /nw|ne|n/.test(o);
      f && p && (e.left = c - i.minWidth),
        u && p && (e.left = c - i.maxWidth),
        l && d && (e.top = h - i.minHeight),
        a && d && (e.top = h - i.maxHeight);
      var v = !e.width && !e.height;
      return (
        v && !e.left && e.top
          ? (e.top = null)
          : v && !e.top && e.left && (e.left = null),
        e
      );
    },
    _proportionallyResize: function () {
      var t = this.options;
      if (!this._proportionallyResizeElements.length) return;
      var n = this.helper || this.element;
      for (var r = 0; r < this._proportionallyResizeElements.length; r++) {
        var i = this._proportionallyResizeElements[r];
        if (!this.borderDif) {
          var s = [
            i.css("borderTopWidth"),
            i.css("borderRightWidth"),
            i.css("borderBottomWidth"),
            i.css("borderLeftWidth"),
          ],
            o = [
              i.css("paddingTop"),
              i.css("paddingRight"),
              i.css("paddingBottom"),
              i.css("paddingLeft"),
            ];
          this.borderDif = e.map(s, function (e, t) {
            var n = parseInt(e, 10) || 0,
              r = parseInt(o[t], 10) || 0;
            return n + r;
          });
        }
        i.css({
          height: n.height() - this.borderDif[0] - this.borderDif[2] || 0,
          width: n.width() - this.borderDif[1] - this.borderDif[3] || 0,
        });
      }
    },
    _renderProxy: function () {
      var t = this.element,
        n = this.options;
      this.elementOffset = t.offset();
      if (this._helper) {
        this.helper = this.helper || e('<div style="overflow:hidden;"></div>');
        var r = e.ui.ie6 ? 1 : 0,
          i = e.ui.ie6 ? 2 : -1;
        this.helper
          .addClass(this._helper)
          .css({
            width: this.element.outerWidth() + i,
            height: this.element.outerHeight() + i,
            position: "absolute",
            left: this.elementOffset.left - r + "px",
            top: this.elementOffset.top - r + "px",
            zIndex: ++n.zIndex,
          }),
          this.helper.appendTo("body").disableSelection();
      } else this.helper = this.element;
    },
    _change: {
      e: function (e, t, n) {
        return { width: this.originalSize.width + t };
      },
      w: function (e, t, n) {
        var r = this.options,
          i = this.originalSize,
          s = this.originalPosition;
        return { left: s.left + t, width: i.width - t };
      },
      n: function (e, t, n) {
        var r = this.options,
          i = this.originalSize,
          s = this.originalPosition;
        return { top: s.top + n, height: i.height - n };
      },
      s: function (e, t, n) {
        return { height: this.originalSize.height + n };
      },
      se: function (t, n, r) {
        return e.extend(
          this._change.s.apply(this, arguments),
          this._change.e.apply(this, [t, n, r])
        );
      },
      sw: function (t, n, r) {
        return e.extend(
          this._change.s.apply(this, arguments),
          this._change.w.apply(this, [t, n, r])
        );
      },
      ne: function (t, n, r) {
        return e.extend(
          this._change.n.apply(this, arguments),
          this._change.e.apply(this, [t, n, r])
        );
      },
      nw: function (t, n, r) {
        return e.extend(
          this._change.n.apply(this, arguments),
          this._change.w.apply(this, [t, n, r])
        );
      },
    },
    _propagate: function (t, n) {
      e.ui.plugin.call(this, t, [n, this.ui()]),
        t != "resize" && this._trigger(t, n, this.ui());
    },
    plugins: {},
    ui: function () {
      return {
        originalElement: this.originalElement,
        element: this.element,
        helper: this.helper,
        position: this.position,
        size: this.size,
        originalSize: this.originalSize,
        originalPosition: this.originalPosition,
      };
    },
  }),
    e.ui.plugin.add("resizable", "alsoResize", {
      start: function (t, n) {
        var r = e(this).data("resizable"),
          i = r.options,
          s = function (t) {
            e(t).each(function () {
              var t = e(this);
              t.data("resizable-alsoresize", {
                width: parseInt(t.width(), 10),
                height: parseInt(t.height(), 10),
                left: parseInt(t.css("left"), 10),
                top: parseInt(t.css("top"), 10),
              });
            });
          };
        typeof i.alsoResize == "object" && !i.alsoResize.parentNode
          ? i.alsoResize.length
            ? ((i.alsoResize = i.alsoResize[0]), s(i.alsoResize))
            : e.each(i.alsoResize, function (e) {
              s(e);
            })
          : s(i.alsoResize);
      },
      resize: function (t, n) {
        var r = e(this).data("resizable"),
          i = r.options,
          s = r.originalSize,
          o = r.originalPosition,
          u = {
            height: r.size.height - s.height || 0,
            width: r.size.width - s.width || 0,
            top: r.position.top - o.top || 0,
            left: r.position.left - o.left || 0,
          },
          a = function (t, r) {
            e(t).each(function () {
              var t = e(this),
                i = e(this).data("resizable-alsoresize"),
                s = {},
                o =
                  r && r.length
                    ? r
                    : t.parents(n.originalElement[0]).length
                      ? ["width", "height"]
                      : ["width", "height", "top", "left"];
              e.each(o, function (e, t) {
                var n = (i[t] || 0) + (u[t] || 0);
                n && n >= 0 && (s[t] = n || null);
              }),
                t.css(s);
            });
          };
        typeof i.alsoResize == "object" && !i.alsoResize.nodeType
          ? e.each(i.alsoResize, function (e, t) {
            a(e, t);
          })
          : a(i.alsoResize);
      },
      stop: function (t, n) {
        e(this).removeData("resizable-alsoresize");
      },
    }),
    e.ui.plugin.add("resizable", "animate", {
      stop: function (t, n) {
        var r = e(this).data("resizable"),
          i = r.options,
          s = r._proportionallyResizeElements,
          o = s.length && /textarea/i.test(s[0].nodeName),
          u = o && e.ui.hasScroll(s[0], "left") ? 0 : r.sizeDiff.height,
          a = o ? 0 : r.sizeDiff.width,
          f = { width: r.size.width - a, height: r.size.height - u },
          l =
            parseInt(r.element.css("left"), 10) +
            (r.position.left - r.originalPosition.left) || null,
          c =
            parseInt(r.element.css("top"), 10) +
            (r.position.top - r.originalPosition.top) || null;
        r.element.animate(e.extend(f, c && l ? { top: c, left: l } : {}), {
          duration: i.animateDuration,
          easing: i.animateEasing,
          step: function () {
            var n = {
              width: parseInt(r.element.css("width"), 10),
              height: parseInt(r.element.css("height"), 10),
              top: parseInt(r.element.css("top"), 10),
              left: parseInt(r.element.css("left"), 10),
            };
            s && s.length && e(s[0]).css({ width: n.width, height: n.height }),
              r._updateCache(n),
              r._propagate("resize", t);
          },
        });
      },
    }),
    e.ui.plugin.add("resizable", "containment", {
      start: function (t, r) {
        var i = e(this).data("resizable"),
          s = i.options,
          o = i.element,
          u = s.containment,
          a =
            u instanceof e
              ? u.get(0)
              : /parent/.test(u)
                ? o.parent().get(0)
                : u;
        if (!a) return;
        i.containerElement = e(a);
        if (/document/.test(u) || u == document)
          (i.containerOffset = { left: 0, top: 0 }),
            (i.containerPosition = { left: 0, top: 0 }),
            (i.parentData = {
              element: e(document),
              left: 0,
              top: 0,
              width: e(document).width(),
              height:
                e(document).height() || document.body.parentNode.scrollHeight,
            });
        else {
          var f = e(a),
            l = [];
          e(["Top", "Right", "Left", "Bottom"]).each(function (e, t) {
            l[e] = n(f.css("padding" + t));
          }),
            (i.containerOffset = f.offset()),
            (i.containerPosition = f.position()),
            (i.containerSize = {
              height: f.innerHeight() - l[3],
              width: f.innerWidth() - l[1],
            });
          var c = i.containerOffset,
            h = i.containerSize.height,
            p = i.containerSize.width,
            d = e.ui.hasScroll(a, "left") ? a.scrollWidth : p,
            v = e.ui.hasScroll(a) ? a.scrollHeight : h;
          i.parentData = {
            element: a,
            left: c.left,
            top: c.top,
            width: d,
            height: v,
          };
        }
      },
      resize: function (t, n) {
        var r = e(this).data("resizable"),
          i = r.options,
          s = r.containerSize,
          o = r.containerOffset,
          u = r.size,
          a = r.position,
          f = r._aspectRatio || t.shiftKey,
          l = { top: 0, left: 0 },
          c = r.containerElement;
        c[0] != document && /static/.test(c.css("position")) && (l = o),
          a.left < (r._helper ? o.left : 0) &&
          ((r.size.width =
            r.size.width +
            (r._helper
              ? r.position.left - o.left
              : r.position.left - l.left)),
            f && (r.size.height = r.size.width / r.aspectRatio),
            (r.position.left = i.helper ? o.left : 0)),
          a.top < (r._helper ? o.top : 0) &&
          ((r.size.height =
            r.size.height +
            (r._helper ? r.position.top - o.top : r.position.top)),
            f && (r.size.width = r.size.height * r.aspectRatio),
            (r.position.top = r._helper ? o.top : 0)),
          (r.offset.left = r.parentData.left + r.position.left),
          (r.offset.top = r.parentData.top + r.position.top);
        var h = Math.abs(
          (r._helper ? r.offset.left - l.left : r.offset.left - l.left) +
          r.sizeDiff.width
        ),
          p = Math.abs(
            (r._helper ? r.offset.top - l.top : r.offset.top - o.top) +
            r.sizeDiff.height
          ),
          d = r.containerElement.get(0) == r.element.parent().get(0),
          v = /relative|absolute/.test(r.containerElement.css("position"));
        d && v && (h -= r.parentData.left),
          h + r.size.width >= r.parentData.width &&
          ((r.size.width = r.parentData.width - h),
            f && (r.size.height = r.size.width / r.aspectRatio)),
          p + r.size.height >= r.parentData.height &&
          ((r.size.height = r.parentData.height - p),
            f && (r.size.width = r.size.height * r.aspectRatio));
      },
      stop: function (t, n) {
        var r = e(this).data("resizable"),
          i = r.options,
          s = r.position,
          o = r.containerOffset,
          u = r.containerPosition,
          a = r.containerElement,
          f = e(r.helper),
          l = f.offset(),
          c = f.outerWidth() - r.sizeDiff.width,
          h = f.outerHeight() - r.sizeDiff.height;
        r._helper &&
          !i.animate &&
          /relative/.test(a.css("position")) &&
          e(this).css({ left: l.left - u.left - o.left, width: c, height: h }),
          r._helper &&
          !i.animate &&
          /static/.test(a.css("position")) &&
          e(this).css({
            left: l.left - u.left - o.left,
            width: c,
            height: h,
          });
      },
    }),
    e.ui.plugin.add("resizable", "ghost", {
      start: function (t, n) {
        var r = e(this).data("resizable"),
          i = r.options,
          s = r.size;
        (r.ghost = r.originalElement.clone()),
          r.ghost
            .css({
              opacity: 0.25,
              display: "block",
              position: "relative",
              height: s.height,
              width: s.width,
              margin: 0,
              left: 0,
              top: 0,
            })
            .addClass("ui-resizable-ghost")
            .addClass(typeof i.ghost == "string" ? i.ghost : ""),
          r.ghost.appendTo(r.helper);
      },
      resize: function (t, n) {
        var r = e(this).data("resizable"),
          i = r.options;
        r.ghost &&
          r.ghost.css({
            position: "relative",
            height: r.size.height,
            width: r.size.width,
          });
      },
      stop: function (t, n) {
        var r = e(this).data("resizable"),
          i = r.options;
        r.ghost && r.helper && r.helper.get(0).removeChild(r.ghost.get(0));
      },
    }),
    e.ui.plugin.add("resizable", "grid", {
      resize: function (t, n) {
        var r = e(this).data("resizable"),
          i = r.options,
          s = r.size,
          o = r.originalSize,
          u = r.originalPosition,
          a = r.axis,
          f = i._aspectRatio || t.shiftKey;
        i.grid = typeof i.grid == "number" ? [i.grid, i.grid] : i.grid;
        var l =
          Math.round((s.width - o.width) / (i.grid[0] || 1)) *
          (i.grid[0] || 1),
          c =
            Math.round((s.height - o.height) / (i.grid[1] || 1)) *
            (i.grid[1] || 1);
        /^(se|s|e)$/.test(a)
          ? ((r.size.width = o.width + l), (r.size.height = o.height + c))
          : /^(ne)$/.test(a)
            ? ((r.size.width = o.width + l),
              (r.size.height = o.height + c),
              (r.position.top = u.top - c))
            : /^(sw)$/.test(a)
              ? ((r.size.width = o.width + l),
                (r.size.height = o.height + c),
                (r.position.left = u.left - l))
              : ((r.size.width = o.width + l),
                (r.size.height = o.height + c),
                (r.position.top = u.top - c),
                (r.position.left = u.left - l));
      },
    });
  var n = function (e) {
    return parseInt(e, 10) || 0;
  },
    r = function (e) {
      return !isNaN(parseInt(e, 10));
    };
})(jQuery);
(function (e, t) {
  e.widget("ui.selectable", e.ui.mouse, {
    version: "1.9.2",
    options: {
      appendTo: "body",
      autoRefresh: !0,
      distance: 0,
      filter: "*",
      tolerance: "touch",
    },
    _create: function () {
      var t = this;
      this.element.addClass("ui-selectable"), (this.dragged = !1);
      var n;
      (this.refresh = function () {
        (n = e(t.options.filter, t.element[0])),
          n.addClass("ui-selectee"),
          n.each(function () {
            var t = e(this),
              n = t.offset();
            e.data(this, "selectable-item", {
              element: this,
              $element: t,
              left: n.left,
              top: n.top,
              right: n.left + t.outerWidth(),
              bottom: n.top + t.outerHeight(),
              startselected: !1,
              selected: t.hasClass("ui-selected"),
              selecting: t.hasClass("ui-selecting"),
              unselecting: t.hasClass("ui-unselecting"),
            });
          });
      }),
        this.refresh(),
        (this.selectees = n.addClass("ui-selectee")),
        this._mouseInit(),
        (this.helper = e("<div class='ui-selectable-helper'></div>"));
    },
    _destroy: function () {
      this.selectees.removeClass("ui-selectee").removeData("selectable-item"),
        this.element.removeClass("ui-selectable ui-selectable-disabled"),
        this._mouseDestroy();
    },
    _mouseStart: function (t) {
      var n = this;
      this.opos = [t.pageX, t.pageY];
      if (this.options.disabled) return;
      var r = this.options;
      (this.selectees = e(r.filter, this.element[0])),
        this._trigger("start", t),
        e(r.appendTo).append(this.helper),
        this.helper.css({
          left: t.clientX,
          top: t.clientY,
          width: 0,
          height: 0,
        }),
        r.autoRefresh && this.refresh(),
        this.selectees.filter(".ui-selected").each(function () {
          var r = e.data(this, "selectable-item");
          (r.startselected = !0),
            !t.metaKey &&
            !t.ctrlKey &&
            (r.$element.removeClass("ui-selected"),
              (r.selected = !1),
              r.$element.addClass("ui-unselecting"),
              (r.unselecting = !0),
              n._trigger("unselecting", t, { unselecting: r.element }));
        }),
        e(t.target)
          .parents()
          .andSelf()
          .each(function () {
            var r = e.data(this, "selectable-item");
            if (r) {
              var i =
                (!t.metaKey && !t.ctrlKey) ||
                !r.$element.hasClass("ui-selected");
              return (
                r.$element
                  .removeClass(i ? "ui-unselecting" : "ui-selected")
                  .addClass(i ? "ui-selecting" : "ui-unselecting"),
                (r.unselecting = !i),
                (r.selecting = i),
                (r.selected = i),
                i
                  ? n._trigger("selecting", t, { selecting: r.element })
                  : n._trigger("unselecting", t, { unselecting: r.element }),
                !1
              );
            }
          });
    },
    _mouseDrag: function (t) {
      var n = this;
      this.dragged = !0;
      if (this.options.disabled) return;
      var r = this.options,
        i = this.opos[0],
        s = this.opos[1],
        o = t.pageX,
        u = t.pageY;
      if (i > o) {
        var a = o;
        (o = i), (i = a);
      }
      if (s > u) {
        var a = u;
        (u = s), (s = a);
      }
      return (
        this.helper.css({ left: i, top: s, width: o - i, height: u - s }),
        this.selectees.each(function () {
          var a = e.data(this, "selectable-item");
          if (!a || a.element == n.element[0]) return;
          var f = !1;
          r.tolerance == "touch"
            ? (f = !(a.left > o || a.right < i || a.top > u || a.bottom < s))
            : r.tolerance == "fit" &&
            (f = a.left > i && a.right < o && a.top > s && a.bottom < u),
            f
              ? (a.selected &&
                (a.$element.removeClass("ui-selected"), (a.selected = !1)),
                a.unselecting &&
                (a.$element.removeClass("ui-unselecting"),
                  (a.unselecting = !1)),
                a.selecting ||
                (a.$element.addClass("ui-selecting"),
                  (a.selecting = !0),
                  n._trigger("selecting", t, { selecting: a.element })))
              : (a.selecting &&
                ((t.metaKey || t.ctrlKey) && a.startselected
                  ? (a.$element.removeClass("ui-selecting"),
                    (a.selecting = !1),
                    a.$element.addClass("ui-selected"),
                    (a.selected = !0))
                  : (a.$element.removeClass("ui-selecting"),
                    (a.selecting = !1),
                    a.startselected &&
                    (a.$element.addClass("ui-unselecting"),
                      (a.unselecting = !0)),
                    n._trigger("unselecting", t, {
                      unselecting: a.element,
                    }))),
                a.selected &&
                !t.metaKey &&
                !t.ctrlKey &&
                !a.startselected &&
                (a.$element.removeClass("ui-selected"),
                  (a.selected = !1),
                  a.$element.addClass("ui-unselecting"),
                  (a.unselecting = !0),
                  n._trigger("unselecting", t, { unselecting: a.element })));
        }),
        !1
      );
    },
    _mouseStop: function (t) {
      var n = this;
      this.dragged = !1;
      var r = this.options;
      return (
        e(".ui-unselecting", this.element[0]).each(function () {
          var r = e.data(this, "selectable-item");
          r.$element.removeClass("ui-unselecting"),
            (r.unselecting = !1),
            (r.startselected = !1),
            n._trigger("unselected", t, { unselected: r.element });
        }),
        e(".ui-selecting", this.element[0]).each(function () {
          var r = e.data(this, "selectable-item");
          r.$element.removeClass("ui-selecting").addClass("ui-selected"),
            (r.selecting = !1),
            (r.selected = !0),
            (r.startselected = !0),
            n._trigger("selected", t, { selected: r.element });
        }),
        this._trigger("stop", t),
        this.helper.remove(),
        !1
      );
    },
  });
})(jQuery);
(function (e, t) {
  var n = 5;
  e.widget("ui.slider", e.ui.mouse, {
    version: "1.9.2",
    widgetEventPrefix: "slide",
    options: {
      animate: !1,
      distance: 0,
      max: 100,
      min: 0,
      orientation: "horizontal",
      range: !1,
      step: 1,
      value: 0,
      values: null,
    },
    _create: function () {
      var t,
        r,
        i = this.options,
        s = this.element
          .find(".ui-slider-handle")
          .addClass("ui-state-default ui-corner-all"),
        o =
          "<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",
        u = [];
      (this._keySliding = !1),
        (this._mouseSliding = !1),
        (this._animateOff = !0),
        (this._handleIndex = null),
        this._detectOrientation(),
        this._mouseInit(),
        this.element.addClass(
          "ui-slider ui-slider-" +
          this.orientation +
          " ui-widget" +
          " ui-widget-content" +
          " ui-corner-all" +
          (i.disabled ? " ui-slider-disabled ui-disabled" : "")
        ),
        (this.range = e([])),
        i.range &&
        (i.range === !0 &&
          (i.values || (i.values = [this._valueMin(), this._valueMin()]),
            i.values.length &&
            i.values.length !== 2 &&
            (i.values = [i.values[0], i.values[0]])),
          (this.range = e("<div></div>")
            .appendTo(this.element)
            .addClass(
              "ui-slider-range ui-widget-header" +
              (i.range === "min" || i.range === "max"
                ? " ui-slider-range-" + i.range
                : "")
            ))),
        (r = (i.values && i.values.length) || 1);
      for (t = s.length; t < r; t++) u.push(o);
      (this.handles = s.add(e(u.join("")).appendTo(this.element))),
        (this.handle = this.handles.eq(0)),
        this.handles
          .add(this.range)
          .filter("a")
          .click(function (e) {
            e.preventDefault();
          })
          .mouseenter(function () {
            i.disabled || e(this).addClass("ui-state-hover");
          })
          .mouseleave(function () {
            e(this).removeClass("ui-state-hover");
          })
          .focus(function () {
            i.disabled
              ? e(this).blur()
              : (e(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),
                e(this).addClass("ui-state-focus"));
          })
          .blur(function () {
            e(this).removeClass("ui-state-focus");
          }),
        this.handles.each(function (t) {
          e(this).data("ui-slider-handle-index", t);
        }),
        this._on(this.handles, {
          keydown: function (t) {
            var r,
              i,
              s,
              o,
              u = e(t.target).data("ui-slider-handle-index");
            switch (t.keyCode) {
              case e.ui.keyCode.HOME:
              case e.ui.keyCode.END:
              case e.ui.keyCode.PAGE_UP:
              case e.ui.keyCode.PAGE_DOWN:
              case e.ui.keyCode.UP:
              case e.ui.keyCode.RIGHT:
              case e.ui.keyCode.DOWN:
              case e.ui.keyCode.LEFT:
                t.preventDefault();
                if (!this._keySliding) {
                  (this._keySliding = !0),
                    e(t.target).addClass("ui-state-active"),
                    (r = this._start(t, u));
                  if (r === !1) return;
                }
            }
            (o = this.options.step),
              this.options.values && this.options.values.length
                ? (i = s = this.values(u))
                : (i = s = this.value());
            switch (t.keyCode) {
              case e.ui.keyCode.HOME:
                s = this._valueMin();
                break;
              case e.ui.keyCode.END:
                s = this._valueMax();
                break;
              case e.ui.keyCode.PAGE_UP:
                s = this._trimAlignValue(
                  i + (this._valueMax() - this._valueMin()) / n
                );
                break;
              case e.ui.keyCode.PAGE_DOWN:
                s = this._trimAlignValue(
                  i - (this._valueMax() - this._valueMin()) / n
                );
                break;
              case e.ui.keyCode.UP:
              case e.ui.keyCode.RIGHT:
                if (i === this._valueMax()) return;
                s = this._trimAlignValue(i + o);
                break;
              case e.ui.keyCode.DOWN:
              case e.ui.keyCode.LEFT:
                if (i === this._valueMin()) return;
                s = this._trimAlignValue(i - o);
            }
            this._slide(t, u, s);
          },
          keyup: function (t) {
            var n = e(t.target).data("ui-slider-handle-index");
            this._keySliding &&
              ((this._keySliding = !1),
                this._stop(t, n),
                this._change(t, n),
                e(t.target).removeClass("ui-state-active"));
          },
        }),
        this._refreshValue(),
        (this._animateOff = !1);
    },
    _destroy: function () {
      this.handles.remove(),
        this.range.remove(),
        this.element.removeClass(
          "ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all"
        ),
        this._mouseDestroy();
    },
    _mouseCapture: function (t) {
      var n,
        r,
        i,
        s,
        o,
        u,
        a,
        f,
        l = this,
        c = this.options;
      return c.disabled
        ? !1
        : ((this.elementSize = {
          width: this.element.outerWidth(),
          height: this.element.outerHeight(),
        }),
          (this.elementOffset = this.element.offset()),
          (n = { x: t.pageX, y: t.pageY }),
          (r = this._normValueFromMouse(n)),
          (i = this._valueMax() - this._valueMin() + 1),
          this.handles.each(function (t) {
            var n = Math.abs(r - l.values(t));
            i > n && ((i = n), (s = e(this)), (o = t));
          }),
          c.range === !0 &&
          this.values(1) === c.min &&
          ((o += 1), (s = e(this.handles[o]))),
          (u = this._start(t, o)),
          u === !1
            ? !1
            : ((this._mouseSliding = !0),
              (this._handleIndex = o),
              s.addClass("ui-state-active").focus(),
              (a = s.offset()),
              (f = !e(t.target).parents().andSelf().is(".ui-slider-handle")),
              (this._clickOffset = f
                ? { left: 0, top: 0 }
                : {
                  left: t.pageX - a.left - s.width() / 2,
                  top:
                    t.pageY -
                    a.top -
                    s.height() / 2 -
                    (parseInt(s.css("borderTopWidth"), 10) || 0) -
                    (parseInt(s.css("borderBottomWidth"), 10) || 0) +
                    (parseInt(s.css("marginTop"), 10) || 0),
                }),
              this.handles.hasClass("ui-state-hover") || this._slide(t, o, r),
              (this._animateOff = !0),
              !0));
    },
    _mouseStart: function () {
      return !0;
    },
    _mouseDrag: function (e) {
      var t = { x: e.pageX, y: e.pageY },
        n = this._normValueFromMouse(t);
      return this._slide(e, this._handleIndex, n), !1;
    },
    _mouseStop: function (e) {
      return (
        this.handles.removeClass("ui-state-active"),
        (this._mouseSliding = !1),
        this._stop(e, this._handleIndex),
        this._change(e, this._handleIndex),
        (this._handleIndex = null),
        (this._clickOffset = null),
        (this._animateOff = !1),
        !1
      );
    },
    _detectOrientation: function () {
      this.orientation =
        this.options.orientation === "vertical" ? "vertical" : "horizontal";
    },
    _normValueFromMouse: function (e) {
      var t, n, r, i, s;
      return (
        this.orientation === "horizontal"
          ? ((t = this.elementSize.width),
            (n =
              e.x -
              this.elementOffset.left -
              (this._clickOffset ? this._clickOffset.left : 0)))
          : ((t = this.elementSize.height),
            (n =
              e.y -
              this.elementOffset.top -
              (this._clickOffset ? this._clickOffset.top : 0))),
        (r = n / t),
        r > 1 && (r = 1),
        r < 0 && (r = 0),
        this.orientation === "vertical" && (r = 1 - r),
        (i = this._valueMax() - this._valueMin()),
        (s = this._valueMin() + r * i),
        this._trimAlignValue(s)
      );
    },
    _start: function (e, t) {
      var n = { handle: this.handles[t], value: this.value() };
      return (
        this.options.values &&
        this.options.values.length &&
        ((n.value = this.values(t)), (n.values = this.values())),
        this._trigger("start", e, n)
      );
    },
    _slide: function (e, t, n) {
      var r, i, s;
      this.options.values && this.options.values.length
        ? ((r = this.values(t ? 0 : 1)),
          this.options.values.length === 2 &&
          this.options.range === !0 &&
          ((t === 0 && n > r) || (t === 1 && n < r)) &&
          (n = r),
          n !== this.values(t) &&
          ((i = this.values()),
            (i[t] = n),
            (s = this._trigger("slide", e, {
              handle: this.handles[t],
              value: n,
              values: i,
            })),
            (r = this.values(t ? 0 : 1)),
            s !== !1 && this.values(t, n, !0)))
        : n !== this.value() &&
        ((s = this._trigger("slide", e, {
          handle: this.handles[t],
          value: n,
        })),
          s !== !1 && this.value(n));
    },
    _stop: function (e, t) {
      var n = { handle: this.handles[t], value: this.value() };
      this.options.values &&
        this.options.values.length &&
        ((n.value = this.values(t)), (n.values = this.values())),
        this._trigger("stop", e, n);
    },
    _change: function (e, t) {
      if (!this._keySliding && !this._mouseSliding) {
        var n = { handle: this.handles[t], value: this.value() };
        this.options.values &&
          this.options.values.length &&
          ((n.value = this.values(t)), (n.values = this.values())),
          this._trigger("change", e, n);
      }
    },
    value: function (e) {
      if (arguments.length) {
        (this.options.value = this._trimAlignValue(e)),
          this._refreshValue(),
          this._change(null, 0);
        return;
      }
      return this._value();
    },
    values: function (t, n) {
      var r, i, s;
      if (arguments.length > 1) {
        (this.options.values[t] = this._trimAlignValue(n)),
          this._refreshValue(),
          this._change(null, t);
        return;
      }
      if (!arguments.length) return this._values();
      if (!e.isArray(arguments[0]))
        return this.options.values && this.options.values.length
          ? this._values(t)
          : this.value();
      (r = this.options.values), (i = arguments[0]);
      for (s = 0; s < r.length; s += 1)
        (r[s] = this._trimAlignValue(i[s])), this._change(null, s);
      this._refreshValue();
    },
    _setOption: function (t, n) {
      var r,
        i = 0;
      e.isArray(this.options.values) && (i = this.options.values.length),
        e.Widget.prototype._setOption.apply(this, arguments);
      switch (t) {
        case "disabled":
          n
            ? (this.handles.filter(".ui-state-focus").blur(),
              this.handles.removeClass("ui-state-hover"),
              this.handles.prop("disabled", !0),
              this.element.addClass("ui-disabled"))
            : (this.handles.prop("disabled", !1),
              this.element.removeClass("ui-disabled"));
          break;
        case "orientation":
          this._detectOrientation(),
            this.element
              .removeClass("ui-slider-horizontal ui-slider-vertical")
              .addClass("ui-slider-" + this.orientation),
            this._refreshValue();
          break;
        case "value":
          (this._animateOff = !0),
            this._refreshValue(),
            this._change(null, 0),
            (this._animateOff = !1);
          break;
        case "values":
          (this._animateOff = !0), this._refreshValue();
          for (r = 0; r < i; r += 1) this._change(null, r);
          this._animateOff = !1;
          break;
        case "min":
        case "max":
          (this._animateOff = !0),
            this._refreshValue(),
            (this._animateOff = !1);
      }
    },
    _value: function () {
      var e = this.options.value;
      return (e = this._trimAlignValue(e)), e;
    },
    _values: function (e) {
      var t, n, r;
      if (arguments.length)
        return (t = this.options.values[e]), (t = this._trimAlignValue(t)), t;
      n = this.options.values.slice();
      for (r = 0; r < n.length; r += 1) n[r] = this._trimAlignValue(n[r]);
      return n;
    },
    _trimAlignValue: function (e) {
      if (e <= this._valueMin()) return this._valueMin();
      if (e >= this._valueMax()) return this._valueMax();
      var t = this.options.step > 0 ? this.options.step : 1,
        n = (e - this._valueMin()) % t,
        r = e - n;
      return (
        Math.abs(n) * 2 >= t && (r += n > 0 ? t : -t), parseFloat(r.toFixed(5))
      );
    },
    _valueMin: function () {
      return this.options.min;
    },
    _valueMax: function () {
      return this.options.max;
    },
    _refreshValue: function () {
      var t,
        n,
        r,
        i,
        s,
        o = this.options.range,
        u = this.options,
        a = this,
        f = this._animateOff ? !1 : u.animate,
        l = {};
      this.options.values && this.options.values.length
        ? this.handles.each(function (r) {
          (n =
            ((a.values(r) - a._valueMin()) /
              (a._valueMax() - a._valueMin())) *
            100),
            (l[a.orientation === "horizontal" ? "left" : "bottom"] = n + "%"),
            e(this).stop(1, 1)[f ? "animate" : "css"](l, u.animate),
            a.options.range === !0 &&
            (a.orientation === "horizontal"
              ? (r === 0 &&
                a.range
                  .stop(1, 1)
                [f ? "animate" : "css"]({ left: n + "%" }, u.animate),
                r === 1 &&
                a.range[f ? "animate" : "css"](
                  { width: n - t + "%" },
                  { queue: !1, duration: u.animate }
                ))
              : (r === 0 &&
                a.range
                  .stop(1, 1)
                [f ? "animate" : "css"]({ bottom: n + "%" }, u.animate),
                r === 1 &&
                a.range[f ? "animate" : "css"](
                  { height: n - t + "%" },
                  { queue: !1, duration: u.animate }
                ))),
            (t = n);
        })
        : ((r = this.value()),
          (i = this._valueMin()),
          (s = this._valueMax()),
          (n = s !== i ? ((r - i) / (s - i)) * 100 : 0),
          (l[this.orientation === "horizontal" ? "left" : "bottom"] = n + "%"),
          this.handle.stop(1, 1)[f ? "animate" : "css"](l, u.animate),
          o === "min" &&
          this.orientation === "horizontal" &&
          this.range
            .stop(1, 1)
          [f ? "animate" : "css"]({ width: n + "%" }, u.animate),
          o === "max" &&
          this.orientation === "horizontal" &&
          this.range[f ? "animate" : "css"](
            { width: 100 - n + "%" },
            { queue: !1, duration: u.animate }
          ),
          o === "min" &&
          this.orientation === "vertical" &&
          this.range
            .stop(1, 1)
          [f ? "animate" : "css"]({ height: n + "%" }, u.animate),
          o === "max" &&
          this.orientation === "vertical" &&
          this.range[f ? "animate" : "css"](
            { height: 100 - n + "%" },
            { queue: !1, duration: u.animate }
          ));
    },
  });
})(jQuery);
(function (e, t) {
  e.widget("ui.sortable", e.ui.mouse, {
    version: "1.9.2",
    widgetEventPrefix: "sort",
    ready: !1,
    options: {
      appendTo: "parent",
      axis: !1,
      connectWith: !1,
      containment: !1,
      cursor: "auto",
      cursorAt: !1,
      dropOnEmpty: !0,
      forcePlaceholderSize: !1,
      forceHelperSize: !1,
      grid: !1,
      handle: !1,
      helper: "original",
      items: "> *",
      opacity: !1,
      placeholder: !1,
      revert: !1,
      scroll: !0,
      scrollSensitivity: 20,
      scrollSpeed: 20,
      scope: "default",
      tolerance: "intersect",
      zIndex: 1e3,
    },
    _create: function () {
      var e = this.options;
      (this.containerCache = {}),
        this.element.addClass("ui-sortable"),
        this.refresh(),
        (this.floating = this.items.length
          ? e.axis === "x" ||
          /left|right/.test(this.items[0].item.css("float")) ||
          /inline|table-cell/.test(this.items[0].item.css("display"))
          : !1),
        (this.offset = this.element.offset()),
        this._mouseInit(),
        (this.ready = !0);
    },
    _destroy: function () {
      this.element.removeClass("ui-sortable ui-sortable-disabled"),
        this._mouseDestroy();
      for (var e = this.items.length - 1; e >= 0; e--)
        this.items[e].item.removeData(this.widgetName + "-item");
      return this;
    },
    _setOption: function (t, n) {
      t === "disabled"
        ? ((this.options[t] = n),
          this.widget().toggleClass("ui-sortable-disabled", !!n))
        : e.Widget.prototype._setOption.apply(this, arguments);
    },
    _mouseCapture: function (t, n) {
      var r = this;
      if (this.reverting) return !1;
      if (this.options.disabled || this.options.type == "static") return !1;
      this._refreshItems(t);
      var i = null,
        s = e(t.target)
          .parents()
          .each(function () {
            if (e.data(this, r.widgetName + "-item") == r)
              return (i = e(this)), !1;
          });
      e.data(t.target, r.widgetName + "-item") == r && (i = e(t.target));
      if (!i) return !1;
      if (this.options.handle && !n) {
        var o = !1;
        e(this.options.handle, i)
          .find("*")
          .andSelf()
          .each(function () {
            this == t.target && (o = !0);
          });
        if (!o) return !1;
      }
      return (this.currentItem = i), this._removeCurrentsFromItems(), !0;
    },
    _mouseStart: function (t, n, r) {
      var i = this.options;
      (this.currentContainer = this),
        this.refreshPositions(),
        (this.helper = this._createHelper(t)),
        this._cacheHelperProportions(),
        this._cacheMargins(),
        (this.scrollParent = this.helper.scrollParent()),
        (this.offset = this.currentItem.offset()),
        (this.offset = {
          top: this.offset.top - this.margins.top,
          left: this.offset.left - this.margins.left,
        }),
        e.extend(this.offset, {
          click: {
            left: t.pageX - this.offset.left,
            top: t.pageY - this.offset.top,
          },
          parent: this._getParentOffset(),
          relative: this._getRelativeOffset(),
        }),
        this.helper.css("position", "absolute"),
        (this.cssPosition = this.helper.css("position")),
        (this.originalPosition = this._generatePosition(t)),
        (this.originalPageX = t.pageX),
        (this.originalPageY = t.pageY),
        i.cursorAt && this._adjustOffsetFromHelper(i.cursorAt),
        (this.domPosition = {
          prev: this.currentItem.prev()[0],
          parent: this.currentItem.parent()[0],
        }),
        this.helper[0] != this.currentItem[0] && this.currentItem.hide(),
        this._createPlaceholder(),
        i.containment && this._setContainment(),
        i.cursor &&
        (e("body").css("cursor") &&
          (this._storedCursor = e("body").css("cursor")),
          e("body").css("cursor", i.cursor)),
        i.opacity &&
        (this.helper.css("opacity") &&
          (this._storedOpacity = this.helper.css("opacity")),
          this.helper.css("opacity", i.opacity)),
        i.zIndex &&
        (this.helper.css("zIndex") &&
          (this._storedZIndex = this.helper.css("zIndex")),
          this.helper.css("zIndex", i.zIndex)),
        this.scrollParent[0] != document &&
        this.scrollParent[0].tagName != "HTML" &&
        (this.overflowOffset = this.scrollParent.offset()),
        this._trigger("start", t, this._uiHash()),
        this._preserveHelperProportions || this._cacheHelperProportions();
      if (!r)
        for (var s = this.containers.length - 1; s >= 0; s--)
          this.containers[s]._trigger("activate", t, this._uiHash(this));
      return (
        e.ui.ddmanager && (e.ui.ddmanager.current = this),
        e.ui.ddmanager &&
        !i.dropBehaviour &&
        e.ui.ddmanager.prepareOffsets(this, t),
        (this.dragging = !0),
        this.helper.addClass("ui-sortable-helper"),
        this._mouseDrag(t),
        !0
      );
    },
    _mouseDrag: function (t) {
      (this.position = this._generatePosition(t)),
        (this.positionAbs = this._convertPositionTo("absolute")),
        this.lastPositionAbs || (this.lastPositionAbs = this.positionAbs);
      if (this.options.scroll) {
        var n = this.options,
          r = !1;
        this.scrollParent[0] != document &&
          this.scrollParent[0].tagName != "HTML"
          ? (this.overflowOffset.top +
            this.scrollParent[0].offsetHeight -
            t.pageY <
            n.scrollSensitivity
            ? (this.scrollParent[0].scrollTop = r =
              this.scrollParent[0].scrollTop + n.scrollSpeed)
            : t.pageY - this.overflowOffset.top < n.scrollSensitivity &&
            (this.scrollParent[0].scrollTop = r =
              this.scrollParent[0].scrollTop - n.scrollSpeed),
            this.overflowOffset.left +
              this.scrollParent[0].offsetWidth -
              t.pageX <
              n.scrollSensitivity
              ? (this.scrollParent[0].scrollLeft = r =
                this.scrollParent[0].scrollLeft + n.scrollSpeed)
              : t.pageX - this.overflowOffset.left < n.scrollSensitivity &&
              (this.scrollParent[0].scrollLeft = r =
                this.scrollParent[0].scrollLeft - n.scrollSpeed))
          : (t.pageY - e(document).scrollTop() < n.scrollSensitivity
            ? (r = e(document).scrollTop(
              e(document).scrollTop() - n.scrollSpeed
            ))
            : e(window).height() - (t.pageY - e(document).scrollTop()) <
            n.scrollSensitivity &&
            (r = e(document).scrollTop(
              e(document).scrollTop() + n.scrollSpeed
            )),
            t.pageX - e(document).scrollLeft() < n.scrollSensitivity
              ? (r = e(document).scrollLeft(
                e(document).scrollLeft() - n.scrollSpeed
              ))
              : e(window).width() - (t.pageX - e(document).scrollLeft()) <
              n.scrollSensitivity &&
              (r = e(document).scrollLeft(
                e(document).scrollLeft() + n.scrollSpeed
              ))),
          r !== !1 &&
          e.ui.ddmanager &&
          !n.dropBehaviour &&
          e.ui.ddmanager.prepareOffsets(this, t);
      }
      this.positionAbs = this._convertPositionTo("absolute");
      if (!this.options.axis || this.options.axis != "y")
        this.helper[0].style.left = this.position.left + "px";
      if (!this.options.axis || this.options.axis != "x")
        this.helper[0].style.top = this.position.top + "px";
      for (var i = this.items.length - 1; i >= 0; i--) {
        var s = this.items[i],
          o = s.item[0],
          u = this._intersectsWithPointer(s);
        if (!u) continue;
        if (s.instance !== this.currentContainer) continue;
        if (
          o != this.currentItem[0] &&
          this.placeholder[u == 1 ? "next" : "prev"]()[0] != o &&
          !e.contains(this.placeholder[0], o) &&
          (this.options.type == "semi-dynamic"
            ? !e.contains(this.element[0], o)
            : !0)
        ) {
          this.direction = u == 1 ? "down" : "up";
          if (
            this.options.tolerance != "pointer" &&
            !this._intersectsWithSides(s)
          )
            break;
          this._rearrange(t, s), this._trigger("change", t, this._uiHash());
          break;
        }
      }
      return (
        this._contactContainers(t),
        e.ui.ddmanager && e.ui.ddmanager.drag(this, t),
        this._trigger("sort", t, this._uiHash()),
        (this.lastPositionAbs = this.positionAbs),
        !1
      );
    },
    _mouseStop: function (t, n) {
      if (!t) return;
      e.ui.ddmanager &&
        !this.options.dropBehaviour &&
        e.ui.ddmanager.drop(this, t);
      if (this.options.revert) {
        var r = this,
          i = this.placeholder.offset();
        (this.reverting = !0),
          e(this.helper).animate(
            {
              left:
                i.left -
                this.offset.parent.left -
                this.margins.left +
                (this.offsetParent[0] == document.body
                  ? 0
                  : this.offsetParent[0].scrollLeft),
              top:
                i.top -
                this.offset.parent.top -
                this.margins.top +
                (this.offsetParent[0] == document.body
                  ? 0
                  : this.offsetParent[0].scrollTop),
            },
            parseInt(this.options.revert, 10) || 500,
            function () {
              r._clear(t);
            }
          );
      } else this._clear(t, n);
      return !1;
    },
    cancel: function () {
      if (this.dragging) {
        this._mouseUp({ target: null }),
          this.options.helper == "original"
            ? this.currentItem
              .css(this._storedCSS)
              .removeClass("ui-sortable-helper")
            : this.currentItem.show();
        for (var t = this.containers.length - 1; t >= 0; t--)
          this.containers[t]._trigger("deactivate", null, this._uiHash(this)),
            this.containers[t].containerCache.over &&
            (this.containers[t]._trigger("out", null, this._uiHash(this)),
              (this.containers[t].containerCache.over = 0));
      }
      return (
        this.placeholder &&
        (this.placeholder[0].parentNode &&
          this.placeholder[0].parentNode.removeChild(this.placeholder[0]),
          this.options.helper != "original" &&
          this.helper &&
          this.helper[0].parentNode &&
          this.helper.remove(),
          e.extend(this, {
            helper: null,
            dragging: !1,
            reverting: !1,
            _noFinalSort: null,
          }),
          this.domPosition.prev
            ? e(this.domPosition.prev).after(this.currentItem)
            : e(this.domPosition.parent).prepend(this.currentItem)),
        this
      );
    },
    serialize: function (t) {
      var n = this._getItemsAsjQuery(t && t.connected),
        r = [];
      return (
        (t = t || {}),
        e(n).each(function () {
          var n = (e(t.item || this).attr(t.attribute || "id") || "").match(
            t.expression || /(.+)[-=_](.+)/
          );
          n &&
            r.push(
              (t.key || n[1] + "[]") +
              "=" +
              (t.key && t.expression ? n[1] : n[2])
            );
        }),
        !r.length && t.key && r.push(t.key + "="),
        r.join("&")
      );
    },
    toArray: function (t) {
      var n = this._getItemsAsjQuery(t && t.connected),
        r = [];
      return (
        (t = t || {}),
        n.each(function () {
          r.push(e(t.item || this).attr(t.attribute || "id") || "");
        }),
        r
      );
    },
    _intersectsWith: function (e) {
      var t = this.positionAbs.left,
        n = t + this.helperProportions.width,
        r = this.positionAbs.top,
        i = r + this.helperProportions.height,
        s = e.left,
        o = s + e.width,
        u = e.top,
        a = u + e.height,
        f = this.offset.click.top,
        l = this.offset.click.left,
        c = r + f > u && r + f < a && t + l > s && t + l < o;
      return this.options.tolerance == "pointer" ||
        this.options.forcePointerForContainers ||
        (this.options.tolerance != "pointer" &&
          this.helperProportions[this.floating ? "width" : "height"] >
          e[this.floating ? "width" : "height"])
        ? c
        : s < t + this.helperProportions.width / 2 &&
        n - this.helperProportions.width / 2 < o &&
        u < r + this.helperProportions.height / 2 &&
        i - this.helperProportions.height / 2 < a;
    },
    _intersectsWithPointer: function (t) {
      var n =
        this.options.axis === "x" ||
        e.ui.isOverAxis(
          this.positionAbs.top + this.offset.click.top,
          t.top,
          t.height
        ),
        r =
          this.options.axis === "y" ||
          e.ui.isOverAxis(
            this.positionAbs.left + this.offset.click.left,
            t.left,
            t.width
          ),
        i = n && r,
        s = this._getDragVerticalDirection(),
        o = this._getDragHorizontalDirection();
      return i
        ? this.floating
          ? (o && o == "right") || s == "down"
            ? 2
            : 1
          : s && (s == "down" ? 2 : 1)
        : !1;
    },
    _intersectsWithSides: function (t) {
      var n = e.ui.isOverAxis(
        this.positionAbs.top + this.offset.click.top,
        t.top + t.height / 2,
        t.height
      ),
        r = e.ui.isOverAxis(
          this.positionAbs.left + this.offset.click.left,
          t.left + t.width / 2,
          t.width
        ),
        i = this._getDragVerticalDirection(),
        s = this._getDragHorizontalDirection();
      return this.floating && s
        ? (s == "right" && r) || (s == "left" && !r)
        : i && ((i == "down" && n) || (i == "up" && !n));
    },
    _getDragVerticalDirection: function () {
      var e = this.positionAbs.top - this.lastPositionAbs.top;
      return e != 0 && (e > 0 ? "down" : "up");
    },
    _getDragHorizontalDirection: function () {
      var e = this.positionAbs.left - this.lastPositionAbs.left;
      return e != 0 && (e > 0 ? "right" : "left");
    },
    refresh: function (e) {
      return this._refreshItems(e), this.refreshPositions(), this;
    },
    _connectWith: function () {
      var e = this.options;
      return e.connectWith.constructor == String
        ? [e.connectWith]
        : e.connectWith;
    },
    _getItemsAsjQuery: function (t) {
      var n = [],
        r = [],
        i = this._connectWith();
      if (i && t)
        for (var s = i.length - 1; s >= 0; s--) {
          var o = e(i[s]);
          for (var u = o.length - 1; u >= 0; u--) {
            var a = e.data(o[u], this.widgetName);
            a &&
              a != this &&
              !a.options.disabled &&
              r.push([
                e.isFunction(a.options.items)
                  ? a.options.items.call(a.element)
                  : e(a.options.items, a.element)
                    .not(".ui-sortable-helper")
                    .not(".ui-sortable-placeholder"),
                a,
              ]);
          }
        }
      r.push([
        e.isFunction(this.options.items)
          ? this.options.items.call(this.element, null, {
            options: this.options,
            item: this.currentItem,
          })
          : e(this.options.items, this.element)
            .not(".ui-sortable-helper")
            .not(".ui-sortable-placeholder"),
        this,
      ]);
      for (var s = r.length - 1; s >= 0; s--)
        r[s][0].each(function () {
          n.push(this);
        });
      return e(n);
    },
    _removeCurrentsFromItems: function () {
      var t = this.currentItem.find(":data(" + this.widgetName + "-item)");
      this.items = e.grep(this.items, function (e) {
        for (var n = 0; n < t.length; n++) if (t[n] == e.item[0]) return !1;
        return !0;
      });
    },
    _refreshItems: function (t) {
      (this.items = []), (this.containers = [this]);
      var n = this.items,
        r = [
          [
            e.isFunction(this.options.items)
              ? this.options.items.call(this.element[0], t, {
                item: this.currentItem,
              })
              : e(this.options.items, this.element),
            this,
          ],
        ],
        i = this._connectWith();
      if (i && this.ready)
        for (var s = i.length - 1; s >= 0; s--) {
          var o = e(i[s]);
          for (var u = o.length - 1; u >= 0; u--) {
            var a = e.data(o[u], this.widgetName);
            a &&
              a != this &&
              !a.options.disabled &&
              (r.push([
                e.isFunction(a.options.items)
                  ? a.options.items.call(a.element[0], t, {
                    item: this.currentItem,
                  })
                  : e(a.options.items, a.element),
                a,
              ]),
                this.containers.push(a));
          }
        }
      for (var s = r.length - 1; s >= 0; s--) {
        var f = r[s][1],
          l = r[s][0];
        for (var u = 0, c = l.length; u < c; u++) {
          var h = e(l[u]);
          h.data(this.widgetName + "-item", f),
            n.push({
              item: h,
              instance: f,
              width: 0,
              height: 0,
              left: 0,
              top: 0,
            });
        }
      }
    },
    refreshPositions: function (t) {
      this.offsetParent &&
        this.helper &&
        (this.offset.parent = this._getParentOffset());
      for (var n = this.items.length - 1; n >= 0; n--) {
        var r = this.items[n];
        if (
          r.instance != this.currentContainer &&
          this.currentContainer &&
          r.item[0] != this.currentItem[0]
        )
          continue;
        var i = this.options.toleranceElement
          ? e(this.options.toleranceElement, r.item)
          : r.item;
        t || ((r.width = i.outerWidth()), (r.height = i.outerHeight()));
        var s = i.offset();
        (r.left = s.left), (r.top = s.top);
      }
      if (this.options.custom && this.options.custom.refreshContainers)
        this.options.custom.refreshContainers.call(this);
      else
        for (var n = this.containers.length - 1; n >= 0; n--) {
          var s = this.containers[n].element.offset();
          (this.containers[n].containerCache.left = s.left),
            (this.containers[n].containerCache.top = s.top),
            (this.containers[n].containerCache.width =
              this.containers[n].element.outerWidth()),
            (this.containers[n].containerCache.height =
              this.containers[n].element.outerHeight());
        }
      return this;
    },
    _createPlaceholder: function (t) {
      t = t || this;
      var n = t.options;
      if (!n.placeholder || n.placeholder.constructor == String) {
        var r = n.placeholder;
        n.placeholder = {
          element: function () {
            var n = e(document.createElement(t.currentItem[0].nodeName))
              .addClass(
                r || t.currentItem[0].className + " ui-sortable-placeholder"
              )
              .removeClass("ui-sortable-helper")[0];
            return r || (n.style.visibility = "hidden"), n;
          },
          update: function (e, i) {
            if (r && !n.forcePlaceholderSize) return;
            i.height() ||
              i.height(
                t.currentItem.innerHeight() -
                parseInt(t.currentItem.css("paddingTop") || 0, 10) -
                parseInt(t.currentItem.css("paddingBottom") || 0, 10)
              ),
              i.width() ||
              i.width(
                t.currentItem.innerWidth() -
                parseInt(t.currentItem.css("paddingLeft") || 0, 10) -
                parseInt(t.currentItem.css("paddingRight") || 0, 10)
              );
          },
        };
      }
      (t.placeholder = e(n.placeholder.element.call(t.element, t.currentItem))),
        t.currentItem.after(t.placeholder),
        n.placeholder.update(t, t.placeholder);
    },
    _contactContainers: function (t) {
      var n = null,
        r = null;
      for (var i = this.containers.length - 1; i >= 0; i--) {
        if (e.contains(this.currentItem[0], this.containers[i].element[0]))
          continue;
        if (this._intersectsWith(this.containers[i].containerCache)) {
          if (n && e.contains(this.containers[i].element[0], n.element[0]))
            continue;
          (n = this.containers[i]), (r = i);
        } else
          this.containers[i].containerCache.over &&
            (this.containers[i]._trigger("out", t, this._uiHash(this)),
              (this.containers[i].containerCache.over = 0));
      }
      if (!n) return;
      if (this.containers.length === 1)
        this.containers[r]._trigger("over", t, this._uiHash(this)),
          (this.containers[r].containerCache.over = 1);
      else {
        var s = 1e4,
          o = null,
          u = this.containers[r].floating ? "left" : "top",
          a = this.containers[r].floating ? "width" : "height",
          f = this.positionAbs[u] + this.offset.click[u];
        for (var l = this.items.length - 1; l >= 0; l--) {
          if (!e.contains(this.containers[r].element[0], this.items[l].item[0]))
            continue;
          if (this.items[l].item[0] == this.currentItem[0]) continue;
          var c = this.items[l].item.offset()[u],
            h = !1;
          Math.abs(c - f) > Math.abs(c + this.items[l][a] - f) &&
            ((h = !0), (c += this.items[l][a])),
            Math.abs(c - f) < s &&
            ((s = Math.abs(c - f)),
              (o = this.items[l]),
              (this.direction = h ? "up" : "down"));
        }
        if (!o && !this.options.dropOnEmpty) return;
        (this.currentContainer = this.containers[r]),
          o
            ? this._rearrange(t, o, null, !0)
            : this._rearrange(t, null, this.containers[r].element, !0),
          this._trigger("change", t, this._uiHash()),
          this.containers[r]._trigger("change", t, this._uiHash(this)),
          this.options.placeholder.update(
            this.currentContainer,
            this.placeholder
          ),
          this.containers[r]._trigger("over", t, this._uiHash(this)),
          (this.containers[r].containerCache.over = 1);
      }
    },
    _createHelper: function (t) {
      var n = this.options,
        r = e.isFunction(n.helper)
          ? e(n.helper.apply(this.element[0], [t, this.currentItem]))
          : n.helper == "clone"
            ? this.currentItem.clone()
            : this.currentItem;
      return (
        r.parents("body").length ||
        e(
          n.appendTo != "parent" ? n.appendTo : this.currentItem[0].parentNode
        )[0].appendChild(r[0]),
        r[0] == this.currentItem[0] &&
        (this._storedCSS = {
          width: this.currentItem[0].style.width,
          height: this.currentItem[0].style.height,
          position: this.currentItem.css("position"),
          top: this.currentItem.css("top"),
          left: this.currentItem.css("left"),
        }),
        (r[0].style.width == "" || n.forceHelperSize) &&
        r.width(this.currentItem.width()),
        (r[0].style.height == "" || n.forceHelperSize) &&
        r.height(this.currentItem.height()),
        r
      );
    },
    _adjustOffsetFromHelper: function (t) {
      typeof t == "string" && (t = t.split(" ")),
        e.isArray(t) && (t = { left: +t[0], top: +t[1] || 0 }),
        "left" in t && (this.offset.click.left = t.left + this.margins.left),
        "right" in t &&
        (this.offset.click.left =
          this.helperProportions.width - t.right + this.margins.left),
        "top" in t && (this.offset.click.top = t.top + this.margins.top),
        "bottom" in t &&
        (this.offset.click.top =
          this.helperProportions.height - t.bottom + this.margins.top);
    },
    _getParentOffset: function () {
      this.offsetParent = this.helper.offsetParent();
      var t = this.offsetParent.offset();
      this.cssPosition == "absolute" &&
        this.scrollParent[0] != document &&
        e.contains(this.scrollParent[0], this.offsetParent[0]) &&
        ((t.left += this.scrollParent.scrollLeft()),
          (t.top += this.scrollParent.scrollTop()));
      if (
        this.offsetParent[0] == document.body ||
        (this.offsetParent[0].tagName &&
          this.offsetParent[0].tagName.toLowerCase() == "html" &&
          e.ui.ie)
      )
        t = { top: 0, left: 0 };
      return {
        top:
          t.top + (parseInt(this.offsetParent.css("borderTopWidth"), 10) || 0),
        left:
          t.left +
          (parseInt(this.offsetParent.css("borderLeftWidth"), 10) || 0),
      };
    },
    _getRelativeOffset: function () {
      if (this.cssPosition == "relative") {
        var e = this.currentItem.position();
        return {
          top:
            e.top -
            (parseInt(this.helper.css("top"), 10) || 0) +
            this.scrollParent.scrollTop(),
          left:
            e.left -
            (parseInt(this.helper.css("left"), 10) || 0) +
            this.scrollParent.scrollLeft(),
        };
      }
      return { top: 0, left: 0 };
    },
    _cacheMargins: function () {
      this.margins = {
        left: parseInt(this.currentItem.css("marginLeft"), 10) || 0,
        top: parseInt(this.currentItem.css("marginTop"), 10) || 0,
      };
    },
    _cacheHelperProportions: function () {
      this.helperProportions = {
        width: this.helper.outerWidth(),
        height: this.helper.outerHeight(),
      };
    },
    _setContainment: function () {
      var t = this.options;
      t.containment == "parent" && (t.containment = this.helper[0].parentNode);
      if (t.containment == "document" || t.containment == "window")
        this.containment = [
          0 - this.offset.relative.left - this.offset.parent.left,
          0 - this.offset.relative.top - this.offset.parent.top,
          e(t.containment == "document" ? document : window).width() -
          this.helperProportions.width -
          this.margins.left,
          (e(t.containment == "document" ? document : window).height() ||
            document.body.parentNode.scrollHeight) -
          this.helperProportions.height -
          this.margins.top,
        ];
      if (!/^(document|window|parent)$/.test(t.containment)) {
        var n = e(t.containment)[0],
          r = e(t.containment).offset(),
          i = e(n).css("overflow") != "hidden";
        this.containment = [
          r.left +
          (parseInt(e(n).css("borderLeftWidth"), 10) || 0) +
          (parseInt(e(n).css("paddingLeft"), 10) || 0) -
          this.margins.left,
          r.top +
          (parseInt(e(n).css("borderTopWidth"), 10) || 0) +
          (parseInt(e(n).css("paddingTop"), 10) || 0) -
          this.margins.top,
          r.left +
          (i ? Math.max(n.scrollWidth, n.offsetWidth) : n.offsetWidth) -
          (parseInt(e(n).css("borderLeftWidth"), 10) || 0) -
          (parseInt(e(n).css("paddingRight"), 10) || 0) -
          this.helperProportions.width -
          this.margins.left,
          r.top +
          (i ? Math.max(n.scrollHeight, n.offsetHeight) : n.offsetHeight) -
          (parseInt(e(n).css("borderTopWidth"), 10) || 0) -
          (parseInt(e(n).css("paddingBottom"), 10) || 0) -
          this.helperProportions.height -
          this.margins.top,
        ];
      }
    },
    _convertPositionTo: function (t, n) {
      n || (n = this.position);
      var r = t == "absolute" ? 1 : -1,
        i = this.options,
        s =
          this.cssPosition != "absolute" ||
            (this.scrollParent[0] != document &&
              !!e.contains(this.scrollParent[0], this.offsetParent[0]))
            ? this.scrollParent
            : this.offsetParent,
        o = /(html|body)/i.test(s[0].tagName);
      return {
        top:
          n.top +
          this.offset.relative.top * r +
          this.offset.parent.top * r -
          (this.cssPosition == "fixed"
            ? -this.scrollParent.scrollTop()
            : o
              ? 0
              : s.scrollTop()) *
          r,
        left:
          n.left +
          this.offset.relative.left * r +
          this.offset.parent.left * r -
          (this.cssPosition == "fixed"
            ? -this.scrollParent.scrollLeft()
            : o
              ? 0
              : s.scrollLeft()) *
          r,
      };
    },
    _generatePosition: function (t) {
      var n = this.options,
        r =
          this.cssPosition != "absolute" ||
            (this.scrollParent[0] != document &&
              !!e.contains(this.scrollParent[0], this.offsetParent[0]))
            ? this.scrollParent
            : this.offsetParent,
        i = /(html|body)/i.test(r[0].tagName);
      this.cssPosition == "relative" &&
        (this.scrollParent[0] == document ||
          this.scrollParent[0] == this.offsetParent[0]) &&
        (this.offset.relative = this._getRelativeOffset());
      var s = t.pageX,
        o = t.pageY;
      if (this.originalPosition) {
        this.containment &&
          (t.pageX - this.offset.click.left < this.containment[0] &&
            (s = this.containment[0] + this.offset.click.left),
            t.pageY - this.offset.click.top < this.containment[1] &&
            (o = this.containment[1] + this.offset.click.top),
            t.pageX - this.offset.click.left > this.containment[2] &&
            (s = this.containment[2] + this.offset.click.left),
            t.pageY - this.offset.click.top > this.containment[3] &&
            (o = this.containment[3] + this.offset.click.top));
        if (n.grid) {
          var u =
            this.originalPageY +
            Math.round((o - this.originalPageY) / n.grid[1]) * n.grid[1];
          o = this.containment
            ? u - this.offset.click.top < this.containment[1] ||
              u - this.offset.click.top > this.containment[3]
              ? u - this.offset.click.top < this.containment[1]
                ? u + n.grid[1]
                : u - n.grid[1]
              : u
            : u;
          var a =
            this.originalPageX +
            Math.round((s - this.originalPageX) / n.grid[0]) * n.grid[0];
          s = this.containment
            ? a - this.offset.click.left < this.containment[0] ||
              a - this.offset.click.left > this.containment[2]
              ? a - this.offset.click.left < this.containment[0]
                ? a + n.grid[0]
                : a - n.grid[0]
              : a
            : a;
        }
      }
      return {
        top:
          o -
          this.offset.click.top -
          this.offset.relative.top -
          this.offset.parent.top +
          (this.cssPosition == "fixed"
            ? -this.scrollParent.scrollTop()
            : i
              ? 0
              : r.scrollTop()),
        left:
          s -
          this.offset.click.left -
          this.offset.relative.left -
          this.offset.parent.left +
          (this.cssPosition == "fixed"
            ? -this.scrollParent.scrollLeft()
            : i
              ? 0
              : r.scrollLeft()),
      };
    },
    _rearrange: function (e, t, n, r) {
      n
        ? n[0].appendChild(this.placeholder[0])
        : t.item[0].parentNode.insertBefore(
          this.placeholder[0],
          this.direction == "down" ? t.item[0] : t.item[0].nextSibling
        ),
        (this.counter = this.counter ? ++this.counter : 1);
      var i = this.counter;
      this._delay(function () {
        i == this.counter && this.refreshPositions(!r);
      });
    },
    _clear: function (t, n) {
      this.reverting = !1;
      var r = [];
      !this._noFinalSort &&
        this.currentItem.parent().length &&
        this.placeholder.before(this.currentItem),
        (this._noFinalSort = null);
      if (this.helper[0] == this.currentItem[0]) {
        for (var i in this._storedCSS)
          if (this._storedCSS[i] == "auto" || this._storedCSS[i] == "static")
            this._storedCSS[i] = "";
        this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper");
      } else this.currentItem.show();
      this.fromOutside &&
        !n &&
        r.push(function (e) {
          this._trigger("receive", e, this._uiHash(this.fromOutside));
        }),
        (this.fromOutside ||
          this.domPosition.prev !=
          this.currentItem.prev().not(".ui-sortable-helper")[0] ||
          this.domPosition.parent != this.currentItem.parent()[0]) &&
        !n &&
        r.push(function (e) {
          this._trigger("update", e, this._uiHash());
        }),
        this !== this.currentContainer &&
        (n ||
          (r.push(function (e) {
            this._trigger("remove", e, this._uiHash());
          }),
            r.push(
              function (e) {
                return function (t) {
                  e._trigger("receive", t, this._uiHash(this));
                };
              }.call(this, this.currentContainer)
            ),
            r.push(
              function (e) {
                return function (t) {
                  e._trigger("update", t, this._uiHash(this));
                };
              }.call(this, this.currentContainer)
            )));
      for (var i = this.containers.length - 1; i >= 0; i--)
        n ||
          r.push(
            function (e) {
              return function (t) {
                e._trigger("deactivate", t, this._uiHash(this));
              };
            }.call(this, this.containers[i])
          ),
          this.containers[i].containerCache.over &&
          (r.push(
            function (e) {
              return function (t) {
                e._trigger("out", t, this._uiHash(this));
              };
            }.call(this, this.containers[i])
          ),
            (this.containers[i].containerCache.over = 0));
      this._storedCursor && e("body").css("cursor", this._storedCursor),
        this._storedOpacity && this.helper.css("opacity", this._storedOpacity),
        this._storedZIndex &&
        this.helper.css(
          "zIndex",
          this._storedZIndex == "auto" ? "" : this._storedZIndex
        ),
        (this.dragging = !1);
      if (this.cancelHelperRemoval) {
        if (!n) {
          this._trigger("beforeStop", t, this._uiHash());
          for (var i = 0; i < r.length; i++) r[i].call(this, t);
          this._trigger("stop", t, this._uiHash());
        }
        return (this.fromOutside = !1), !1;
      }
      n || this._trigger("beforeStop", t, this._uiHash()),
        this.placeholder[0].parentNode.removeChild(this.placeholder[0]),
        this.helper[0] != this.currentItem[0] && this.helper.remove(),
        (this.helper = null);
      if (!n) {
        for (var i = 0; i < r.length; i++) r[i].call(this, t);
        this._trigger("stop", t, this._uiHash());
      }
      return (this.fromOutside = !1), !0;
    },
    _trigger: function () {
      e.Widget.prototype._trigger.apply(this, arguments) === !1 &&
        this.cancel();
    },
    _uiHash: function (t) {
      var n = t || this;
      return {
        helper: n.helper,
        placeholder: n.placeholder || e([]),
        position: n.position,
        originalPosition: n.originalPosition,
        offset: n.positionAbs,
        item: n.currentItem,
        sender: t ? t.element : null,
      };
    },
  });
})(jQuery);
(function (e) {
  function t(e) {
    return function () {
      var t = this.element.val();
      e.apply(this, arguments),
        this._refresh(),
        t !== this.element.val() && this._trigger("change");
    };
  }
  e.widget("ui.spinner", {
    version: "1.9.2",
    defaultElement: "<input>",
    widgetEventPrefix: "spin",
    options: {
      culture: null,
      icons: { down: "ui-icon-triangle-1-s", up: "ui-icon-triangle-1-n" },
      incremental: !0,
      max: null,
      min: null,
      numberFormat: null,
      page: 10,
      step: 1,
      change: null,
      spin: null,
      start: null,
      stop: null,
    },
    _create: function () {
      this._setOption("max", this.options.max),
        this._setOption("min", this.options.min),
        this._setOption("step", this.options.step),
        this._value(this.element.val(), !0),
        this._draw(),
        this._on(this._events),
        this._refresh(),
        this._on(this.window, {
          beforeunload: function () {
            this.element.removeAttr("autocomplete");
          },
        });
    },
    _getCreateOptions: function () {
      var t = {},
        n = this.element;
      return (
        e.each(["min", "max", "step"], function (e, r) {
          var i = n.attr(r);
          i !== undefined && i.length && (t[r] = i);
        }),
        t
      );
    },
    _events: {
      keydown: function (e) {
        this._start(e) && this._keydown(e) && e.preventDefault();
      },
      keyup: "_stop",
      focus: function () {
        this.previous = this.element.val();
      },
      blur: function (e) {
        if (this.cancelBlur) {
          delete this.cancelBlur;
          return;
        }
        this._refresh(),
          this.previous !== this.element.val() && this._trigger("change", e);
      },
      mousewheel: function (e, t) {
        if (!t) return;
        if (!this.spinning && !this._start(e)) return !1;
        this._spin((t > 0 ? 1 : -1) * this.options.step, e),
          clearTimeout(this.mousewheelTimer),
          (this.mousewheelTimer = this._delay(function () {
            this.spinning && this._stop(e);
          }, 100)),
          e.preventDefault();
      },
      "mousedown .ui-spinner-button": function (t) {
        function r() {
          var e = this.element[0] === this.document[0].activeElement;
          e ||
            (this.element.focus(),
              (this.previous = n),
              this._delay(function () {
                this.previous = n;
              }));
        }
        var n;
        (n =
          this.element[0] === this.document[0].activeElement
            ? this.previous
            : this.element.val()),
          t.preventDefault(),
          r.call(this),
          (this.cancelBlur = !0),
          this._delay(function () {
            delete this.cancelBlur, r.call(this);
          });
        if (this._start(t) === !1) return;
        this._repeat(
          null,
          e(t.currentTarget).hasClass("ui-spinner-up") ? 1 : -1,
          t
        );
      },
      "mouseup .ui-spinner-button": "_stop",
      "mouseenter .ui-spinner-button": function (t) {
        if (!e(t.currentTarget).hasClass("ui-state-active")) return;
        if (this._start(t) === !1) return !1;
        this._repeat(
          null,
          e(t.currentTarget).hasClass("ui-spinner-up") ? 1 : -1,
          t
        );
      },
      "mouseleave .ui-spinner-button": "_stop",
    },
    _draw: function () {
      var e = (this.uiSpinner = this.element
        .addClass("ui-spinner-input")
        .attr("autocomplete", "off")
        .wrap(this._uiSpinnerHtml())
        .parent()
        .append(this._buttonHtml()));
      this.element.attr("role", "spinbutton"),
        (this.buttons = e
          .find(".ui-spinner-button")
          .attr("tabIndex", -1)
          .button()
          .removeClass("ui-corner-all")),
        this.buttons.height() > Math.ceil(e.height() * 0.5) &&
        e.height() > 0 &&
        e.height(e.height()),
        this.options.disabled && this.disable();
    },
    _keydown: function (t) {
      var n = this.options,
        r = e.ui.keyCode;
      switch (t.keyCode) {
        case r.UP:
          return this._repeat(null, 1, t), !0;
        case r.DOWN:
          return this._repeat(null, -1, t), !0;
        case r.PAGE_UP:
          return this._repeat(null, n.page, t), !0;
        case r.PAGE_DOWN:
          return this._repeat(null, -n.page, t), !0;
      }
      return !1;
    },
    _uiSpinnerHtml: function () {
      return "<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>";
    },
    _buttonHtml: function () {
      return (
        "<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon " +
        this.options.icons.up +
        "'>&#9650;</span>" +
        "</a>" +
        "<a class='ui-spinner-button ui-spinner-down ui-corner-br'>" +
        "<span class='ui-icon " +
        this.options.icons.down +
        "'>&#9660;</span>" +
        "</a>"
      );
    },
    _start: function (e) {
      return !this.spinning && this._trigger("start", e) === !1
        ? !1
        : (this.counter || (this.counter = 1), (this.spinning = !0), !0);
    },
    _repeat: function (e, t, n) {
      (e = e || 500),
        clearTimeout(this.timer),
        (this.timer = this._delay(function () {
          this._repeat(40, t, n);
        }, e)),
        this._spin(t * this.options.step, n);
    },
    _spin: function (e, t) {
      var n = this.value() || 0;
      this.counter || (this.counter = 1),
        (n = this._adjustValue(n + e * this._increment(this.counter)));
      if (!this.spinning || this._trigger("spin", t, { value: n }) !== !1)
        this._value(n), this.counter++;
    },
    _increment: function (t) {
      var n = this.options.incremental;
      return n
        ? e.isFunction(n)
          ? n(t)
          : Math.floor((t * t * t) / 5e4 - (t * t) / 500 + (17 * t) / 200 + 1)
        : 1;
    },
    _precision: function () {
      var e = this._precisionOf(this.options.step);
      return (
        this.options.min !== null &&
        (e = Math.max(e, this._precisionOf(this.options.min))),
        e
      );
    },
    _precisionOf: function (e) {
      var t = e.toString(),
        n = t.indexOf(".");
      return n === -1 ? 0 : t.length - n - 1;
    },
    _adjustValue: function (e) {
      var t,
        n,
        r = this.options;
      return (
        (t = r.min !== null ? r.min : 0),
        (n = e - t),
        (n = Math.round(n / r.step) * r.step),
        (e = t + n),
        (e = parseFloat(e.toFixed(this._precision()))),
        r.max !== null && e > r.max
          ? r.max
          : r.min !== null && e < r.min
            ? r.min
            : e
      );
    },
    _stop: function (e) {
      if (!this.spinning) return;
      clearTimeout(this.timer),
        clearTimeout(this.mousewheelTimer),
        (this.counter = 0),
        (this.spinning = !1),
        this._trigger("stop", e);
    },
    _setOption: function (e, t) {
      if (e === "culture" || e === "numberFormat") {
        var n = this._parse(this.element.val());
        (this.options[e] = t), this.element.val(this._format(n));
        return;
      }
      (e === "max" || e === "min" || e === "step") &&
        typeof t == "string" &&
        (t = this._parse(t)),
        this._super(e, t),
        e === "disabled" &&
        (t
          ? (this.element.prop("disabled", !0),
            this.buttons.button("disable"))
          : (this.element.prop("disabled", !1),
            this.buttons.button("enable")));
    },
    _setOptions: t(function (e) {
      this._super(e), this._value(this.element.val());
    }),
    _parse: function (e) {
      return (
        typeof e == "string" &&
        e !== "" &&
        (e =
          window.Globalize && this.options.numberFormat
            ? Globalize.parseFloat(e, 10, this.options.culture)
            : +e),
        e === "" || isNaN(e) ? null : e
      );
    },
    _format: function (e) {
      return e === ""
        ? ""
        : window.Globalize && this.options.numberFormat
          ? Globalize.format(e, this.options.numberFormat, this.options.culture)
          : e;
    },
    _refresh: function () {
      this.element.attr({
        "aria-valuemin": this.options.min,
        "aria-valuemax": this.options.max,
        "aria-valuenow": this._parse(this.element.val()),
      });
    },
    _value: function (e, t) {
      var n;
      e !== "" &&
        ((n = this._parse(e)),
          n !== null && (t || (n = this._adjustValue(n)), (e = this._format(n)))),
        this.element.val(e),
        this._refresh();
    },
    _destroy: function () {
      this.element
        .removeClass("ui-spinner-input")
        .prop("disabled", !1)
        .removeAttr("autocomplete")
        .removeAttr("role")
        .removeAttr("aria-valuemin")
        .removeAttr("aria-valuemax")
        .removeAttr("aria-valuenow"),
        this.uiSpinner.replaceWith(this.element);
    },
    stepUp: t(function (e) {
      this._stepUp(e);
    }),
    _stepUp: function (e) {
      this._spin((e || 1) * this.options.step);
    },
    stepDown: t(function (e) {
      this._stepDown(e);
    }),
    _stepDown: function (e) {
      this._spin((e || 1) * -this.options.step);
    },
    pageUp: t(function (e) {
      this._stepUp((e || 1) * this.options.page);
    }),
    pageDown: t(function (e) {
      this._stepDown((e || 1) * this.options.page);
    }),
    value: function (e) {
      if (!arguments.length) return this._parse(this.element.val());
      t(this._value).call(this, e);
    },
    widget: function () {
      return this.uiSpinner;
    },
  });
})(jQuery);
(function (e, t) {
  function i() {
    return ++n;
  }
  function s(e) {
    return (
      e.hash.length > 1 &&
      e.href.replace(r, "") ===
      location.href.replace(r, "").replace(/\s/g, "%20")
    );
  }
  var n = 0,
    r = /#.*$/;
  e.widget("ui.tabs", {
    version: "1.9.2",
    delay: 300,
    options: {
      active: null,
      collapsible: !1,
      event: "click",
      heightStyle: "content",
      hide: null,
      show: null,
      activate: null,
      beforeActivate: null,
      beforeLoad: null,
      load: null,
    },
    _create: function () {
      var t = this,
        n = this.options,
        r = n.active,
        i = location.hash.substring(1);
      (this.running = !1),
        this.element
          .addClass("ui-tabs ui-widget ui-widget-content ui-corner-all")
          .toggleClass("ui-tabs-collapsible", n.collapsible)
          .delegate(
            ".ui-tabs-nav > li",
            "mousedown" + this.eventNamespace,
            function (t) {
              e(this).is(".ui-state-disabled") && t.preventDefault();
            }
          )
          .delegate(
            ".ui-tabs-anchor",
            "focus" + this.eventNamespace,
            function () {
              e(this).closest("li").is(".ui-state-disabled") && this.blur();
            }
          ),
        this._processTabs();
      if (r === null) {
        i &&
          this.tabs.each(function (t, n) {
            if (e(n).attr("aria-controls") === i) return (r = t), !1;
          }),
          r === null &&
          (r = this.tabs.index(this.tabs.filter(".ui-tabs-active")));
        if (r === null || r === -1) r = this.tabs.length ? 0 : !1;
      }
      r !== !1 &&
        ((r = this.tabs.index(this.tabs.eq(r))),
          r === -1 && (r = n.collapsible ? !1 : 0)),
        (n.active = r),
        !n.collapsible &&
        n.active === !1 &&
        this.anchors.length &&
        (n.active = 0),
        e.isArray(n.disabled) &&
        (n.disabled = e
          .unique(
            n.disabled.concat(
              e.map(this.tabs.filter(".ui-state-disabled"), function (e) {
                return t.tabs.index(e);
              })
            )
          )
          .sort()),
        this.options.active !== !1 && this.anchors.length
          ? (this.active = this._findActive(this.options.active))
          : (this.active = e()),
        this._refresh(),
        this.active.length && this.load(n.active);
    },
    _getCreateEventData: function () {
      return {
        tab: this.active,
        panel: this.active.length ? this._getPanelForTab(this.active) : e(),
      };
    },
    _tabKeydown: function (t) {
      var n = e(this.document[0].activeElement).closest("li"),
        r = this.tabs.index(n),
        i = !0;
      if (this._handlePageNav(t)) return;
      switch (t.keyCode) {
        case e.ui.keyCode.RIGHT:
        case e.ui.keyCode.DOWN:
          r++;
          break;
        case e.ui.keyCode.UP:
        case e.ui.keyCode.LEFT:
          (i = !1), r--;
          break;
        case e.ui.keyCode.END:
          r = this.anchors.length - 1;
          break;
        case e.ui.keyCode.HOME:
          r = 0;
          break;
        case e.ui.keyCode.SPACE:
          t.preventDefault(), clearTimeout(this.activating), this._activate(r);
          return;
        case e.ui.keyCode.ENTER:
          t.preventDefault(),
            clearTimeout(this.activating),
            this._activate(r === this.options.active ? !1 : r);
          return;
        default:
          return;
      }
      t.preventDefault(),
        clearTimeout(this.activating),
        (r = this._focusNextTab(r, i)),
        t.ctrlKey ||
        (n.attr("aria-selected", "false"),
          this.tabs.eq(r).attr("aria-selected", "true"),
          (this.activating = this._delay(function () {
            this.option("active", r);
          }, this.delay)));
    },
    _panelKeydown: function (t) {
      if (this._handlePageNav(t)) return;
      t.ctrlKey &&
        t.keyCode === e.ui.keyCode.UP &&
        (t.preventDefault(), this.active.focus());
    },
    _handlePageNav: function (t) {
      if (t.altKey && t.keyCode === e.ui.keyCode.PAGE_UP)
        return (
          this._activate(this._focusNextTab(this.options.active - 1, !1)), !0
        );
      if (t.altKey && t.keyCode === e.ui.keyCode.PAGE_DOWN)
        return (
          this._activate(this._focusNextTab(this.options.active + 1, !0)), !0
        );
    },
    _findNextTab: function (t, n) {
      function i() {
        return t > r && (t = 0), t < 0 && (t = r), t;
      }
      var r = this.tabs.length - 1;
      while (e.inArray(i(), this.options.disabled) !== -1)
        t = n ? t + 1 : t - 1;
      return t;
    },
    _focusNextTab: function (e, t) {
      return (e = this._findNextTab(e, t)), this.tabs.eq(e).focus(), e;
    },
    _setOption: function (e, t) {
      if (e === "active") {
        this._activate(t);
        return;
      }
      if (e === "disabled") {
        this._setupDisabled(t);
        return;
      }
      this._super(e, t),
        e === "collapsible" &&
        (this.element.toggleClass("ui-tabs-collapsible", t),
          !t && this.options.active === !1 && this._activate(0)),
        e === "event" && this._setupEvents(t),
        e === "heightStyle" && this._setupHeightStyle(t);
    },
    _tabId: function (e) {
      return e.attr("aria-controls") || "ui-tabs-" + i();
    },
    _sanitizeSelector: function (e) {
      return e ? e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g, "\\$&") : "";
    },
    refresh: function () {
      var t = this.options,
        n = this.tablist.children(":has(a[href])");
      (t.disabled = e.map(n.filter(".ui-state-disabled"), function (e) {
        return n.index(e);
      })),
        this._processTabs(),
        t.active === !1 || !this.anchors.length
          ? ((t.active = !1), (this.active = e()))
          : this.active.length && !e.contains(this.tablist[0], this.active[0])
            ? this.tabs.length === t.disabled.length
              ? ((t.active = !1), (this.active = e()))
              : this._activate(this._findNextTab(Math.max(0, t.active - 1), !1))
            : (t.active = this.tabs.index(this.active)),
        this._refresh();
    },
    _refresh: function () {
      this._setupDisabled(this.options.disabled),
        this._setupEvents(this.options.event),
        this._setupHeightStyle(this.options.heightStyle),
        this.tabs
          .not(this.active)
          .attr({ "aria-selected": "false", tabIndex: -1 }),
        this.panels
          .not(this._getPanelForTab(this.active))
          .hide()
          .attr({ "aria-expanded": "false", "aria-hidden": "true" }),
        this.active.length
          ? (this.active
            .addClass("ui-tabs-active ui-state-active")
            .attr({ "aria-selected": "true", tabIndex: 0 }),
            this._getPanelForTab(this.active)
              .show()
              .attr({ "aria-expanded": "true", "aria-hidden": "false" }))
          : this.tabs.eq(0).attr("tabIndex", 0);
    },
    _processTabs: function () {
      var t = this;
      (this.tablist = this._getList()
        .addClass(
          "ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"
        )
        .attr("role", "tablist")),
        (this.tabs = this.tablist
          .find("> li:has(a[href])")
          .addClass("ui-state-default ui-corner-top")
          .attr({ role: "tab", tabIndex: -1 })),
        (this.anchors = this.tabs
          .map(function () {
            return e("a", this)[0];
          })
          .addClass("ui-tabs-anchor")
          .attr({ role: "presentation", tabIndex: -1 })),
        (this.panels = e()),
        this.anchors.each(function (n, r) {
          var i,
            o,
            u,
            a = e(r).uniqueId().attr("id"),
            f = e(r).closest("li"),
            l = f.attr("aria-controls");
          s(r)
            ? ((i = r.hash), (o = t.element.find(t._sanitizeSelector(i))))
            : ((u = t._tabId(f)),
              (i = "#" + u),
              (o = t.element.find(i)),
              o.length ||
              ((o = t._createPanel(u)),
                o.insertAfter(t.panels[n - 1] || t.tablist)),
              o.attr("aria-live", "polite")),
            o.length && (t.panels = t.panels.add(o)),
            l && f.data("ui-tabs-aria-controls", l),
            f.attr({ "aria-controls": i.substring(1), "aria-labelledby": a }),
            o.attr("aria-labelledby", a);
        }),
        this.panels
          .addClass("ui-tabs-panel ui-widget-content ui-corner-bottom")
          .attr("role", "tabpanel");
    },
    _getList: function () {
      return this.element.find("ol,ul").eq(0);
    },
    _createPanel: function (t) {
      return e("<div>")
        .attr("id", t)
        .addClass("ui-tabs-panel ui-widget-content ui-corner-bottom")
        .data("ui-tabs-destroy", !0);
    },
    _setupDisabled: function (t) {
      e.isArray(t) &&
        (t.length ? t.length === this.anchors.length && (t = !0) : (t = !1));
      for (var n = 0, r; (r = this.tabs[n]); n++)
        t === !0 || e.inArray(n, t) !== -1
          ? e(r).addClass("ui-state-disabled").attr("aria-disabled", "true")
          : e(r).removeClass("ui-state-disabled").removeAttr("aria-disabled");
      this.options.disabled = t;
    },
    _setupEvents: function (t) {
      var n = {
        click: function (e) {
          e.preventDefault();
        },
      };
      t &&
        e.each(t.split(" "), function (e, t) {
          n[t] = "_eventHandler";
        }),
        this._off(this.anchors.add(this.tabs).add(this.panels)),
        this._on(this.anchors, n),
        this._on(this.tabs, { keydown: "_tabKeydown" }),
        this._on(this.panels, { keydown: "_panelKeydown" }),
        this._focusable(this.tabs),
        this._hoverable(this.tabs);
    },
    _setupHeightStyle: function (t) {
      var n,
        r,
        i = this.element.parent();
      t === "fill"
        ? (e.support.minHeight ||
          ((r = i.css("overflow")), i.css("overflow", "hidden")),
          (n = i.height()),
          this.element.siblings(":visible").each(function () {
            var t = e(this),
              r = t.css("position");
            if (r === "absolute" || r === "fixed") return;
            n -= t.outerHeight(!0);
          }),
          r && i.css("overflow", r),
          this.element
            .children()
            .not(this.panels)
            .each(function () {
              n -= e(this).outerHeight(!0);
            }),
          this.panels
            .each(function () {
              e(this).height(
                Math.max(0, n - e(this).innerHeight() + e(this).height())
              );
            })
            .css("overflow", "auto"))
        : t === "auto" &&
        ((n = 0),
          this.panels
            .each(function () {
              n = Math.max(n, e(this).height("").height());
            })
            .height(n));
    },
    _eventHandler: function (t) {
      var n = this.options,
        r = this.active,
        i = e(t.currentTarget),
        s = i.closest("li"),
        o = s[0] === r[0],
        u = o && n.collapsible,
        a = u ? e() : this._getPanelForTab(s),
        f = r.length ? this._getPanelForTab(r) : e(),
        l = { oldTab: r, oldPanel: f, newTab: u ? e() : s, newPanel: a };
      t.preventDefault();
      if (
        s.hasClass("ui-state-disabled") ||
        s.hasClass("ui-tabs-loading") ||
        this.running ||
        (o && !n.collapsible) ||
        this._trigger("beforeActivate", t, l) === !1
      )
        return;
      (n.active = u ? !1 : this.tabs.index(s)),
        (this.active = o ? e() : s),
        this.xhr && this.xhr.abort(),
        !f.length &&
        !a.length &&
        e.error("jQuery UI Tabs: Mismatching fragment identifier."),
        a.length && this.load(this.tabs.index(s), t),
        this._toggle(t, l);
    },
    _toggle: function (t, n) {
      function o() {
        (r.running = !1), r._trigger("activate", t, n);
      }
      function u() {
        n.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),
          i.length && r.options.show
            ? r._show(i, r.options.show, o)
            : (i.show(), o());
      }
      var r = this,
        i = n.newPanel,
        s = n.oldPanel;
      (this.running = !0),
        s.length && this.options.hide
          ? this._hide(s, this.options.hide, function () {
            n.oldTab
              .closest("li")
              .removeClass("ui-tabs-active ui-state-active"),
              u();
          })
          : (n.oldTab
            .closest("li")
            .removeClass("ui-tabs-active ui-state-active"),
            s.hide(),
            u()),
        s.attr({ "aria-expanded": "false", "aria-hidden": "true" }),
        n.oldTab.attr("aria-selected", "false"),
        i.length && s.length
          ? n.oldTab.attr("tabIndex", -1)
          : i.length &&
          this.tabs
            .filter(function () {
              return e(this).attr("tabIndex") === 0;
            })
            .attr("tabIndex", -1),
        i.attr({ "aria-expanded": "true", "aria-hidden": "false" }),
        n.newTab.attr({ "aria-selected": "true", tabIndex: 0 });
    },
    _activate: function (t) {
      var n,
        r = this._findActive(t);
      if (r[0] === this.active[0]) return;
      r.length || (r = this.active),
        (n = r.find(".ui-tabs-anchor")[0]),
        this._eventHandler({
          target: n,
          currentTarget: n,
          preventDefault: e.noop,
        });
    },
    _findActive: function (t) {
      return t === !1 ? e() : this.tabs.eq(t);
    },
    _getIndex: function (e) {
      return (
        typeof e == "string" &&
        (e = this.anchors.index(this.anchors.filter("[href$='" + e + "']"))),
        e
      );
    },
    _destroy: function () {
      this.xhr && this.xhr.abort(),
        this.element.removeClass(
          "ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"
        ),
        this.tablist
          .removeClass(
            "ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"
          )
          .removeAttr("role"),
        this.anchors
          .removeClass("ui-tabs-anchor")
          .removeAttr("role")
          .removeAttr("tabIndex")
          .removeData("href.tabs")
          .removeData("load.tabs")
          .removeUniqueId(),
        this.tabs.add(this.panels).each(function () {
          e.data(this, "ui-tabs-destroy")
            ? e(this).remove()
            : e(this)
              .removeClass(
                "ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel"
              )
              .removeAttr("tabIndex")
              .removeAttr("aria-live")
              .removeAttr("aria-busy")
              .removeAttr("aria-selected")
              .removeAttr("aria-labelledby")
              .removeAttr("aria-hidden")
              .removeAttr("aria-expanded")
              .removeAttr("role");
        }),
        this.tabs.each(function () {
          var t = e(this),
            n = t.data("ui-tabs-aria-controls");
          n ? t.attr("aria-controls", n) : t.removeAttr("aria-controls");
        }),
        this.panels.show(),
        this.options.heightStyle !== "content" && this.panels.css("height", "");
    },
    enable: function (n) {
      var r = this.options.disabled;
      if (r === !1) return;
      n === t
        ? (r = !1)
        : ((n = this._getIndex(n)),
          e.isArray(r)
            ? (r = e.map(r, function (e) {
              return e !== n ? e : null;
            }))
            : (r = e.map(this.tabs, function (e, t) {
              return t !== n ? t : null;
            }))),
        this._setupDisabled(r);
    },
    disable: function (n) {
      var r = this.options.disabled;
      if (r === !0) return;
      if (n === t) r = !0;
      else {
        n = this._getIndex(n);
        if (e.inArray(n, r) !== -1) return;
        e.isArray(r) ? (r = e.merge([n], r).sort()) : (r = [n]);
      }
      this._setupDisabled(r);
    },
    load: function (t, n) {
      t = this._getIndex(t);
      var r = this,
        i = this.tabs.eq(t),
        o = i.find(".ui-tabs-anchor"),
        u = this._getPanelForTab(i),
        a = { tab: i, panel: u };
      if (s(o[0])) return;
      (this.xhr = e.ajax(this._ajaxSettings(o, n, a))),
        this.xhr &&
        this.xhr.statusText !== "canceled" &&
        (i.addClass("ui-tabs-loading"),
          u.attr("aria-busy", "true"),
          this.xhr
            .success(function (e) {
              setTimeout(function () {
                u.html(e), r._trigger("load", n, a);
              }, 1);
            })
            .complete(function (e, t) {
              setTimeout(function () {
                t === "abort" && r.panels.stop(!1, !0),
                  i.removeClass("ui-tabs-loading"),
                  u.removeAttr("aria-busy"),
                  e === r.xhr && delete r.xhr;
              }, 1);
            }));
    },
    _ajaxSettings: function (t, n, r) {
      var i = this;
      return {
        url: t.attr("href"),
        beforeSend: function (t, s) {
          return i._trigger(
            "beforeLoad",
            n,
            e.extend({ jqXHR: t, ajaxSettings: s }, r)
          );
        },
      };
    },
    _getPanelForTab: function (t) {
      var n = e(t).attr("aria-controls");
      return this.element.find(this._sanitizeSelector("#" + n));
    },
  }),
    e.uiBackCompat !== !1 &&
    ((e.ui.tabs.prototype._ui = function (e, t) {
      return { tab: e, panel: t, index: this.anchors.index(e) };
    }),
      e.widget("ui.tabs", e.ui.tabs, {
        url: function (e, t) {
          this.anchors.eq(e).attr("href", t);
        },
      }),
      e.widget("ui.tabs", e.ui.tabs, {
        options: { ajaxOptions: null, cache: !1 },
        _create: function () {
          this._super();
          var t = this;
          this._on({
            tabsbeforeload: function (n, r) {
              if (e.data(r.tab[0], "cache.tabs")) {
                n.preventDefault();
                return;
              }
              r.jqXHR.success(function () {
                t.options.cache && e.data(r.tab[0], "cache.tabs", !0);
              });
            },
          });
        },
        _ajaxSettings: function (t, n, r) {
          var i = this.options.ajaxOptions;
          return e.extend(
            {},
            i,
            {
              error: function (e, t) {
                try {
                  i.error(e, t, r.tab.closest("li").index(), r.tab[0]);
                } catch (n) { }
              },
            },
            this._superApply(arguments)
          );
        },
        _setOption: function (e, t) {
          e === "cache" && t === !1 && this.anchors.removeData("cache.tabs"),
            this._super(e, t);
        },
        _destroy: function () {
          this.anchors.removeData("cache.tabs"), this._super();
        },
        url: function (e) {
          this.anchors.eq(e).removeData("cache.tabs"),
            this._superApply(arguments);
        },
      }),
      e.widget("ui.tabs", e.ui.tabs, {
        abort: function () {
          this.xhr && this.xhr.abort();
        },
      }),
      e.widget("ui.tabs", e.ui.tabs, {
        options: { spinner: "<em>Loading&#8230;</em>" },
        _create: function () {
          this._super(),
            this._on({
              tabsbeforeload: function (e, t) {
                if (e.target !== this.element[0] || !this.options.spinner)
                  return;
                var n = t.tab.find("span"),
                  r = n.html();
                n.html(this.options.spinner),
                  t.jqXHR.complete(function () {
                    n.html(r);
                  });
              },
            });
        },
      }),
      e.widget("ui.tabs", e.ui.tabs, {
        options: { enable: null, disable: null },
        enable: function (t) {
          var n = this.options,
            r;
          if (
            (t && n.disabled === !0) ||
            (e.isArray(n.disabled) && e.inArray(t, n.disabled) !== -1)
          )
            r = !0;
          this._superApply(arguments),
            r &&
            this._trigger(
              "enable",
              null,
              this._ui(this.anchors[t], this.panels[t])
            );
        },
        disable: function (t) {
          var n = this.options,
            r;
          if (
            (t && n.disabled === !1) ||
            (e.isArray(n.disabled) && e.inArray(t, n.disabled) === -1)
          )
            r = !0;
          this._superApply(arguments),
            r &&
            this._trigger(
              "disable",
              null,
              this._ui(this.anchors[t], this.panels[t])
            );
        },
      }),
      e.widget("ui.tabs", e.ui.tabs, {
        options: {
          add: null,
          remove: null,
          tabTemplate: "<li><a href='#{href}'><span>#{label}</span></a></li>",
        },
        add: function (n, r, i) {
          i === t && (i = this.anchors.length);
          var s,
            o,
            u = this.options,
            a = e(
              u.tabTemplate.replace(/#\{href\}/g, n).replace(/#\{label\}/g, r)
            ),
            f = n.indexOf("#") ? this._tabId(a) : n.replace("#", "");
          return (
            a
              .addClass("ui-state-default ui-corner-top")
              .data("ui-tabs-destroy", !0),
            a.attr("aria-controls", f),
            (s = i >= this.tabs.length),
            (o = this.element.find("#" + f)),
            o.length ||
            ((o = this._createPanel(f)),
              s
                ? i > 0
                  ? o.insertAfter(this.panels.eq(-1))
                  : o.appendTo(this.element)
                : o.insertBefore(this.panels[i])),
            o
              .addClass("ui-tabs-panel ui-widget-content ui-corner-bottom")
              .hide(),
            s ? a.appendTo(this.tablist) : a.insertBefore(this.tabs[i]),
            (u.disabled = e.map(u.disabled, function (e) {
              return e >= i ? ++e : e;
            })),
            this.refresh(),
            this.tabs.length === 1 &&
            u.active === !1 &&
            this.option("active", 0),
            this._trigger(
              "add",
              null,
              this._ui(this.anchors[i], this.panels[i])
            ),
            this
          );
        },
        remove: function (t) {
          t = this._getIndex(t);
          var n = this.options,
            r = this.tabs.eq(t).remove(),
            i = this._getPanelForTab(r).remove();
          return (
            r.hasClass("ui-tabs-active") &&
            this.anchors.length > 2 &&
            this._activate(t + (t + 1 < this.anchors.length ? 1 : -1)),
            (n.disabled = e.map(
              e.grep(n.disabled, function (e) {
                return e !== t;
              }),
              function (e) {
                return e >= t ? --e : e;
              }
            )),
            this.refresh(),
            this._trigger("remove", null, this._ui(r.find("a")[0], i[0])),
            this
          );
        },
      }),
      e.widget("ui.tabs", e.ui.tabs, {
        length: function () {
          return this.anchors.length;
        },
      }),
      e.widget("ui.tabs", e.ui.tabs, {
        options: { idPrefix: "ui-tabs-" },
        _tabId: function (t) {
          var n = t.is("li") ? t.find("a[href]") : t;
          return (
            (n = n[0]),
            e(n).closest("li").attr("aria-controls") ||
            (n.title &&
              n.title
                .replace(/\s/g, "_")
                .replace(/[^\w\u00c0-\uFFFF\-]/g, "")) ||
            this.options.idPrefix + i()
          );
        },
      }),
      e.widget("ui.tabs", e.ui.tabs, {
        options: { panelTemplate: "<div></div>" },
        _createPanel: function (t) {
          return e(this.options.panelTemplate)
            .attr("id", t)
            .addClass("ui-tabs-panel ui-widget-content ui-corner-bottom")
            .data("ui-tabs-destroy", !0);
        },
      }),
      e.widget("ui.tabs", e.ui.tabs, {
        _create: function () {
          var e = this.options;
          e.active === null &&
            e.selected !== t &&
            (e.active = e.selected === -1 ? !1 : e.selected),
            this._super(),
            (e.selected = e.active),
            e.selected === !1 && (e.selected = -1);
        },
        _setOption: function (e, t) {
          if (e !== "selected") return this._super(e, t);
          var n = this.options;
          this._super("active", t === -1 ? !1 : t),
            (n.selected = n.active),
            n.selected === !1 && (n.selected = -1);
        },
        _eventHandler: function () {
          this._superApply(arguments),
            (this.options.selected = this.options.active),
            this.options.selected === !1 && (this.options.selected = -1);
        },
      }),
      e.widget("ui.tabs", e.ui.tabs, {
        options: { show: null, select: null },
        _create: function () {
          this._super(),
            this.options.active !== !1 &&
            this._trigger(
              "show",
              null,
              this._ui(
                this.active.find(".ui-tabs-anchor")[0],
                this._getPanelForTab(this.active)[0]
              )
            );
        },
        _trigger: function (e, t, n) {
          var r,
            i,
            s = this._superApply(arguments);
          return s
            ? (e === "beforeActivate"
              ? ((r = n.newTab.length ? n.newTab : n.oldTab),
                (i = n.newPanel.length ? n.newPanel : n.oldPanel),
                (s = this._super("select", t, {
                  tab: r.find(".ui-tabs-anchor")[0],
                  panel: i[0],
                  index: r.closest("li").index(),
                })))
              : e === "activate" &&
              n.newTab.length &&
              (s = this._super("show", t, {
                tab: n.newTab.find(".ui-tabs-anchor")[0],
                panel: n.newPanel[0],
                index: n.newTab.closest("li").index(),
              })),
              s)
            : !1;
        },
      }),
      e.widget("ui.tabs", e.ui.tabs, {
        select: function (e) {
          e = this._getIndex(e);
          if (e === -1) {
            if (!this.options.collapsible || this.options.selected === -1)
              return;
            e = this.options.selected;
          }
          this.anchors.eq(e).trigger(this.options.event + this.eventNamespace);
        },
      }),
      (function () {
        var t = 0;
        e.widget("ui.tabs", e.ui.tabs, {
          options: { cookie: null },
          _create: function () {
            var e = this.options,
              t;
            e.active == null &&
              e.cookie &&
              ((t = parseInt(this._cookie(), 10)),
                t === -1 && (t = !1),
                (e.active = t)),
              this._super();
          },
          _cookie: function (n) {
            var r = [
              this.cookie ||
              (this.cookie = this.options.cookie.name || "ui-tabs-" + ++t),
            ];
            return (
              arguments.length &&
              (r.push(n === !1 ? -1 : n), r.push(this.options.cookie)),
              e.cookie.apply(null, r)
            );
          },
          _refresh: function () {
            this._super(),
              this.options.cookie &&
              this._cookie(this.options.active, this.options.cookie);
          },
          _eventHandler: function () {
            this._superApply(arguments),
              this.options.cookie &&
              this._cookie(this.options.active, this.options.cookie);
          },
          _destroy: function () {
            this._super(),
              this.options.cookie && this._cookie(null, this.options.cookie);
          },
        });
      })(),
      e.widget("ui.tabs", e.ui.tabs, {
        _trigger: function (t, n, r) {
          var i = e.extend({}, r);
          return (
            t === "load" &&
            ((i.panel = i.panel[0]),
              (i.tab = i.tab.find(".ui-tabs-anchor")[0])),
            this._super(t, n, i)
          );
        },
      }),
      e.widget("ui.tabs", e.ui.tabs, {
        options: { fx: null },
        _getFx: function () {
          var t,
            n,
            r = this.options.fx;
          return (
            r && (e.isArray(r) ? ((t = r[0]), (n = r[1])) : (t = n = r)),
            r ? { show: n, hide: t } : null
          );
        },
        _toggle: function (e, t) {
          function o() {
            (n.running = !1), n._trigger("activate", e, t);
          }
          function u() {
            t.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),
              r.length && s.show
                ? r.animate(s.show, s.show.duration, function () {
                  o();
                })
                : (r.show(), o());
          }
          var n = this,
            r = t.newPanel,
            i = t.oldPanel,
            s = this._getFx();
          if (!s) return this._super(e, t);
          (n.running = !0),
            i.length && s.hide
              ? i.animate(s.hide, s.hide.duration, function () {
                t.oldTab
                  .closest("li")
                  .removeClass("ui-tabs-active ui-state-active"),
                  u();
              })
              : (t.oldTab
                .closest("li")
                .removeClass("ui-tabs-active ui-state-active"),
                i.hide(),
                u());
        },
      }));
})(jQuery);
(function (e) {
  function n(t, n) {
    var r = (t.attr("aria-describedby") || "").split(/\s+/);
    r.push(n),
      t.data("ui-tooltip-id", n).attr("aria-describedby", e.trim(r.join(" ")));
  }
  function r(t) {
    var n = t.data("ui-tooltip-id"),
      r = (t.attr("aria-describedby") || "").split(/\s+/),
      i = e.inArray(n, r);
    i !== -1 && r.splice(i, 1),
      t.removeData("ui-tooltip-id"),
      (r = e.trim(r.join(" "))),
      r ? t.attr("aria-describedby", r) : t.removeAttr("aria-describedby");
  }
  var t = 0;
  e.widget("ui.tooltip", {
    version: "1.9.2",
    options: {
      content: function () {
        return e(this).attr("title");
      },
      hide: !0,
      items: "[title]:not([disabled])",
      position: {
        my: "left top+15",
        at: "left bottom",
        collision: "flipfit flip",
      },
      show: !0,
      tooltipClass: null,
      track: !1,
      close: null,
      open: null,
    },
    _create: function () {
      this._on({ mouseover: "open", focusin: "open" }),
        (this.tooltips = {}),
        (this.parents = {}),
        this.options.disabled && this._disable();
    },
    _setOption: function (t, n) {
      var r = this;
      if (t === "disabled") {
        this[n ? "_disable" : "_enable"](), (this.options[t] = n);
        return;
      }
      this._super(t, n),
        t === "content" &&
        e.each(this.tooltips, function (e, t) {
          r._updateContent(t);
        });
    },
    _disable: function () {
      var t = this;
      e.each(this.tooltips, function (n, r) {
        var i = e.Event("blur");
        (i.target = i.currentTarget = r[0]), t.close(i, !0);
      }),
        this.element
          .find(this.options.items)
          .andSelf()
          .each(function () {
            var t = e(this);
            t.is("[title]") &&
              t.data("ui-tooltip-title", t.attr("title")).attr("title", "");
          });
    },
    _enable: function () {
      this.element
        .find(this.options.items)
        .andSelf()
        .each(function () {
          var t = e(this);
          t.data("ui-tooltip-title") &&
            t.attr("title", t.data("ui-tooltip-title"));
        });
    },
    open: function (t) {
      var n = this,
        r = e(t ? t.target : this.element).closest(this.options.items);
      if (!r.length || r.data("ui-tooltip-id")) return;
      r.attr("title") && r.data("ui-tooltip-title", r.attr("title")),
        r.data("ui-tooltip-open", !0),
        t &&
        t.type === "mouseover" &&
        r.parents().each(function () {
          var t = e(this),
            r;
          t.data("ui-tooltip-open") &&
            ((r = e.Event("blur")),
              (r.target = r.currentTarget = this),
              n.close(r, !0)),
            t.attr("title") &&
            (t.uniqueId(),
              (n.parents[this.id] = {
                element: this,
                title: t.attr("title"),
              }),
              t.attr("title", ""));
        }),
        this._updateContent(r, t);
    },
    _updateContent: function (e, t) {
      var n,
        r = this.options.content,
        i = this,
        s = t ? t.type : null;
      if (typeof r == "string") return this._open(t, e, r);
      (n = r.call(e[0], function (n) {
        if (!e.data("ui-tooltip-open")) return;
        i._delay(function () {
          t && (t.type = s), this._open(t, e, n);
        });
      })),
        n && this._open(t, e, n);
    },
    _open: function (t, r, i) {
      function f(e) {
        a.of = e;
        if (s.is(":hidden")) return;
        s.position(a);
      }
      var s,
        o,
        u,
        a = e.extend({}, this.options.position);
      if (!i) return;
      s = this._find(r);
      if (s.length) {
        s.find(".ui-tooltip-content").html(i);
        return;
      }
      r.is("[title]") &&
        (t && t.type === "mouseover"
          ? r.attr("title", "")
          : r.removeAttr("title")),
        (s = this._tooltip(r)),
        n(r, s.attr("id")),
        s.find(".ui-tooltip-content").html(i),
        this.options.track && t && /^mouse/.test(t.type)
          ? (this._on(this.document, { mousemove: f }), f(t))
          : s.position(e.extend({ of: r }, this.options.position)),
        s.hide(),
        this._show(s, this.options.show),
        this.options.show &&
        this.options.show.delay &&
        (u = setInterval(function () {
          s.is(":visible") && (f(a.of), clearInterval(u));
        }, e.fx.interval)),
        this._trigger("open", t, { tooltip: s }),
        (o = {
          keyup: function (t) {
            if (t.keyCode === e.ui.keyCode.ESCAPE) {
              var n = e.Event(t);
              (n.currentTarget = r[0]), this.close(n, !0);
            }
          },
          remove: function () {
            this._removeTooltip(s);
          },
        });
      if (!t || t.type === "mouseover") o.mouseleave = "close";
      if (!t || t.type === "focusin") o.focusout = "close";
      this._on(!0, r, o);
    },
    close: function (t) {
      var n = this,
        i = e(t ? t.currentTarget : this.element),
        s = this._find(i);
      if (this.closing) return;
      i.data("ui-tooltip-title") && i.attr("title", i.data("ui-tooltip-title")),
        r(i),
        s.stop(!0),
        this._hide(s, this.options.hide, function () {
          n._removeTooltip(e(this));
        }),
        i.removeData("ui-tooltip-open"),
        this._off(i, "mouseleave focusout keyup"),
        i[0] !== this.element[0] && this._off(i, "remove"),
        this._off(this.document, "mousemove"),
        t &&
        t.type === "mouseleave" &&
        e.each(this.parents, function (t, r) {
          e(r.element).attr("title", r.title), delete n.parents[t];
        }),
        (this.closing = !0),
        this._trigger("close", t, { tooltip: s }),
        (this.closing = !1);
    },
    _tooltip: function (n) {
      var r = "ui-tooltip-" + t++,
        i = e("<div>")
          .attr({ id: r, role: "tooltip" })
          .addClass(
            "ui-tooltip ui-widget ui-corner-all ui-widget-content " +
            (this.options.tooltipClass || "")
          );
      return (
        e("<div>").addClass("ui-tooltip-content").appendTo(i),
        i.appendTo(this.document[0].body),
        e.fn.bgiframe && i.bgiframe(),
        (this.tooltips[r] = n),
        i
      );
    },
    _find: function (t) {
      var n = t.data("ui-tooltip-id");
      return n ? e("#" + n) : e();
    },
    _removeTooltip: function (e) {
      e.remove(), delete this.tooltips[e.attr("id")];
    },
    _destroy: function () {
      var t = this;
      e.each(this.tooltips, function (n, r) {
        var i = e.Event("blur");
        (i.target = i.currentTarget = r[0]),
          t.close(i, !0),
          e("#" + n).remove(),
          r.data("ui-tooltip-title") &&
          (r.attr("title", r.data("ui-tooltip-title")),
            r.removeData("ui-tooltip-title"));
      });
    },
  });
})(jQuery);
jQuery.cookie = function (name, value, options) {
  if (typeof value != "undefined") {
    options = options || {};
    if (value === null) {
      value = "";
      options.expires = -1;
    }
    var expires = "";
    if (
      options.expires &&
      (typeof options.expires == "number" || options.expires.toUTCString)
    ) {
      var date;
      if (typeof options.expires == "number") {
        date = new Date();
        date.setTime(date.getTime() + options.expires * 24 * 60 * 60 * 1000);
      } else {
        date = options.expires;
      }
      expires = "; expires=" + date.toUTCString();
    }
    var path = options.path ? "; path=" + options.path : "";
    var domain = options.domain ? "; domain=" + options.domain : "";
    var secure = options.secure ? "; secure" : "";
    document.cookie = [
      name,
      "=",
      encodeURIComponent(value),
      expires,
      path,
      domain,
      secure,
    ].join("");
  } else {
    var cookieValue = null;
    if (document.cookie && document.cookie != "") {
      var cookies = document.cookie.split(";");
      for (var i = 0; i < cookies.length; i++) {
        var cookie = jQuery.trim(cookies[i]);
        if (cookie.substring(0, name.length + 1) == name + "=") {
          cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
          break;
        }
      }
    }
    return cookieValue;
  }
};
(function ($) {
  var getAFValue = function (o) {
    var type,
      c = [];
    if (!o.length) {
      return undefined;
    }
    if (o[0].tagName.toLowerCase() === "span") {
      o.find(":checked").each(function () {
        c.push(this.value);
      });
      return c.join(",");
    }
    type = o.attr("type");
    if (type === "checkbox" || type === "radio") {
      return o.filter(":checked").val();
    } else {
      return o.val();
    }
  };
  $.fn.yiiactiveform = function (options) {
    return this.each(function () {
      var settings = $.extend({}, $.fn.yiiactiveform.defaults, options || {}),
        $form = $(this);
      if (settings.validationUrl === undefined) {
        settings.validationUrl = $form.attr("action");
      }
      $.each(settings.attributes, function (i) {
        this.value = getAFValue($form.find("#" + this.inputID));
        settings.attributes[i] = $.extend(
          {},
          {
            validationDelay: settings.validationDelay,
            validateOnChange: settings.validateOnChange,
            validateOnType: settings.validateOnType,
            hideErrorMessage: settings.hideErrorMessage,
            inputContainer: settings.inputContainer,
            errorCssClass: settings.errorCssClass,
            successCssClass: settings.successCssClass,
            beforeValidateAttribute: settings.beforeValidateAttribute,
            afterValidateAttribute: settings.afterValidateAttribute,
            validatingCssClass: settings.validatingCssClass,
          },
          this
        );
      });
      $form.data("settings", settings);
      settings.submitting = false;
      var validate = function (attribute, forceValidate) {
        if (forceValidate) {
          attribute.status = 2;
        }
        $.each(settings.attributes, function () {
          if (this.value !== getAFValue($form.find("#" + this.inputID))) {
            this.status = 2;
            forceValidate = true;
          }
        });
        if (!forceValidate) {
          return;
        }
        if (settings.timer !== undefined) {
          clearTimeout(settings.timer);
        }
        settings.timer = setTimeout(function () {
          if (settings.submitting || $form.is(":hidden")) {
            return;
          }
          if (
            attribute.beforeValidateAttribute === undefined ||
            attribute.beforeValidateAttribute($form, attribute)
          ) {
            $.each(settings.attributes, function () {
              if (this.status === 2) {
                this.status = 3;
                $.fn.yiiactiveform
                  .getInputContainer(this, $form)
                  .addClass(this.validatingCssClass);
              }
            });
            $.fn.yiiactiveform.validate($form, function (data) {
              var hasError = false;
              $.each(settings.attributes, function () {
                if (this.status === 2 || this.status === 3) {
                  hasError =
                    $.fn.yiiactiveform.updateInput(this, data, $form) ||
                    hasError;
                }
              });
              if (attribute.afterValidateAttribute !== undefined) {
                attribute.afterValidateAttribute(
                  $form,
                  attribute,
                  data,
                  hasError
                );
              }
            });
          }
        }, attribute.validationDelay);
      };
      $.each(settings.attributes, function (i, attribute) {
        if (this.validateOnChange) {
          $form
            .find("#" + this.inputID)
            .change(function () {
              validate(attribute, false);
            })
            .blur(function () {
              if (attribute.status !== 2 && attribute.status !== 3) {
                validate(attribute, !attribute.status);
              }
            });
        }
        if (this.validateOnType) {
          $form.find("#" + this.inputID).keyup(function () {
            if (attribute.value !== getAFValue($(this))) {
              validate(attribute, false);
            }
          });
        }
      });
      if (settings.validateOnSubmit) {
        $form.on("mouseup keyup", ":submit", function () {
          $form.data("submitObject", $(this));
        });
        var validated = false;
        $form.submit(function () {
          if (validated) {
            validated = false;
            return true;
          }
          if (settings.timer !== undefined) {
            clearTimeout(settings.timer);
          }
          settings.submitting = true;
          if (
            settings.beforeValidate === undefined ||
            settings.beforeValidate($form)
          ) {
            $.fn.yiiactiveform.validate($form, function (data) {
              var hasError = false;
              $.each(settings.attributes, function () {
                hasError =
                  $.fn.yiiactiveform.updateInput(this, data, $form) || hasError;
              });
              $.fn.yiiactiveform.updateSummary($form, data);
              if (
                settings.afterValidate === undefined ||
                settings.afterValidate($form, data, hasError)
              ) {
                if (!hasError) {
                  validated = true;
                  $form.submit();
                  return;
                }
              }
              settings.submitting = false;
            });
          } else {
            settings.submitting = false;
          }
          return false;
        });
      }
      $form.bind("reset", function () {
        setTimeout(function () {
          $.each(settings.attributes, function () {
            this.status = 0;
            var $error = $form.find("#" + this.errorID),
              $container = $.fn.yiiactiveform.getInputContainer(this, $form);
            $container.removeClass(
              this.validatingCssClass +
              " " +
              this.errorCssClass +
              " " +
              this.successCssClass
            );
            $error.html("").hide();
            this.value = getAFValue($form.find("#" + this.inputID));
          });
          $form.find("label, :input").each(function () {
            $(this).removeClass(settings.errorCss);
          });
          $("#" + settings.summaryID)
            .hide()
            .find("ul")
            .html("");
          if (settings.focus !== undefined && !window.location.hash) {
            $form.find(settings.focus).focus();
          }
        }, 1);
      });
      if (settings.focus !== undefined && !window.location.hash) {
        $form.find(settings.focus).focus();
      }
    });
  };
  $.fn.yiiactiveform.getInputContainer = function (attribute, form) {
    if (attribute.inputContainer === undefined) {
      return form.find("#" + attribute.inputID).closest("div");
    } else {
      return form
        .find(attribute.inputContainer)
        .filter(':has("#' + attribute.inputID + '")');
    }
  };
  $.fn.yiiactiveform.updateInput = function (attribute, messages, form) {
    attribute.status = 1;
    var $error,
      $container,
      hasError = false,
      $el = form.find("#" + attribute.inputID),
      errorCss = form.data("settings").errorCss;
    if ($el.length) {
      hasError =
        messages !== null &&
        $.isArray(messages[attribute.id]) &&
        messages[attribute.id].length > 0;
      $error = form.find("#" + attribute.errorID);
      $container = $.fn.yiiactiveform.getInputContainer(attribute, form);
      $container.removeClass(
        attribute.validatingCssClass +
        " " +
        attribute.errorCssClass +
        " " +
        attribute.successCssClass
      );
      $container.find("label, :input").each(function () {
        $(this).removeClass(errorCss);
      });
      if (hasError) {
        $error.html(messages[attribute.id][0]);
        $container.addClass(attribute.errorCssClass);
      } else if (attribute.enableAjaxValidation || attribute.clientValidation) {
        $container.addClass(attribute.successCssClass);
      }
      if (!attribute.hideErrorMessage) {
        $error.toggle(hasError);
      }
      attribute.value = getAFValue($el);
    }
    return hasError;
  };
  $.fn.yiiactiveform.updateSummary = function (form, messages) {
    var settings = $(form).data("settings"),
      content = "";
    if (settings.summaryID === undefined) {
      return;
    }
    if (messages) {
      var summaryAttributes = [];
      for (var i in settings.attributes) {
        if (settings.attributes[i].summary) {
          summaryAttributes.push(settings.attributes[i].id);
        }
      }
      $.each(settings.attributes, function () {
        if (
          $.inArray(this.id, summaryAttributes) !== -1 &&
          $.isArray(messages[this.id])
        ) {
          $.each(messages[this.id], function (j, message) {
            content = content + "<li>" + message + "</li>";
          });
        }
      });
    }
    $("#" + settings.summaryID)
      .toggle(content !== "")
      .find("ul")
      .html(content);
  };
  $.fn.yiiactiveform.validate = function (
    form,
    successCallback,
    errorCallback
  ) {
    var $form = $(form),
      settings = $form.data("settings"),
      needAjaxValidation = false,
      messages = {};
    $.each(settings.attributes, function () {
      var value,
        msg = [];
      if (
        this.clientValidation !== undefined &&
        (settings.submitting || this.status === 2 || this.status === 3)
      ) {
        value = getAFValue($form.find("#" + this.inputID));
        this.clientValidation(value, msg, this);
        if (msg.length) {
          messages[this.id] = msg;
        }
      }
      if (
        this.enableAjaxValidation &&
        !msg.length &&
        (settings.submitting || this.status === 2 || this.status === 3)
      ) {
        needAjaxValidation = true;
      }
    });
    if (
      !needAjaxValidation ||
      (settings.submitting && !$.isEmptyObject(messages))
    ) {
      if (settings.submitting) {
        setTimeout(function () {
          successCallback(messages);
        }, 200);
      } else {
        successCallback(messages);
      }
      return;
    }
    var $button = $form.data("submitObject"),
      extData = "&" + settings.ajaxVar + "=" + $form.attr("id");
    if ($button && $button.length) {
      extData += "&" + $button.attr("name") + "=" + $button.attr("value");
    }
    $.ajax({
      url: settings.validationUrl,
      type: $form.attr("method"),
      data: $form.serialize() + extData,
      dataType: "json",
      success: function (data) {
        if (data !== null && typeof data === "object") {
          $.each(settings.attributes, function () {
            if (!this.enableAjaxValidation) {
              delete data[this.id];
            }
          });
          successCallback($.extend({}, messages, data));
        } else {
          successCallback(messages);
        }
      },
      error: function () {
        if (errorCallback !== undefined) {
          errorCallback();
        }
      },
    });
  };
  $.fn.yiiactiveform.getSettings = function (form) {
    return $(form).data("settings");
  };
  $.fn.yiiactiveform.defaults = {
    ajaxVar: "ajax",
    validationUrl: undefined,
    validationDelay: 200,
    validateOnSubmit: false,
    validateOnChange: true,
    validateOnType: false,
    hideErrorMessage: false,
    inputContainer: undefined,
    errorCss: "error",
    errorCssClass: "error",
    successCssClass: "success",
    validatingCssClass: "validating",
    summaryID: undefined,
    timer: undefined,
    beforeValidateAttribute: undefined,
    afterValidateAttribute: undefined,
    beforeValidate: undefined,
    afterValidate: undefined,
    focus: undefined,
    attributes: [],
  };
})(jQuery);
(function ($) {
  $.widget("ui.dropdownchecklist", {
    version: function () {
      alert("DropDownCheckList v1.3");
    },
    _appendDropContainer: function (controlItem) {
      var wrapper = $("<div/>");
      wrapper.addClass(
        "ui-dropdownchecklist ui-dropdownchecklist-dropcontainer-wrapper"
      );
      wrapper.addClass("ui-widget");
      wrapper.attr("id", controlItem.attr("id") + "-ddw");
      wrapper.css({ position: "absolute", left: "-33000px", top: "-33000px" });
      var container = $("<fieldset/>");
      container.addClass(
        "ui-dropdownchecklist-dropcontainer ui-widget-content"
      );
      container.css("overflow-y", "auto");
      var legendData = $("<legend/>");
      legendData.addClass("sr-only");
      legendData.css("display", "none");
      legendData.html(this.options.legendText);
      container.append(legendData);
      wrapper.append(container);
      wrapper.insertAfter(controlItem);
      wrapper.isOpen = false;
      return wrapper;
    },
    _isDropDownKeyShortcut: function (e, keycode) {
      return e.altKey && $.ui.keyCode.DOWN == keycode;
    },
    _isDropDownCloseKey: function (e, keycode) {
      return $.ui.keyCode.ESCAPE == keycode || $.ui.keyCode.ENTER == keycode;
    },
    _keyFocusChange: function (target, delta, limitToItems) {
      var focusables = $(":focusable");
      var index = focusables.index(target);
      if (index >= 0) {
        index += delta;
        if (limitToItems) {
          var allCheckboxes = this.dropWrapper.find("input:not([disabled])");
          var firstIndex = focusables.index(allCheckboxes.get(0));
          var lastIndex = focusables.index(
            allCheckboxes.get(allCheckboxes.length - 1)
          );
          if (index < firstIndex) {
            index = lastIndex;
          } else if (index > lastIndex) {
            index = firstIndex;
          }
        }
        focusables.get(index).focus();
      }
    },
    _handleKeyboard: function (e) {
      var self = this;
      var keyCode = e.keyCode || e.which;
      if (!self.dropWrapper.isOpen && self._isDropDownKeyShortcut(e, keyCode)) {
        e.stopImmediatePropagation();
        self._toggleDropContainer(true);
      } else if (
        self.dropWrapper.isOpen &&
        self._isDropDownCloseKey(e, keyCode)
      ) {
        e.stopImmediatePropagation();
        self._toggleDropContainer(false);
        self.controlSelector.focus();
      } else if (
        self.dropWrapper.isOpen &&
        e.target.type == "checkbox" &&
        (keyCode == $.ui.keyCode.DOWN || keyCode == $.ui.keyCode.UP)
      ) {
        e.stopImmediatePropagation();
        self._keyFocusChange(
          e.target,
          keyCode == $.ui.keyCode.DOWN ? 1 : -1,
          true
        );
      } else if (self.dropWrapper.isOpen && keyCode == $.ui.keyCode.TAB) {
      }
    },
    _handleFocus: function (e, focusIn, forDropdown) {
      var self = this;
      if (forDropdown && !self.dropWrapper.isOpen) {
        e.stopImmediatePropagation();
        if (focusIn) {
          self.controlSelector.addClass("ui-state-hover");
          if ($.ui.dropdownchecklist.gLastOpened != null) {
            $.ui.dropdownchecklist.gLastOpened._toggleDropContainer(false);
          }
        } else {
          self.controlSelector.removeClass("ui-state-hover");
        }
      } else if (!forDropdown && !focusIn) {
        if (e != null) {
          e.stopImmediatePropagation();
        }
        self.controlSelector.removeClass("ui-state-hover");
        self._toggleDropContainer(false);
      }
    },
    _cancelBlur: function (e) {
      var self = this;
      if (self.blurringItem != null) {
        clearTimeout(self.blurringItem);
        self.blurringItem = null;
      }
    },
    _appendControl: function () {
      var self = this,
        sourceSelect = this.sourceSelect,
        options = this.options;
      var wrapper = $("<span/>");
      wrapper.addClass(
        "ui-dropdownchecklist ui-dropdownchecklist-selector-wrapper ui-widget"
      );
      wrapper.css({
        display: "inline-block",
        cursor: "default",
        overflow: "hidden",
      });
      var baseID = sourceSelect.attr("id");
      if (baseID == null || baseID == "") {
        baseID = "ddcl-" + $.ui.dropdownchecklist.gIDCounter++;
      } else {
        baseID = "ddcl-" + baseID;
      }
      wrapper.attr("id", baseID);
      var control = $("<span/>");
      control.addClass("ui-dropdownchecklist-selector ui-state-default");
      control.css({
        display: "inline-block",
        overflow: "hidden",
        "white-space": "nowrap",
      });
      var tabIndex = sourceSelect.attr("tabIndex");
      if (tabIndex == null) {
        tabIndex = 0;
      } else {
        tabIndex = parseInt(tabIndex);
        if (tabIndex < 0) {
          tabIndex = 0;
        }
      }
      control.attr("tabIndex", tabIndex);
      control.keyup(function (e) {
        self._handleKeyboard(e);
      });
      control.focus(function (e) {
        self._handleFocus(e, true, true);
      });
      control.blur(function (e) {
        self._handleFocus(e, false, true);
      });
      wrapper.append(control);
      if (options.icon != null) {
        var iconPlacement =
          options.icon.placement == null ? "left" : options.icon.placement;
        var anIcon = $("<div/>");
        anIcon.addClass("ui-icon");
        anIcon.addClass(
          options.icon.toOpen != null
            ? options.icon.toOpen
            : "ui-icon-triangle-1-e"
        );
        anIcon.css({ float: iconPlacement });
        control.append(anIcon);
      }
      var textContainer = $("<span/>");
      textContainer.addClass("ui-dropdownchecklist-text");
      textContainer.css({
        display: "inline-block",
        "white-space": "nowrap",
        overflow: "hidden",
      });
      control.append(textContainer);
      wrapper.hover(
        function () {
          if (!self.disabled) {
            control.addClass("ui-state-hover");
          }
        },
        function () {
          if (!self.disabled) {
            control.removeClass("ui-state-hover");
          }
        }
      );
      wrapper.click(function (event) {
        if (!self.disabled) {
          event.stopImmediatePropagation();
          self._toggleDropContainer(!self.dropWrapper.isOpen);
        }
      });
      wrapper.insertAfter(sourceSelect);
      $(window).resize(function () {
        if (!self.disabled && self.dropWrapper.isOpen) {
          self._toggleDropContainer(true);
        }
      });
      return wrapper;
    },
    _createDropItem: function (
      index,
      tabIndex,
      value,
      text,
      optCss,
      checked,
      disabled,
      indent
    ) {
      var self = this,
        options = this.options,
        sourceSelect = this.sourceSelect,
        controlWrapper = this.controlWrapper;
      var item = $("<div/>");
      item.addClass("ui-dropdownchecklist-item");
      item.css({ "white-space": "nowrap" });
      var checkedString = checked ? ' checked="checked"' : "";
      var classString = disabled ? ' class="inactive"' : ' class="active"';
      var idBase = controlWrapper.attr("id");
      var id = idBase + "-i" + index;
      var checkBox;
      if (self.isMultiple) {
        checkBox = $(
          '<input disabled type="checkbox" id="' +
          id +
          '"' +
          checkedString +
          classString +
          ' tabindex="' +
          tabIndex +
          '" />'
        );
      } else {
        checkBox = $(
          '<input disabled type="radio" id="' +
          id +
          '" name="' +
          idBase +
          '"' +
          checkedString +
          classString +
          ' tabindex="' +
          tabIndex +
          '" />'
        );
      }
      checkBox = checkBox.attr("index", index).val(value);
      item.append(checkBox);
      var label = $("<label for=" + id + "/>");
      label.addClass("ui-dropdownchecklist-text");
      if (optCss != null) {
        label.attr("style", optCss);
      }
      label.css({ cursor: "default" });
      label.html(text);
      if (indent) {
        item.addClass("ui-dropdownchecklist-indent");
      }
      item.addClass("ui-state-default");
      if (disabled) {
        item.addClass("ui-state-disabled");
      }
      label.click(function (e) {
        e.stopImmediatePropagation();
      });
      item.append(label);
      item.hover(
        function (e) {
          var anItem = $(this);
          if (!anItem.hasClass("ui-state-disabled")) {
            anItem.addClass("ui-state-hover");
          }
        },
        function (e) {
          var anItem = $(this);
          anItem.removeClass("ui-state-hover");
        }
      );
      checkBox.click(function (e) {
        var aCheckBox = $(this);
        e.stopImmediatePropagation();
        if (aCheckBox.hasClass("active")) {
          var callback = self.options.onItemClick;
          if ($.isFunction(callback))
            try {
              callback.call(self, aCheckBox, self.sourceSelect.get(0));
            } catch (ex) {
              aCheckBox.prop("checked", !aCheckBox.prop("checked"));
              return;
            }
          self._syncSelected(aCheckBox);
          self.sourceSelect.trigger("change", "ddcl_internal");
          if (!self.isMultiple && options.closeRadioOnClick) {
            self._toggleDropContainer(false);
          }
        }
      });
      item.click(function (e) {
        var anItem = $(this);
        e.stopImmediatePropagation();
        if (!anItem.hasClass("ui-state-disabled")) {
          var aCheckBox = anItem.find("input");
          var checked = aCheckBox.prop("checked");
          aCheckBox.prop("checked", !checked);
          var callback = self.options.onItemClick;
          if ($.isFunction(callback)) {
            try {
              callback.call(self, aCheckBox, self.sourceSelect.get(0));
            } catch (ex) {
              aCheckBox.prop("checked", checked);
              return;
            }
          }
          self._syncSelected(aCheckBox);
          self.sourceSelect.trigger("change", "ddcl_internal");
          if (!checked && !self.isMultiple && options.closeRadioOnClick) {
            self._toggleDropContainer(false);
          }
        } else {
          anItem.focus();
          self._cancelBlur();
        }
      });
      item.focus(function (e) {
        var anItem = $(this);
        e.stopImmediatePropagation();
      });
      item.keyup(function (e) {
        self._handleKeyboard(e);
      });
      return item;
    },
    _createGroupItem: function (text, disabled) {
      var self = this;
      var group = $("<div />");
      group.addClass("ui-dropdownchecklist-group ui-widget-header");
      if (disabled) {
        group.addClass("ui-state-disabled");
      }
      group.css({ "white-space": "nowrap" });
      var label = $("<span/>");
      label.addClass("ui-dropdownchecklist-text");
      label.css({ cursor: "default" });
      label.text(text);
      group.append(label);
      group.click(function (e) {
        var aGroup = $(this);
        e.stopImmediatePropagation();
        aGroup.focus();
        self._cancelBlur();
      });
      group.focus(function (e) {
        var aGroup = $(this);
        e.stopImmediatePropagation();
      });
      return group;
    },
    _createCloseItem: function (text) {
      var self = this;
      var closeItem = $("<div />");
      closeItem.addClass(
        "ui-state-default ui-dropdownchecklist-close ui-dropdownchecklist-item"
      );
      closeItem.css({ "white-space": "nowrap", "text-align": "right" });
      var label = $("<span/>");
      label.addClass("ui-dropdownchecklist-text");
      label.css({ cursor: "default" });
      label.html(text);
      closeItem.append(label);
      closeItem.click(function (e) {
        var aGroup = $(this);
        e.stopImmediatePropagation();
        aGroup.focus();
        self._toggleDropContainer(false);
      });
      closeItem.hover(
        function (e) {
          $(this).addClass("ui-state-hover");
        },
        function (e) {
          $(this).removeClass("ui-state-hover");
        }
      );
      closeItem.focus(function (e) {
        var aGroup = $(this);
        e.stopImmediatePropagation();
      });
      return closeItem;
    },
    _appendItems: function () {
      var self = this,
        config = this.options,
        sourceSelect = this.sourceSelect,
        dropWrapper = this.dropWrapper;
      var dropContainerDiv = dropWrapper.find(
        ".ui-dropdownchecklist-dropcontainer"
      );
      sourceSelect.children().each(function (index) {
        var opt = $(this);
        if (opt.is("option")) {
          self._appendOption(opt, dropContainerDiv, index, false, false);
        } else if (opt.is("optgroup")) {
          var disabled = opt.attr("disabled");
          var text = opt.attr("label");
          if (text != "") {
            var group = self._createGroupItem(text, disabled);
            dropContainerDiv.append(group);
          }
          self._appendOptions(opt, dropContainerDiv, index, true, disabled);
        }
      });
      if (config.explicitClose != null) {
        var closeItem = self._createCloseItem(config.explicitClose);
        dropContainerDiv.append(closeItem);
      }
      var divWidth = dropContainerDiv.outerWidth();
      var divHeight = dropContainerDiv.outerHeight();
      return { width: divWidth, height: divHeight };
    },
    _appendOptions: function (
      parent,
      container,
      parentIndex,
      indent,
      forceDisabled
    ) {
      var self = this;
      parent.children("option").each(function (index) {
        var option = $(this);
        var childIndex = parentIndex + "." + index;
        self._appendOption(
          option,
          container,
          childIndex,
          indent,
          forceDisabled
        );
      });
    },
    _appendOption: function (option, container, index, indent, forceDisabled) {
      var self = this;
      var text = option.html();
      var value = option.val();
      var optCss = option.attr("style");
      var selected = option.prop("selected");
      var disabled = forceDisabled || option.attr("disabled");
      var tabIndex = self.controlSelector.attr("tabindex");
      var item = self._createDropItem(
        index,
        tabIndex,
        value,
        text,
        optCss,
        selected,
        disabled,
        indent
      );
      container.append(item);
    },
    _syncSelected: function (senderCheckbox) {
      var self = this,
        options = this.options,
        sourceSelect = this.sourceSelect,
        dropWrapper = this.dropWrapper;
      var selectOptions = sourceSelect.get(0).options;
      var allCheckboxes = dropWrapper.find("input.active");
      if (options.firstItemChecksAll) {
        if (senderCheckbox == null && $(selectOptions[0]).prop("selected")) {
          allCheckboxes.prop("checked", true);
        } else if (
          senderCheckbox != null &&
          senderCheckbox.attr("index") == 0
        ) {
          allCheckboxes.prop("checked", senderCheckbox.prop("checked"));
        } else {
          var allChecked = true;
          var firstCheckbox = null;
          allCheckboxes.each(function (index) {
            if (index > 0) {
              var checked = $(this).prop("checked");
              if (!checked) {
                allChecked = false;
              }
            } else {
              firstCheckbox = $(this);
            }
          });
          if (firstCheckbox != null) {
            firstCheckbox.prop("checked", allChecked);
          }
        }
      }
      allCheckboxes = dropWrapper.find("input");
      allCheckboxes.each(function (index) {
        $(selectOptions[index]).prop("selected", $(this).prop("checked"));
      });
      self._updateControlText();
      if (senderCheckbox != null) {
        senderCheckbox.focus();
      }
    },
    _sourceSelectChangeHandler: function (event) {
      var self = this,
        dropWrapper = this.dropWrapper;
      dropWrapper.find("input").val(self.sourceSelect.val());
      self._updateControlText();
    },
    _updateControlText: function () {
      var self = this,
        sourceSelect = this.sourceSelect,
        options = this.options,
        controlWrapper = this.controlWrapper;
      var firstOption = sourceSelect.find("option:first");
      var selectOptions = sourceSelect.find("option");
      if (self.dropWrapper.isOpen) {
        var text = "[Close Window]";
      } else {
        var text = self._formatText(
          selectOptions,
          options.firstItemChecksAll,
          firstOption
        );
      }
      var controlLabel = controlWrapper.find(".ui-dropdownchecklist-text");
      controlLabel.html(text);
      controlLabel.attr("title", controlLabel.text());
    },
    _formatText: function (selectOptions, firstItemChecksAll, firstOption) {
      var text;
      if ($.isFunction(this.options.textFormatFunction)) {
        try {
          text = this.options.textFormatFunction(selectOptions);
        } catch (ex) {
          alert("textFormatFunction failed: " + ex);
        }
      } else if (
        firstItemChecksAll &&
        firstOption != null &&
        firstOption.prop("selected")
      ) {
        text = firstOption.html();
      } else {
        text = "";
        selectOptions.each(function () {
          if ($(this).prop("selected")) {
            if (text != "") {
              text += ", ";
            }
            var optCss = $(this).attr("style");
            var tempspan = $("<span/>");
            tempspan.html($(this).html());
            if (optCss == null) {
              text += tempspan.html();
            } else {
              tempspan.attr("style", optCss);
              text += $("<span/>").append(tempspan).html();
            }
          }
        });
        if (text == "") {
          text =
            this.options.emptyText != null ? this.options.emptyText : "&nbsp;";
        }
      }
      return text;
    },
    _toggleDropContainer: function (makeOpen) {
      var self = this;
      var hide = function (instance) {
        if (instance != null && instance.dropWrapper.isOpen) {
          instance.dropWrapper.isOpen = false;
          $.ui.dropdownchecklist.gLastOpened = null;
          var config = instance.options;
          instance.dropWrapper.css({ top: "-33000px", left: "-33000px" });
          var aControl = instance.controlSelector;
          aControl.removeClass("ui-state-active");
          aControl.removeClass("ui-state-hover");
          var anIcon = instance.controlWrapper.find(".ui-icon");
          if (anIcon.length > 0) {
            anIcon.removeClass(
              config.icon.toClose != null
                ? config.icon.toClose
                : "ui-icon-triangle-1-s"
            );
            anIcon.addClass(
              config.icon.toOpen != null
                ? config.icon.toOpen
                : "ui-icon-triangle-1-e"
            );
          }
          $(document).unbind("click", hide);
          instance.dropWrapper
            .find("input.active")
            .attr("disabled", "disabled");
          if ($.isFunction(config.onComplete)) {
            try {
              config.onComplete.call(instance, instance.sourceSelect.get(0));
            } catch (ex) {
              alert("callback failed: " + ex);
            }
          }
          var self = instance;
          sourceSelect = instance.sourceSelect;
          options = instance.options;
          controlWrapper = instance.controlWrapper;
          var firstOption = sourceSelect.find("option:first");
          var selectOptions = sourceSelect.find("option");
          var text = self._formatText(
            selectOptions,
            options.firstItemChecksAll,
            firstOption
          );
          var controlLabel = instance.controlWrapper.find(
            ".ui-dropdownchecklist-text"
          );
          controlLabel.html(text);
          controlLabel.attr("title", text);
        }
      };
      var show = function (instance) {
        if (!instance.dropWrapper.isOpen) {
          instance.dropWrapper.isOpen = true;
          $.ui.dropdownchecklist.gLastOpened = instance;
          var config = instance.options;
          if (config.positionHow == null || config.positionHow == "absolute") {
            instance.dropWrapper.css({
              position: "absolute",
              top:
                instance.controlWrapper.position().top +
                instance.controlWrapper.outerHeight() +
                "px",
              left: instance.controlWrapper.position().left + "px",
            });
          } else if (config.positionHow == "relative") {
            instance.dropWrapper.css({
              position: "relative",
              top: "0px",
              left: "0px",
            });
          }
          var zIndex = 0;
          if (config.zIndex == null) {
            var ancestorsZIndexes = instance.controlWrapper
              .parents()
              .map(function () {
                var zIndex = $(this).css("z-index");
                return isNaN(zIndex) ? 0 : zIndex;
              })
              .get();
            var parentZIndex = Math.max.apply(Math, ancestorsZIndexes);
            if (parentZIndex >= 0) {
              zIndex = parentZIndex + 1;
            }
          } else {
            zIndex = parseInt(config.zIndex);
          }
          if (zIndex > 0) {
            instance.dropWrapper.css({ "z-index": zIndex });
          }
          var aControl = instance.controlSelector;
          aControl.addClass("ui-state-active");
          aControl.removeClass("ui-state-hover");
          var anIcon = instance.controlWrapper.find(".ui-icon");
          if (anIcon.length > 0) {
            anIcon.removeClass(
              config.icon.toOpen != null
                ? config.icon.toOpen
                : "ui-icon-triangle-1-e"
            );
            anIcon.addClass(
              config.icon.toClose != null
                ? config.icon.toClose
                : "ui-icon-triangle-1-s"
            );
          }
          $(document).bind("click", function (e) {
            hide(instance);
          });
          var activeItems = instance.dropWrapper.find("input.active");
          activeItems.removeAttr("disabled");
          var firstActiveItem = activeItems.get(0);
          if (firstActiveItem != null) {
            firstActiveItem.focus();
          }
          var controlLabel = instance.controlWrapper.find(
            ".ui-dropdownchecklist-text"
          );
          controlLabel.html("[Close Window]");
          controlLabel.attr("title", "[Close Window]");
        }
      };
      if (makeOpen) {
        hide($.ui.dropdownchecklist.gLastOpened);
        show(self);
      } else {
        hide(self);
      }
    },
    _setSize: function (dropCalculatedSize) {
      var options = this.options,
        dropWrapper = this.dropWrapper,
        controlWrapper = this.controlWrapper;
      var controlWidth = dropCalculatedSize.width;
      if (options.width != null) {
        controlWidth = parseInt(options.width);
      } else if (options.minWidth != null) {
        var minWidth = parseInt(options.minWidth);
        if (controlWidth < minWidth) {
          controlWidth = minWidth;
        }
      }
      var control = this.controlSelector;
      control.css({ width: controlWidth + "px" });
      var controlText = control.find(".ui-dropdownchecklist-text");
      var controlIcon = control.find(".ui-icon");
      if (controlIcon != null) {
        controlWidth -= controlIcon.outerWidth() + 4;
        controlText.css({ width: controlWidth + "px" });
      }
      controlWidth = controlWrapper.outerWidth();
      var maxDropHeight =
        options.maxDropHeight != null ? parseInt(options.maxDropHeight) : -1;
      var dropHeight =
        maxDropHeight > 0 && dropCalculatedSize.height > maxDropHeight
          ? maxDropHeight
          : dropCalculatedSize.height;
      var dropWidth =
        dropCalculatedSize.width < controlWidth
          ? controlWidth
          : dropCalculatedSize.width;
      $(dropWrapper).css({
        height: dropHeight + "px",
        width: dropWidth + "px",
      });
      dropWrapper
        .find(".ui-dropdownchecklist-dropcontainer")
        .css({ height: dropHeight + "px" });
    },
    _init: function () {
      var self = this,
        options = this.options;
      if ($.ui.dropdownchecklist.gIDCounter == null) {
        $.ui.dropdownchecklist.gIDCounter = 1;
      }
      self.blurringItem = null;
      var sourceSelect = self.element;
      self.initialDisplay = sourceSelect.css("display");
      sourceSelect.css("display", "none");
      self.initialMultiple = sourceSelect.prop("multiple");
      self.isMultiple = self.initialMultiple;
      if (options.forceMultiple != null) {
        self.isMultiple = options.forceMultiple;
      }
      sourceSelect.prop("multiple", true);
      self.sourceSelect = sourceSelect;
      var controlWrapper = self._appendControl();
      self.controlWrapper = controlWrapper;
      self.controlSelector = controlWrapper.find(
        ".ui-dropdownchecklist-selector"
      );
      var dropWrapper = self._appendDropContainer(controlWrapper);
      self.dropWrapper = dropWrapper;
      var dropCalculatedSize = self._appendItems();
      self._updateControlText(controlWrapper, dropWrapper, sourceSelect);
      self._setSize(dropCalculatedSize);
      if (options.firstItemChecksAll) {
        self._syncSelected(null);
      }
      if (options.bgiframe && typeof self.dropWrapper.bgiframe == "function") {
        self.dropWrapper.bgiframe();
      }
      self.sourceSelect.change(function (event, eventName) {
        if (eventName != "ddcl_internal") {
          self._sourceSelectChangeHandler(event);
        }
      });
    },
    _refreshOption: function (item, disabled, selected) {
      var aParent = item.parent();
      if (disabled) {
        item.attr("disabled", "disabled");
        item.removeClass("active");
        item.addClass("inactive");
        aParent.addClass("ui-state-disabled");
      } else {
        item.removeAttr("disabled");
        item.removeClass("inactive");
        item.addClass("active");
        aParent.removeClass("ui-state-disabled");
      }
      item.prop("checked", selected);
    },
    _refreshGroup: function (group, disabled) {
      if (disabled) {
        group.addClass("ui-state-disabled");
      } else {
        group.removeClass("ui-state-disabled");
      }
    },
    close: function () {
      this._toggleDropContainer(false);
    },
    refresh: function () {
      var self = this,
        sourceSelect = this.sourceSelect,
        dropWrapper = this.dropWrapper;
      var allCheckBoxes = dropWrapper.find("input");
      var allGroups = dropWrapper.find(".ui-dropdownchecklist-group");
      var groupCount = 0;
      var optionCount = 0;
      sourceSelect.children().each(function (index) {
        var opt = $(this);
        var disabled = opt.attr("disabled");
        if ($.browser.msie && parseInt($.browser.version) == 8) {
          disabled = false;
        }
        if (opt.is("option")) {
          var selected = opt.prop("selected");
          var anItem = $(allCheckBoxes[optionCount]);
          self._refreshOption(anItem, disabled, selected);
          optionCount += 1;
        } else if (opt.is("optgroup")) {
          var text = opt.attr("label");
          if (text != "") {
            var aGroup = $(allGroups[groupCount]);
            self._refreshGroup(aGroup, disabled);
            groupCount += 1;
          }
          opt.children("option").each(function () {
            var subopt = $(this);
            var subdisabled = disabled || subopt.attr("disabled");
            var selected = subopt.prop("selected");
            var subItem = $(allCheckBoxes[optionCount]);
            self._refreshOption(subItem, subdisabled, selected);
            optionCount += 1;
          });
        }
      });
      self._syncSelected(null);
    },
    enable: function () {
      this.controlSelector.removeClass("ui-state-disabled");
      this.disabled = false;
    },
    disable: function () {
      this.controlSelector.addClass("ui-state-disabled");
      this.disabled = true;
    },
    destroy: function () {
      $.Widget.prototype.destroy.apply(this, arguments);
      this.sourceSelect.css("display", this.initialDisplay);
      this.sourceSelect.prop("multiple", this.initialMultiple);
      this.controlWrapper.unbind().remove();
      this.dropWrapper.remove();
    },
  });
  $.extend($.ui.dropdownchecklist, {
    defaults: {
      width: null,
      maxDropHeight: null,
      firstItemChecksAll: false,
      closeRadioOnClick: false,
      minWidth: 50,
      positionHow: "absolute",
      bgiframe: false,
      explicitClose: null,
    },
  });
})(jQuery);

window.calculatorLoaded = true;
var basketCounter = 1;
var globalCalculatorItemsArray = new Array();
var globalCalculatorItemsAddedModifierArray = new Array();
var globalCalculatorItemsAddedModifierQtyArray = new Array();
var basketItemCounter = 0;
var currentItem = 0;
var deletedModifiers = new Array();
var deletedModifierCount = 0;
var globalDividedEvenlyFeatureArray = new Object();
var globalDividedEvenlyFeatureCounterArray = new Object();
var globalDividedEvenlyFeatureZeroArray = new Object();
var globalPizzaFeatureCounterArray = new Object();
var dropDownID = 1;
var loadMealCount = 0;
var quantityIsForPortion = false;
var undoJSData = "";
var runToolTip = false;
var runToolTipv2 = false;
var globalTimeOutID = 0;
var globalTimeOutIDv2 = 0;
var globalUserID = null;
var undoHash = null;
var autoAddAnItem = true;
var locationPreferencesData = null;
var itemsData = null;
var modifiersData = null;
var groupsData = null;
var templatesData = null;
var categoriesData = null;
var categoryItemsData = null;
var itemModifiersData = null;
var templateGroupsData = null;
var templateGroupsDivideEvenlyFeatureIndexData = null;
var templateGroupsDivideEvenlyFeatureIndexCount = 0;
var templateGroupsDivideEvenlyFeatureData = new Object();
var templateGroupsPizzaFeatureIndexData = null;
var templateGroupsPizzaFeatureIndexCount = 0;
var templateGroupsPizzaFeatureData = new Object();
var templateGroupMultipliersData = null;
var itemDefaultModifiersData = null;
var groupModifiersData = null;
var groupModifiersMaxValueData = null;
var groupModifiersMultiplierValueData = null;
var groupModifierDividedEvenlyFeatureIndexData = null;
var groupModifierDividedEvenlyFeatureIndexCount = 0;
var groupModifierDividedEvenlyFeatureData = new Object();
var groupModifierPizzaFeatureIndexData = null;
var groupModifierPizzaFeatureIndexCount = 0;
var groupModifierPizzaFeatureData = new Object();
var menuItemAutoComplete = new Array();
var autoCompleteItemID = null;
var templateItemsData = null;
var animateBG = "FFF";
var forCalculator = true;
var continueOnCalorieIntakeChange = true;
var ie9enterbug = false;
var doNotBlur = false;
var initialLoadForFocus = true;
var qrcode = "";
const nutrientsMap = {
  nf_protein: { attr_id: 203, name: "Protein", unit: "g", usda_tag: "PROCNT" },
  nf_total_fat: {
    attr_id: 204,
    name: "Total lipid (fat)",
    unit: "g",
    usda_tag: "FAT",
  },
  nf_total_carbohydrate: {
    attr_id: 205,
    name: "Carbohydrate, by difference",
    unit: "g",
    usda_tag: "CHOCDF",
  },
  nf_ash: { attr_id: 207, name: "Ash", unit: "g", usda_tag: "ASH" },
  nf_calories: {
    attr_id: 208,
    name: "Energy",
    unit: "kcal",
    usda_tag: "ENERC_KCAL",
  },
  nf_starch: { attr_id: 209, name: "Starch", unit: "g", usda_tag: "STARCH" },
  nf_sucs: { attr_id: 210, name: "Sucrose", unit: "g", usda_tag: "SUCS" },
  nf_glus: {
    attr_id: 211,
    name: "Glucose (dextrose)",
    unit: "g",
    usda_tag: "GLUS",
  },
  nf_frus: { attr_id: 212, name: "Fructose", unit: "g", usda_tag: "FRUS" },
  nf_lacs: { attr_id: 213, name: "Lactose", unit: "g", usda_tag: "LACS" },
  nf_mals: { attr_id: 214, name: "Maltose", unit: "g", usda_tag: "MALS" },
  nf_alc: { attr_id: 221, name: "Alcohol, ethyl", unit: "g", usda_tag: "ALC" },
  nf_water: { attr_id: 255, name: "Water", unit: "g", usda_tag: "WATER" },
  NULL: {
    attr_id: 859,
    name: "18:1-11t (18:1t n-7)",
    unit: "g",
    usda_tag: "F18D1TN7",
  },
  nf_caffn: { attr_id: 262, name: "Caffeine", unit: "mg", usda_tag: "CAFFN" },
  nf_thebrn: {
    attr_id: 263,
    name: "Theobromine",
    unit: "mg",
    usda_tag: "THEBRN",
  },
  nf_enerc_kj: {
    attr_id: 268,
    name: "Energy",
    unit: "kJ",
    usda_tag: "ENERC_KJ",
  },
  nf_sugars: {
    attr_id: 269,
    name: "Sugars, total",
    unit: "g",
    usda_tag: "SUGAR",
  },
  nf_gals: { attr_id: 287, name: "Galactose", unit: "g", usda_tag: "GALS" },
  nf_dietary_fiber: {
    attr_id: 291,
    name: "Fiber, total dietary",
    unit: "g",
    usda_tag: "FIBTG",
  },
  nf_calcium_dv: {
    attr_id: 301,
    name: "Calcium, Ca",
    unit: "mg",
    usda_tag: "CA",
  },
  nf_iron_dv: { attr_id: 303, name: "Iron, Fe", unit: "mg", usda_tag: "FE" },
  nf_mg: { attr_id: 304, name: "Magnesium, Mg", unit: "mg", usda_tag: "MG" },
  nf_p: { attr_id: 305, name: "Phosphorus, P", unit: "mg", usda_tag: "P" },
  nf_potassium: {
    attr_id: 306,
    name: "Potassium, K",
    unit: "mg",
    usda_tag: "K",
  },
  nf_sodium: { attr_id: 307, name: "Sodium, Na", unit: "mg", usda_tag: "NA" },
  nf_zn: { attr_id: 309, name: "Zinc, Zn", unit: "mg", usda_tag: "ZN" },
  nf_cu: { attr_id: 312, name: "Copper, Cu", unit: "mg", usda_tag: "CU" },
  nf_fld: {
    attr_id: 313,
    name: "Fluoride, F",
    unit: "\u00b5g",
    usda_tag: "FLD",
  },
  nf_mn: { attr_id: 315, name: "Manganese, Mn", unit: "mg", usda_tag: "MN" },
  nf_se: {
    attr_id: 317,
    name: "Selenium, Se",
    unit: "\u00b5g",
    usda_tag: "SE",
  },
  nf_vitamin_a_dv: {
    attr_id: 318,
    name: "Vitamin A, IU",
    unit: "IU",
    usda_tag: "VITA_IU",
  },
  nf_retol: {
    attr_id: 319,
    name: "Retinol",
    unit: "\u00b5g",
    usda_tag: "RETOL",
  },
  nf_vitamin_c_dv: {
    attr_id: 401,
    name: "Vitamin C, total ascorbic acid",
    unit: "mg",
    usda_tag: "VITC",
  },
  nf_cholesterol: {
    attr_id: 601,
    name: "Cholesterol",
    unit: "mg",
    usda_tag: "CHOLE",
  },
  nf_trans_fatty_acid: {
    attr_id: 605,
    name: "Fatty acids, total trans",
    unit: "g",
    usda_tag: "FATRN",
  },
  nf_saturated_fat: {
    attr_id: 606,
    name: "Fatty acids, total saturated",
    unit: "g",
    usda_tag: "FASAT",
  },
  nf_monounsaturated_fat: {
    attr_id: 645,
    name: "Fatty acids, total monounsaturated",
    unit: "g",
    usda_tag: "FAMS",
  },
  nf_polyunsaturated_fat: {
    attr_id: 646,
    name: "Fatty acids, total polyunsaturated",
    unit: "g",
    usda_tag: "FAPU",
  },
};
const allergenMap = [
  "allergen_contains_Gluten",
  "allergen_contains_Milk",
  "allergen_contains_Eggs",
  "allergen_contains_Fish",
  "allergen_contains_Shellfish",
  "allergen_contains_Tree_Nuts",
  "allergen_contains_Peanuts",
  "allergen_contains_Wheat",
  "allergen_contains_Soy",
  "allergen_contains_Meat",
  "allergen_contains_Animal_Products",
  "allergen_contains_Corn",
  "allergen_contains_Seeds",
  "allergen_contains_Sulfites",
  "allergen_contains_Nitrates",
  "allergen_contains_Yeast",
  "allergen_contains_Alcohol",
  "allergen_contains_Artificial_Coloring",
  "allergen_contains_Onion",
  "allergen_contains_Garlic",
  "allergen_contains_MSG",
  "allergen_contains_Crustacean_Shellfish",
  "allergen_contains_Molluscan_Shellfish",
  "allergen_contains_Sesame",
  "allergen_contains_Celery",
  "allergen_contains_Mustard",
  "allergen_contains_Lupin",
  "allergen_contains_Cross_Contact",
];
var $msgDiv;
var $modifier_category_div;
var $basketValues;
var $item_category_id;
var $item_div;
var $calorieIntake;
var $calorieIntakeText;
var $itemModifiers;
var $nutritionfacts;
var $calorieDiet;
var $form_calorieDiet;
var $loadMeal;
var $col2ID;
var $calContent;
var $modifierList;
var $loadCalorieIntake;
var $shareURL;
var $copyURLButton;
var $myHash;
var $printForm;
var $copyMe;
var $modifierListHidden;
var $modifierModelValue;
var $modifierModelTitle;
var $calculatorItemDivSub2ID;
var $colsWrap;
var $buildNewItem;
var $btnStartOver;
var $btnStartOver2;
var $startHere;
var $col2;
var $printMe;
var $saveCalorie;
var $labelTipDiv;
var $calculatorDebugCode;
var $colorToRGB;
var $qrcode;
var $qrcodeText;
var $connectButton;
var $mealAllergenOnLabel;
var $totalCal;
var $calFromFat;
var $totalFat;
var $totalSatFat;
var $totalTransFat;
var $totalPolyFat;
var $totalMonoFat;
var $totalChol;
var $totalSod;
var $totalCarb;
var $totalFiber;
var $totalSugar;
var $totalSugarAlcohol;
var $totalProt;
var $totalVitA;
var $totalVitC;
var $totalCalc;
var $totalIron;
var $totalFatP;
var $totalSatFatP;
var $totalCholP;
var $totalSodP;
var $totalCarbP;
var $totalFiberP;
var $totalSugarP;
var $totalServing;
var $pointsPlus;
var $form_totalCal;
var $form_calFromFat;
var $form_totalFat;
var $form_totalSatFat;
var $form_totalTransFat;
var $form_totalPolyFat;
var $form_totalMonoFat;
var $form_totalChol;
var $form_totalSod;
var $form_totalCarb;
var $form_totalFiber;
var $form_totalSugar;
var $form_totalSugarAlcohol;
var $form_totalProt;
var $form_totalVitA;
var $form_totalVitC;
var $form_totalCalc;
var $form_totalIron;
var $form_totalFatP;
var $form_totalSatFatP;
var $form_totalCholP;
var $form_totalSodP;
var $form_totalCarbP;
var $form_totalFiberP;
var $form_totalSugarP;
var $form_calContent;
var $form_modifierList;
var $form_totalServing;
var $form_pointsPlus;
var $form_itemName;
var $form_itemCounter;
var $form_allergenValue;
var $form_textServingSize;
var $form_totalAddedSugars;
var $form_totalPotassium;
var $form_totalCaffeine;
var $form_totalVitD;
var $form_customFooter;
var $form_totalServingWeightGrams;
var $calcTip1;
var $calcTip2;
var $calcTip3;
var $calcTip4;
var $calcTip5;
var $calcTip6;
$(document).ready(function () {
  $msgDiv = $("#showMessage");
  $modifier_category_div = $("#ingredient_category_div");
  $basketValues = $("#basketValues");
  $item_category_id = $("#item_category_id");
  $item_div = $("#item_div");
  $calorieIntake = $("#calorieIntake");
  $calorieIntakeText = $("#calorieIntakeText");
  $itemModifiers = $("#itemIngredients");
  $nutritionfacts = $("#nutritionLabel");
  $calorieDiet = $("#calorieDiet");
  $form_calorieDiet = $("#form_calorieDiet");
  $loadMeal = $("#loadMeal");
  $col2ID = $("#col2ID");
  $calContent = $("#calContent");
  $modifierList = $("#ingredientList");
  $loadCalorieIntake = $("#loadCalorieIntake");
  $shareURL = $("#shareURL");
  $copyURLButton = $("#copyURLButton");
  $myHash = $("#myHash");
  $printForm = $("#printForm");
  $copyMe = $("#copyMe");
  $modifierListHidden = $("#ingredientListHidden");
  $modifierModelValue = $("#ingredientModelValue");
  $modifierModelTitle = $("#ingredientModelTitle");
  $calculatorItemDivSub2ID = $("#calculatorItemDivSub2ID");
  $colsWrap = $("#colsWrap");
  $buildNewItem = $("#buildNewItem");
  $btnStartOver = $("#btnStartOver");
  $btnStartOver2 = $("#btnStartOver2");
  $startHere = $("#startHere");
  $col2 = $("#col2");
  $printMe = $("#printMe");
  $saveCalorie = $("#saveCalorie");
  $labelTipDiv = $("#labelTipDiv");
  $calculatorDebugCode = $("#calculatorDebugCode");
  $colorToRGB = $("#colorToRGB");
  $qrcode = $("#qrcode");
  $qrcodeText = $("#qrcodeText");
  $connectButton = $("#connect-button");
  $mealAllergenOnLabel = $("#mealAllergenOnLabel");
  $totalCal = $("#totalCal");
  $calFromFat = $("#calFromFat");
  $totalFat = $("#totalFat");
  $totalSatFat = $("#totalSatFat");
  $totalTransFat = $("#totalTransFat");
  $totalPolyFat = $("#totalPolyFat");
  $totalMonoFat = $("#totalMonoFat");
  $totalChol = $("#totalChol");
  $totalSod = $("#totalSod");
  $totalCarb = $("#totalCarb");
  $totalFiber = $("#totalFiber");
  $totalSugar = $("#totalSugar");
  $totalSugarAlcohol = $("#totalSugarAlcohol");
  $totalProt = $("#totalProt");
  $totalVitA = $("#totalVitA");
  $totalVitC = $("#totalVitC");
  $totalCalc = $("#totalCalc");
  $totalIron = $("#totalIron");
  $totalFatP = $("#totalFatP");
  $totalSatFatP = $("#totalSatFatP");
  $totalCholP = $("#totalCholP");
  $totalSodP = $("#totalSodP");
  $totalCarbP = $("#totalCarbP");
  $totalFiberP = $("#totalFiberP");
  $totalSugarP = $("#totalSugarP");
  $totalServing = $("#totalServing");
  $pointsPlus = $("#pointsPlus");
  $form_totalCal = $("#form_totalCal");
  $form_calFromFat = $("#form_calFromFat");
  $form_totalFat = $("#form_totalFat");
  $form_totalSatFat = $("#form_totalSatFat");
  $form_totalTransFat = $("#form_totalTransFat");
  $form_totalPolyFat = $("#form_totalPolyFat");
  $form_totalMonoFat = $("#form_totalMonoFat");
  $form_totalChol = $("#form_totalChol");
  $form_totalSod = $("#form_totalSod");
  $form_totalCarb = $("#form_totalCarb");
  $form_totalFiber = $("#form_totalFiber");
  $form_totalSugar = $("#form_totalSugar");
  $form_totalSugarAlcohol = $("#form_totalSugarAlcohol");
  $form_totalProt = $("#form_totalProt");
  $form_totalVitA = $("#form_totalVitA");
  $form_totalVitC = $("#form_totalVitC");
  $form_totalCalc = $("#form_totalCalc");
  $form_totalIron = $("#form_totalIron");
  $form_totalFatP = $("#form_totalFatP");
  $form_totalSatFatP = $("#form_totalSatFatP");
  $form_totalCholP = $("#form_totalCholP");
  $form_totalSodP = $("#form_totalSodP");
  $form_totalCarbP = $("#form_totalCarbP");
  $form_totalFiberP = $("#form_totalFiberP");
  $form_totalSugarP = $("#form_totalSugarP");
  $form_calContent = $("#form_calContent");
  $form_modifierList = $("#form_ingredientList");
  $form_totalServing = $("#form_totalServing");
  $form_pointsPlus = $("#form_pointsPlus");
  $form_itemName = $("#form_itemName");
  $form_itemCounter = $("#form_itemCounter");
  $form_allergenValue = $("#form_allergenValue");
  $form_textServingSize = $("#form_textServingSize");
  $form_totalAddedSugars = $("#form_totalAddedSugars");
  $form_totalPotassium = $("#form_totalPotassium");
  $form_totalCaffeine = $("#form_totalCaffeine");
  $form_totalVitD = $("#form_totalVitD");
  $form_customFooter = $("#form_customFooter");
  $form_totalServingWeightGrams = $("#form_totalServingWeightGrams");
  $calcTip1 = $("#calcTip1");
  $calcTip2 = $("#calcTip2");
  $calcTip3 = $("#calcTip3");
  $calcTip4 = $("#calcTip4");
  $calcTip5 = $("#calcTip5");
  $calcTip6 = $("#calcTip6");
  globalUserID = userId;
  $("#standalone-loader").show();
  if (calculatorInitUrl === "") {
    $item_category_id.attr("disabled", true);
    $btnStartOver.hide();
    showMessage.warning({
      text: [
        desktopCalculatorJsRefreshPage.replace(
          "SYSTEM_CLICK_HERE",
          '<a href="">' + desktopCalculatorJsRefreshPageClickHere + "</a>"
        ),
      ],
      autoClose: false,
    });
    $("#standalone-loader").hide();
  } else {
    $.when(API.init(calculatorInitUrl))
      .then(function () {
        locationPreferencesData = API.getData("preferences");
        if (locationPreferencesData === null) {
          failedLoading(
            desktopCalculatorJsRefreshPage.replace(
              "SYSTEM_CLICK_HERE",
              '<a href="">' + desktopCalculatorJsRefreshPageClickHere + "</a>"
            )
          );
        } else {
          $(".loadingCalculatoData").hide();
          loadTheApiData();
          if (
            parseInt($loadMeal.val()) !== 1 &&
            !(parseInt($("#savedValue").val()) > 0)
          ) {
            initializeTheLabelUsingThePlugin();
          }
        }
      })
      .fail(function (jqXHR) {
        if (parseInt(isThisPreview) === 1) {
          showMessage.warning({
            text: [
              "Please fix the following errors in order to have a functional calculator:" +
              jqXHR.responseText,
            ],
            autoClose: false,
          });
        } else {
          $.when(
            API.init(
              baseUrl +
              "corsFailover?url=" +
              encodeURIComponent(calculatorInitUrl)
            )
          )
            .then(function () {
              locationPreferencesData = API.getData("preferences");
              if (locationPreferencesData === null) {
                failedLoading(desktopCalculatorJsSystemError);
              } else {
                $(".loadingCalculatoData").hide();
                loadTheApiData();
                if (
                  parseInt($loadMeal.val()) !== 1 &&
                  !(parseInt($("#savedValue").val()) > 0)
                ) {
                  initializeTheLabelUsingThePlugin();
                }
              }
            })
            .fail(function (jqXHR) {
              failedLoading(desktopCalculatorJsSystemError);
            });
        }
      });
    $("#standalone-loader").hide();
  }
  $("body").delegate("#item_category_id", "change", function () {
    if ($copyURLButton.val() !== desktopCalculatorShareButton) {
      resetSaveMealButton();
    }
    $startHere.hide();
    tryToShowTip2();
    $modifier_category_div.html("");
    $item_div.html("");
    const categoryID = parseInt($(this).val());
    if (
      isNaN(categoryID) &&
      globalCalculatorItemsArray[currentItem] !== undefined &&
      globalCalculatorItemsArray[currentItem].addedToBasketManually === 0
    ) {
      removeAnItem(currentItem, false, "");
    } else {
      if (
        globalCalculatorItemsArray[currentItem] !== undefined &&
        !autoAddAnItem &&
        parseInt(autoCompleteItemID) < 1
      ) {
        if (globalCalculatorItemsArray[currentItem]["itemID"] > 0) {
          $("#b-" + currentItem).hide("fast", function () {
            $("#b-" + currentItem).remove();
            globalCalculatorItemsArray[currentItem].itemID = 0;
            $itemModifiers.html("");
            $buildNewItem.hide();
            $btnStartOver2.hide();
            updateCalculator(1);
            if (!isNaN(categoryID) && categoryID > 0) {
              showItems(categoryID, 1);
            }
          });
        } else if (!isNaN(categoryID) && categoryID > 0) {
          showItems(categoryID, 1);
        }
      } else if (!isNaN(categoryID) && categoryID > 0) {
        if (
          globalCalculatorItemsArray[currentItem] !== undefined &&
          globalCalculatorItemsArray[currentItem].addedToBasketManually === 0 &&
          !autoCompleteItemID
        ) {
          removeAnItem(currentItem, false, categoryID);
        }
        showItems(categoryID, 1);
      }
      if (isThisNotLocal === 1) {
        window.ga &&
          ga(
            "send",
            "event",
            "Calculator",
            "Used calculator",
            locationPreferencesData.name
          );
        if ($("#locationWebname").val() === "wawa") {
          window.ga &&
            ga(
              "w2.send",
              "event",
              "Calculator",
              "Used calculator",
              locationPreferencesData.name
            );
        }
      }
      blurTheLabel();
      if (parseInt(autoCompleteItemID) > 0) {
        $("#item_id").val(autoCompleteItemID).trigger("change");
      }
    }
  });
  $item_div.delegate("#item_id", "change", function () {
    autoCompleteItemID = null;
    if ($copyURLButton.val() !== desktopCalculatorShareButton) {
      resetSaveMealButton();
    }
    const dropDownValues = parseInt($(this).val());
    if (dropDownValues === 0) {
      $modifier_category_div.html("");
      if (globalCalculatorItemsArray[currentItem]["itemID"] > 0) {
        $("#b-" + currentItem).hide("fast", function () {
          $("#b-" + currentItem).remove();
          globalCalculatorItemsArray[currentItem].itemID = 0;
          $itemModifiers.html("");
          $buildNewItem.hide();
          $btnStartOver2.hide();
          updateCalculator(1);
        });
      }
    } else {
      let doNothing = false;
      if (currentItem === 0 || autoAddAnItem) {
        autoAddAnItem = false;
        addItem(dropDownValues, true);
      } else if (
        parseInt(globalCalculatorItemsArray[currentItem]["itemID"]) ===
        dropDownValues
      ) {
        doNothing = true;
      } else {
        addItem(dropDownValues, false);
      }
      if (!doNothing) {
        showItemModifiers(dropDownValues, false, true);
        showModifiers(currentItem, true, 0);
        updateCalculator(1);
      }
    }
  });
  $buildNewItem.click(function () {
    if ($copyURLButton.val() !== desktopCalculatorShareButton) {
      resetSaveMealButton();
    }
    autoAddAnItem = true;
    globalCalculatorItemsArray[currentItem].addedToBasketManually = 1;
    buildNewItem();
  });
  $btnStartOver.click(function (e) {
    e.preventDefault();
    startOver();
  });
  $btnStartOver2.click(function (e) {
    e.preventDefault();
    startOver();
  });
  $("body").delegate("#undoReset", "click", function (e) {
    e.preventDefault();
    showMessage.close();
    $myHash.val(undoHash);
    $shareURL.val(baseUrl + "m/" + undoHash);
    undoHash = null;
    eval(undoJSData);
    finishLoadingAMeal();
    $item_category_id.focus();
  });
  $basketValues.delegate(".removeItem", "click", function (e) {
    e.preventDefault();
    if ($copyURLButton.val() !== desktopCalculatorShareButton) {
      resetSaveMealButton();
    }
    removeAnItem($(this).attr("id").split("-")[1], false, "");
  });
  $basketValues.delegate(".viewIngredient", "click", function (e) {
    e.preventDefault();
    $item_div.show();
    showModifiers($(this).attr("id").split("-")[1], false, 0);
    updateItemSelection(
      globalCalculatorItemsArray[parseInt($(this).attr("id").split("-")[1])]
        .itemID,
      $(this).attr("id").split("-")[1],
      globalCalculatorItemsArray[parseInt($(this).attr("id").split("-")[1])]
        .categoryID
    );
  });
  $itemModifiers.delegate(".delUserIngr", "click", function (e) {
    e.preventDefault();
    if ($copyURLButton.val() !== desktopCalculatorShareButton) {
      resetSaveMealButton();
    }
    deleteModifier($(this).attr("id"), 0);
    const thisLocalValue = $(this).attr("id").split("---");
    updateSingleSelect(
      globalCalculatorItemsArray[currentItem].itemID,
      thisLocalValue[4],
      thisLocalValue[5],
      thisLocalValue[6]
    );
    showModifiers(currentItem, false, 0);
    updateCalculator(1);
    clearTimeout(globalTimeOutID);
    $item_category_id.focus();
  });
  $itemModifiers.delegate(".addQuantity", "click", function (e) {
    e.preventDefault();
    if ($copyURLButton.val() !== desktopCalculatorShareButton) {
      resetSaveMealButton();
    }
    const holder = $(this).attr("id").split("-");
    holder[2] = parseInt(holder[2]);
    const localOldValue = parseFloat(
      $("#cq2-" + holder[1] + "-" + holder[2]).val()
    );
    let modifier = 1.0;
    let newValue =
      locationPreferencesData.calc_down_arrow_whole_num === 0 &&
        parseFloat(localOldValue) < 1
        ? "1.0"
        : roundLoDashMain(localOldValue + modifier, 1);
    newValue = parseFloat(newValue);
    if (
      locationPreferencesData.calc_down_arrow_whole_num === 1 &&
      newValue % 1 === 0
    ) {
      newValue = removeUnnecessaryDecimal(newValue);
    }
    $("#cq2-" + holder[1] + "-" + holder[2]).val(newValue);
    globalCalculatorItemsAddedModifierQtyArray[currentItem][holder[2]] =
      newValue;
    const maxLoop =
      globalCalculatorItemsArray[currentItem].addedModifierCounter;
    let localIndex = null;
    let oldQuantity = null;
    for (let x = 0; x < maxLoop; x++) {
      if (
        parseInt(
          globalCalculatorItemsAddedModifierArray[currentItem][x].modifierID
        ) === holder[2]
      ) {
        oldQuantity =
          globalCalculatorItemsAddedModifierArray[currentItem][x].userQuantity;
        globalCalculatorItemsAddedModifierArray[currentItem][x].userQuantity =
          newValue;
        localIndex = x;
        break;
      }
    }
    const tempGroupID =
      globalCalculatorItemsAddedModifierArray[currentItem][localIndex]
        .modifierGroupID;
    if (
      parseInt(
        groupModifiersMaxValueData[tempGroupID][holder[2]].max_amount
      ) !== 0 &&
      newValue >
      parseFloat(
        groupModifiersMaxValueData[tempGroupID][holder[2]].max_amount
      )
    ) {
      showMessage.warning({
        text: [
          "The quantity of this ingredient can't exceed " +
          parseInt(
            groupModifiersMaxValueData[tempGroupID][holder[2]].max_amount
          ),
        ],
        autoClose: true,
      });
      $("#cq2-" + holder[1] + "-" + holder[2]).val(
        locationPreferencesData.calc_down_arrow_whole_num === 1 &&
          parseFloat(localOldValue) % 1 === 0
          ? removeUnnecessaryDecimal(parseFloat(localOldValue))
          : roundLoDashMain(localOldValue, 1)
      );
      globalCalculatorItemsAddedModifierQtyArray[currentItem][holder[2]] =
        localOldValue;
      globalCalculatorItemsAddedModifierArray[currentItem][
        localIndex
      ].userQuantity = localOldValue;
    } else {
      if (oldQuantity === 0) {
        globalDividedEvenlyFeatureZeroArray[currentItem][tempGroupID]--;
      }
      if (globalDividedEvenlyFeatureArray[currentItem] !== undefined) {
        if (
          globalDividedEvenlyFeatureArray[currentItem][tempGroupID] !==
          undefined
        ) {
          globalDividedEvenlyFeatureArray[currentItem][tempGroupID] += modifier;
          if (
            globalDividedEvenlyFeatureCounterArray[currentItem][tempGroupID] > 1
          ) {
            showModifiers(currentItem, false, 0);
          } else {
            updateModifierInfo(currentItem, holder[2], newValue, localIndex);
          }
        } else {
          updateModifierInfo(currentItem, holder[2], newValue, localIndex);
        }
      } else {
        updateModifierInfo(currentItem, holder[2], newValue, localIndex);
      }
      updateCalculator(1);
    }
  });
  $itemModifiers.delegate(".minusQuantity", "click", function (e) {
    e.preventDefault();
    if ($copyURLButton.val() !== desktopCalculatorShareButton) {
      resetSaveMealButton();
    }
    const holder = $(this).attr("id").split("-");
    holder[2] = parseInt(holder[2]);
    const localOldValue = parseFloat(
      $("#cq2-" + holder[1] + "-" + holder[2]).val()
    );
    if (localOldValue === 0) {
      showMessage.warning({
        text: [desktopCalculatorJsCantDecreaseValue + "."],
        autoClose: true,
      });
    } else {
      let modifier = 1.0;
      if (
        locationPreferencesData.calc_down_arrow_whole_num === 0 &&
        localOldValue <= 1
      ) {
        modifier = 0.5;
      }
      let newValue = roundLoDashMain(localOldValue - modifier, 1);
      if (newValue <= 0) {
        showMessage.error({
          text: [desktopCalculatorJsEnterGreaterThanZero],
          autoClose: true,
        });
      } else {
        if (
          locationPreferencesData.calc_down_arrow_whole_num === 1 &&
          parseFloat(newValue) % 1 === 0
        ) {
          newValue = removeUnnecessaryDecimal(parseFloat(newValue));
        } else {
          newValue = roundLoDashMain(newValue, 1);
        }
        $("#cq2-" + holder[1] + "-" + holder[2]).val(newValue);
        globalCalculatorItemsAddedModifierQtyArray[currentItem][holder[2]] =
          newValue;
        const maxLoop =
          globalCalculatorItemsArray[currentItem].addedModifierCounter;
        let localIndex = null;
        for (let x = 0; x < maxLoop; x++) {
          if (
            parseInt(
              globalCalculatorItemsAddedModifierArray[currentItem][x].modifierID
            ) === holder[2]
          ) {
            globalCalculatorItemsAddedModifierArray[currentItem][
              x
            ].userQuantity = newValue;
            localIndex = x;
            break;
          }
        }
        const tempGroupID =
          globalCalculatorItemsAddedModifierArray[currentItem][localIndex]
            .modifierGroupID;
        if (newValue === 0) {
          globalDividedEvenlyFeatureZeroArray[currentItem][tempGroupID]++;
        }
        if (globalDividedEvenlyFeatureArray[currentItem] !== undefined) {
          if (
            globalDividedEvenlyFeatureArray[currentItem][tempGroupID] !==
            undefined
          ) {
            globalDividedEvenlyFeatureArray[currentItem][tempGroupID] -=
              modifier;
            if (
              globalDividedEvenlyFeatureCounterArray[currentItem][tempGroupID] >
              1
            ) {
              showModifiers(currentItem, false, 0);
            } else {
              updateModifierInfo(currentItem, holder[2], newValue, localIndex);
            }
          } else {
            updateModifierInfo(currentItem, holder[2], newValue, localIndex);
          }
        } else {
          updateModifierInfo(currentItem, holder[2], newValue, localIndex);
        }
        updateCalculator(1);
      }
    }
  });
  $itemModifiers.delegate(".calcQuantity", "change", function (e) {
    ie9enterbug = true;
    e.preventDefault();
    if ($copyURLButton.val() !== desktopCalculatorShareButton) {
      resetSaveMealButton();
    }
    const holder = $(this).attr("id").split("-");
    holder[2] = parseInt(holder[2]);
    let myLocalVar = $(this).val();
    let isTheValueaFloat = false;
    if (!regIsPosNumber(myLocalVar)) {
      myLocalVar = roundLoDashMain(parseFloat("0" + myLocalVar), 1);
    } else {
      isTheValueaFloat = true;
    }
    if (!isTheValueaFloat && myLocalVar > 0 && regIsPosNumber(myLocalVar)) {
      $(this).val(isTheValueaFloat);
      isTheValueaFloat = true;
    }
    let localOldValue = 0;
    let localModifierIndex = 0;
    const maxLoop = globalCalculatorItemsArray[holder[1]].addedModifierCounter;
    for (let x = 0; x < maxLoop; x++) {
      if (
        parseInt(
          globalCalculatorItemsAddedModifierArray[holder[1]][x].modifierID
        ) === holder[2]
      ) {
        localOldValue = roundLoDashMain(
          globalCalculatorItemsAddedModifierArray[currentItem][x].userQuantity,
          1
        );
        localModifierIndex = x;
        break;
      }
    }
    if (isTheValueaFloat) {
      let newValue = quantityIsForPortion
        ? roundLoDashMain(myLocalVar, 3)
        : roundLoDashMain(myLocalVar, 1);
      quantityIsForPortion = false;
      if (newValue <= 0) {
        showMessage.error({
          text: [desktopCalculatorJsEnterGreaterThanZero],
          autoClose: true,
        });
        $(this).val(localOldValue);
      } else {
        if (
          locationPreferencesData.calc_down_arrow_whole_num === 1 &&
          parseFloat(newValue) % 1 === 0
        ) {
          newValue = removeUnnecessaryDecimal(parseFloat(newValue));
        }
        if (newValue !== localOldValue) {
          const tempGroupID =
            globalCalculatorItemsAddedModifierArray[currentItem][
              localModifierIndex
            ].modifierGroupID;
          if (
            parseInt(
              groupModifiersMaxValueData[tempGroupID][holder[2]].max_amount
            ) !== 0 &&
            parseFloat(newValue) >
            parseFloat(
              groupModifiersMaxValueData[tempGroupID][holder[2]].max_amount
            )
          ) {
            showMessage.warning({
              text: [
                "The quantity of this ingredient can't exceed " +
                parseInt(
                  groupModifiersMaxValueData[tempGroupID][holder[2]]
                    .max_amount
                ),
              ],
              autoClose: true,
            });
            $(this).val(
              locationPreferencesData.calc_down_arrow_whole_num === 1 &&
                parseFloat(localOldValue) % 1 === 0
                ? removeUnnecessaryDecimal(parseFloat(localOldValue))
                : roundLoDashMain(localOldValue, 1)
            );
          } else {
            $(this).val(newValue);
            globalCalculatorItemsAddedModifierQtyArray[currentItem][holder[2]] =
              newValue;
            globalCalculatorItemsAddedModifierArray[currentItem][
              localModifierIndex
            ].userQuantity = newValue;
            if (newValue === 0) {
              globalDividedEvenlyFeatureZeroArray[currentItem][tempGroupID]++;
            } else if (localOldValue === 0) {
              globalDividedEvenlyFeatureZeroArray[currentItem][tempGroupID]--;
            }
            if (globalDividedEvenlyFeatureArray[currentItem] !== undefined) {
              if (
                globalDividedEvenlyFeatureArray[currentItem][tempGroupID] !==
                undefined
              ) {
                globalDividedEvenlyFeatureArray[currentItem][tempGroupID] +=
                  newValue - localOldValue;
                if (
                  globalDividedEvenlyFeatureCounterArray[currentItem][
                  tempGroupID
                  ] > 1
                ) {
                  showModifiers(currentItem, false, 0);
                } else {
                  updateModifierInfo(
                    currentItem,
                    holder[2],
                    newValue,
                    localModifierIndex
                  );
                }
              } else {
                updateModifierInfo(
                  currentItem,
                  holder[2],
                  newValue,
                  localModifierIndex
                );
              }
            } else {
              updateModifierInfo(
                currentItem,
                holder[2],
                newValue,
                localModifierIndex
              );
            }
            updateCalculator(1);
          }
        }
      }
    } else {
      showMessage.error({
        text: [desktopCalculatorJsEnterValidValue + "."],
        autoClose: true,
      });
      $(this).val(localOldValue);
    }
  });
  $col2.mouseenter(function (e) {
    if (forCalculator) {
      closeDropdown();
    }
  });
  $item_div.mouseenter(function (e) {
    if (forCalculator) {
      closeDropdown();
    }
  });
  $colsWrap
    .find(
      ".calculatorContainsDivSub, .calorieDietBlock, .select, .subHeader, .h5, .h10, .dd_bold"
    )
    .mouseenter(function (e) {
      if (forCalculator) {
        closeDropdown();
      }
    });
  $col2.mouseleave(function (e) {
    if (forCalculator) {
      closeDropdown();
    }
  });
  $modifier_category_div.mouseleave(function (e) {
    if (forCalculator) {
      closeDropdown();
    }
  });
  $item_div.mouseleave(function (e) {
    if (forCalculator) {
      closeDropdown();
    }
  });
  $colsWrap
    .find(
      ".column, .calculatorContainsDivSub, .calorieDietBlock, .select, .subHeader, .dd_bold"
    )
    .mouseleave(function (e) {
      if (forCalculator) {
        closeDropdown();
      }
    });
  $calculatorItemDivSub2ID.delegate(
    ".h5, .h10, .dd_bold",
    "mouseenter",
    function (e) {
      if (forCalculator) {
        closeDropdown();
      }
    }
  );
  $calorieIntakeText.change(function (e) {
    e.preventDefault();
    if ($copyURLButton.val() !== desktopCalculatorShareButton) {
      resetSaveMealButton();
    }
    if (!regIsPosWholeNumber($calorieIntakeText.val())) {
      $calorieIntakeText.val($calorieIntake.val().split("-")[1]);
      showMessage.error({
        text: [desktopCalculatorJsEnterValidValue + "."],
        autoClose: true,
      });
      continueOnCalorieIntakeChange = false;
    } else {
      continueOnCalorieIntakeChange = true;
      if (parseFloat($calorieIntakeText.val()) < 1000) {
        $calorieIntakeText.val($calorieIntake.val().split("-")[1]);
        showMessage.error({
          text: [desktopCalculatorJsEnterGreaterThan1k + "."],
          autoClose: true,
        });
        continueOnCalorieIntakeChange = false;
      } else {
        $calorieIntake.val(
          roundLoDashMain($calorieIntakeText.val() / 2000, 2) +
          "-" +
          $calorieIntakeText.val()
        );
        $calorieDiet.html($calorieIntakeText.val());
        $form_calorieDiet.val($calorieIntakeText.val());
        if (basketItemCounter > 0) {
          updateCalculator(1);
        } else {
          blinkCalculator();
        }
      }
    }
  });
  $calorieIntakeText.bind("keypress", function (e) {
    if (e.keyCode === 13) {
      return false;
    }
  });
  $("#calorieIntakeWrap").hover(
    function () {
      $calcTip6.stop(false, true).fadeIn("fast");
    },
    function () {
      $calcTip6.stop(false, true).fadeOut("fast");
    }
  );
  if (disableBeginnerTooltip === 0 && $.cookie("nix_first_load") === null) {
    runToolTip = true;
    runToolTipv2 = true;
    $.cookie("nix_first_load", "not anymore", { expires: 1825, path: "/" });
    $calcTip1.fadeIn("slow");
  }
  $("body").click(function () {
    if (runToolTip) {
      tryToShowTip2();
    }
  });
  var winXnew = null;
  $printMe.click(function (e) {
    e.preventDefault();
    if (winXnew !== null && !winXnew.closed) {
      winXnew.close();
    }
    let popUpHeight = 600;
    const popUpWidth = 465;
    if (locationPreferencesData.label_display_version === 3) {
      popUpHeight = 650;
    }
    window.open(
      "",
      "winXnew",
      String(
        "scrollbars=0, menubar=0, toolbar=0, location=0, status=0, height=" +
        popUpHeight +
        ", width=" +
        popUpWidth
      )
    );
    $printForm.attr("target", "winXnew").submit();
  });
  $basketValues.delegate(".addQuantity", "click", function (e) {
    e.preventDefault();
    increaseItemQuantity(parseInt($(this).attr("id").split("-")[1]), "iqc");
  });
  $itemModifiers.delegate(".addQuantityStatic", "click", function (e) {
    e.preventDefault();
    increaseItemQuantity(parseInt($(this).attr("id").split("-")[1]), "iqc2");
  });
  $basketValues.delegate(".minusQuantity", "click", function (e) {
    e.preventDefault();
    decreaseItemQuantity(parseInt($(this).attr("id").split("-")[1]), "iqc");
  });
  $itemModifiers.delegate(".minusQuantityStatic", "click", function (e) {
    e.preventDefault();
    decreaseItemQuantity(parseInt($(this).attr("id").split("-")[1]), "iqc2");
  });
  $basketValues.delegate(".itemQuantity", "change", function (e) {
    e.preventDefault();
    updateItemQuantity($(this));
  });
  $itemModifiers.delegate(".itemQuantityStatic", "change", function (e) {
    e.preventDefault();
    updateItemQuantity($(this));
  });
  $saveCalorie.click(function () {
    if (!ie9enterbug && continueOnCalorieIntakeChange) {
      const savedCalorieIntake = $calorieIntakeText.val();
      if (globalUserID > 0) {
        $.getJSON(
          updateCalorieDietUrl,
          { calorie_diet: savedCalorieIntake },

        );
      } else {
        $.cookie("nix_calorie_diet", null, { expires: -7, path: "/" });
        $.cookie("nix_calorie_diet", $calorieIntakeText.val(), {
          expires: 7,
          path: "/",
        });
      }
    }
    ie9enterbug = false;
  });
  $itemModifiers.delegate(".portionsDropdown", "change", function () {
    quantityIsForPortion = true;
    const $this = $(this);
    const portionNameParts = $this.attr("id").split("-");
    $("#cq2-" + portionNameParts[1] + "-" + portionNameParts[2])
      .val($this.val())
      .change();
    showMessage.close();
  });
  $copyURLButton.click(function (e) {
    e.preventDefault();
    triggerSave();
  });
  $shareURL.click(function (e) {
    e.preventDefault();
    triggerSave();
  });
  $("body").delegate("#btn-copy", "click", function (e) {
    e.preventDefault();
    $copyMe.focus().select();
  });
  if ($.fn.tipsy !== undefined) {
    $("span.icon.info").tipsy({
      title: "data-tooltip",
      html: true,
      gravity: "e",
      fallback: desktopCalculatorJsMissingModInfo,
      live: true,
      opacity: 1,
    });
    $("body").delegate(".icon.info", "click", function (e) {
      $(this).tipsy("show");
      $(this).unbind("mouseleave");
      e.stopPropagation();
    });
  }
  $("body").delegate(".calculator-tooltip", "click", function (e) {
    runToolTip = true;
    runToolTipv2 = true;
    $calcTip1.fadeIn("slow");
    $item_category_id.focus();
  });
  $("body").delegate(".ui-icon-closethick", "click", function (e) {
    $item_category_id.focus();
  });
  if (!(parseInt($("#savedValue").val()) > 0) && doNotBlur) {
    blurTheLabel();
  }
  if (isThisPremium !== 1) {
    qrcode = qrcodegen.QrCode;
  }
});
function blurTheLabel() {
  if (basketItemCounter === 0) {
    $nutritionfacts.css("opacity", 0.4);
    $labelTipDiv.show();
  }
}
function unBlurTheLabel() {
  if (basketItemCounter > 0) {
    $labelTipDiv.hide();
    $nutritionfacts.css("opacity", 1);
  }
}
function failedLoading(failedMessage) {
  $item_category_id.attr("disabled", true);
  $btnStartOver.hide();
  showMessage.warning({ text: [failedMessage], autoClose: false });
  $("#standalone-loader").hide();
}
function finishLoading() {
  buildNewItem();
  resetCalculator();
  $nutritionfacts.css("background-color", "#FFF");
}
function blinkCalculator() {
  if (isThisPremium === 1) {
    $nutritionfacts.effect("highlight", { color: highlightColor }, 800);
  } else {
    $nutritionfacts.effect("highlight", { color: "#7EDB89" }, 800);
  }
}
function regIsPosNumber(fData) {
  return new RegExp("(^[0-9]+[.]?[0-9]+$)|(^[0-9]+$)").test(fData);
}
function regIsPosWholeNumber(fData) {
  return new RegExp("^[0-9]+$").test(fData);
}
function closeDropdown() {
  $modifier_category_div.find(".ingrCatDropDown").dropdownchecklist("close");
}
function tryToShowTip2() {
  if ($calcTip1.css("display") === "block") {
    $calcTip1.fadeOut("slow", function () {
      $calcTip2.fadeIn("slow");
      runToolTip = false;
    });
  }
}
function resetSaveMealButton() {
  $copyURLButton.val(desktopCalculatorShareButton);
  $copyURLButton.attr("title", desktopCalculatorShareButton);
}
function roundToNearestNum(input, nearest) {
  input = roundToSpecificDecimalPlace(input, 4);
  if (nearest < 0) {
    return Math.round(input * nearest) / nearest;
  }
  return Math.round(input / nearest) * nearest;
}
function roundToSpecificDecimalPlace(input, decimals) {
  return Number(Math.round(input + "e" + decimals) + "e-" + decimals);
}
function stripTags(string, tag) {
  return string.replace(new RegExp("</?" + tag + ">", "g"), "");
}
function roundCalories(toRound) {
  if (locationPreferencesData.allow_rounding === 1) {
    toRound = roundCaloriesRule(toRound);
  }
  if (toRound > 0) {
    toRound = roundLoDashMain(toRound, 1);
  }
  return toRound;
}
function roundCaloriesRule(toRound) {
  if (toRound < 5) {
    return 0;
  } else if (toRound <= 50) {
    return roundToNearestNum(toRound, 5);
  }
  return roundToNearestNum(toRound, 10);
}
function roundFat(toRound) {
  if (locationPreferencesData.allow_rounding === 1) {
    toRound = roundFatRule(toRound);
  }
  if (toRound > 0) {
    toRound = roundLoDashMain(toRound, 1);
  }
  return toRound;
}
function roundFatRule(toRound) {
  if (toRound < 0.5) {
    return 0;
  } else if (toRound < 5) {
    return roundToNearestNum(toRound, 0.5);
  }
  return roundToNearestNum(toRound, 1);
}
function roundSodium(toRound) {
  if (locationPreferencesData.allow_rounding === 1) {
    toRound = roundSodiumRule(toRound);
  }
  if (toRound > 0) {
    toRound = roundLoDashMain(toRound, 1);
  }
  return toRound;
}
function roundSodiumRule(toRound) {
  if (toRound < 5) {
    return 0;
  } else if (toRound <= 140) {
    return roundToNearestNum(toRound, 5);
  }
  return roundToNearestNum(toRound, 10);
}
function roundCholesterol(toRound) {
  let normalVersion = true;
  if (locationPreferencesData.allow_rounding === 1) {
    const roundResult = roundCholesterolRule(toRound);
    if (roundResult === false) {
      normalVersion = false;
    } else {
      toRound = roundResult;
    }
  }
  if (normalVersion) {
    if (toRound > 0) {
      toRound = roundLoDashMain(toRound, 1);
    }
  } else {
    toRound = "< 5";
  }
  return toRound;
}
function roundCholesterolRule(toRound) {
  if (toRound < 2) {
    return 0;
  } else if (toRound <= 5) {
    return false;
  }
  return roundToNearestNum(toRound, 5);
}
function roundCarbFiberSugarProtein(toRound) {
  let normalVersion = true;
  if (locationPreferencesData.allow_rounding === 1) {
    const roundResult = roundCarbFiberSugarProteinRule(toRound);
    if (roundResult === false) {
      normalVersion = false;
    } else {
      toRound = roundResult;
    }
  }
  if (normalVersion) {
    if (toRound > 0) {
      toRound = roundLoDashMain(toRound, 1);
    }
  } else {
    toRound = "< 1";
  }
  return toRound;
}
function roundCarbFiberSugarProteinRule(toRound) {
  if (toRound < 0.5) {
    return 0;
  } else if (toRound < 1) {
    return false;
  }
  return roundToNearestNum(toRound, 1);
}
function roundVitaminsCalciumIron(toRound) {
  if (locationPreferencesData.allow_rounding === 1) {
    toRound = roundVitaminsCalciumIronRule(toRound);
  }
  if (toRound > 0) {
    toRound = roundLoDashMain(toRound, 1);
  }
  return toRound;
}
function roundVitaminsCalciumIronRule(toRound) {
  if (toRound > 0) {
    if (toRound < 10) {
      return roundToNearestNum(toRound, 2);
    } else if (toRound < 50) {
      return roundToNearestNum(toRound, 5);
    }
    return roundToNearestNum(toRound, 10);
  }
  return 0;
}
function roundForUKLabelTotalFatCarbsSugarFiberProtein(toRound) {
  let normalVersion = true;
  if (locationPreferencesData.allow_rounding === 1) {
    const roundResult =
      roundForUKLabelTotalFatCarbsSugarFiberProteinRule(toRound);
    if (roundResult === false) {
      normalVersion = false;
    } else {
      toRound = roundResult;
    }
  } else {
    return parseFloat(roundLoDashMain(roundToNearestNum(toRound, 0.1), 1));
  }
  if (normalVersion && toRound === 0) {
    toRound = "< 0.5";
  }
  return toRound;
}
function roundForUKLabelTotalFatCarbsSugarFiberProteinRule(toRound) {
  if (toRound <= 0.5) {
    return 0;
  } else if (toRound < 10) {
    return parseFloat(roundLoDashMain(roundToNearestNum(toRound, 0.1), 1));
  }
  return parseFloat(roundLoDashMain(roundToNearestNum(toRound, 1)));
}
function roundForUKLabelSatFat(toRound) {
  let normalVersion = true;
  if (locationPreferencesData.allow_rounding === 1) {
    const roundResult = roundForUKLabelSatFatRule(toRound);
    if (roundResult === false) {
      normalVersion = false;
    } else {
      toRound = roundResult;
    }
  } else {
    return parseFloat(roundLoDashMain(roundToNearestNum(toRound, 0.1), 1));
  }
  if (normalVersion && toRound === 0) {
    toRound = "< 0.1";
  }
  return toRound;
}
function roundForUKLabelSatFatRule(toRound) {
  if (toRound <= 0.1) {
    return 0;
  } else if (toRound < 10) {
    return parseFloat(roundLoDashMain(roundToNearestNum(toRound, 0.1), 1));
  }
  return parseFloat(roundLoDashMain(roundToNearestNum(toRound, 1)));
}
function roundForUKLabelSalt(toRound) {
  let normalVersion = true;
  if (locationPreferencesData.allow_rounding === 1) {
    const roundResult = roundForUKLabelSaltRule(toRound);
    if (roundResult === false) {
      normalVersion = false;
    } else {
      toRound = roundResult;
    }
  } else {
    return parseFloat(roundLoDashMain(roundToNearestNum(toRound, 0.1), 1));
  }
  if (normalVersion && toRound === 0) {
    toRound = "< 0.01";
  }
  return toRound;
}
function roundForUKLabelSaltRule(toRound) {
  if (toRound <= 0.0125) {
    return 0;
  } else if (toRound < 1) {
    return parseFloat(roundLoDashMain(roundToNearestNum(toRound, 0.01), 2));
  }
  return parseFloat(roundLoDashMain(roundToNearestNum(toRound, 0.1), 1));
}
function removeUnnecessaryDecimal(localValue) {
  const roundedValue = roundLoDashMain(Math.round(localValue));
  if (localValue === roundedValue) {
    return roundedValue;
  }
  return localValue;
}
function doesItemExistOnBasket(localItemID) {
  for (let x = 1; x < basketCounter; x++) {
    if (parseInt(localItemID) === globalCalculatorItemsArray[x].itemID) {
      showMessage.warning({
        text: [desktopCalculatorJsItemAlreadyInBasket],
        autoClose: false,
      });
      return true;
    }
  }
  return false;
}
function updateCurrentItemValue() {
  for (let x = 1; x < basketCounter; x++) {
    if (globalCalculatorItemsArray[x].itemID > 0) {
      currentItem = x;
    }
  }
}
function blinkModifier() {
  $colsWrap.find(".newlyAddedIngr").css("background-color", highlightColor);
  animate_bg($(".newlyAddedIngr"), 10, 0);
  clearTimeout(globalTimeOutIDv2);
  globalTimeOutIDv2 = setTimeout(
    '$colsWrap.find(".newlyAddedIngr").removeClass("newlyAddedIngr")',
    4000
  );
}
function buildNewItem() {
  $buildNewItem.hide();
  $btnStartOver2.hide();
  $itemModifiers.html("");
  $modifier_category_div.html("");
  $item_div.html("");
  $item_category_id.find("option:selected").prop("selected", false);
  $item_category_id.find('option[value=""]').prop("selected", true);
  $item_div.show();
  $startHere.show();
  if (initialLoadForFocus && parseInt(enable_calculator_focus_on_load) === 1) {
    $item_category_id.focus();
  } else if (!initialLoadForFocus) {
    $item_category_id.focus();
  }
  initialLoadForFocus = false;
}
function finishLoadingAMeal() {
  if (parseInt(globalCalculatorItemsArray[currentItem].itemID) > 0) {
    showItemModifiers(
      globalCalculatorItemsArray[currentItem].itemID,
      true,
      false
    );
    showModifiers(currentItem, false, 0);
    updateItemSelection(
      globalCalculatorItemsArray[currentItem].itemID,
      currentItem,
      globalCalculatorItemsArray[currentItem].categoryID
    );
    writeItems();
    updateCalculator(1);
    $startHere.hide();
  }
}
function updateItemSelection(globalItemID, localItemID, categoryID) {
  $modifier_category_div.html("");
  $item_div.html("");
  showItems(categoryID, 0);
  $("#item_id")
    .find("option[value=" + globalItemID + "]")
    .prop("selected", "selected");
  $item_category_id
    .find("option[value=" + categoryID + "]")
    .prop("selected", "selected");
  if ($("#item_id").find("option").size() === 2) {
    $item_div.hide();
  }
  showItemModifiers(globalItemID, true, false);
}
function writeItems() {
  let tempDivValue = "";
  for (let x = 0; x < basketCounter; x++) {
    if (
      typeof globalCalculatorItemsArray[x] !== "undefined" &&
      typeof globalCalculatorItemsArray[x].itemID !== "undefined" &&
      globalCalculatorItemsArray[x].itemID > 0
    ) {
      if (globalCalculatorItemsArray[x].quantity === undefined) {
        globalCalculatorItemsArray[x].quantity = 1.0;
      }
      tempDivValue +=
        "<div class='basket' id='b-" +
        x +
        "'>" +
        '<label for="iqc-' +
        x +
        '" class="sr-only">' +
        globalLanguageForTheLabel.desktop_calculator_js_quantity
          .replace("'", "&#39;")
          .replace('"', "&#34;") +
        "</label>" +
        '<input type="text" value="' +
        roundLoDashMain(globalCalculatorItemsArray[x].quantity, 1) +
        '" class="formText itemQuantity ac" id="iqc-' +
        x +
        '">' +
        '<span class="setter">' +
        '<a class="addQuantity" href="Increase the quantity" aria-label="' +
        globalLanguageForTheLabel.desktop_calculator_increase_quantity
          .replace("'", "&#39;")
          .replace('"', "&#34;") +
        '" id="iqa-' +
        x +
        '" rel="nofollow">' +
        '<span class="sr-only">' +
        globalLanguageForTheLabel.desktop_calculator_increase_quantity
          .replace("'", "&#39;")
          .replace('"', "&#34;") +
        "</span>" +
        "</a>" +
        '<a class="minusQuantity" href="Decrease the quantity" aria-label="' +
        globalLanguageForTheLabel.desktop_calculator_decrease_quantity
          .replace("'", "&#39;")
          .replace('"', "&#34;") +
        '" id="iqm-' +
        x +
        '" rel="nofollow">' +
        '<span class="sr-only">' +
        globalLanguageForTheLabel.desktop_calculator_decrease_quantity
          .replace("'", "&#39;")
          .replace('"', "&#34;") +
        "</span>" +
        "</a>" +
        "</span>" +
        "<a href='Remove " +
        itemsData[globalCalculatorItemsArray[x].itemID].name
          .replace("'", "&#39;")
          .replace('"', "&#34;") +
        " From My Basket' " +
        ' aria-label="' +
        globalLanguageForTheLabel.remove_text
          .replace("'", "&#39;")
          .replace('"', "&#34;") +
        " " +
        itemsData[globalCalculatorItemsArray[x].itemID].name
          .replace("'", "&#39;")
          .replace('"', "&#34;") +
        " " +
        globalLanguageForTheLabel.desktop_calculator_from_basket_suffix
          .replace("'", "&#39;")
          .replace('"', "&#34;") +
        '"' +
        " class='removeItem' id='ri-" +
        x +
        "' rel='nofollow'>" +
        "<img class='del' src='/images/x.png' alt='Delete' />" +
        '<span class="sr-only">' +
        globalLanguageForTheLabel.desktop_calculator_delete_item_from_basket
          .replace("'", "&#39;")
          .replace('"', "&#34;") +
        "</span>" +
        "</a>" +
        '<span class="icon info" aria-label="' +
        globalLanguageForTheLabel.desktop_calculator_item_info_tooltip
          .replace("'", "&#39;")
          .replace('"', "&#34;") +
        '"' +
        ' id="bsktItmIco-' +
        x +
        '"' +
        (locationPreferencesData.hide_calc_info_button === 1
          ? ' style="display: none;"'
          : "") +
        "></span>" +
        '<a href="Modify ' +
        itemsData[globalCalculatorItemsArray[x].itemID].name
          .replace("'", "&#39;")
          .replace('"', "&#34;") +
        "'s Ingredients\" " +
        ' aria-label="' +
        globalLanguageForTheLabel.desktop_calculator_modify_prefix
          .replace("'", "&#39;")
          .replace('"', "&#34;") +
        " " +
        itemsData[globalCalculatorItemsArray[x].itemID].name
          .replace("'", "&#39;")
          .replace('"', "&#34;") +
        "'s " +
        globalLanguageForTheLabel.mobile_calculator_ingredients
          .replace("'", "&#39;")
          .replace('"', "&#34;") +
        '" ' +
        " class='viewIngredient' id='bi-" +
        x +
        "' rel='nofollow'>" +
        "<span class='basket-text'" +
        (locationPreferencesData.hide_calc_info_button === 1
          ? " style='padding-right: 0; margin-right: 0;'"
          : "") +
        ">" +
        itemsData[globalCalculatorItemsArray[x].itemID].name +
        "</span>" +
        "</a>" +
        "</div>";
    }
  }
  $basketValues.append(tempDivValue);
}
function writeSavedItems() {
  let tempDivValue = "";
  for (let xx = 0; xx < basketCounter; xx++) {
    if (
      typeof globalCalculatorItemsArray[xx].itemID !== "undefined" &&
      parseInt(globalCalculatorItemsArray[xx].itemID) > 0
    ) {
      if (globalCalculatorItemsArray[xx].quantity === undefined) {
        globalCalculatorItemsArray[xx].quantity = 1.0;
      }
      tempDivValue +=
        "<dt>" +
        '<span class="trigger"></span>' +
        roundLoDashMain(globalCalculatorItemsArray[xx].quantity, 1) +
        " x " +
        itemsData[globalCalculatorItemsArray[xx].itemID].name +
        "</dt>";
      loadMealCount++;
      tempDivValue += showItemModifiersForMeal(xx);
    }
  }
  $col2ID.find(".custom-meal").html(tempDivValue);
  $col2ID.find(".custom-meal dd ul").show();
  $col2ID.find(".custom-meal dt .trigger").addClass("open");
  doNotBlur = true;
  $("#standalone-loader").hide();
}
function showItemModifiersForMeal(localItemID) {
  let thisModifierList = '<dd><ul class="ingredientUL-' + loadMealCount + '">';
  let addedModifierCounter =
    globalCalculatorItemsArray[localItemID].addedModifierCounter;
  const itemIDHolder = globalCalculatorItemsArray[localItemID]["itemID"];
  if (addedModifierCounter > 0) {
    for (let x = 0; x < addedModifierCounter; x++) {
      thisModifierList +=
        "<li>" +
        '<span class="size">' +
        roundLoDashMain(
          globalCalculatorItemsAddedModifierArray[localItemID][x].userQuantity,
          1
        ) +
        "</span>" +
        "<p>" +
        modifiersData[
          globalCalculatorItemsAddedModifierArray[localItemID][x].modifierID
        ].name +
        "</p>" +
        "</li>";
    }
  } else if (
    templateGroupsData[itemsData[itemIDHolder].template_id].length === 0
  ) {
    if (itemsData[itemIDHolder].static_ingredients === null) {
      itemsData[itemIDHolder].static_ingredients = labelIngredientList;
    }
    thisModifierList +=
      "<li>" + itemsData[itemIDHolder].static_ingredients + "</li>";
  }
  return thisModifierList + "</ul></dd>";
}
function saveMeal(localJSData, localCalorieIntake) {
  showMessage.success({
    text: [desktopCalculatorJsProcessing + "..."],
    autoClose: false,
  });
  $.post(
    saveMealUrl,
    {
      saved_data: localJSData,
      calorie_diet: localCalorieIntake,
      myHash: $myHash.val(),
    },
    function (data) {
      if (data.success === 1) {
        showMessage.close();
        showLinkOnMsg(baseUrl + "m/" + $myHash.val());
      } else {
        showMessage.error({ text: data.errors, autoClose: true });
      }
    }
  );
}
function showLinkOnMsg(localUrlValue) {
  $copyURLButton.val(desktopCalculatorJsLabelAfterShare);
  if (
    (webname === "firebirds-wood-fired-grill" || webname === "papa-murphys") &&
    $.browser.chrome
  ) {
    $shareURL.focus();
  } else {
    $shareURL.focus().select();
  }
  if (globalUserID < 1) {
    $.post(getServerTimeUrl, { getServerTime: "set" }, function (resultTime) {
      $.cookie("nix_last_saved_meal", null, { expires: -7, path: "/" });
      $.cookie("nix_last_saved_meal", resultTime.server_time, {
        expires: 7,
        path: "/",
      });
    });
  }
}
function animate_bg(ele, from, to) {
  from += from > to ? -1 : 1;
  if (!$.support.opacity) {
    if (from !== to) {
      const opStr = Math.round(from * 25.5).toString(16);
      ele.css({
        background: "transparent",
        filter:
          "progid:DXImageTransform.Microsoft.gradient(startColorstr=#" +
          opStr +
          highlightColorNoHash +
          ", endColorstr=#" +
          opStr +
          highlightColorNoHash +
          ")",
      });
    } else {
      ele.css({ background: "transparent", filter: "none" });
    }
  } else {
    if (isThisPremium === 1) {
      $colorToRGB.css("background-color", highlightColor);
      const colorRGB = $colorToRGB
        .css("background-color")
        .replace("rgb", "rgba")
        .replace(")", ", ");
      ele.css("backgroundColor", colorRGB + from / 10 + ")");
    } else {
      ele.css("backgroundColor", "rgba(181, 239, 137, " + from / 10 + ")");
    }
  }
  if (from !== to) {
    setTimeout(function () {
      animate_bg(ele, from, to);
    }, 80);
  }
}
function startOver() {
  showMessage.success({
    text: [desktopCalculatorJsProcessing + "..."],
    autoClose: false,
  });
  $.post(getNewHashUrl, function (data) {
    if (parseInt(data.success) === 1) {
      undoHash = $myHash.val();
      $myHash.val(data.newHash);
      $shareURL.val(baseUrl + "m/" + data.newHash);
      resetSaveMealButton();
      undoJSData = getSaveData();
      basketCounter = 1;
      globalCalculatorItemsArray = Array();
      globalCalculatorItemsAddedModifierArray = Array();
      globalCalculatorItemsAddedModifierQtyArray = Array();
      globalDividedEvenlyFeatureArray = new Object();
      globalDividedEvenlyFeatureCounterArray = new Object();
      globalDividedEvenlyFeatureZeroArray = new Object();
      globalPizzaFeatureCounterArray = new Object();
      basketItemCounter = 0;
      currentItem = 0;
      deletedModifiers = Array();
      deletedModifierCount = 0;
      dropDownID = 1;
      loadMealCount = 0;
      $basketValues.html("");
      finishLoading();
      $calculatorDebugCode.html("").hide();
      showMessage.success({
        text: [
          desktopCalculatorJsResetMessage +
          '. [<a href="Undo Adding this Item" id="undoReset">' +
          desktopCalculatorJsLabelUndo +
          "</a>]",
        ],
        autoClose: true,
        clickToClose: false,
      });
      $item_category_id.focus();
    } else {
      showMessage.error({
        text: [desktopCalculatorJsErrorOnUndo],
        autoClose: true,
      });
    }
  });
}

function resetCalculator() {
  initializeTheLabelUsingThePlugin();
  blurTheLabel();
  if (isThisPremium !== 1) {
    $connectButton.hide();
    $qrcode.hide();
    $qrcodeText.hide();
  }
}

function showItems(categoryID, autoAdd) {
  const localCategoryItems = categoryItemsData[categoryID];
  const localCategoryItemCount = localCategoryItems.length;
  let selectHtml =
    '<label class="sr-only" for="item_id">' +
    globalLanguageForTheLabel.desktop_calculator_select_menu_item
      .replace("'", "&#39;")
      .replace('"', "&#34;") +
    "</label>" +
    '<select id="item_id">' +
    '<option value="0">' +
    desktopCalculatorJsSelectItem +
    "</option>";
  for (let x = 0; x < localCategoryItemCount; x++) {
    selectHtml +=
      '<option value="' +
      localCategoryItems[x].item_id +
      '">' +
      itemsData[localCategoryItems[x].item_id].name +
      "</option>";
  }
  selectHtml += '</select><div class="h10"></div>';
  $item_div.html(selectHtml).show();
  if (autoAdd === 1 && localCategoryItemCount === 1) {
    const localItemID = parseInt(localCategoryItems[0].item_id);
    $("#item_id")
      .find("option[value=" + localItemID + "]")
      .prop("selected", "selected");
    $item_div.hide();
    let doNothing = false;
    if (currentItem === 0 || autoAddAnItem) {
      autoAddAnItem = false;
      addItem(localItemID, true);
    } else if (
      parseInt(globalCalculatorItemsArray[currentItem]["itemID"]) ===
      localItemID
    ) {
      doNothing = true;
    } else {
      addItem(localItemID, false);
    }
    if (!doNothing) {
      showItemModifiers(localItemID, false, true);
      showModifiers(currentItem, true, 0);
      updateCalculator(1);
    }
  }
}
function getSaveData() {
  let saveMeData =
    "basketCounter = " +
    basketCounter +
    ";" +
    "basketItemCounter = " +
    basketItemCounter +
    ";" +
    "currentItem = " +
    currentItem +
    ";" +
    "deletedModifierCount = " +
    deletedModifierCount +
    ";";
  for (let x = 0; x < basketCounter; x++) {
    saveMeData +=
      "globalCalculatorItemsArray[" +
      x +
      "] = Array();" +
      "globalCalculatorItemsAddedModifierArray[" +
      x +
      "] = Array();" +
      "globalCalculatorItemsAddedModifierQtyArray[" +
      x +
      "] = Array();";
  }
  for (let x = 0; x < basketCounter; x++) {
    if (
      typeof globalCalculatorItemsArray[x] !== "undefined" &&
      typeof globalCalculatorItemsArray[x].itemID !== "undefined"
    ) {
      saveMeData +=
        "globalCalculatorItemsArray[" +
        x +
        "] = " +
        "{itemID: " +
        globalCalculatorItemsArray[x].itemID +
        ", " +
        "addedModifierCounter: " +
        globalCalculatorItemsArray[x].addedModifierCounter +
        ", " +
        "categoryID: " +
        globalCalculatorItemsArray[x].categoryID +
        ", " +
        "quantity: " +
        globalCalculatorItemsArray[x].quantity +
        ", " +
        "addedToBasketManually: " +
        globalCalculatorItemsArray[x].addedToBasketManually +
        ", " +
        "selectIDs: '" +
        globalCalculatorItemsArray[x].selectIDs +
        "'};";
    }
  }
  for (let x = 0; x < basketCounter; x++) {
    if (typeof globalCalculatorItemsAddedModifierArray[x] !== "undefined") {
      for (
        let z = 0;
        z <= globalCalculatorItemsArray[x].addedModifierCounter;
        z++
      ) {
        if (
          typeof globalCalculatorItemsAddedModifierArray[x][z] !== "undefined"
        ) {
          saveMeData +=
            "globalCalculatorItemsAddedModifierArray[" +
            x +
            "][" +
            z +
            "] = " +
            "{modifierID: " +
            globalCalculatorItemsAddedModifierArray[x][z].modifierID +
            ", " +
            "userQuantity: " +
            globalCalculatorItemsAddedModifierArray[x][z].userQuantity +
            ", " +
            "templateModifier: " +
            roundLoDashMain(
              globalCalculatorItemsAddedModifierArray[x][z].templateModifier,
              3
            ) +
            ", " +
            "selectID: " +
            globalCalculatorItemsAddedModifierArray[x][z].selectID +
            ", " +
            "modifierGroupID: " +
            globalCalculatorItemsAddedModifierArray[x][z].modifierGroupID +
            ", " +
            "modifierTemplateID: " +
            globalCalculatorItemsAddedModifierArray[x][z].modifierTemplateID +
            "};";
        }
      }
    }
  }
  for (let x = 0; x < basketCounter; x++) {
    if (typeof globalCalculatorItemsAddedModifierQtyArray[x] !== "undefined") {
      const maxLoop = globalCalculatorItemsAddedModifierQtyArray[x].length;
      for (let z = 0; z <= maxLoop; z++) {
        if (
          typeof globalCalculatorItemsAddedModifierQtyArray[x][z] !==
          "undefined"
        ) {
          saveMeData +=
            "globalCalculatorItemsAddedModifierQtyArray[" +
            x +
            "][" +
            z +
            "] = " +
            globalCalculatorItemsAddedModifierQtyArray[x][z] +
            ";";
        }
      }
    }
  }
  for (let x = 0; x <= deletedModifierCount; x++) {
    if (typeof deletedModifiers[x] !== "undefined") {
      saveMeData +=
        "deletedModifiers[" + x + "] = '" + deletedModifiers[x] + "';";
    }
  }
  for (let x = 0; x < basketCounter; x++) {
    if (
      typeof globalDividedEvenlyFeatureArray[x] !== "undefined" &&
      typeof globalCalculatorItemsArray[x].itemID !== "undefined" &&
      typeof itemsData[globalCalculatorItemsArray[x].itemID] !== "undefined"
    ) {
      const localTemplateDivideEvenlyHolder =
        templateGroupsDivideEvenlyFeatureData[
        itemsData[globalCalculatorItemsArray[x].itemID].template_id
        ];
      if (localTemplateDivideEvenlyHolder !== undefined) {
        saveMeData +=
          "globalDividedEvenlyFeatureArray[" +
          x +
          "] = Array();" +
          "globalDividedEvenlyFeatureCounterArray[" +
          x +
          "] = Array();" +
          "globalDividedEvenlyFeatureZeroArray[" +
          x +
          "] = Array();";
        const forCounter = localTemplateDivideEvenlyHolder.length;
        for (let z = 0; z < forCounter; z++) {
          saveMeData +=
            "globalDividedEvenlyFeatureArray[" +
            x +
            "][" +
            localTemplateDivideEvenlyHolder[z] +
            "] = " +
            globalDividedEvenlyFeatureArray[x][
            localTemplateDivideEvenlyHolder[z]
            ] +
            ";" +
            "globalDividedEvenlyFeatureCounterArray[" +
            x +
            "][" +
            localTemplateDivideEvenlyHolder[z] +
            "] = " +
            globalDividedEvenlyFeatureCounterArray[x][
            localTemplateDivideEvenlyHolder[z]
            ] +
            ";" +
            "globalDividedEvenlyFeatureZeroArray[" +
            x +
            "][" +
            localTemplateDivideEvenlyHolder[z] +
            "] = " +
            globalDividedEvenlyFeatureZeroArray[x][
            localTemplateDivideEvenlyHolder[z]
            ] +
            ";";
        }
      }
    }
  }
  for (let x = 0; x < basketCounter; x++) {
    if (
      typeof globalPizzaFeatureCounterArray[x] !== "undefined" &&
      typeof globalCalculatorItemsArray[x].itemID !== "undefined" &&
      typeof itemsData[globalCalculatorItemsArray[x].itemID] !== "undefined"
    ) {
      const localTemplatePizzaFeatureHolder =
        templateGroupsPizzaFeatureData[
        itemsData[globalCalculatorItemsArray[x].itemID].template_id
        ];
      if (localTemplatePizzaFeatureHolder !== undefined) {
        saveMeData += "globalPizzaFeatureCounterArray[" + x + "] = Array();";
        const forCounter = localTemplatePizzaFeatureHolder.length;
        for (let z = 0; z < forCounter; z++) {
          saveMeData +=
            "globalPizzaFeatureCounterArray[" +
            x +
            "][" +
            localTemplatePizzaFeatureHolder[z] +
            "] = " +
            globalPizzaFeatureCounterArray[x][
            localTemplatePizzaFeatureHolder[z]
            ] +
            ";";
        }
      }
    }
  }
  return saveMeData;
}
function removeAnItem(itemID, forUndo, categoryIDForChangeTrigger) {
  $("#b-" + itemID).hide("fast", function () {
    $("#b-" + itemID).remove();
    globalCalculatorItemsArray[itemID].itemID = 0;
    basketItemCounter--;
    if (basketItemCounter < 1) {
      basketItemCounter = 0;
      currentItem = 0;
      $itemModifiers.html("");
      $calculatorDebugCode.html("").hide();
      buildNewItem();
      resetCalculator();
    } else {
      let showThisItem = 0;
      for (let x = 1; x <= basketCounter; x++) {
        if (globalCalculatorItemsArray[x].itemID !== 0) {
          showThisItem = x;
          currentItem = x;
          break;
        }
      }
      if (showThisItem !== 0) {
        updateItemSelection(
          globalCalculatorItemsArray[showThisItem].itemID,
          showThisItem,
          globalCalculatorItemsArray[showThisItem].categoryID
        );
        showModifiers(showThisItem, false, 0);
        updateCalculator(1);
      } else {
        showMessage.error({
          text: [desktopCalculatorJsCalcuError + "."],
          autoClose: true,
        });
      }
    }
    if (parseInt(categoryIDForChangeTrigger) > 0) {
      $("#item_category_id").val(categoryIDForChangeTrigger).trigger("change");
    }
  });
}
function deleteModifier(localValue, localGroupID) {
  const holder = localValue.split("---");
  holder[3] = parseInt(holder[3]);
  const localPrefix = "userIngr";
  const localPrefix2 = "cq2";
  $("#" + localPrefix + "-" + holder[2] + "-" + holder[3]).hide();
  $("#" + localPrefix2 + "-" + holder[2] + "-" + holder[3]).val(0);
  let localIndex = null;
  const maxLoop = globalCalculatorItemsArray[holder[2]].addedModifierCounter;
  for (let x = 0; x < maxLoop; x++) {
    if (
      parseInt(
        globalCalculatorItemsAddedModifierArray[holder[2]][x].modifierID
      ) === holder[3]
    ) {
      localIndex = x;
      break;
    }
  }
  if (localIndex !== null) {
    const localDividedEvenlyValue = parseFloat(
      globalCalculatorItemsAddedModifierArray[holder[2]][localIndex]
        .userQuantity
    );
    if (globalCalculatorItemsArray[holder[2]].addedModifierCounter === 1) {
      globalCalculatorItemsAddedModifierArray[holder[2]].length = 0;
      globalCalculatorItemsAddedModifierQtyArray[holder[2]].length = 0;
      globalCalculatorItemsArray[holder[2]].addedModifierCounter = 0;
    } else if (globalCalculatorItemsArray[holder[2]].addedModifierCounter > 1) {
      globalCalculatorItemsAddedModifierArray[holder[2]].splice(localIndex, 1);
      globalCalculatorItemsAddedModifierQtyArray[holder[2]].splice(
        holder[3],
        1
      );
      globalCalculatorItemsArray[holder[2]].addedModifierCounter--;
    }
    $("#" + localPrefix + "-" + holder[2] + "-" + holder[3]).remove();
    if (globalDividedEvenlyFeatureCounterArray[currentItem] !== undefined) {
      globalDividedEvenlyFeatureCounterArray[currentItem][holder[5]]--;
      if (localDividedEvenlyValue === 0) {
        globalDividedEvenlyFeatureZeroArray[currentItem][holder[5]]--;
      }
    }
    if (
      globalPizzaFeatureCounterArray[currentItem] !== undefined &&
      globalPizzaFeatureCounterArray[currentItem][holder[5]] > 0
    ) {
      globalPizzaFeatureCounterArray[currentItem][holder[5]]--;
    }
    if (
      globalDividedEvenlyFeatureArray[currentItem] !== undefined &&
      globalDividedEvenlyFeatureArray[currentItem][holder[5]] !== undefined
    ) {
      globalDividedEvenlyFeatureArray[currentItem][holder[5]] =
        parseFloat(
          globalDividedEvenlyFeatureCounterArray[currentItem][holder[5]]
        ) === 0
          ? 0
          : parseFloat(
            globalDividedEvenlyFeatureArray[currentItem][holder[5]]
          ) - localDividedEvenlyValue;
    }
    if (localGroupID > 0 && groupModifiersData[localGroupID].length < 2) {
      $modifier_category_div
        .find(".ingrCatDropDown")
        .dropdownchecklist("close");
    }
  }
}
function updateModifierCheckbox(passedValue, checkedStatus) {
  if ($copyURLButton.val() !== desktopCalculatorShareButton) {
    resetSaveMealButton();
  }
  const localValue = passedValue.split("---");
  let continueHere = true;
  if (checkedStatus === true) {
    const maxSelect = parseInt(groupsData[localValue[2]].multiple_select);
    if (maxSelect > 1) {
      const addedModifierCounter =
        globalCalculatorItemsArray[currentItem].addedModifierCounter;
      if (addedModifierCounter >= maxSelect) {
        let localGroupModifiers = new Array();
        const groupModifierCounter = groupModifiersData[localValue[2]].length;
        for (let x = 0; x < groupModifierCounter; x++) {
          localGroupModifiers[x] = parseInt(
            groupModifiersData[localValue[2]][x].ingredient_id
          );
        }
        let addedCount = 0;
        for (let x = 0; x < addedModifierCounter; x++) {
          if (
            jQuery.inArray(
              parseInt(
                globalCalculatorItemsAddedModifierArray[currentItem][x]
                  .modifierID
              ),
              localGroupModifiers
            ) !== -1
          ) {
            addedCount++;
          }
          if (addedCount >= maxSelect) {
            break;
          }
        }
        if (addedCount >= maxSelect) {
          continueHere = false;
          $("#opt-" + passedValue).prop("checked", false);
          $("#dd-" + localValue[1] + "-" + localValue[2]).dropdownchecklist(
            "refresh"
          );
          showMessage.warning({
            text: [
              desktopCalculatorJsMaxSelectMsg.replace(
                "SYSTEM_MAX_SELECT",
                maxSelect
              ),
            ],
            autoClose: true,
          });
        }
      }
    }
    if (continueHere) {
      addModifier(passedValue, false);
      clearTimeout(globalTimeOutIDv2);
      showModifiers(currentItem, false, passedValue);
    }
  } else {
    const localModifierID = localValue[0].split("_")[0];
    const itemNameTemp = modifiersData[localModifierID].name
      .replace("'", "&#39;")
      .replace('"', "&#34;");
    deleteModifier(
      "ui---" +
      itemNameTemp +
      "---" +
      currentItem +
      "---" +
      localModifierID +
      "---" +
      localValue[1] +
      "---" +
      localValue[2] +
      "---" +
      localValue[3],
      localValue[2]
    );
    showModifiers(currentItem, false, 0);
  }
  if (continueHere) {
    updateCalculator(1);
    clearTimeout(globalTimeOutID);
  }
}
function updateModifierRadio(passedID, passedValue) {
  if ($copyURLButton.val() !== desktopCalculatorShareButton) {
    resetSaveMealButton();
  }
  const localGroupID = passedID.split("-")[3];
  const localDropDownID = passedID.split("-")[2];
  const localGroupModifiers = groupModifiersData[localGroupID];
  const localGroupModifierCount = localGroupModifiers.length;
  for (let y = 0; y < localGroupModifierCount; y++) {
    const itemNameTemp = itemsData[
      globalCalculatorItemsArray[currentItem].itemID
    ].name
      .replace("'", "&#39;")
      .replace('"', "&#34;");
    const modifierIDTemp = localGroupModifiers[y].ingredient_id;
    const itemIDTemp = globalCalculatorItemsArray[currentItem].itemID;
    deleteModifier(
      "ui---" +
      itemNameTemp +
      "---" +
      currentItem +
      "---" +
      modifierIDTemp +
      "---" +
      localDropDownID +
      "---" +
      localGroupID +
      "---" +
      itemIDTemp,
      0
    );
  }
  if (parseInt(passedValue) !== -1) {
    addModifier(passedValue, false);
  }
  clearTimeout(globalTimeOutIDv2);
  showModifiers(currentItem, false, passedValue);
  updateCalculator(1);
  clearTimeout(globalTimeOutID);
}
function updateSingleSelect(itemID, selectID, groupID, templateID) {
  let dropDownValues = "";
  let selectedVal = "";
  const localGroupModifiers = groupModifiersData[groupID];
  const localGroupModifierCount = localGroupModifiers.length;
  if (groupsData[groupID].multiple_select === 0) {
    dropDownValues += '<option value="-1">' + defaultDropDownText + "</option>";
  }
  for (let y = 0; y < localGroupModifierCount; y++) {
    const thisModifierID = parseInt(localGroupModifiers[y].ingredient_id);
    const valueHolder =
      localGroupModifiers[y].ingredient_id +
      "_" +
      modifiersData[localGroupModifiers[y].ingredient_id].servings +
      "---" +
      selectID +
      "---" +
      groupID +
      "---" +
      templateID;
    let alreadyIncluded = false;
    for (
      let z = 0;
      z < globalCalculatorItemsArray[currentItem].addedModifierCounter;
      z++
    ) {
      if (
        parseInt(
          globalCalculatorItemsAddedModifierArray[currentItem][z].modifierID
        ) === thisModifierID
      ) {
        alreadyIncluded = true;
        break;
      }
    }
    selectedVal = "";
    if (alreadyIncluded) {
      selectedVal = "selected";
    }
    dropDownValues +=
      '<option value="' +
      valueHolder +
      '" ' +
      selectedVal +
      ">" +
      modifiersData[localGroupModifiers[y].ingredient_id].name +
      "</option>";
  }
  $("#dd-" + selectID + "-" + groupID)
    .html(dropDownValues)
    .dropdownchecklist("refresh");
}
function increaseItemQuantity(localBasketID, idPrefix) {
  if ($copyURLButton.val() !== desktopCalculatorShareButton) {
    resetSaveMealButton();
  }
  const currentQuantity = parseFloat(
    $("#" + idPrefix + "-" + localBasketID).val()
  );
  const modifier = 1.0;
  const newValue = currentQuantity + modifier;
  $("#iqc-" + localBasketID).val(roundLoDashMain(newValue, 1));
  if ($("#iqc2-" + localBasketID).val() !== undefined) {
    $("#iqc2-" + localBasketID).val(roundLoDashMain(newValue, 1));
    updateStaticItemTooltip(localBasketID, newValue);
  }
  globalCalculatorItemsArray[localBasketID].quantity = newValue;
  updateCalculator(1);
}
function decreaseItemQuantity(localBasketID, idPrefix) {
  if ($copyURLButton.val() !== desktopCalculatorShareButton) {
    resetSaveMealButton();
  }
  let currentQuantity = parseFloat(
    $("#" + idPrefix + "-" + localBasketID).val()
  );
  if (currentQuantity === 0) {
    showMessage.warning({
      text: [desktopCalculatorJsCantDecreaseValue + "."],
      autoClose: true,
    });
  } else {
    const modifier = 1.0;
    const newValue = currentQuantity - modifier;
    if (newValue <= 0) {
      showMessage.error({
        text: [desktopCalculatorJsEnterGreaterThanZero],
        autoClose: true,
      });
    } else {
      $("#iqc-" + localBasketID).val(roundLoDashMain(newValue, 1));
      if ($("#iqc2-" + localBasketID).val() !== undefined) {
        $("#iqc2-" + localBasketID).val(roundLoDashMain(newValue, 1));
        updateStaticItemTooltip(localBasketID, newValue);
      }
      globalCalculatorItemsArray[localBasketID].quantity = newValue;
      updateCalculator(1);
    }
  }
}
function updateItemQuantity($thisInput) {
  if ($copyURLButton.val() !== desktopCalculatorShareButton) {
    resetSaveMealButton();
  }
  const localBasketID = parseInt($thisInput.attr("id").split("-")[1]);
  let myLocalVar = $thisInput.val();
  let isTheValueaFloat = false;
  if (!regIsPosNumber(myLocalVar)) {
    myLocalVar = roundLoDashMain(parseFloat("0" + myLocalVar), 1);
  } else {
    isTheValueaFloat = true;
  }
  if (!isTheValueaFloat && myLocalVar > 0 && regIsPosNumber(myLocalVar)) {
    $thisInput.val(isTheValueaFloat);
    isTheValueaFloat = true;
  }
  if (isTheValueaFloat) {
    const newValue = roundLoDashMain(myLocalVar, 1);
    if (newValue <= 0) {
      showMessage.error({
        text: [desktopCalculatorJsEnterGreaterThanZero],
        autoClose: true,
      });
      $thisInput.val(
        roundLoDashMain(globalCalculatorItemsArray[localBasketID].quantity, 1)
      );
    } else {
      $("#iqc-" + localBasketID).val(newValue);
      if ($("#iqc2-" + localBasketID).val() !== undefined) {
        $("#iqc2-" + localBasketID).val(newValue);
      }
      if (globalCalculatorItemsArray[localBasketID].quantity !== newValue) {
        globalCalculatorItemsArray[localBasketID].quantity = newValue;
        if ($("#iqc2-" + localBasketID).val() !== undefined) {
          updateStaticItemTooltip(localBasketID, newValue);
        }
        updateCalculator(1);
      }
    }
  } else {
    showMessage.error({
      text: [desktopCalculatorJsEnterValidValue + "."],
      autoClose: true,
    });
    $thisInput.val(
      roundLoDashMain(globalCalculatorItemsArray[localBasketID].quantity, 1)
    );
  }
}
function addItem(localItemID, addAnItem) {
  if (runToolTipv2) {
    $calcTip2.fadeOut("slow", function () {
      $calcTip3.fadeIn("slow");
      $calcTip4.fadeIn("slow");
      runToolTipv2 = false;
      fadeMe3 = setTimeout('$calcTip2.fadeOut("slow");', 3000);
      fadeMe4 = setTimeout('$calcTip2.fadeOut("slow");', 5000);
      fadeMe5 = setTimeout('$calcTip2.fadeOut("slow");', 7000);
      fadeMe1 = setTimeout('$calcTip3.fadeOut("slow");', 3000);
      fadeMe2 = setTimeout('$calcTip4.fadeOut("slow");', 3000);
    });
  }
  let basketCounterHolder;
  if (!addAnItem) {
    basketCounterHolder = basketCounter;
    basketCounter = currentItem;
    $("#b-" + currentItem).remove();
  }
  globalCalculatorItemsAddedModifierArray[basketCounter] = new Array();
  globalCalculatorItemsAddedModifierQtyArray[basketCounter] = new Array();
  $basketValues.append(
    '<div class="basket" id="b-' +
    basketCounter +
    '">' +
    '<label for="iqc-' +
    basketCounter +
    '" class="sr-only">' +
    globalLanguageForTheLabel.desktop_calculator_js_quantity
      .replace("'", "&#39;")
      .replace('"', "&#34;") +
    "</label>" +
    '<input type="text" value="1.0" class="formText itemQuantity ac" id="iqc-' +
    basketCounter +
    '">' +
    '<span class="setter">' +
    '<a class="addQuantity" href="Increase the quantity" aria-label="' +
    globalLanguageForTheLabel.desktop_calculator_increase_quantity
      .replace("'", "&#39;")
      .replace('"', "&#34;") +
    '" id="iqa-' +
    basketCounter +
    '" rel="nofollow">' +
    '<span class="sr-only">' +
    globalLanguageForTheLabel.desktop_calculator_increase_quantity
      .replace("'", "&#39;")
      .replace('"', "&#34;") +
    "</span>" +
    "</a>" +
    '<a class="minusQuantity" href="Decrease the quantity" aria-label="' +
    globalLanguageForTheLabel.desktop_calculator_decrease_quantity
      .replace("'", "&#39;")
      .replace('"', "&#34;") +
    '" id="iqm-' +
    basketCounter +
    '" rel="nofollow">' +
    '<span class="sr-only">' +
    globalLanguageForTheLabel.desktop_calculator_decrease_quantity
      .replace("'", "&#39;")
      .replace('"', "&#34;") +
    "</span>" +
    "</a>" +
    "</span>" +
    '<a href="Remove ' +
    itemsData[localItemID].name.replace("'", "&#39;").replace('"', "&#34;") +
    ' From My Basket" ' +
    ' aria-label="' +
    globalLanguageForTheLabel.remove_text
      .replace("'", "&#39;")
      .replace('"', "&#34;") +
    " " +
    itemsData[localItemID].name.replace("'", "&#39;").replace('"', "&#34;") +
    " " +
    globalLanguageForTheLabel.desktop_calculator_from_basket_suffix
      .replace("'", "&#39;")
      .replace('"', "&#34;") +
    '"' +
    ' class="removeItem" id="ri-' +
    basketCounter +
    '" rel="nofollow">' +
    '<img class="del" src="/images/x.png" alt="Delete" />' +
    '<span class="sr-only">' +
    globalLanguageForTheLabel.desktop_calculator_delete_item_from_basket
      .replace("'", "&#39;")
      .replace('"', "&#34;") +
    "</span>" +
    "</a>" +
    '<span class="icon info" aria-label="' +
    globalLanguageForTheLabel.desktop_calculator_item_info_tooltip
      .replace("'", "&#39;")
      .replace('"', "&#34;") +
    '"' +
    ' id="bsktItmIco-' +
    basketCounter +
    '"' +
    (locationPreferencesData.hide_calc_info_button === 1
      ? ' style="display: none;"'
      : "") +
    ">" +
    "</span>" +
    '<a href="' +
    globalLanguageForTheLabel.desktop_calculator_modify_prefix
      .replace("'", "&#39;")
      .replace('"', "&#34;") +
    " " +
    itemsData[localItemID].name.replace("'", "&#39;").replace('"', "&#34;") +
    "'s Ingredients\" " +
    ' aria-label="' +
    globalLanguageForTheLabel.desktop_calculator_modify_prefix
      .replace("'", "&#39;")
      .replace('"', "&#34;") +
    " " +
    itemsData[localItemID].name.replace("'", "&#39;").replace('"', "&#34;") +
    "'s " +
    globalLanguageForTheLabel.mobile_calculator_ingredients
      .replace("'", "&#39;")
      .replace('"', "&#34;") +
    '" class="viewIngredient"' +
    ' id="bi-' +
    basketCounter +
    '" rel="nofollow">' +
    '<span class="basket-text"' +
    (locationPreferencesData.hide_calc_info_button === 1
      ? ' style="padding-right: 0; margin-right: 0;"'
      : "") +
    ">" +
    itemsData[localItemID].name +
    "</span>" +
    "</a>" +
    "</div>"
  );
  globalCalculatorItemsArray[basketCounter] = {
    itemID: localItemID,
    addedModifierCounter: 0,
    categoryID: $item_category_id.val(),
    selectIDs: "",
    addedToBasketManually: 0,
    quantity: 1.0,
  };
  globalDividedEvenlyFeatureArray[basketCounter] = new Object();
  globalDividedEvenlyFeatureCounterArray[basketCounter] = new Object();
  globalDividedEvenlyFeatureZeroArray[basketCounter] = new Object();
  globalPizzaFeatureCounterArray[basketCounter] = new Object();
  const localTemplateDivideEvenlyHolder =
    templateGroupsDivideEvenlyFeatureData[itemsData[localItemID].template_id];
  if (localTemplateDivideEvenlyHolder !== undefined) {
    const forCounter = localTemplateDivideEvenlyHolder.length;
    for (let x = 0; x < forCounter; x++) {
      globalDividedEvenlyFeatureArray[basketCounter][
        localTemplateDivideEvenlyHolder[x]
      ] = 0;
      globalDividedEvenlyFeatureCounterArray[basketCounter][
        localTemplateDivideEvenlyHolder[x]
      ] = 0;
      globalDividedEvenlyFeatureZeroArray[basketCounter][
        localTemplateDivideEvenlyHolder[x]
      ] = 0;
    }
  }
  const localTemplatePizzaFeatureHolder =
    templateGroupsPizzaFeatureData[itemsData[localItemID].template_id];
  if (localTemplatePizzaFeatureHolder !== undefined) {
    const forCounter = localTemplatePizzaFeatureHolder.length;
    for (let x = 0; x < forCounter; x++) {
      globalPizzaFeatureCounterArray[basketCounter][
        localTemplatePizzaFeatureHolder[x]
      ] = 0;
    }
  }
  if (addAnItem) {
    currentItem = basketCounter;
    basketItemCounter++;
  }
  basketCounter++;
  if (!addAnItem) {
    basketCounter = basketCounterHolder;
  }
}
function addModifier(localModifierID, isThisADefaultModifier) {
  const localHolder = localModifierID.split("---");
  const localGroupID = localHolder[2];
  const dropDownValue = localHolder[0].split("_");
  const addModifierID = parseInt(dropDownValue[0]);
  const thisModifierCounter =
    globalCalculatorItemsArray[currentItem].addedModifierCounter;
  let addThisModifier = true;
  let tempUserQuantity = 1;
  let tempIndex = 0;
  if (!isThisADefaultModifier) {
    if (thisModifierCounter > 0) {
      let alreadyIncluded = false;
      for (let x = 0; x < thisModifierCounter; x++) {
        if (
          parseInt(
            globalCalculatorItemsAddedModifierArray[currentItem][x].modifierID
          ) === addModifierID
        ) {
          alreadyIncluded = true;
          addThisModifier = false;
          break;
        }
      }
      if (!alreadyIncluded) {
        tempIndex = thisModifierCounter;
      }
    }
    if (groupsData[localGroupID].enable_portions === 1) {
      if (
        groupsData[localGroupID].portions[1].active === 1 &&
        groupsData[localGroupID].portions[1].selected === 1
      ) {
        tempUserQuantity = groupsData[localGroupID].portions[1].multiplier;
      } else if (
        groupsData[localGroupID].portions[3].active === 1 &&
        groupsData[localGroupID].portions[3].selected === 1
      ) {
        tempUserQuantity = groupsData[localGroupID].portions[3].multiplier;
      } else {
        tempUserQuantity = groupsData[localGroupID].portions[2].multiplier;
      }
    }
  } else {
    if (groupsData[localGroupID].enable_portions === 1) {
      if (
        groupsData[localGroupID].portions[1].active === 1 &&
        groupsData[localGroupID].portions[1].selected === 1
      ) {
        tempUserQuantity = groupsData[localGroupID].portions[1].multiplier;
      } else if (
        groupsData[localGroupID].portions[3].active === 1 &&
        groupsData[localGroupID].portions[3].selected === 1
      ) {
        tempUserQuantity = groupsData[localGroupID].portions[3].multiplier;
      } else {
        tempUserQuantity = groupsData[localGroupID].portions[2].multiplier;
      }
    } else {
      const holderUserQuantity =
        itemDefaultModifiersData[
          globalCalculatorItemsArray[currentItem].itemID
        ][addModifierID].quantity;
      if (holderUserQuantity !== undefined && holderUserQuantity > 0) {
        tempUserQuantity = holderUserQuantity;
      }
    }
    tempIndex = thisModifierCounter;
  }
  if (addThisModifier) {
    globalCalculatorItemsAddedModifierArray[currentItem][tempIndex] = {
      modifierID: addModifierID,
      userQuantity: tempUserQuantity,
      templateModifier: roundLoDashMain(dropDownValue[1], 3),
      selectID: localHolder[1],
      modifierGroupID: localGroupID,
      modifierTemplateID: localHolder[3],
    };
    globalCalculatorItemsAddedModifierQtyArray[currentItem][addModifierID] = 1;
    globalCalculatorItemsArray[currentItem].addedModifierCounter++;
    if (
      globalDividedEvenlyFeatureArray[currentItem] !== undefined &&
      globalDividedEvenlyFeatureArray[currentItem][localGroupID] !== undefined
    ) {
      globalDividedEvenlyFeatureArray[currentItem][localGroupID] +=
        tempUserQuantity;
      globalDividedEvenlyFeatureCounterArray[currentItem][localGroupID]++;
    }
    if (
      globalPizzaFeatureCounterArray[currentItem] !== undefined &&
      globalPizzaFeatureCounterArray[currentItem][localGroupID] !== undefined
    ) {
      globalPizzaFeatureCounterArray[currentItem][localGroupID]++;
    }
  }
  if (localGroupID > 0 && groupModifiersData[localGroupID].length < 2) {
    $modifier_category_div.find(".ingrCatDropDown").dropdownchecklist("close");
  }
}
function updateModifierInfo(
  localItemID,
  localModifierID,
  localModifier,
  localModifierIndex
) {
  const itemIDHolder = globalCalculatorItemsArray[localItemID].itemID;
  let systemServingSize = undefined;
  if (
    itemDefaultModifiersData[itemIDHolder] !== undefined &&
    itemDefaultModifiersData[itemIDHolder][localModifierID] !== undefined
  ) {
    systemServingSize =
      itemDefaultModifiersData[itemIDHolder][localModifierID].serving_size;
  }
  if (systemServingSize === undefined || systemServingSize <= 0) {
    systemServingSize = 1;
  }
  const localGroupID =
    globalCalculatorItemsAddedModifierArray[localItemID][localModifierIndex]
      .modifierGroupID;
  let divide_evenly = 1;
  let divide_temp = 0;
  let localDividedEvenlyCounter = 0;
  let dividedEvenlyDifference = 0;
  if (globalDividedEvenlyFeatureArray[localItemID] !== undefined) {
    divide_temp = parseFloat(
      globalDividedEvenlyFeatureArray[localItemID][localModifierIndex]
    );
    localDividedEvenlyCounter =
      globalDividedEvenlyFeatureCounterArray[localItemID][localGroupID];
    dividedEvenlyDifference =
      localDividedEvenlyCounter -
      globalDividedEvenlyFeatureZeroArray[localItemID][localGroupID];
  }
  if (
    divide_temp > 0 &&
    localDividedEvenlyCounter > 1 &&
    dividedEvenlyDifference !== 1
  ) {
    divide_evenly = 1 / divide_temp;
  }
  let groupModifierMultiplier = undefined;
  if (
    groupModifiersMultiplierValueData[localGroupID] !== undefined &&
    groupModifiersMultiplierValueData[localGroupID][localModifierID] !==
    undefined
  ) {
    groupModifierMultiplier =
      groupModifiersMultiplierValueData[localGroupID][localModifierID]
        .multiplier;
  }
  if (groupModifierMultiplier === undefined || groupModifierMultiplier <= 0) {
    groupModifierMultiplier = 1;
  }
  let pizza_feature = 1;
  if (
    globalPizzaFeatureCounterArray[localItemID] !== undefined &&
    globalPizzaFeatureCounterArray[localItemID][localGroupID] >= 1 &&
    groupsData[localGroupID].pizza_multiplier_enabled === 1 &&
    globalPizzaFeatureCounterArray[localItemID][localGroupID] >=
    groupsData[localGroupID].pizza_multiplier_count_threshold &&
    groupsData[localGroupID].pizza_multiplier_value > 0
  ) {
    pizza_feature = groupsData[localGroupID].pizza_multiplier_value;
  }
  const newMod = parseFloat(
    localModifier *
    globalCalculatorItemsAddedModifierArray[localItemID][localModifierIndex]
      .templateModifier *
    systemServingSize *
    groupModifierMultiplier *
    divide_evenly *
    pizza_feature
  );
  let newModifierInfo =
    '<ul><li class="title">' +
    modifiersData[localModifierID].name
      .replace("'", "&#39;")
      .replace('"', "&#34;") +
    "</li>";
  if (
    locationPreferencesData.hide_calc_info_servings_detail === 0 &&
    parseFloat(modifiersData[localModifierID].serving_unit_quantity) > 0 &&
    modifiersData[localModifierID].serving_unit_name !== "" &&
    modifiersData[localModifierID].serving_unit_name !== null
  ) {
    newModifierInfo +=
      "<li>" +
      textServingForCalculatorLabel +
      " " +
      removeUnnecessaryDecimal(
        roundLoDashMain(
          modifiersData[localModifierID].serving_unit_quantity * newMod,
          1
        )
      ) +
      " " +
      modifiersData[localModifierID].serving_unit_name
        .replace("'", "&#39;")
        .replace('"', "&#34;");
    if (
      show_calculator_info_serving_weight === 1 &&
      modifiersData[localModifierID].serving_weight > 0
    ) {
      newModifierInfo +=
        " (" +
        Math.round(modifiersData[localModifierID].serving_weight * newMod) +
        "g)";
    }
    newModifierInfo += "</li>";
  }
  if (
    locationPreferencesData.calories === 1 &&
    locationPreferencesData.calories_na === 1
  ) {
    let modifierTooltipValue = modifiersData[localModifierID].calories * newMod;
    if (locationPreferencesData.label_display_version !== 3) {
      modifierTooltipValue = roundCalories(modifierTooltipValue);
    } else {
      let toFixedValue = 1;
      if (locationPreferencesData.allow_rounding === 1) {
        toFixedValue = 0;
      }
      modifierTooltipValue = roundLoDashMain(
        modifierTooltipValue,
        toFixedValue
      );
    }
    newModifierInfo +=
      "<li>" +
      labelAndHeaderTextCalories +
      (parseInt(locationPreferencesData.label_display_version) === 3
        ? " (kcal)"
        : "") +
      ": " +
      removeUnnecessaryDecimal(modifierTooltipValue) +
      "</li>";
  }
  if (
    locationPreferencesData.total_fat === 1 &&
    locationPreferencesData.total_fat_na === 1
  ) {
    let modifierTooltipValue = roundFat(
      modifiersData[localModifierID].total_fat * newMod
    );
    if (locationPreferencesData.label_display_version === 3) {
      modifierTooltipValue = roundForUKLabelTotalFatCarbsSugarFiberProtein(
        modifiersData[localModifierID].total_fat * newMod
      );
    }
    newModifierInfo +=
      "<li>" +
      labelAndHeaderTextTotalFat +
      ": " +
      removeUnnecessaryDecimal(modifierTooltipValue) +
      "g</li>";
  }
  if (
    locationPreferencesData.saturated_fat === 1 &&
    locationPreferencesData.saturated_fat_na === 1
  ) {
    let modifierTooltipValue = roundFat(
      modifiersData[localModifierID].saturated_fat * newMod
    );
    if (locationPreferencesData.label_display_version === 3) {
      modifierTooltipValue = roundForUKLabelSatFat(
        modifiersData[localModifierID].saturated_fat * newMod
      );
    }
    newModifierInfo +=
      "<li>" +
      labelAndHeaderTextSatFatForCalcu +
      ": " +
      removeUnnecessaryDecimal(modifierTooltipValue) +
      "g</li>";
  }
  if (
    locationPreferencesData.cholesterol === 1 &&
    locationPreferencesData.cholesterol_na === 1 &&
    locationPreferencesData.label_display_version !== 3
  ) {
    newModifierInfo +=
      "<li>" +
      labelAndHeaderTextCholesterol +
      ": " +
      removeUnnecessaryDecimal(
        roundCholesterol(modifiersData[localModifierID].cholesterol * newMod)
      ) +
      "mg</li>";
  }
  if (
    locationPreferencesData.sodium === 1 &&
    locationPreferencesData.sodium_na === 1
  ) {
    let unitText = "mg";
    let modifierTooltipValue = roundSodium(
      modifiersData[localModifierID].sodium * newMod
    );
    if (locationPreferencesData.label_display_version === 3) {
      modifierTooltipValue = roundForUKLabelSalt(
        modifiersData[localModifierID].sodium * 0.0025 * newMod
      );
      unitText = "g";
    }
    newModifierInfo +=
      "<li>" +
      labelAndHeaderTextSodium +
      ": " +
      removeUnnecessaryDecimal(modifierTooltipValue) +
      unitText +
      "</li>";
  }
  if (
    locationPreferencesData.total_carb === 1 &&
    locationPreferencesData.total_carb_na === 1
  ) {
    let modifierTooltipValue = roundCarbFiberSugarProtein(
      modifiersData[localModifierID].total_carb * newMod
    );
    if (locationPreferencesData.label_display_version === 3) {
      modifierTooltipValue = roundForUKLabelTotalFatCarbsSugarFiberProtein(
        modifiersData[localModifierID].total_carb * newMod
      );
    }
    newModifierInfo +=
      "<li>" +
      labelAndHeaderTextTotalCarbForCalcu +
      ": " +
      removeUnnecessaryDecimal(modifierTooltipValue) +
      "g</li>";
  }
  if (
    locationPreferencesData.fibers === 1 &&
    locationPreferencesData.fibers_na === 1
  ) {
    let modifierTooltipValue = roundCarbFiberSugarProtein(
      modifiersData[localModifierID].fibers * newMod
    );
    if (locationPreferencesData.label_display_version === 3) {
      modifierTooltipValue = roundForUKLabelTotalFatCarbsSugarFiberProtein(
        modifiersData[localModifierID].fibers * newMod
      );
    }
    newModifierInfo +=
      "<li>" +
      labelAndHeaderTextFibersForCalcu +
      ": " +
      removeUnnecessaryDecimal(modifierTooltipValue) +
      "g</li>";
  }
  if (
    locationPreferencesData.sugars === 1 &&
    locationPreferencesData.sugars_na === 1
  ) {
    let modifierTooltipValue = roundCarbFiberSugarProtein(
      modifiersData[localModifierID].sugars * newMod
    );
    if (locationPreferencesData.label_display_version === 3) {
      modifierTooltipValue = roundForUKLabelTotalFatCarbsSugarFiberProtein(
        modifiersData[localModifierID].sugars * newMod
      );
    }
    newModifierInfo +=
      "<li>" +
      labelAndHeaderTextSugars +
      ": " +
      removeUnnecessaryDecimal(modifierTooltipValue) +
      "g</li>";
  }
  if (
    locationPreferencesData.sugar_alcohol === 1 &&
    locationPreferencesData.sugar_alcohol_na === 1 &&
    locationPreferencesData.label_display_version !== 3
  ) {
    newModifierInfo +=
      "<li>" +
      labelAndHeaderTextSugarAlcohol +
      ": " +
      removeUnnecessaryDecimal(
        roundCarbFiberSugarProtein(
          modifiersData[localModifierID].sugar_alcohol * newMod
        )
      ) +
      "g</li>";
  }
  if (
    locationPreferencesData.protein === 1 &&
    locationPreferencesData.protein_na === 1
  ) {
    let modifierTooltipValue = roundCarbFiberSugarProtein(
      modifiersData[localModifierID].protein * newMod
    );
    if (locationPreferencesData.label_display_version === 3) {
      modifierTooltipValue = roundForUKLabelTotalFatCarbsSugarFiberProtein(
        modifiersData[localModifierID].protein * newMod
      );
    }
    newModifierInfo +=
      "<li>" +
      labelAndHeaderTextProteins +
      ": " +
      removeUnnecessaryDecimal(modifierTooltipValue) +
      "g</li>";
  }
  newModifierInfo += "</ul>";
  if (locationPreferencesData.enable_allergen_on_the_calculator === 1) {
    if (modifiersData[localModifierID].allergen_contains !== "") {
      newModifierInfo +=
        '<span class="modifier-allergens">' +
        "<strong>Contains:</strong> " +
        modifiersData[localModifierID].allergen_contains +
        ".</span>";
    }
    if (
      locationPreferencesData.show_cross_contact_on_allergen_page === 1 &&
      modifiersData[localModifierID].allergen_contains_Cross_Contact === 1
    ) {
      if (modifiersData[localModifierID].allergen_contains !== "") {
        newModifierInfo += "<br/>";
      }
      newModifierInfo +=
        '<span class="modifier-allergens"><strong>' +
        (modifiersData[localModifierID].allergen_contains_cross_contact_desc !==
          null &&
          String(
            modifiersData[localModifierID].allergen_contains_cross_contact_desc
          ) !== ""
          ? modifiersData[localModifierID].allergen_contains_cross_contact_desc
          : "Risk of possible contamination due to cooking method") +
        ".</strong></span>";
    }
  }
  $("#ingrInfo-" + localItemID + "-" + localModifierID).attr(
    "data-tooltip",
    newModifierInfo
  );
}
function updateStaticItemTooltip(localItemID, newQuantity) {
  const itemIDHolder = globalCalculatorItemsArray[localItemID].itemID;
  let newModifierInfo =
    '<ul><li class="title">' +
    itemsData[itemIDHolder].name.replace("'", "&#39;").replace('"', "&#34;") +
    "</li>";
  if (
    locationPreferencesData.hide_calc_info_servings_detail === 0 &&
    parseFloat(itemsData[itemIDHolder].serving_unit_quantity) > 0 &&
    itemsData[itemIDHolder].serving_unit_name !== "" &&
    itemsData[itemIDHolder].serving_unit_name !== null
  ) {
    newModifierInfo +=
      "<li>" +
      textServingForCalculatorLabel +
      " " +
      removeUnnecessaryDecimal(
        roundLoDashMain(
          itemsData[itemIDHolder].serving_unit_quantity * newQuantity,
          1
        )
      ) +
      " " +
      itemsData[itemIDHolder].serving_unit_name
        .replace("'", "&#39;")
        .replace('"', "&#34;") +
      "</li>";
  }
  $("#static-item-" + localItemID).attr(
    "title",
    newModifierInfo +
    "<li>" +
    labelAndHeaderTextCalories +
    ": " +
    removeUnnecessaryDecimal(
      roundCalories(itemsData[itemIDHolder].calories * newQuantity)
    ) +
    "</li>" +
    "<li>" +
    labelAndHeaderTextTotalFat +
    ": " +
    removeUnnecessaryDecimal(
      roundFat(itemsData[itemIDHolder].total_fat * newQuantity)
    ) +
    "g" +
    "</li>" +
    "<li>" +
    labelAndHeaderTextSatFatForCalcu +
    ": " +
    removeUnnecessaryDecimal(
      roundFat(itemsData[itemIDHolder].saturated_fat * newQuantity)
    ) +
    "g" +
    "</li>" +
    "<li>" +
    labelAndHeaderTextCholesterol +
    ": " +
    removeUnnecessaryDecimal(
      roundCholesterol(itemsData[itemIDHolder].cholesterol * newQuantity)
    ) +
    "mg" +
    "</li>" +
    "<li>" +
    labelAndHeaderTextSodium +
    ": " +
    removeUnnecessaryDecimal(
      roundSodium(itemsData[itemIDHolder].sodium * newQuantity)
    ) +
    "mg" +
    "</li>" +
    "<li>" +
    labelAndHeaderTextTotalCarbForCalcu +
    ": " +
    removeUnnecessaryDecimal(
      roundCarbFiberSugarProtein(
        itemsData[itemIDHolder].total_carb * newQuantity
      )
    ) +
    "g" +
    "</li>" +
    "<li>" +
    labelAndHeaderTextFibersForCalcu +
    ": " +
    removeUnnecessaryDecimal(
      roundCarbFiberSugarProtein(itemsData[itemIDHolder].fibers * newQuantity)
    ) +
    "g" +
    "</li>" +
    "<li>" +
    labelAndHeaderTextSugars +
    ": " +
    removeUnnecessaryDecimal(
      roundCarbFiberSugarProtein(itemsData[itemIDHolder].sugars * newQuantity)
    ) +
    "g" +
    "</li>" +
    "<li>" +
    labelAndHeaderTextSugarAlcohol +
    ": " +
    removeUnnecessaryDecimal(
      roundCarbFiberSugarProtein(
        itemsData[itemIDHolder].sugar_alcohol * newQuantity
      )
    ) +
    "g" +
    "</li>" +
    "<li>" +
    labelAndHeaderTextProteins +
    ": " +
    removeUnnecessaryDecimal(
      roundCarbFiberSugarProtein(
        itemsData[itemIDHolder].protein * newQuantity
      )
    ) +
    "g" +
    "</li>" +
    "</ul>"
  );
}
function triggerSave() {
  if (
    (webname === "firebirds-wood-fired-grill" || webname === "papa-murphys") &&
    $.browser.chrome
  ) {
    $shareURL.focus();
  } else {
    $shareURL.focus().select();
  }
  if (parseInt(isThisPreview) === 1) {
    showMessage.warning({
      text: ["This function is not available for the preview calculator"],
      autoClose: true,
    });
  } else {
    if (basketItemCounter === 0) {
      showMessage.warning({
        text: [desktopCalculatorJsBuildMealFirst + "!"],
        autoClose: true,
      });
    } else {
      let allowSave = false;
      for (let x = 1; x < basketCounter; x++) {
        if (globalCalculatorItemsArray[x].itemID > 0) {
          allowSave = true;
          break;
        }
      }
      if (!allowSave) {
        showMessage.warning({
          text: [desktopCalculatorJsBuildMealFirst + "!"],
          autoClose: true,
        });
      } else {
        const savedJSData = getSaveData();
        const savedCalorieIntake = $calorieIntake.val();
        if (globalUserID > 0) {
          $.cookie("nix_saved_meal", null, { expires: -7, path: "/" });
          saveMeal(savedJSData, savedCalorieIntake);
        } else {
          if ($.cookie("nix_last_saved_meal") === null) {
            saveMeal(savedJSData, savedCalorieIntake);
          } else {
            $.post(
              getServerTimeUrl,
              { getServerTime: "set" },
              function (resultTime) {
                if (
                  parseInt(resultTime.server_time) -
                  parseInt($.cookie("nix_last_saved_meal")) <
                  5
                ) {
                  showMessage.error({
                    text: [desktopCalculatorJsWaitBeforeSaving],
                    autoClose: true,
                  });
                } else {
                  saveMeal(savedJSData, savedCalorieIntake);
                }
              }
            );
          }
        }
      }
    }
  }
}
function buildFullNutrientsArray(data) {
  let apiName,
    nutrient,
    fullNutrients = [],
    value;
  for (apiName in nutrientsMap) {
    if (nutrientsMap.hasOwnProperty(apiName)) {
      value = null;
      if (apiName in data && data[apiName] !== null) {
        value = data[apiName];
      } else if (
        nutrientsMap[apiName].attr_id in data &&
        data[nutrientsMap[apiName].attr_id] !== null
      ) {
        value = data[nutrientsMap[apiName].attr_id];
      }
      if (value !== null) {
        nutrient = JSON.parse(JSON.stringify(nutrientsMap[apiName]));
        nutrient.value = value;
        fullNutrients.push(nutrient);
      }
    }
  }
  return fullNutrients;
}
function getAParamForTheQRLink(localObject) {
  let toReturn = new Array();
  let counter = 0;
  $(localObject).each(function (index, singleObject) {
    toReturn[counter] =
      singleObject.attr_id.toString() + ":" + singleObject.value.toString();
    counter++;
  });
  return toReturn.join();
}
function loadTheApiData() {
  const mainDropdownData = API.getData("mainDropdown");
  itemsData = API.getData("items");
  modifiersData = API.getData("ingredients");
  groupsData = API.getData("groups");
  templatesData = API.getData("templates");
  categoriesData = API.getData("categories");
  categoryItemsData = API.getData("categoryItems");
  itemModifiersData = API.getData("itemIngredients");
  templateGroupsData = API.getData("templateGroups");
  const templateGroupsDivideEvenlyString = API.getData(
    "templateGroupsDivideEvenlyString"
  );
  templateGroupsDivideEvenlyFeatureIndexData = API.getData(
    "templateGroupsDivideEvenly"
  );
  const templateGroupsPizzaFeatureString = API.getData(
    "templateGroupsPizzaFeatureString"
  );
  templateGroupsPizzaFeatureIndexData = API.getData(
    "templateGroupsPizzaFeature"
  );
  templateGroupMultipliersData = API.getData("templateGroupMultipliers");
  groupModifiersData = API.getData("groupIngredients");
  groupModifiersMaxValueData = API.getData("groupIngredientsMaxValue");
  groupModifiersMultiplierValueData = API.getData(
    "groupIngredientsMultiplierValue"
  );
  const groupModifiersDividedEvenlyStringData = API.getData(
    "groupIngredientsDividedEvenlyString"
  );
  groupModifierDividedEvenlyFeatureIndexData = API.getData(
    "groupIngredientsDividedEvenly"
  );
  const groupModifiersPizzaFeatureStringData = API.getData(
    "groupIngredientsPizzaFeatureString"
  );
  groupModifierPizzaFeatureIndexData = API.getData(
    "groupIngredientsPizzaFeature"
  );
  templateItemsData = API.getData("templateItems");
  itemDefaultModifiersData = API.getData("itemDefaultIngredients");
  const groupIDForDivideEvenlyLocal = eval(templateGroupsDivideEvenlyString[0]);
  templateGroupsDivideEvenlyFeatureIndexCount =
    groupIDForDivideEvenlyLocal.length;
  for (let x = 0; x < templateGroupsDivideEvenlyFeatureIndexCount; x++) {
    templateGroupsDivideEvenlyFeatureData[groupIDForDivideEvenlyLocal[x]] =
      eval(
        templateGroupsDivideEvenlyFeatureIndexData[
        groupIDForDivideEvenlyLocal[x]
        ]
      );
  }
  const groupIDForPizzaLocal = eval(templateGroupsPizzaFeatureString[0]);
  const templateGroupsPizzaIndexCount = groupIDForPizzaLocal.length;
  for (let x = 0; x < templateGroupsPizzaIndexCount; x++) {
    templateGroupsPizzaFeatureData[groupIDForPizzaLocal[x]] = eval(
      templateGroupsPizzaFeatureIndexData[groupIDForPizzaLocal[x]]
    );
  }
  const selectIDLocalForDividedEvenly = eval(
    groupModifiersDividedEvenlyStringData[0]
  );
  groupModifierDividedEvenlyFeatureIndexCount =
    selectIDLocalForDividedEvenly.length;
  for (let x = 0; x < groupModifierDividedEvenlyFeatureIndexCount; x++) {
    groupModifierDividedEvenlyFeatureData[selectIDLocalForDividedEvenly[x]] =
      eval(
        groupModifierDividedEvenlyFeatureIndexData[
        selectIDLocalForDividedEvenly[x]
        ]
      );
  }
  const selectIDLocalForPizza = eval(groupModifiersPizzaFeatureStringData[0]);
  groupModifierPizzaFeatureIndexCount = selectIDLocalForPizza.length;
  for (let x = 0; x < groupModifierPizzaFeatureIndexCount; x++) {
    groupModifierPizzaFeatureData[selectIDLocalForPizza[x]] = eval(
      groupModifierPizzaFeatureIndexData[selectIDLocalForPizza[x]]
    );
  }
  if (isThisPremium === 1) {
    animateBG = "#" + $(".calc .select_inner").css("background-color");
  } else {
    highlightColor = "#B5EF89";
    highlightColorNoHash = "B5EF89";
  }
  let loadDataIsValid = false;
  if (loadData !== "") {
    const tempLoadData = loadData.split("-");
    const loadDataItemID = parseInt(tempLoadData[0]);
    const loadDataGroupID = parseInt(tempLoadData[1]);
    const loadDataModifierID = parseInt(tempLoadData[2]);
    loadDataIsValid = false;
    if (
      itemsData[loadDataItemID] !== undefined &&
      groupsData[loadDataGroupID] !== undefined &&
      groupsData[loadDataGroupID].multiple_select === 0 &&
      modifiersData[loadDataModifierID] !== undefined
    ) {
      let continueLoop = true;
      $(groupModifiersData[loadDataGroupID]).each(function (index, gi) {
        if (continueLoop && gi.ingredient_id === loadDataModifierID) {
          loadDataIsValid = true;
          continueLoop = false;
        }
      });
      if (loadDataIsValid) {
        loadDataIsValid = false;
        let continueLoop = true;
        $(templateGroupsData[itemsData[loadDataItemID].template_id]).each(
          function (index, tg) {
            if (continueLoop && tg.group_id === loadDataGroupID) {
              loadDataIsValid = true;
              continueLoop = false;
            }
          }
        );
        if (loadDataIsValid) {
          loadDataIsValid = false;
          let continueLoop = true;
          $(itemModifiersData[loadDataItemID]).each(function (index, ii) {
            if (continueLoop && ii.ingredient_id === loadDataModifierID) {
              loadDataIsValid = true;
              continueLoop = false;
            }
          });
        } else {
          loadDataIsValid = false;
        }
      } else {
        loadDataIsValid = false;
      }
    }
    if (
      loadDataIsValid &&
      !(
        itemDefaultModifiersData[loadDataItemID][loadDataModifierID] !==
        undefined
      )
    ) {
      $(groupModifiersData[loadDataGroupID]).each(function (index, gi) {
        if (
          itemDefaultModifiersData[loadDataItemID][gi.ingredient_id] !==
          undefined
        ) {
          delete itemDefaultModifiersData[loadDataItemID][gi.ingredient_id];
        }
      });
      itemDefaultModifiersData[loadDataItemID][loadDataModifierID] = {
        quantity: 2,
        serving_size: 3,
      };
    }
  }
  let addedDropdown = "";
  let categoriesMarkedPreviewOnly = new Array();
  let categoriesMarkedPreviewOnlyCounter = 0;
  $(mainDropdownData).each(function (index, item) {
    if (
      isThisPreview === 1 ||
      (isThisPreview === 0 && item.preview_only === 0)
    ) {
      addedDropdown +=
        '<option value="' + item.id + '">' + item.name + "</option>";
    }
    if (item.preview_only === 1) {
      categoriesMarkedPreviewOnly[categoriesMarkedPreviewOnlyCounter] =
        parseInt(item.id);
      categoriesMarkedPreviewOnlyCounter++;
    }
  });
  $item_category_id.append(addedDropdown).show();
  if (parseInt($("#savedValue").val()) > 0) {
    autoAddAnItem = false;
    eval($("#savedActualValue").val());
    updateCurrentItemValue();
    $calorieDiet.html($loadCalorieIntake.val().split("-")[1]);
    $calorieIntakeText.val($loadCalorieIntake.val().split("-")[1]);
    $calorieIntake.val($loadCalorieIntake.val());
    finishLoadingAMeal();
  } else if (parseInt($loadMeal.val()) !== 1) {
    if (globalUserID > 0) {
      $calorieIntakeText.val(dbDietValue);
      $calorieDiet.html(dbDietValue);
    } else if (parseInt($.cookie("nix_calorie_diet")) > 0) {
      $calorieIntakeText.val($.cookie("nix_calorie_diet"));
      $calorieDiet.html($.cookie("nix_calorie_diet"));
    } else {
      $calorieIntakeText.val("2000");
      $calorieDiet.html("2000");
    }
    $form_calorieDiet.val($calorieIntakeText.val());
    finishLoading();
  }
  if (parseInt($loadMeal.val()) === 1) {
    forCalculator = false;
    $calorieIntake = $("#calorieIntakeV2");
    eval($("#mealValue").val());
    updateCurrentItemValue();
    if (globalCalculatorItemsArray[currentItem].itemID > 0) {
      $calorieDiet.html($calorieIntake.val().split("-")[1]);
      $form_calorieDiet.val($calorieIntake.val().split("-")[1]);
      writeSavedItems();
      updateCalculator(0);
      for (let x = 1; x <= loadMealCount; x++) {
        $col2ID.find(".ingredientUL-" + x + " li:first").addClass("first");
        $col2ID.find(".ingredientUL-" + x + " li:last").addClass("last");
      }
    }
    $colsWrap
      .find(".custom-meal")
      .find("dt")
      .click(function () {
        const dd = $(this).next("dd").find("ul");
        const trigger = dd.parent().prev("dt").find(".trigger");
        if (dd.is(":hidden")) {
          trigger.addClass("open");
          dd.slideDown();
        } else {
          trigger.removeClass("open");
          dd.slideUp();
        }
      });
  }
  $calorieIntake.val(
    roundLoDashMain($calorieIntakeText.val() / 2000, 2) +
    "-" +
    $calorieIntakeText.val()
  );
  let menuItemAutoCompleteCounter = 0;
  $.each(itemsData, function (index, value) {
    if ($.inArray(value.category_id, categoriesMarkedPreviewOnly) < 0) {
      menuItemAutoComplete[menuItemAutoCompleteCounter] = {
        label: value.name,
        value: "",
        category_id: value.category_id,
        item_id: index,
      };
      menuItemAutoCompleteCounter++;
    }
  });
  $(".item_autocomplete").autocomplete({
    minLength: 2,
    autoFocus: true,
    delay: 0,
    focus: function () {
      return false;
    },
    select: function (event, ui) {
      autoCompleteItemID = ui.item.item_id;
      let alreadyCompleted = false;
      $.each(globalCalculatorItemsArray, function (index, value) {
        if (value !== undefined) {
          if (parseInt(autoCompleteItemID) === parseInt(value.itemID)) {
            removeAnItem(index, false, ui.item.category_id);
            alreadyCompleted = true;
            return false;
          }
        }
      });
      if (!alreadyCompleted) {
        $("#item_category_id").val(ui.item.category_id).trigger("change");
        if (isThisNotLocal === 1) {
          window.ga &&
            ga(
              "send",
              "event",
              "Calculator",
              "Used calculator search",
              ui.item.label
            );
        } else {
          console.log(
            "google analytics local test for the search feature => " +
            ui.item.label
          );
        }
      }
    },
    source: processAutoCompleteSearch,
  });
  $item_category_id.attr("disabled", false);
  if (parseInt(enable_calculator_focus_on_load) === 1) {
    $item_category_id.focus();
  }
  $("#standalone-loader").hide();
}
function processAutoCompleteSearch(request, response) {
  let toBeReturned = Array();
  let toBeReturnedCounter = 0;
  if (!request.term.trim().includes(" ")) {
    $.each(menuItemAutoComplete, function (index, value) {
      if (value.label.toLowerCase().includes(request.term.toLowerCase())) {
        toBeReturned[toBeReturnedCounter] = value;
        toBeReturnedCounter++;
      }
    });
  } else {
    const newRequest = request.term.split(" ");
    const newRequestCounter = newRequest.length;
    $.each(menuItemAutoComplete, function (index, value) {
      let searchMatchCounter = 0;
      const newLabel = value.label.split(" ");
      const newLabelCounter = newLabel.length;
      for (let newLabelZ = 0; newLabelZ < newLabelCounter; newLabelZ++) {
        for (
          let newRequestX = 0;
          newRequestX < newRequestCounter;
          newRequestX++
        ) {
          if (
            newLabel[newLabelZ]
              .toLowerCase()
              .includes(newRequest[newRequestX].toLowerCase())
          ) {
            searchMatchCounter++;
          }
        }
      }
      if (searchMatchCounter >= newRequestCounter) {
        toBeReturned[toBeReturnedCounter] = value;
        toBeReturnedCounter++;
      }
    });
  }
  response(toBeReturned);
}
function updateCalculator(blink) {
  let calories = 0;
  let fat_calories = 0;
  let total_fat = 0;
  let saturated_fat = 0;
  let trans_fat = 0;
  let polyunsaturated_fat = 0;
  let monounsaturated_fat = 0;
  let cholesterol = 0;
  let sodium = 0;
  let total_carb = 0;
  let fibers = 0;
  let sugars = 0;
  let sugar_alcohol = 0;
  let protein = 0;
  let vitamin_a = 0;
  let vitamin_c = 0;
  let calcium = 0;
  let iron = 0;
  let servings = 0;
  let added_sugars = 0;
  let vitamin_d = 0;
  let potassium = 0;
  let caffeine = 0;
  let serving_weight = 0;
  let calcium_mg_for_2018 = 0;
  let iron_mg_for_2018 = 0;
  let modifierList = Array();
  let modifierListCounter = 0;
  let itemList = Array();
  let itemListForModifiers = Array();
  let itemListStaticModifiers = Array();
  let basketItemModifiers = Array();
  let itemCount = Array();
  let itemServingInfo = Array();
  let itemCounter = 0;
  let itemCounterForModifiers = 0;
  let updateBasketItemCount = 0;
  let basketItemCounter = -1;
  let mealAllergenOnLabelHTML = "";
  let unrounded_calories;
  let unrounded_fat_calories;
  let unrounded_total_fat;
  let unrounded_saturated_fat;
  let unrounded_trans_fat;
  let unrounded_polyunsaturated_fat;
  let unrounded_monounsaturated_fat;
  let unrounded_cholesterol;
  let unrounded_sodium;
  let unrounded_total_carb;
  let unrounded_fibers;
  let unrounded_sugars;
  let unrounded_protein;
  let unrounded_vitamin_a;
  let unrounded_vitamin_c;
  let unrounded_calcium;
  let unrounded_iron;
  let modifierListHTMLForLabel;
  let modifierListHTMLForLabelPrintVersion;
  let qtyForConnect;
  let unitForConnect;
  let nameForConnect;
  $(allergenMap).each(function (index, singleObject) {
    eval("basket_" + singleObject + " = undefined;");
  });
  let localGorMkValueForTheUkLabel = -1;
  let localGorMkValueConflictDetected = false;
  let cross_contact_desc_count;
  let cross_contact_desc_final;
  for (let x = 1; x < basketCounter; x++) {
    if (globalCalculatorItemsArray[x].itemID > 0) {
      const itemIDHolder = globalCalculatorItemsArray[x].itemID;
      const localItemQuantity = globalCalculatorItemsArray[x].quantity;
      if (localGorMkValueForTheUkLabel === -1) {
        localGorMkValueForTheUkLabel =
          parseInt(itemsData[itemIDHolder].use_ml_on_uk_label) === 1
            ? "ml"
            : "g";
      } else if (!localGorMkValueConflictDetected) {
        if (
          (localGorMkValueForTheUkLabel === "g" &&
            parseInt(itemsData[itemIDHolder].use_ml_on_uk_label) === 1) ||
          (localGorMkValueForTheUkLabel === "ml" &&
            parseInt(itemsData[itemIDHolder].use_ml_on_uk_label) !== 1)
        ) {
          localGorMkValueConflictDetected = true;
        }
      }
      updateBasketItemCount++;
      basketItemCounter++;
      basketItemModifiers[basketItemCounter] = Array();
      itemListStaticModifiers[itemCounter] =
        itemsData[itemIDHolder].static_ingredients;
      itemListForModifiers[itemCounterForModifiers] =
        itemsData[itemIDHolder].name;
      itemCounterForModifiers++;
      const itemIndex = jQuery.inArray(itemsData[itemIDHolder].name, itemList);
      if (itemIndex === -1) {
        itemList[itemCounter] = itemsData[itemIDHolder].name;
        itemCount[itemCounter] = localItemQuantity;
        itemServingInfo[itemCounter] = {
          serving_per_container: itemsData[itemIDHolder].serving_per_container,
          serving_unit_quantity: itemsData[itemIDHolder].serving_unit_quantity,
          serving_unit_name: itemsData[itemIDHolder].serving_unit_name,
          serving_weight: itemsData[itemIDHolder].serving_weight,
        };
        itemCounter++;
      } else {
        itemCount[itemIndex] =
          parseFloat(itemCount[itemIndex]) + parseFloat(localItemQuantity);
      }
      let iconModifier = "";
      let item_calories = 0;
      let item_fat_calories = 0;
      let item_total_fat = 0;
      let item_saturated_fat = 0;
      let item_trans_fat = 0;
      let item_polyunsaturated_fat = 0;
      let item_monounsaturated_fat = 0;
      let item_cholesterol = 0;
      let item_sodium = 0;
      let item_total_carb = 0;
      let item_fibers = 0;
      let item_sugars = 0;
      let item_sugar_alcohol = 0;
      let item_protein = 0;
      let item_vitamin_a = 0;
      let item_vitamin_c = 0;
      let item_calcium = 0;
      let item_iron = 0;
      let item_servings = 0;
      let item_added_sugars = 0;
      let item_vitamin_d = 0;
      let item_potassium = 0;
      let item_caffeine = 0;
      let item_serving_weight = 0;
      let item_calcium_mg_for_2018 = 0;
      let item_iron_mg_for_2018 = 0;
      const addedModifierCounter =
        globalCalculatorItemsArray[x].addedModifierCounter;
      $(allergenMap).each(function (index, singleObject) {
        eval("item_" + singleObject + " = undefined;");
      });
      cross_contact_desc_count = 0;
      cross_contact_desc_final = "";
      if (addedModifierCounter > 0) {
        for (let y = 0; y < addedModifierCounter; y++) {
          const userModifierQuantityTemp = parseFloat(
            globalCalculatorItemsAddedModifierArray[x][y].userQuantity
          );
          if (userModifierQuantityTemp > 0) {
            const modifierIDTemp =
              globalCalculatorItemsAddedModifierArray[x][y].modifierID;
            const templateModifierTemp =
              globalCalculatorItemsAddedModifierArray[x][y].templateModifier;
            const localGroupID =
              globalCalculatorItemsAddedModifierArray[x][y].modifierGroupID;
            let systemServingSize = undefined;
            let systemQuantityForServingWeightGrams = undefined;
            if (
              itemDefaultModifiersData[itemIDHolder] !== undefined &&
              itemDefaultModifiersData[itemIDHolder][modifierIDTemp] !==
              undefined
            ) {
              systemServingSize =
                itemDefaultModifiersData[itemIDHolder][modifierIDTemp]
                  .serving_size;
              systemQuantityForServingWeightGrams =
                itemDefaultModifiersData[itemIDHolder][modifierIDTemp].quantity;
            }
            if (systemServingSize === undefined || systemServingSize <= 0) {
              systemServingSize = 1;
            }
            if (
              systemQuantityForServingWeightGrams === undefined ||
              systemQuantityForServingWeightGrams <= 0
            ) {
              systemQuantityForServingWeightGrams = 1;
            }
            let divide_evenly = 1;
            let divide_temp = 0;
            let localDividedEvenlyCounter = 0;
            let dividedEvenlyDifference = 0;
            if (globalDividedEvenlyFeatureArray[x] !== undefined) {
              divide_temp = parseFloat(
                globalDividedEvenlyFeatureArray[x][localGroupID]
              );
              localDividedEvenlyCounter =
                globalDividedEvenlyFeatureCounterArray[x][localGroupID];
              dividedEvenlyDifference =
                localDividedEvenlyCounter -
                globalDividedEvenlyFeatureZeroArray[x][localGroupID];
            }
            if (
              divide_temp > 0 &&
              localDividedEvenlyCounter > 1 &&
              dividedEvenlyDifference !== 1
            ) {
              divide_evenly = 1 / divide_temp;
            }
            if (
              modifiersData[modifierIDTemp].static_ingredients === "" ||
              modifiersData[modifierIDTemp].static_ingredients === null ||
              modifiersData[modifierIDTemp].static_ingredients === "null"
            ) {
              modifierList[modifierListCounter] =
                "<strong>" + modifiersData[modifierIDTemp].name + "</strong>";
            } else {
              modifierList[modifierListCounter] =
                "<strong>" +
                modifiersData[modifierIDTemp].name +
                ":</strong> " +
                modifiersData[modifierIDTemp].static_ingredients;
            }
            modifierListCounter++;
            let groupModifierMultiplier = undefined;
            if (
              groupModifiersMultiplierValueData[localGroupID] !== undefined &&
              groupModifiersMultiplierValueData[localGroupID][
              modifierIDTemp
              ] !== undefined
            ) {
              groupModifierMultiplier =
                groupModifiersMultiplierValueData[localGroupID][modifierIDTemp]
                  .multiplier;
            }
            if (
              groupModifierMultiplier === undefined ||
              groupModifierMultiplier <= 0
            ) {
              groupModifierMultiplier = 1;
            }
            let pizza_feature = 1;
            if (
              globalPizzaFeatureCounterArray[x] !== undefined &&
              globalPizzaFeatureCounterArray[x][localGroupID] >= 1 &&
              groupsData[localGroupID].pizza_multiplier_enabled === 1 &&
              globalPizzaFeatureCounterArray[x][localGroupID] >=
              groupsData[localGroupID].pizza_multiplier_count_threshold &&
              groupsData[localGroupID].pizza_multiplier_value > 0
            ) {
              pizza_feature = groupsData[localGroupID].pizza_multiplier_value;
            }
            basketItemModifiers[basketItemCounter][y] = [
              modifiersData[modifierIDTemp].name,
              systemQuantityForServingWeightGrams *
              systemServingSize *
              modifiersData[modifierIDTemp].serving_weight *
              groupModifierMultiplier *
              templateGroupMultipliersData[
                itemsData[itemIDHolder].template_id
              ][localGroupID].multiplier,
              modifiersData[modifierIDTemp].static_ingredients,
            ];
            const thisModifier = parseFloat(
              userModifierQuantityTemp *
              templateModifierTemp *
              groupModifierMultiplier *
              systemServingSize *
              localItemQuantity *
              divide_evenly *
              pizza_feature
            );
            item_calories +=
              parseFloat(modifiersData[modifierIDTemp].calories) * thisModifier;
            item_fat_calories +=
              parseFloat(modifiersData[modifierIDTemp].fat_calories) *
              thisModifier;
            item_total_fat +=
              parseFloat(modifiersData[modifierIDTemp].total_fat) *
              thisModifier;
            item_saturated_fat +=
              parseFloat(modifiersData[modifierIDTemp].saturated_fat) *
              thisModifier;
            item_trans_fat +=
              parseFloat(modifiersData[modifierIDTemp].trans_fat) *
              thisModifier;
            item_polyunsaturated_fat +=
              parseFloat(modifiersData[modifierIDTemp].polyunsaturated_fat) *
              thisModifier;
            item_monounsaturated_fat +=
              parseFloat(modifiersData[modifierIDTemp].monounsaturated_fat) *
              thisModifier;
            item_cholesterol +=
              parseFloat(modifiersData[modifierIDTemp].cholesterol) *
              thisModifier;
            item_sodium +=
              parseFloat(modifiersData[modifierIDTemp].sodium) * thisModifier;
            item_total_carb +=
              parseFloat(modifiersData[modifierIDTemp].total_carb) *
              thisModifier;
            item_fibers +=
              parseFloat(modifiersData[modifierIDTemp].fibers) * thisModifier;
            item_sugars +=
              parseFloat(modifiersData[modifierIDTemp].sugars) * thisModifier;
            item_sugar_alcohol +=
              parseFloat(modifiersData[modifierIDTemp].sugar_alcohol) *
              thisModifier;
            item_protein +=
              parseFloat(modifiersData[modifierIDTemp].protein) * thisModifier;
            item_vitamin_a +=
              parseFloat(modifiersData[modifierIDTemp].vitamin_a) *
              thisModifier;
            item_vitamin_c +=
              parseFloat(modifiersData[modifierIDTemp].vitamin_c) *
              thisModifier;
            item_calcium +=
              parseFloat(modifiersData[modifierIDTemp].calcium) * thisModifier;
            item_iron +=
              parseFloat(modifiersData[modifierIDTemp].iron) * thisModifier;
            item_servings +=
              parseFloat(modifiersData[modifierIDTemp].servings) * thisModifier;
            item_added_sugars +=
              parseFloat(modifiersData[modifierIDTemp].added_sugars) *
              thisModifier;
            item_vitamin_d +=
              parseFloat(modifiersData[modifierIDTemp].vitamin_d) *
              thisModifier;
            item_potassium +=
              parseFloat(modifiersData[modifierIDTemp].potassium) *
              thisModifier;
            item_caffeine +=
              parseFloat(modifiersData[modifierIDTemp].caffeine) * thisModifier;
            item_serving_weight +=
              parseFloat(modifiersData[modifierIDTemp].serving_weight) *
              thisModifier;
            item_calcium_mg_for_2018 +=
              parseFloat(modifiersData[modifierIDTemp].calcium_mg_for_2018) *
              thisModifier;
            item_iron_mg_for_2018 +=
              parseFloat(modifiersData[modifierIDTemp].iron_mg_for_2018) *
              thisModifier;
            iconModifier +=
              iconModifier === ""
                ? modifiersData[modifierIDTemp].name
                  .replace("'", "&#39;")
                  .replace('"', "&#34;")
                : ", " +
                modifiersData[modifierIDTemp].name
                  .replace("'", "&#39;")
                  .replace('"', "&#34;");
            $(allergenMap).each(function (index, singleObject) {
              if (eval("item_" + singleObject + " === undefined")) {
                eval(
                  "item_" +
                  singleObject +
                  " = modifiersData[modifierIDTemp]." +
                  singleObject +
                  ";"
                );
              } else {
                if (eval("item_" + singleObject + " !== 1")) {
                  if (
                    eval(
                      "modifiersData[modifierIDTemp]." + singleObject + " === 1"
                    )
                  ) {
                    eval("item_" + singleObject + " = 1;");
                  } else if (
                    eval(
                      "modifiersData[modifierIDTemp]." +
                      singleObject +
                      " === -1"
                    )
                  ) {
                    eval("item_" + singleObject + " = -1;");
                  } else if (
                    eval(
                      "item_" +
                      singleObject +
                      " === 0 && modifiersData[modifierIDTemp]." +
                      singleObject +
                      " === 0"
                    )
                  ) {
                    eval("item_" + singleObject + " = 0;");
                  } else {
                    eval("item_" + singleObject + " = -1;");
                  }
                }
              }
            });
            if (
              item_allergen_contains_Cross_Contact === 1 &&
              String(
                modifiersData[modifierIDTemp]
                  .allergen_contains_cross_contact_desc
              ) !== "" &&
              modifiersData[modifierIDTemp]
                .allergen_contains_cross_contact_desc !== null &&
              modifiersData[modifierIDTemp].allergen_contains_Cross_Contact ===
              1
            ) {
              cross_contact_desc_count++;
              cross_contact_desc_final =
                modifiersData[modifierIDTemp]
                  .allergen_contains_cross_contact_desc;
            }
          }
        }
      }
      let itemIconValue =
        "<ul>" +
        "<li class='title'>" +
        itemsData[itemIDHolder].name
          .replace("'", "&#39;")
          .replace('"', "&#34;") +
        "</li>" +
        "<li>";
      if (
        (templateGroupsData[itemsData[itemIDHolder].template_id] ===
          undefined ||
          templateGroupsData[itemsData[itemIDHolder].template_id].length ===
          0) &&
        itemsData[itemIDHolder].static_ingredients !== null &&
        itemsData[itemIDHolder].static_ingredients !== ""
      ) {
        itemIconValue += itemsData[itemIDHolder].static_ingredients;
      } else {
        itemIconValue +=
          iconModifier === "" ? desktopCalculatorJsNoIngredients : iconModifier;
      }
      let toolTipCalories =
        item_calories + itemsData[itemIDHolder].calories * localItemQuantity;
      if (
        templateGroupsData[itemsData[itemIDHolder].template_id] === undefined ||
        templateGroupsData[itemsData[itemIDHolder].template_id].length === 0
      ) {
        toolTipCalories *= localItemQuantity;
      }
      if (
        locationPreferencesData.calories_na === 1 &&
        locationPreferencesData.allow_rounding === 1 &&
        locationPreferencesData.label_display_version !== 3
      ) {
        toolTipCalories = roundCaloriesRule(toolTipCalories);
      }
      if (
        locationPreferencesData.calories === 1 &&
        locationPreferencesData.calories_na === 1
      ) {
        let toFixedValue = 1;
        if (
          locationPreferencesData.label_display_version === 3 &&
          locationPreferencesData.allow_rounding === 1
        ) {
          toFixedValue = 0;
        }
        itemIconValue +=
          "</li>" +
          "<li>" +
          labelAndHeaderTextCalories +
          (locationPreferencesData.label_display_version !== 3
            ? ""
            : " (kcal)") +
          ": " +
          removeUnnecessaryDecimal(
            roundLoDashMain(toolTipCalories, toFixedValue)
          );
      }
      itemIconValue += "</li>" + "</ul>";
      let item_contains_allergen = new Array();
      let item_contains_allergen_index = 0;
      $(allergenMap).each(function (index, singleObject) {
        if (
          eval(
            'singleObject !== "allergen_contains_Cross_Contact" && item_' +
            singleObject +
            " !== -1 && item_" +
            singleObject +
            " !== undefined && item_" +
            singleObject +
            " !== 0"
          )
        ) {
          let allergen_to_insert_1 = singleObject
            .replace("allergen_contains_", "")
            .replace("_", " ");
          if (allergen_to_insert_1 === "MSG") {
            allergen_to_insert_1 =
              '<span aria-hidden="true">MSG</span><span class="sr-only">M.S.G.</span>';
          }
          item_contains_allergen[item_contains_allergen_index] =
            allergen_to_insert_1;
          item_contains_allergen_index++;
        }
      });
      if (locationPreferencesData.enable_allergen_on_the_calculator === 1) {
        if (item_contains_allergen.length > 0) {
          itemIconValue +=
            '<span class="modifier-allergens">' +
            "<strong>Contains:</strong> " +
            item_contains_allergen.join(", ") +
            ".</span>";
        }
        if (
          locationPreferencesData.show_cross_contact_on_allergen_page === 1 &&
          item_allergen_contains_Cross_Contact === 1
        ) {
          if (item_contains_allergen.length > 0) {
            itemIconValue += "<br/>";
          }
          if (cross_contact_desc_count === 1) {
            itemIconValue +=
              '<span class="modifier-allergens"><strong>' +
              cross_contact_desc_final +
              "</strong></span>";
          } else {
            itemIconValue +=
              '<span class="modifier-allergens"><strong>Risk of possible contamination due to cooking method.</strong></span>';
          }
        }
      }
      $("#bsktItmIco-" + x).attr("data-tooltip", itemIconValue);
      calories += item_calories;
      fat_calories += item_fat_calories;
      total_fat += item_total_fat;
      saturated_fat += item_saturated_fat;
      trans_fat += item_trans_fat;
      polyunsaturated_fat += item_polyunsaturated_fat;
      monounsaturated_fat += item_monounsaturated_fat;
      cholesterol += item_cholesterol;
      sodium += item_sodium;
      total_carb += item_total_carb;
      fibers += item_fibers;
      sugars += item_sugars;
      sugar_alcohol += item_sugar_alcohol;
      protein += item_protein;
      vitamin_a += item_vitamin_a;
      vitamin_c += item_vitamin_c;
      calcium += item_calcium;
      iron += item_iron;
      servings += item_servings;
      added_sugars += item_added_sugars;
      vitamin_d += item_vitamin_d;
      potassium += item_potassium;
      caffeine += item_caffeine;
      serving_weight += item_serving_weight;
      calcium_mg_for_2018 += item_calcium_mg_for_2018;
      iron_mg_for_2018 += item_iron_mg_for_2018;
      calories += itemsData[itemIDHolder].calories * localItemQuantity;
      fat_calories += itemsData[itemIDHolder].fat_calories * localItemQuantity;
      total_fat += itemsData[itemIDHolder].total_fat * localItemQuantity;
      saturated_fat +=
        itemsData[itemIDHolder].saturated_fat * localItemQuantity;
      trans_fat += itemsData[itemIDHolder].trans_fat * localItemQuantity;
      polyunsaturated_fat +=
        itemsData[itemIDHolder].polyunsaturated_fat * localItemQuantity;
      monounsaturated_fat +=
        itemsData[itemIDHolder].monounsaturated_fat * localItemQuantity;
      cholesterol += itemsData[itemIDHolder].cholesterol * localItemQuantity;
      sodium += itemsData[itemIDHolder].sodium * localItemQuantity;
      total_carb += itemsData[itemIDHolder].total_carb * localItemQuantity;
      fibers += itemsData[itemIDHolder].fibers * localItemQuantity;
      sugars += itemsData[itemIDHolder].sugars * localItemQuantity;
      sugar_alcohol +=
        itemsData[itemIDHolder].sugar_alcohol * localItemQuantity;
      protein += itemsData[itemIDHolder].protein * localItemQuantity;
      vitamin_a += itemsData[itemIDHolder].vitamin_a * localItemQuantity;
      vitamin_c += itemsData[itemIDHolder].vitamin_c * localItemQuantity;
      calcium += itemsData[itemIDHolder].calcium * localItemQuantity;
      iron += itemsData[itemIDHolder].iron * localItemQuantity;
      servings += itemsData[itemIDHolder].servings * localItemQuantity;
      added_sugars += itemsData[itemIDHolder].added_sugars * localItemQuantity;
      vitamin_d += itemsData[itemIDHolder].vitamin_d * localItemQuantity;
      potassium += itemsData[itemIDHolder].potassium * localItemQuantity;
      caffeine += itemsData[itemIDHolder].caffeine * localItemQuantity;
      serving_weight +=
        itemsData[itemIDHolder].serving_weight * localItemQuantity;
      calcium_mg_for_2018 +=
        itemsData[itemIDHolder].calcium_mg_for_2018 * localItemQuantity;
      iron_mg_for_2018 +=
        itemsData[itemIDHolder].iron_mg_for_2018 * localItemQuantity;
      $(allergenMap).each(function (index, singleObject) {
        if (eval("basket_" + singleObject + " === undefined")) {
          eval("basket_" + singleObject + " = item_" + singleObject + ";");
        } else {
          if (eval("basket_" + singleObject + " !== 1")) {
            if (eval("item_" + singleObject + " === 1")) {
              eval("basket_" + singleObject + " = 1;");
            } else if (eval("item_" + singleObject + " === -1")) {
              eval("basket_" + singleObject + " = -1;");
            } else if (
              eval(
                "basket_" +
                singleObject +
                " === 0 && item_" +
                singleObject +
                " === 0"
              )
            ) {
              eval("basket_" + singleObject + " = 0;");
            } else {
              eval("basket_" + singleObject + " = -1;");
            }
          }
        }
      });
    }
  }
  let basket_contains_allergen = new Array();
  let basket_contains_allergen_index = 0;
  $(allergenMap).each(function (index, singleObject) {
    if (
      eval(
        'singleObject !== "allergen_contains_Cross_Contact" && basket_' +
        singleObject +
        " !== -1 && basket_" +
        singleObject +
        " !== undefined && basket_" +
        singleObject +
        " !== 0"
      )
    ) {
      let allergen_to_insert_2 = singleObject
        .replace("allergen_contains_", "")
        .replace("_", " ");
      if (allergen_to_insert_2 === "MSG") {
        allergen_to_insert_2 =
          '<span aria-hidden="true">MSG</span><span class="sr-only">M.S.G.</span>';
      }
      basket_contains_allergen[basket_contains_allergen_index] =
        allergen_to_insert_2;
      basket_contains_allergen_index++;
    }
  });
  if (locationPreferencesData.enable_allergen_on_the_calculator === 1) {
    if (basket_contains_allergen.length > 0) {
      mealAllergenOnLabelHTML +=
        '<strong>Contains:</strong> <span id="labelAllergenDetails">' +
        basket_contains_allergen.join(", ") +
        ".</span>";
    }
    if (
      locationPreferencesData.show_cross_contact_on_allergen_page === 1 &&
      basket_allergen_contains_Cross_Contact === 1
    ) {
      if (basket_contains_allergen.length > 0) {
        mealAllergenOnLabelHTML += "<br/>";
      }
      if (cross_contact_desc_count === 1) {
        mealAllergenOnLabelHTML +=
          "<strong>" + cross_contact_desc_final + "</strong>";
      } else {
        mealAllergenOnLabelHTML +=
          "<strong>Risk of possible contamination due to cooking method.</strong>";
      }
    }
  }
  basketItemCounter = updateBasketItemCount;
  if (locationPreferencesData.label_display_version === 2) {
    calcium = calcium_mg_for_2018;
    iron = iron_mg_for_2018;
  }
  unrounded_calories = calories;
  unrounded_fat_calories = fat_calories;
  unrounded_total_fat = total_fat;
  unrounded_saturated_fat = saturated_fat;
  unrounded_trans_fat = trans_fat;
  unrounded_polyunsaturated_fat = polyunsaturated_fat;
  unrounded_monounsaturated_fat = monounsaturated_fat;
  unrounded_cholesterol = cholesterol;
  unrounded_sodium = sodium;
  unrounded_total_carb = total_carb;
  unrounded_fibers = fibers;
  unrounded_sugars = sugars;
  unrounded_protein = protein;
  unrounded_vitamin_a = vitamin_a;
  unrounded_vitamin_c = vitamin_c;
  unrounded_calcium = calcium;
  unrounded_iron = iron;
  if (
    locationPreferencesData.protein_na === 1 &&
    locationPreferencesData.total_carb_na === 1 &&
    locationPreferencesData.total_fat_na === 1 &&
    locationPreferencesData.fibers_na === 1
  ) {
    let pointsPlus = Math.round(
      protein / 10.9 + total_carb / 9.2 + total_fat / 3.9 - fibers / 12.5
    );
    if (pointsPlus < 0) {
      pointsPlus = 0;
    }
    $pointsPlus.html(pointsPlus);
    $form_pointsPlus.val(pointsPlus);
  }
  let basketItems = textServingForCalculatorLabel + " ";
  let form_itemName = "";
  if (locationPreferencesData.label_display_version === 2) {
    basketItems += '<span class="nf-pr">';
  }
  qtyForConnect = 1;
  unitForConnect = "";
  nameForConnect = "";
  if (itemCounter > 1) {
    basketItems =
      textServingForCalculatorLabel + " " + textMultipleItemsForCalculatorLabel;
    form_itemName =
      textServingForCalculatorLabel + " " + textMultipleItemsForCalculatorLabel;
    nameForConnect =
      desktopCalculatorJsCustomMealFrom + " " + locationPreferencesData.name;
  } else if (itemCounter > 0) {
    let qty =
      itemServingInfo[0].serving_unit_quantity > 0
        ? itemServingInfo[0].serving_unit_quantity
        : "null";
    let unit =
      itemServingInfo[0].serving_unit_name !== null &&
        itemServingInfo[0].serving_unit_name !== "" &&
        itemServingInfo[0].serving_unit_name !== "null"
        ? itemServingInfo[0].serving_unit_name
        : "null";
    const weight =
      itemServingInfo[0].serving_weight > 0
        ? itemServingInfo[0].serving_weight
        : "null";
    if (qty !== "null" || unit !== "null" || weight !== "null") {
      if (qty === "null") {
        qty = 1;
      } else {
        qtyForConnect = qty;
      }
      if (unit === "null") {
        unit = "";
        unitForConnect = unit;
      }
      let itemCountString =
        parseFloat(itemCount[0]) % 1 > 0
          ? roundLoDashMain(itemCount[0], 1)
          : roundLoDashMain(itemCount[0]);
      itemCountString =
        parseFloat(itemCountString) === 1
          ? ""
          : itemCountString +
          ' <span aria-hidden="true">x</span><span class="sr-only">' +
          globalLanguageForTheLabel.desktop_calculator_count_of
            .replace("'", "&#39;")
            .replace('"', "&#34;") +
          "</span> ";
      basketItems += itemCountString + qty + " " + unit;
      if (weight !== "null") {
        if (
          locationPreferencesData.label_display_version !== 3 ||
          localGorMkValueConflictDetected ||
          localGorMkValueForTheUkLabel === "g"
        ) {
          basketItems +=
            " (" +
            weight +
            '<span aria-hidden="true">g</span><span class="sr-only"> ' +
            globalLanguageForTheLabel.desktop_calculator_grams
              .replace("'", "&#39;")
              .replace('"', "&#34;") +
            "</span>)";
        } else {
          basketItems +=
            " (" +
            weight +
            '<span aria-hidden="true">ml</span><span class="sr-only"> ' +
            globalLanguageForTheLabel.desktop_calculator_milliliters
              .replace("'", "&#39;")
              .replace('"', "&#34;") +
            "</span>)";
        }
      }
      form_itemName += basketItems;
    } else {
      basketItems +=
        parseFloat(itemCount[0]) % 1 > 0
          ? roundLoDashMain(itemCount[0], 1) +
          ' <span aria-hidden="true">x</span><span class="sr-only">' +
          globalLanguageForTheLabel.desktop_calculator_count_of
            .replace("'", "&#39;")
            .replace('"', "&#34;") +
          "</span> " +
          itemList[0]
          : roundLoDashMain(itemCount[0]) +
          ' <span aria-hidden="true">x</span><span class="sr-only">' +
          globalLanguageForTheLabel.desktop_calculator_count_of
            .replace("'", "&#39;")
            .replace('"', "&#34;") +
          "</span> " +
          itemList[0];
      form_itemName += itemList[0];
    }
    nameForConnect = itemListForModifiers[0];
  }
  if (locationPreferencesData.label_display_version === 2) {
    basketItems += "</span>";
  }
  $calContent.html(basketItems);
  $form_itemCounter.val(itemCounter);
  $form_itemName.val(form_itemName);
  $form_allergenValue.val(mealAllergenOnLabelHTML);
  const itemListCount = itemListForModifiers.length;
  let modifierListHTML = "";
  for (let x = 0; x < itemListCount; x++) {
    basketItemModifiers[x].sort(function (a, b) {
      if (a[1] === b[1]) {
        return a[0].toUpperCase().localeCompare(b[0].toUpperCase());
      }
      return a[1] < b[1];
    });
    if (x === 0) {
      modifierListHTML += "<strong>" + itemListForModifiers[x] + "</strong>";
    } else {
      modifierListHTML += ", <strong>" + itemListForModifiers[x] + "</strong>";
    }
    itemListStaticModifiers[x] = String(itemListStaticModifiers[x]);
    if (
      locationPreferencesData.detailed_ingredient_statements === 1 &&
      itemListStaticModifiers[x] !== null &&
      itemListStaticModifiers[x] !== "" &&
      itemListStaticModifiers[x] !== "null"
    ) {
      modifierListHTML +=
        showDebugCode === 1
          ? " <em>(" + itemListStaticModifiers[x] + ")</em><br/><br/>"
          : " <em>(" + itemListStaticModifiers[x] + ")</em>";
    }
    const basketItemModifiersCount = basketItemModifiers[x].length;
    if (basketItemModifiersCount > 0) {
      modifierListHTML += showDebugCode === 1 ? "" : " (";
      for (let y = 0; y < basketItemModifiersCount; y++) {
        if (y === 0) {
          modifierListHTML +=
            showDebugCode === 1
              ? "<br/><br/><strong>" +
              basketItemModifiers[x][y][0] +
              "</strong><br/>" +
              "<strong>" +
              desktopCalculatorJsGramWeight +
              ":</strong> " +
              basketItemModifiers[x][y][1]
              : "<strong>" + basketItemModifiers[x][y][0] + "</strong>";
        } else {
          modifierListHTML +=
            showDebugCode === 1
              ? "<br/><br/><strong>" +
              basketItemModifiers[x][y][0] +
              "</strong><br/>" +
              "<strong>" +
              desktopCalculatorJsGramWeight +
              ":</strong> " +
              basketItemModifiers[x][y][1]
              : ", <strong>" + basketItemModifiers[x][y][0] + "</strong>";
        }
        basketItemModifiers[x][y][2] = String(basketItemModifiers[x][y][2]);
        if (
          locationPreferencesData.detailed_ingredient_statements === 1 &&
          basketItemModifiers[x][y][2] !== "" &&
          basketItemModifiers[x][y][2] !== "null"
        ) {
          modifierListHTML +=
            showDebugCode === 1
              ? "<br/><em>" + basketItemModifiers[x][y][2] + "</em>"
              : ": <em>" + basketItemModifiers[x][y][2] + "</em>";
        }
      }
      modifierListHTML += showDebugCode === 1 ? "" : ")";
    }
  }
  modifierListHTMLForLabel = modifierListHTML;
  modifierListHTMLForLabelPrintVersion = modifierListHTML;
  // if (!(modifierListHTML === "" || modifierListHTML === labelIngredientList)) {
  //   $modifierListHidden.val(modifierListHTML);
  //   if (modifierListHTML.length > 100) {
  //     if (basketItemCounter === 1) {
  //       for (let x = 1; x < basketCounter; x++) {
  //         if (globalCalculatorItemsArray[x].itemID > 0) {
  //           $modifierModelTitle.html(
  //             itemsData[globalCalculatorItemsArray[x].itemID].name
  //           );
  //           break;
  //         }
  //       }
  //     } else if (basketItemCounter > 1) {
  //       $modifierModelTitle.html(desktopCalculatorJsYourMeal);
  //     }
  //     $modifierModelValue.html(modifierListHTML);
  //     const modifierListHTMLLength = modifierListHTML.length;
  //     let newModifierListHTML = modifierListHTML;
  //     if (modifierListHTMLLength > 120) {
  //       let whileCounter = 119;
  //       while (true) {
  //         if (modifierListHTML[whileCounter] === " ") {
  //           newModifierListHTML = modifierListHTML.substring(
  //             0,
  //             whileCounter + 1
  //           );
  //           break;
  //         }
  //         whileCounter++;
  //         if (whileCounter === modifierListHTMLLength) {
  //           break;
  //         }
  //       }
  //     }
  //     modifierListHTMLForLabel =
  //       newModifierListHTML +
  //       '... </strong></em>[<a href="' +
  //       textViewAllIngredients +
  //       '" id="btnIngredient" rel="nofollow">' +
  //       textViewAllIngredients +
  //       "</a>]";
  //   }
  // }
  $form_calContent.val(basketItems);
  $form_modifierList.val(modifierListHTML);
  if (String(modifierListHTMLForLabel) !== "") {
    const upperText =
      '<div class="label" tabindex="0" style="display: block;">' +
      '<div class="weight" id="ingredientList" style="font-weight: normal;">';
    const lowerText = "</div>" + "</div>";
    modifierListHTMLForLabel =
      upperText +
      "<b>" +
      calc_ingredients_label +
      "</b> " +
      modifierListHTMLForLabel +
      lowerText;
    modifierListHTMLForLabelPrintVersion =
      upperText +
      "<b>" +
      calc_ingredients_label +
      "</b> " +
      modifierListHTMLForLabelPrintVersion +
      lowerText;
  }
  const upperTextAgain =
    '<div class="meal-allergens" id="mealAllergenOnLabel" style="display: block;" tabindex="0">';
  modifierListHTMLForLabel +=
    upperTextAgain + mealAllergenOnLabelHTML + "</div>" + labelPluginFooter;
  modifierListHTMLForLabelPrintVersion +=
    upperTextAgain +
    mealAllergenOnLabelHTML +
    "</div>" +
    fullDisclaimerForPrint +
    labelPluginFooterForPrint;
  let showCalciumTemp = 1;
  let showIronTemp = 1;
  let naCalciumTemp = 0;
  let naIronTemp = 0;
  if (locationPreferencesData.label_display_version === 2) {
    showCalciumTemp = locationPreferencesData.calcium_mg_for_2018 === 1;
    showIronTemp = locationPreferencesData.iron_mg_for_2018 === 1;
    naCalciumTemp = locationPreferencesData.calcium_mg_for_2018_na === 0;
    naIronTemp = locationPreferencesData.iron_mg_for_2018_na === 0;
  } else {
    showCalciumTemp = locationPreferencesData.calcium === 1;
    showIronTemp = locationPreferencesData.iron === 1;
    naCalciumTemp = locationPreferencesData.calcium_na === 0;
    naIronTemp = locationPreferencesData.iron_na === 0;
  }
  $("#nutritionLabel").nutritionLabel({
    width: labelPluginWidth,
    calorieIntake: parseInt($calorieIntake.val().split("-")[1]),
    showServingUnitQuantityTextbox: false,
    useBaseValueFor2018LabelAndNotDVPercentage: true,
    boldCaffeine: false,
    allowFDARounding: locationPreferencesData.allow_rounding === 1,
    dailyValueTotalFat: dailyValue.total_fat,
    dailyValueSatFat: dailyValue.saturated_fat,
    dailyValueCholesterol: dailyValue.cholesterol,
    dailyValueSodium: dailyValue.sodium,
    dailyValuePotassium_2018: dailyValue.potassium,
    dailyValueCarb: dailyValue.total_carb,
    dailyValueFiber: dailyValue.fibers,
    dailyValueCalcium: dailyValue.calcium,
    dailyValueIron: dailyValue.iron,
    dailyValueVitaminD: dailyValue.vitamin_d,
    dailyValueAddedSugar: dailyValue.added_sugars,
    dailyValueSugar: dailyValue.sugars,
    dailyValueEnergyKcal: dailyValue.energy_kcal,
    dailyValueProtein: dailyValue.protein,
    dailyValueSalt: dailyValue.salt,
    showCalories: locationPreferencesData.calories === 1,
    showFatCalories: locationPreferencesData.fat_calories === 1,
    showTotalFat: locationPreferencesData.total_fat === 1,
    showSatFat: locationPreferencesData.saturated_fat === 1,
    showTransFat: locationPreferencesData.trans_fat === 1,
    showPolyFat: locationPreferencesData.polyunsaturated_fat === 1,
    showMonoFat: locationPreferencesData.monounsaturated_fat === 1,
    showCholesterol: locationPreferencesData.cholesterol === 1,
    showSodium: locationPreferencesData.sodium === 1,
    showTotalCarb: locationPreferencesData.total_carb === 1,
    showFibers: locationPreferencesData.fibers === 1,
    showSugars: locationPreferencesData.sugars === 1,
    showSugarAlcohol: locationPreferencesData.sugar_alcohol === 1,
    showProteins: locationPreferencesData.protein === 1,
    showVitaminA: locationPreferencesData.vitamin_a === 1,
    showVitaminC: locationPreferencesData.vitamin_c === 1,
    showCalcium: showCalciumTemp,
    showIron: showIronTemp,
    showPotassium_2018: locationPreferencesData.potassium === 1,
    showCaffeine: locationPreferencesData.caffeine === 1,
    showVitaminD: locationPreferencesData.vitamin_d === 1,
    showAddedSugars: locationPreferencesData.added_sugars === 1,
    showServingWeightGrams: false,
    hidePercentDailyValues: hide_percent_daily_value_on_calculator_and_inm,
    showDailyTotalFat: showDailyValue.total_fat,
    showDailySatFat: showDailyValue.saturated_fat,
    showDailyCholesterol: showDailyValue.cholesterol,
    showDailySodium: showDailyValue.sodium,
    showDailyTotalCarb: showDailyValue.total_carb,
    showDailyFibers: showDailyValue.fibers,
    showDailySugars: showDailyValue.sugars,
    showDailyAddedSugars: showDailyValue.added_sugars,
    showDailyVitaminD: showDailyValue.vitamin_d,
    showDailyCalcium: showDailyValue.calcium,
    showDailyIron: showDailyValue.iron,
    showDailyPotassium_2018: showDailyValue.potassium,
    showDailyEnergy: showDailyValue.energy,
    showDailyProtein: showDailyValue.protein,
    naServingSize: locationPreferencesData.measurement_na === 0,
    naCalories: locationPreferencesData.calories_na === 0,
    naFatCalories: locationPreferencesData.fat_calories_na === 0,
    naTotalFat: locationPreferencesData.total_fat_na === 0,
    naSatFat: locationPreferencesData.saturated_fat_na === 0,
    naTransFat: locationPreferencesData.trans_fat_na === 0,
    naPolyFat: locationPreferencesData.polyunsaturated_fat_na === 0,
    naMonoFat: locationPreferencesData.monounsaturated_fat_na === 0,
    naCholesterol: locationPreferencesData.cholesterol_na === 0,
    naSodium: locationPreferencesData.sodium_na === 0,
    naTotalCarb: locationPreferencesData.total_carb_na === 0,
    naFibers: locationPreferencesData.fibers_na === 0,
    naSugars: locationPreferencesData.sugars_na === 0,
    naSugarAlcohol: locationPreferencesData.sugar_alcohol_na === 0,
    naProteins: locationPreferencesData.protein_na === 0,
    naVitaminA: locationPreferencesData.vitamin_a_na === 0,
    naVitaminC: locationPreferencesData.vitamin_c_na === 0,
    naCalcium: naCalciumTemp,
    naIron: naIronTemp,
    naPotassium_2018: locationPreferencesData.potassium_na === 0,
    naCaffeine: locationPreferencesData.caffeine_na === 0,
    naVitaminD: locationPreferencesData.vitamin_d_na === 0,
    naAddedSugars: locationPreferencesData.added_sugars_na === 0,
    showIngredients: false,
    valueCalories: calories,
    valueFatCalories: fat_calories,
    valueTotalFat: total_fat,
    valueSatFat: saturated_fat,
    valueTransFat: trans_fat,
    valuePolyFat: polyunsaturated_fat,
    valueMonoFat: monounsaturated_fat,
    valueCholesterol: cholesterol,
    valueSodium: sodium,
    valueTotalCarb: total_carb,
    valueFibers: fibers,
    valueSugars: sugars,
    valueSugarAlcohol: sugar_alcohol,
    valueProteins: protein,
    valueVitaminA: vitamin_a,
    valueVitaminC: vitamin_c,
    valueCalcium: calcium,
    valueIron: iron,
    valueAddedSugars: added_sugars,
    valuePotassium_2018: potassium,
    valueCaffeine: caffeine,
    valueVitaminD: vitamin_d,
    valueServingWeightGrams:
      locationPreferencesData.label_display_version === 3 ? serving_weight : 0,
    textNutritionFacts: globalLanguageForTheLabel.textNutritionFacts,
    textDailyValues: globalLanguageForTheLabel.textDailyValues,
    showItemName: false,
    textServingSize: basketItems,
    showItemNameForUK: true,
    itemName: basketItems,
    textServingsPerContainer:
      globalLanguageForTheLabel.textServingsPerContainer,
    textAmountPerServing: globalLanguageForTheLabel.textAmountPerServing,
    textCalories: globalLanguageForTheLabel.textCalories,
    textFatCalories: globalLanguageForTheLabel.textFatCalories,
    textTotalFat: globalLanguageForTheLabel.textTotalFat,
    textSatFat: globalLanguageForTheLabel.textSatFat,
    textTransFat: globalLanguageForTheLabel.textTransFat,
    textPolyFat: globalLanguageForTheLabel.textPolyFat,
    textMonoFat: globalLanguageForTheLabel.textMonoFat,
    textCholesterol: globalLanguageForTheLabel.textCholesterol,
    textSodium: globalLanguageForTheLabel.textSodium,
    textPotassium: globalLanguageForTheLabel.textPotassium,
    textCaffeine: globalLanguageForTheLabel.textCaffeine,
    textTotalCarb: globalLanguageForTheLabel.textTotalCarb,
    textFibers: globalLanguageForTheLabel.textFibers,
    textSugars: globalLanguageForTheLabel.textSugars,
    textSugarAlcohol: globalLanguageForTheLabel.textSugarAlcohol,
    textProteins: globalLanguageForTheLabel.textProteins,
    textVitaminA: globalLanguageForTheLabel.textVitaminA,
    textVitaminC: globalLanguageForTheLabel.textVitaminC,
    textCalcium: globalLanguageForTheLabel.textCalcium,
    textIron: globalLanguageForTheLabel.textIron,
    textAddedSugars1: globalLanguageForTheLabel.textAddedSugars1,
    textAddedSugars2: globalLanguageForTheLabel.textAddedSugars2,
    textVitaminD: globalLanguageForTheLabel.textVitaminD,
    ingredientLabel: globalLanguageForTheLabel.ingredientLabel,
    textPercentDailyPart1: globalLanguageForTheLabel.textPercentDailyPart1,
    textPercentDailyPart2: globalLanguageForTheLabel.textPercentDailyPart2,
    textNotApplicable: globalLanguageForTheLabel.textNotApplicable,
    textUKTypicalValues: globalLanguageForTheLabel.textUKTypicalValues,
    textUKReferenceIntake: globalLanguageForTheLabel.textUKReferenceIntake,
    textUKPer100: globalLanguageForTheLabel.textUKPer100,
    textDataNotAvailable: globalLanguageForTheLabel.textDataNotAvailable,
    showCustomFooter: true,
    valueCustomFooter: modifierListHTMLForLabel,
    unitGramOrMlForThePer100Part: localGorMkValueConflictDetected
      ? "g"
      : localGorMkValueForTheUkLabel,
    showLegacyVersion: locationPreferencesData.label_display_version === 1,
    showUKVersion: locationPreferencesData.label_display_version === 3,
  });
  if (basketItemCounter === 0) {
    blurTheLabel();
  } else {
    unBlurTheLabel();
  }
  if (parseInt(blink) === 1 && basketItemCounter > 0) {
    blinkCalculator();
  }
  if (nameForConnect !== "") {
    $nutritionfacts.trigger("data-updated", {
      food_name: nameForConnect,
      serving_qty: qtyForConnect,
      serving_unit: unitForConnect || "Serving",
      nf_calories: calories,
      brand_name: locationPreferencesData.name,
      nf_calories_from_fat: fat_calories,
      nf_total_fat: total_fat,
      nf_saturated_fat: saturated_fat,
      nf_trans_fatty_acid: trans_fat,
      nf_polyunsaturated_fat: polyunsaturated_fat,
      nf_monounsaturated_fat: monounsaturated_fat,
      nf_cholesterol: cholesterol,
      nf_sodium: sodium,
      nf_total_carbohydrate: total_carb,
      nf_dietary_fiber: fibers,
      nf_sugars: sugars,
      nf_protein: protein,
      nf_vitamin_a_dv: vitamin_a,
      nf_vitamin_c_dv: vitamin_c,
      nf_calcium_dv: calcium,
      nf_iron_dv: iron,
    });
  }
  $form_totalCal.val(calories);
  $form_calFromFat.val(fat_calories);
  $form_totalFat.val(total_fat);
  $form_totalTransFat.val(trans_fat);
  $form_totalSatFat.val(saturated_fat);
  $form_totalPolyFat.val(polyunsaturated_fat);
  $form_totalMonoFat.val(monounsaturated_fat);
  $form_totalSod.val(sodium);
  $form_totalChol.val(cholesterol);
  $form_totalCarb.val(total_carb);
  $form_totalFiber.val(fibers);
  $form_totalSugar.val(sugars);
  $form_totalSugarAlcohol.val(sugar_alcohol);
  $form_totalProt.val(protein);
  $form_totalVitA.val(vitamin_a);
  $form_totalVitC.val(vitamin_c);
  $form_totalCalc.val(calcium);
  $form_totalIron.val(iron);
  $form_totalServing.val(servings);
  $form_textServingSize.val(basketItems);
  $form_totalAddedSugars.val(added_sugars);
  $form_totalPotassium.val(potassium);
  $form_totalCaffeine.val(caffeine);
  $form_totalVitD.val(vitamin_d);
  $form_customFooter.val(modifierListHTMLForLabelPrintVersion);
  $form_totalServingWeightGrams.val(
    locationPreferencesData.label_display_version === 3 ? serving_weight : 0
  );


  $form_calorieDiet.val(parseInt($calorieIntake.val().split("-")[1]));
  if (isThisPremium !== 1) {
    if (nameForConnect !== "") {
      qrcode
        .encodeText(
          encodeURI(
            "https://www.nutritionix.com/q1" +
            "?n=" +
            nameForConnect +
            "&b=" +
            locationPreferencesData.name +
            "&q=" +
            qtyForConnect +
            "&u=" +
            (unitForConnect || "Serving") +
            "&a=" +
            getAParamForTheQRLink(
              buildFullNutrientsArray({
                food_name: nameForConnect,
                serving_qty: qtyForConnect,
                serving_unit: unitForConnect || "Serving",
                nf_calories: unrounded_calories,
                brand_name: locationPreferencesData.name,
                nf_calories_from_fat: unrounded_fat_calories,
                nf_total_fat: unrounded_total_fat,
                nf_saturated_fat: unrounded_saturated_fat,
                nf_trans_fatty_acid: unrounded_trans_fat,
                nf_polyunsaturated_fat: unrounded_polyunsaturated_fat,
                nf_monounsaturated_fat: unrounded_monounsaturated_fat,
                nf_cholesterol: unrounded_cholesterol,
                nf_sodium: unrounded_sodium,
                nf_total_carbohydrate: unrounded_total_carb,
                nf_dietary_fiber: unrounded_fibers,
                nf_sugars: unrounded_sugars,
                nf_protein: unrounded_protein,
                nf_vitamin_a_dv: unrounded_vitamin_a,
                nf_vitamin_c_dv: unrounded_vitamin_c,
                nf_calcium_dv: unrounded_calcium,
                nf_iron_dv: unrounded_iron,
              })
            )
          ),
          qrcode.Ecc.MEDIUM
        )
        .drawCanvas(3, 1, document.getElementById("qrcode"));
      $qrcode.show();
      $qrcodeText.show();
    } else {
      $connectButton.hide();
      $qrcode.hide();
      $qrcodeText.hide();
    }
  }
}
function initializeTheLabelUsingThePlugin() {
  let showCalciumTemp = 1;
  let showIronTemp = 1;
  let naCalciumTemp = 0;
  let naIronTemp = 0;
  if (locationPreferencesData.label_display_version === 2) {
    showCalciumTemp = locationPreferencesData.calcium_mg_for_2018 === 1;
    showIronTemp = locationPreferencesData.iron_mg_for_2018 === 1;
    naCalciumTemp = locationPreferencesData.calcium_mg_for_2018_na === 0;
    naIronTemp = locationPreferencesData.iron_mg_for_2018_na === 0;
  } else {
    showCalciumTemp = locationPreferencesData.calcium === 1;
    showIronTemp = locationPreferencesData.iron === 1;
    naCalciumTemp = locationPreferencesData.calcium_na === 0;
    naIronTemp = locationPreferencesData.iron_na === 0;
  }
  $("#nutritionLabel").nutritionLabel({
    width: labelPluginWidth,
    calorieIntake: parseInt($calorieIntake.val().split("-")[1]),
    showItemName: false,
    showServingUnitQuantity: false,
    showServingUnitQuantityTextbox: false,
    boldCaffeine: false,
    valueServingWeightGrams: 100,
    showCalories: locationPreferencesData.calories === 1,
    showFatCalories: locationPreferencesData.fat_calories === 1,
    showTotalFat: locationPreferencesData.total_fat === 1,
    showSatFat: locationPreferencesData.saturated_fat === 1,
    showTransFat: locationPreferencesData.trans_fat === 1,
    showPolyFat: locationPreferencesData.polyunsaturated_fat === 1,
    showMonoFat: locationPreferencesData.monounsaturated_fat === 1,
    showCholesterol: locationPreferencesData.cholesterol === 1,
    showSodium: locationPreferencesData.sodium === 1,
    showTotalCarb: locationPreferencesData.total_carb === 1,
    showFibers: locationPreferencesData.fibers === 1,
    showSugars: locationPreferencesData.sugars === 1,
    showSugarAlcohol: locationPreferencesData.sugar_alcohol === 1,
    showProteins: locationPreferencesData.protein === 1,
    showVitaminA: locationPreferencesData.vitamin_a === 1,
    showVitaminC: locationPreferencesData.vitamin_c === 1,
    showCalcium: showCalciumTemp,
    showIron: showIronTemp,
    showPotassium_2018: locationPreferencesData.potassium === 1,
    showCaffeine: locationPreferencesData.caffeine === 1,
    showVitaminD: locationPreferencesData.vitamin_d === 1,
    showAddedSugars: locationPreferencesData.added_sugars === 1,
    showServingWeightGrams: false,
    hidePercentDailyValues: hide_percent_daily_value_on_calculator_and_inm,
    showDailyTotalFat: showDailyValue.total_fat,
    showDailySatFat: showDailyValue.saturated_fat,
    showDailyCholesterol: showDailyValue.cholesterol,
    showDailySodium: showDailyValue.sodium,
    showDailyTotalCarb: showDailyValue.total_carb,
    showDailyFibers: showDailyValue.fibers,
    showDailySugars: showDailyValue.sugars,
    showDailyAddedSugars: showDailyValue.added_sugars,
    showDailyVitaminD: showDailyValue.vitamin_d,
    showDailyCalcium: showDailyValue.calcium,
    showDailyIron: showDailyValue.iron,
    showDailyPotassium_2018: showDailyValue.potassium,
    showDailyEnergy: showDailyValue.energy,
    showDailyProtein: showDailyValue.protein,
    naServingSize: locationPreferencesData.measurement_na === 0,
    naCalories: locationPreferencesData.calories_na === 0,
    naFatCalories: locationPreferencesData.fat_calories_na === 0,
    naTotalFat: locationPreferencesData.total_fat_na === 0,
    naSatFat: locationPreferencesData.saturated_fat_na === 0,
    naTransFat: locationPreferencesData.trans_fat_na === 0,
    naPolyFat: locationPreferencesData.polyunsaturated_fat_na === 0,
    naMonoFat: locationPreferencesData.monounsaturated_fat_na === 0,
    naCholesterol: locationPreferencesData.cholesterol_na === 0,
    naSodium: locationPreferencesData.sodium_na === 0,
    naTotalCarb: locationPreferencesData.total_carb_na === 0,
    naFibers: locationPreferencesData.fibers_na === 0,
    naSugars: locationPreferencesData.sugars_na === 0,
    naSugarAlcohol: locationPreferencesData.sugar_alcohol_na === 0,
    naProteins: locationPreferencesData.protein_na === 0,
    naVitaminA: locationPreferencesData.vitamin_a_na === 0,
    naVitaminC: locationPreferencesData.vitamin_c_na === 0,
    naCalcium: naCalciumTemp,
    naIron: naIronTemp,
    naPotassium_2018: locationPreferencesData.potassium_na === 0,
    naCaffeine: locationPreferencesData.caffeine_na === 0,
    naVitaminD: locationPreferencesData.vitamin_d_na === 0,
    naAddedSugars: locationPreferencesData.added_sugars_na === 0,
    showIngredients: false,
    textNutritionFacts: globalLanguageForTheLabel.textNutritionFacts,
    textDailyValues: globalLanguageForTheLabel.textDailyValues,
    textServingsPerContainer:
      globalLanguageForTheLabel.textServingsPerContainer,
    textAmountPerServing: globalLanguageForTheLabel.textAmountPerServing,
    textCalories: globalLanguageForTheLabel.textCalories,
    textFatCalories: globalLanguageForTheLabel.textFatCalories,
    textTotalFat: globalLanguageForTheLabel.textTotalFat,
    textSatFat: globalLanguageForTheLabel.textSatFat,
    textTransFat: globalLanguageForTheLabel.textTransFat,
    textPolyFat: globalLanguageForTheLabel.textPolyFat,
    textMonoFat: globalLanguageForTheLabel.textMonoFat,
    textCholesterol: globalLanguageForTheLabel.textCholesterol,
    textSodium: globalLanguageForTheLabel.textSodium,
    textPotassium: globalLanguageForTheLabel.textPotassium,
    textCaffeine: globalLanguageForTheLabel.textCaffeine,
    textTotalCarb: globalLanguageForTheLabel.textTotalCarb,
    textFibers: globalLanguageForTheLabel.textFibers,
    textSugars: globalLanguageForTheLabel.textSugars,
    textSugarAlcohol: globalLanguageForTheLabel.textSugarAlcohol,
    textProteins: globalLanguageForTheLabel.textProteins,
    textVitaminA: globalLanguageForTheLabel.textVitaminA,
    textVitaminC: globalLanguageForTheLabel.textVitaminC,
    textCalcium: globalLanguageForTheLabel.textCalcium,
    textIron: globalLanguageForTheLabel.textIron,
    textAddedSugars1: globalLanguageForTheLabel.textAddedSugars1,
    textAddedSugars2: globalLanguageForTheLabel.textAddedSugars2,
    textVitaminD: globalLanguageForTheLabel.textVitaminD,
    ingredientLabel: globalLanguageForTheLabel.ingredientLabel,
    textPercentDailyPart1: globalLanguageForTheLabel.textPercentDailyPart1,
    textPercentDailyPart2: globalLanguageForTheLabel.textPercentDailyPart2,
    textNotApplicable: globalLanguageForTheLabel.textNotApplicable,
    textUKTypicalValues: globalLanguageForTheLabel.textUKTypicalValues,
    textUKReferenceIntake: globalLanguageForTheLabel.textUKReferenceIntake,
    textUKPer100: globalLanguageForTheLabel.textUKPer100,
    textDataNotAvailable: globalLanguageForTheLabel.textDataNotAvailable,
    showCustomFooter: true,
    valueCustomFooter: labelPluginFooter,
    showLegacyVersion: locationPreferencesData.label_display_version === 1,
    showUKVersion: locationPreferencesData.label_display_version === 3,
  });
}
function showItemModifiers(itemID, checkSelected, addDefaultModifiers) {
  let dropDownValues = "";
  let firstRun = true;
  let selectIDHolder;
  let selectCounter;
  if (checkSelected) {
    selectIDHolder = String(
      globalCalculatorItemsArray[currentItem].selectIDs
    ).split("-");
    selectCounter = 0;
  }
  const localTemplateGroups = templateGroupsData[itemsData[itemID].template_id];
  let localTemplateGroupsCount = 0;
  if (localTemplateGroups !== undefined) {
    localTemplateGroupsCount = localTemplateGroups.length;
  }
  let toHideDropDown = new Array();
  let toHideDropDownCounter = 0;
  for (let x = 0; x < localTemplateGroupsCount; x++) {
    let passedDDID = dropDownID;
    if (checkSelected) {
      passedDDID = selectIDHolder[selectCounter];
    }
    let hideLabel = "";
    if (
      groupsData[localTemplateGroups[x].group_id].disallow_user_change === 1
    ) {
      hideLabel = 'style="display: none;"';
      toHideDropDown[toHideDropDownCounter] =
        "ddcl-dd-" + passedDDID + "-" + localTemplateGroups[x].group_id;
      toHideDropDownCounter++;
    }
    dropDownValues +=
      "<strong " +
      hideLabel +
      ' class="dd_bold" tabindex="0">' +
      groupsData[localTemplateGroups[x].group_id].name +
      "</strong><div " +
      hideLabel +
      ' class="h10"></div>';
    if (!checkSelected) {
      if (firstRun) {
        globalCalculatorItemsArray[currentItem].selectIDs = dropDownID;
        firstRun = false;
      } else {
        globalCalculatorItemsArray[currentItem].selectIDs =
          globalCalculatorItemsArray[currentItem].selectIDs + "-" + dropDownID;
      }
    }
    dropDownValues +=
      '<label class="sr-only" for="dd-' +
      passedDDID +
      "-" +
      localTemplateGroups[x].group_id +
      '">' +
      groupsData[localTemplateGroups[x].group_id].name
        .replace("'", "&#39;")
        .replace('"', "&#34;") +
      "</label>";
    if (groupsData[localTemplateGroups[x].group_id].multiple_select > 0) {
      dropDownValues +=
        '<select class="ingrCatDropDown" id="dd-' +
        passedDDID +
        "-" +
        localTemplateGroups[x].group_id +
        '" multiple="multiple">';
    } else {
      dropDownValues +=
        '<select class="ingrCatDropDown" id="dd-' +
        passedDDID +
        "-" +
        localTemplateGroups[x].group_id +
        '">' +
        '<option value="-1">' +
        defaultDropDownText +
        "</option>";
    }
    let hasDefaultModifiers = false;
    let localItemDefaultModifiersCount = 0;
    if (addDefaultModifiers) {
      let localItemDefaultModifiers = itemDefaultModifiersData[itemID];
      for (let e in localItemDefaultModifiers) {
        if (localItemDefaultModifiers.hasOwnProperty(e)) {
          localItemDefaultModifiersCount++;
        }
      }
      if (localItemDefaultModifiersCount > 0) {
        hasDefaultModifiers = true;
      }
    }
    const localGroupModifiers =
      groupModifiersData[localTemplateGroups[x].group_id];
    const localGroupModifierCount = localGroupModifiers.length;
    for (let y = 0; y < localGroupModifierCount; y++) {
      let selectedVal = "";
      const tempGroupID = localTemplateGroups[x].group_id;
      let valueHolder = localGroupModifiers[y].ingredient_id + "_";
      valueHolder +=
        templateGroupMultipliersData[itemsData[itemID].template_id][tempGroupID]
          .multiplier +
        "---" +
        (checkSelected ? selectIDHolder[selectCounter] : dropDownID) +
        "---" +
        tempGroupID +
        "---" +
        itemsData[itemID].template_id;
      let alreadyIncluded = false;
      if (checkSelected) {
        for (
          let z = 0;
          z < globalCalculatorItemsArray[currentItem].addedModifierCounter;
          z++
        ) {
          if (
            globalCalculatorItemsAddedModifierArray[currentItem][z]
              .modifierID === localGroupModifiers[y].ingredient_id
          ) {
            alreadyIncluded = true;
            break;
          }
        }
      } else if (addDefaultModifiers && hasDefaultModifiers) {
        for (let z = 0; z < localItemDefaultModifiersCount; z++) {
          if (
            itemDefaultModifiersData[itemID][
            localGroupModifiers[y].ingredient_id
            ] !== undefined
          ) {
            alreadyIncluded = true;
            addModifier(valueHolder, true);
            break;
          }
        }
      }
      if (alreadyIncluded) {
        selectedVal = "selected";
      }
      dropDownValues +=
        '<option value="' +
        valueHolder +
        '" id="opt-' +
        valueHolder +
        '" ' +
        selectedVal +
        ">" +
        modifiersData[localGroupModifiers[y].ingredient_id].name +
        "</option>";
    }
    dropDownValues +=
      '</select><div class="h10" id="xddcl-dd-' +
      passedDDID +
      "-" +
      localTemplateGroups[x].group_id +
      '"></div>';
    if (checkSelected) {
      selectCounter++;
    } else {
      dropDownID++;
    }
  }
  $modifier_category_div.html(dropDownValues);
  $.each(
    $modifier_category_div.find(".ingrCatDropDown"),
    function (objIndex, thisObject) {
      if (usingAndroid === 1) {
        $(this).dropdownchecklist({
          width: 251,
          icon: {},
          legendText:
            groupsData[
              parseInt(thisObject["lastElementChild"].value.split("---")[2])
            ].name,
          emptyText: defaultDropDownText,
          positionHow: "absolute",
          explicitClose:
            desktopCalculatorJsDoneWith +
            " " +
            groupsData[
              parseInt(thisObject["lastElementChild"].value.split("---")[2])
            ].name,
          onItemClick: function (checkbox, selector) {
            showMessage.close();
            if (checkbox.attr("type") === "radio" && checkbox.prop("checked")) {
              updateModifierRadio(checkbox.attr("id"), checkbox.val());
            } else if (
              checkbox.attr("type") === "radio" &&
              !checkbox.prop("checked")
            ) {
              updateModifierRadio(checkbox.attr("id"), -1);
            } else if (checkbox.attr("type") === "checkbox") {
              updateModifierCheckbox(checkbox.val(), checkbox.prop("checked"));
            }
          },
        });
      } else {
        $(this).dropdownchecklist({
          maxDropHeight: 240,
          width: 251,
          icon: {},
          legendText:
            groupsData[
              parseInt(thisObject["lastElementChild"].value.split("---")[2])
            ].name,
          emptyText: defaultDropDownText,
          positionHow: "absolute",
          explicitClose:
            desktopCalculatorJsDoneWith +
            " " +
            groupsData[
              parseInt(thisObject["lastElementChild"].value.split("---")[2])
            ].name,
          onItemClick: function (checkbox, selector) {
            showMessage.close();
            if (checkbox.attr("type") === "radio" && checkbox.prop("checked")) {
              updateModifierRadio(checkbox.attr("id"), checkbox.val());
            } else if (
              checkbox.attr("type") === "radio" &&
              !checkbox.prop("checked")
            ) {
              updateModifierRadio(checkbox.attr("id"), -1);
            } else if (checkbox.attr("type") === "checkbox") {
              updateModifierCheckbox(checkbox.val(), checkbox.prop("checked"));
            }
          },
        });
      }
    }
  );
  for (let x = 0; x < toHideDropDownCounter; x++) {
    $("#x" + toHideDropDown[x]).hide();
    $("#" + toHideDropDown[x]).hide();
  }
}
function showModifiers(localItemID, fromAddItem, newlyAdded) {
  let modifierIgnorePortions = "";
  let modifierTempAddedNoPortions = "";
  let modifierTempAddedWithPortions = "";
  const addedModifierCounter =
    globalCalculatorItemsArray[localItemID].addedModifierCounter;
  const itemIDHolder = globalCalculatorItemsArray[localItemID].itemID;
  let debugHTMLValue =
    '<a href="" onClick="$(\'#debugHTMLMainDiv\').toggle(); return false;">Show / Hide the Debug Code</a><br/><br/>' +
    '<div id="debugHTMLMainDiv" class="hiddenByDefault">' +
    "<div>" +
    "<strong>NOTE</strong>: IF the factor is 1, it is hidden to make the computations easier<br/><br/>" +
    "This Debug Code is created on 12/21/2014 (in case it has bugs / needs to be updated in the future)<br/>" +
    "Updated on 06/08/2019 but only to add the base units of the other nutrition values and some basic ease of use feature<br/>" +
    "Updated on 08/14/2020 but only to add the menu item calories as it recently caused a confusion on the final calorie value<br><br>" +
    "</div>" +
    "<div>" +
    '<table cellpadding="0" callspacing="0" ' +
    'style="background-color: rgb(' +
    Math.floor(Math.random() * 61 + 195) +
    ", " +
    Math.floor(Math.random() * 61 + 195) +
    ", " +
    Math.floor(Math.random() * 61 + 195) +
    ')"><tbody>' +
    "<tr>" +
    '<td class="calculatorDebugCodeTD1 colorBaseValue">Menu Item Calories</td>' +
    '<td class="calculatorDebugCodeTD2">' +
    removeUnnecessaryDecimal(roundCalories(itemsData[itemIDHolder].calories)) +
    "</td>" +
    "</tr>" +
    "</tbody></table><hr/>";
  ("</div>");
  let thisModifierID = undefined;
  if (addedModifierCounter > 0) {
    for (let x = 0; x < addedModifierCounter; x++) {
      let modifierTempAdded = "";
      thisModifierID = parseInt(
        globalCalculatorItemsAddedModifierArray[localItemID][x].modifierID
      );
      if (
        (parseInt(newlyAdded) > 0 && parseInt(newlyAdded) === thisModifierID) ||
        fromAddItem
      ) {
        modifierTempAdded +=
          '<div class="calcIngredientDiv newlyAddedIngr" id="userIngr-' +
          localItemID +
          "-" +
          thisModifierID +
          '">';
      } else {
        modifierTempAdded +=
          '<div class="calcIngredientDiv" id="userIngr-' +
          localItemID +
          "-" +
          thisModifierID +
          '">';
      }
      let systemServingSize = undefined;
      if (
        itemDefaultModifiersData[itemIDHolder] !== undefined &&
        itemDefaultModifiersData[itemIDHolder][thisModifierID] !== undefined
      ) {
        systemServingSize =
          itemDefaultModifiersData[itemIDHolder][thisModifierID].serving_size;
      }
      if (systemServingSize === undefined || systemServingSize <= 0) {
        systemServingSize = 1.0;
      }
      let localGroupID =
        globalCalculatorItemsAddedModifierArray[localItemID][x].modifierGroupID;
      let divide_evenly = 1;
      let divide_temp = 0;
      let localDividedEvenlyCounter = 0;
      let dividedEvenlyDifference = 0;
      if (globalDividedEvenlyFeatureArray[localItemID] !== undefined) {
        divide_temp = parseFloat(
          globalDividedEvenlyFeatureArray[localItemID][localGroupID]
        );
        localDividedEvenlyCounter =
          globalDividedEvenlyFeatureCounterArray[localItemID][localGroupID];
        dividedEvenlyDifference =
          localDividedEvenlyCounter -
          globalDividedEvenlyFeatureZeroArray[localItemID][localGroupID];
      }
      let groupModifierMultiplier = undefined;
      if (
        groupModifiersMultiplierValueData[localGroupID] !== undefined &&
        groupModifiersMultiplierValueData[localGroupID][thisModifierID] !==
        undefined
      ) {
        groupModifierMultiplier =
          groupModifiersMultiplierValueData[localGroupID][thisModifierID]
            .multiplier;
      }
      if (
        groupModifierMultiplier === undefined ||
        groupModifierMultiplier <= 0
      ) {
        groupModifierMultiplier = 1;
      }
      let divide_evenly_feature_enabled = false;
      if (
        divide_temp > 0 &&
        localDividedEvenlyCounter > 1 &&
        dividedEvenlyDifference !== 1
      ) {
        divide_evenly = 1 / divide_temp;
        divide_evenly_feature_enabled = true;
      }
      let pizza_feature_enabled = false;
      let pizza_feature = 1;
      if (
        globalPizzaFeatureCounterArray[localItemID] !== undefined &&
        globalPizzaFeatureCounterArray[localItemID][localGroupID] >= 1 &&
        groupsData[localGroupID].pizza_multiplier_enabled === 1 &&
        globalPizzaFeatureCounterArray[localItemID][localGroupID] >=
        groupsData[localGroupID].pizza_multiplier_count_threshold &&
        groupsData[localGroupID].pizza_multiplier_value > 0
      ) {
        pizza_feature = groupsData[localGroupID].pizza_multiplier_value;
        pizza_feature_enabled = true;
      }
      const newMod = parseFloat(
        globalCalculatorItemsAddedModifierArray[localItemID][x].userQuantity *
        globalCalculatorItemsAddedModifierArray[localItemID][x]
          .templateModifier *
        groupModifierMultiplier *
        systemServingSize *
        divide_evenly *
        pizza_feature
      );
      if (showDebugCode === 1) {
        debugHTMLValue += calculatorDebugCode(
          thisModifierID,
          x,
          localItemID,
          localGroupID,
          groupModifierMultiplier,
          systemServingSize,
          newMod,
          divide_temp,
          divide_evenly,
          pizza_feature,
          localDividedEvenlyCounter
        );
      }
      modifierTempAdded +=
        '<span id="ingrInfo-' +
        localItemID +
        "-" +
        thisModifierID +
        '" class="icon info" aria-label="' +
        globalLanguageForTheLabel.desktop_calculator_mod_info_tooltip
          .replace("'", "&#39;")
          .replace('"', "&#34;") +
        '" ' +
        (locationPreferencesData.hide_calc_info_button === 1
          ? ' style="display: none;"'
          : "") +
        ' data-tooltip=\'<ul><li class="title">' +
        modifiersData[thisModifierID].name
          .replace(/'/g, "&#39;")
          .replace('"', "&#34;") +
        "</li>";
      if (
        locationPreferencesData.hide_calc_info_servings_detail === 0 &&
        parseFloat(modifiersData[thisModifierID].serving_unit_quantity) > 0 &&
        modifiersData[thisModifierID].serving_unit_name !== "" &&
        modifiersData[thisModifierID].serving_unit_name !== null
      ) {
        modifierTempAdded +=
          "<li>" +
          textServingForCalculatorLabel +
          " " +
          removeUnnecessaryDecimal(
            roundLoDashMain(
              modifiersData[thisModifierID].serving_unit_quantity * newMod,
              1
            )
          ) +
          " " +
          modifiersData[thisModifierID].serving_unit_name
            .replace("'", "&#39;")
            .replace('"', "&#34;");
        if (
          show_calculator_info_serving_weight === 1 &&
          modifiersData[thisModifierID].serving_weight > 0
        ) {
          modifierTempAdded +=
            " (" +
            Math.round(modifiersData[thisModifierID].serving_weight * newMod) +
            "g)";
        }
        modifierTempAdded += "</li>";
      }
      if (
        locationPreferencesData.calories === 1 &&
        locationPreferencesData.calories_na === 1
      ) {
        let modifierTooltipValue =
          modifiersData[thisModifierID].calories * newMod;
        if (locationPreferencesData.label_display_version !== 3) {
          modifierTooltipValue = roundCalories(modifierTooltipValue);
        } else {
          let toFixedValue = 1;
          if (locationPreferencesData.allow_rounding === 1) {
            toFixedValue = 0;
          }
          modifierTooltipValue = roundLoDashMain(
            modifierTooltipValue,
            toFixedValue
          );
        }
        modifierTempAdded +=
          "<li>" +
          labelAndHeaderTextCalories +
          (parseInt(locationPreferencesData.label_display_version) === 3
            ? " (kcal)"
            : "") +
          ": " +
          removeUnnecessaryDecimal(modifierTooltipValue) +
          "</li>";
      }
      if (
        locationPreferencesData.total_fat === 1 &&
        locationPreferencesData.total_fat_na === 1
      ) {
        let modifierTooltipValue = roundFat(
          modifiersData[thisModifierID].total_fat * newMod
        );
        if (locationPreferencesData.label_display_version === 3) {
          modifierTooltipValue = roundForUKLabelTotalFatCarbsSugarFiberProtein(
            modifiersData[thisModifierID].total_fat * newMod
          );
        }
        modifierTempAdded +=
          "<li>" +
          labelAndHeaderTextTotalFat +
          ": " +
          removeUnnecessaryDecimal(modifierTooltipValue) +
          "g</li>";
      }
      if (
        locationPreferencesData.saturated_fat === 1 &&
        locationPreferencesData.saturated_fat_na === 1
      ) {
        let modifierTooltipValue = roundFat(
          modifiersData[thisModifierID].saturated_fat * newMod
        );
        if (locationPreferencesData.label_display_version === 3) {
          modifierTooltipValue = roundForUKLabelSatFat(
            modifiersData[thisModifierID].saturated_fat * newMod
          );
        }
        modifierTempAdded +=
          "<li>" +
          labelAndHeaderTextSatFatForCalcu +
          ": " +
          removeUnnecessaryDecimal(modifierTooltipValue) +
          "g</li>";
      }
      if (
        locationPreferencesData.cholesterol === 1 &&
        locationPreferencesData.cholesterol_na === 1 &&
        locationPreferencesData.label_display_version !== 3
      ) {
        modifierTempAdded +=
          "<li>" +
          labelAndHeaderTextCholesterol +
          ": " +
          removeUnnecessaryDecimal(
            roundCholesterol(modifiersData[thisModifierID].cholesterol * newMod)
          ) +
          "mg" +
          "</li>";
      }
      if (
        locationPreferencesData.sodium === 1 &&
        locationPreferencesData.sodium_na === 1
      ) {
        let unitText = "mg";
        let modifierTooltipValue = roundSodium(
          modifiersData[thisModifierID].sodium * newMod
        );
        if (locationPreferencesData.label_display_version === 3) {
          modifierTooltipValue = roundForUKLabelSalt(
            modifiersData[thisModifierID].sodium * 0.0025 * newMod
          );
          unitText = "g";
        }
        modifierTempAdded +=
          "<li>" +
          labelAndHeaderTextSodium +
          ": " +
          removeUnnecessaryDecimal(modifierTooltipValue) +
          unitText +
          "</li>";
      }
      if (
        locationPreferencesData.total_carb === 1 &&
        locationPreferencesData.total_carb_na === 1
      ) {
        let modifierTooltipValue = roundCarbFiberSugarProtein(
          modifiersData[thisModifierID].total_carb * newMod
        );
        if (locationPreferencesData.label_display_version === 3) {
          modifierTooltipValue = roundForUKLabelTotalFatCarbsSugarFiberProtein(
            modifiersData[thisModifierID].total_carb * newMod
          );
        }
        modifierTempAdded +=
          "<li>" +
          labelAndHeaderTextTotalCarbForCalcu +
          ": " +
          removeUnnecessaryDecimal(modifierTooltipValue) +
          "g</li>";
      }
      if (
        locationPreferencesData.fibers === 1 &&
        locationPreferencesData.fibers_na === 1
      ) {
        let modifierTooltipValue = roundCarbFiberSugarProtein(
          modifiersData[thisModifierID].fibers * newMod
        );
        if (locationPreferencesData.label_display_version === 3) {
          modifierTooltipValue = roundForUKLabelTotalFatCarbsSugarFiberProtein(
            modifiersData[thisModifierID].fibers * newMod
          );
        }
        modifierTempAdded +=
          "<li>" +
          labelAndHeaderTextFibersForCalcu +
          ": " +
          removeUnnecessaryDecimal(modifierTooltipValue) +
          "g</li>";
      }
      if (
        locationPreferencesData.sugars === 1 &&
        locationPreferencesData.sugars_na === 1
      ) {
        let modifierTooltipValue = roundCarbFiberSugarProtein(
          modifiersData[thisModifierID].sugars * newMod
        );
        if (locationPreferencesData.label_display_version === 3) {
          modifierTooltipValue = roundForUKLabelTotalFatCarbsSugarFiberProtein(
            modifiersData[thisModifierID].sugars * newMod
          );
        }
        modifierTempAdded +=
          "<li>" +
          labelAndHeaderTextSugars +
          ": " +
          removeUnnecessaryDecimal(modifierTooltipValue) +
          "g</li>";
      }
      if (
        locationPreferencesData.sugar_alcohol === 1 &&
        locationPreferencesData.sugar_alcohol_na === 1 &&
        locationPreferencesData.label_display_version !== 3
      ) {
        modifierTempAdded +=
          "<li>" +
          labelAndHeaderTextSugarAlcohol +
          ": " +
          removeUnnecessaryDecimal(
            roundCarbFiberSugarProtein(
              modifiersData[thisModifierID].sugar_alcohol * newMod
            )
          ) +
          "g" +
          "</li>";
      }
      if (
        locationPreferencesData.protein === 1 &&
        locationPreferencesData.protein_na === 1
      ) {
        let modifierTooltipValue = roundCarbFiberSugarProtein(
          modifiersData[thisModifierID].protein * newMod
        );
        if (locationPreferencesData.label_display_version === 3) {
          modifierTooltipValue = roundForUKLabelTotalFatCarbsSugarFiberProtein(
            modifiersData[thisModifierID].protein * newMod
          );
        }
        modifierTempAdded +=
          "<li>" +
          labelAndHeaderTextProteins +
          ": " +
          removeUnnecessaryDecimal(modifierTooltipValue) +
          "g</li>";
      }
      modifierTempAdded += "</ul>";
      if (locationPreferencesData.enable_allergen_on_the_calculator === 1) {
        if (modifiersData[thisModifierID].allergen_contains !== "") {
          modifierTempAdded +=
            '<span class="modifier-allergens">' +
            "<strong>Contains:</strong> " +
            modifiersData[thisModifierID].allergen_contains +
            ".</span>";
        }
        if (
          locationPreferencesData.show_cross_contact_on_allergen_page === 1 &&
          modifiersData[thisModifierID].allergen_contains_Cross_Contact === 1
        ) {
          if (modifiersData[thisModifierID].allergen_contains !== "") {
            modifierTempAdded += "<br/>";
          }
          modifierTempAdded +=
            '<span class="modifier-allergens"><strong>' +
            (modifiersData[thisModifierID]
              .allergen_contains_cross_contact_desc !== null &&
              String(
                modifiersData[thisModifierID].allergen_contains_cross_contact_desc
              ) !== ""
              ? modifiersData[thisModifierID]
                .allergen_contains_cross_contact_desc
              : "Risk of possible contamination due to cooking method") +
            ".</strong></span>";
        }
      }
      modifierTempAdded +=
        '\'><span class="sr-only">' +
        globalLanguageForTheLabel.desktop_calculator_mod_info_tooltip
          .replace("'", "&#39;")
          .replace('"', "&#34;") +
        "</span></span>" +
        '<a id="' +
        "ui---" +
        modifiersData[thisModifierID].name
          .replace("'", "&#39;")
          .replace('"', "&#34;") +
        "---" +
        localItemID +
        "---" +
        thisModifierID +
        "---" +
        globalCalculatorItemsAddedModifierArray[localItemID][x].selectID +
        "---" +
        localGroupID +
        "---" +
        globalCalculatorItemsAddedModifierArray[localItemID][x]
          .modifierTemplateID +
        '"' +
        ' href="Delete this Ingredient" class="delUserIngr" rel="nofollow"' +
        ' aria-label="' +
        globalLanguageForTheLabel.desktop_calculator_delete_added_modifier
          .replace("'", "&#39;")
          .replace('"', "&#34;") +
        " - " +
        modifiersData[thisModifierID].name
          .replace("'", "&#39;")
          .replace('"', "&#34;") +
        '">' +
        globalLanguageForTheLabel.desktop_calculator_delete_modifier
          .replace("'", "&#39;")
          .replace('"', "&#34;") +
        "</a>";
      if (
        parseInt(
          groupModifiersMaxValueData[localGroupID][thisModifierID].max_amount
        ) !== 1
      ) {
        if (groupsData[localGroupID].enable_portions !== 1) {
          modifierTempAdded +=
            '<label for="cq2-' +
            localItemID +
            "-" +
            thisModifierID +
            '" class="sr-only">' +
            globalLanguageForTheLabel.desktop_calculator_js_quantity
              .replace("'", "&#39;")
              .replace('"', "&#34;") +
            "</label>" +
            '<input type="text" class="calcQuantity" id="cq2-' +
            localItemID +
            "-" +
            thisModifierID +
            '" ';
          let publicQtyTemp = roundLoDashMain(
            globalCalculatorItemsAddedModifierArray[localItemID][x]
              .userQuantity,
            1
          );
          if (
            locationPreferencesData.calc_down_arrow_whole_num === 1 &&
            parseFloat(publicQtyTemp) % 1 === 0
          ) {
            publicQtyTemp = removeUnnecessaryDecimal(parseFloat(publicQtyTemp));
          }
          modifierTempAdded += 'value="' + publicQtyTemp + '"';
          if (divide_evenly_feature_enabled || pizza_feature_enabled) {
            modifierTempAdded += " readonly";
          }
          modifierTempAdded += ">";
          if (!divide_evenly_feature_enabled && !pizza_feature_enabled) {
            modifierTempAdded +=
              '<span class="add">' +
              '<a href="Increase the quantity" aria-label="' +
              globalLanguageForTheLabel.desktop_calculator_increase_quantity
                .replace("'", "&#39;")
                .replace('"', "&#34;") +
              '" class="addQuantity" id="aq2-' +
              localItemID +
              "-" +
              thisModifierID +
              '" rel="nofollow">' +
              '<span class="sr-only">' +
              globalLanguageForTheLabel.desktop_calculator_increase_quantity
                .replace("'", "&#39;")
                .replace('"', "&#34;") +
              "</span>" +
              "</a>" +
              '<a href="Decrease the quantity" aria-label="' +
              globalLanguageForTheLabel.desktop_calculator_decrease_quantity
                .replace("'", "&#39;")
                .replace('"', "&#34;") +
              '" class="minusQuantity" id="dq2-' +
              localItemID +
              "-" +
              thisModifierID +
              '" rel="nofollow">' +
              '<span class="sr-only">' +
              globalLanguageForTheLabel.desktop_calculator_decrease_quantity
                .replace("'", "&#39;")
                .replace('"', "&#34;") +
              "</span>" +
              "</a>" +
              "</span>";
          }
        } else {
          let readOnlyQtyTemp = 0;
          modifierTempAdded +=
            '<label class="sr-only" for="portion-' +
            localItemID +
            "-" +
            thisModifierID +
            '">' +
            globalLanguageForTheLabel.desktop_calculator_select_portion
              .replace("'", "&#39;")
              .replace('"', "&#34;") +
            "</label>" +
            '<select class="portionsDropdown" id="portion-' +
            localItemID +
            "-" +
            thisModifierID +
            '">';
          if (groupsData[localGroupID].portions[1].active === 1) {
            modifierTempAdded +=
              '<option value="' +
              groupsData[localGroupID].portions[1].multiplier +
              '"';
            if (
              groupsData[localGroupID].portions[1].multiplier ===
              globalCalculatorItemsAddedModifierArray[localItemID][x]
                .userQuantity
            ) {
              modifierTempAdded += " selected";
              readOnlyQtyTemp = groupsData[localGroupID].portions[1].multiplier;
            }
            modifierTempAdded +=
              ">" + groupsData[localGroupID].portions[1].name + "</option>";
          }
          if (groupsData[localGroupID].portions[2].active === 1) {
            modifierTempAdded +=
              '<option value="' +
              groupsData[localGroupID].portions[2].multiplier +
              '"';
            if (
              groupsData[localGroupID].portions[2].multiplier ===
              globalCalculatorItemsAddedModifierArray[localItemID][x]
                .userQuantity
            ) {
              modifierTempAdded += " selected";
              readOnlyQtyTemp = groupsData[localGroupID].portions[2].multiplier;
            }
            modifierTempAdded +=
              ">" + groupsData[localGroupID].portions[2].name + "</option>";
          }
          if (groupsData[localGroupID].portions[3].active === 1) {
            modifierTempAdded +=
              '<option value="' +
              groupsData[localGroupID].portions[3].multiplier +
              '"';
            if (
              groupsData[localGroupID].portions[3].multiplier ===
              globalCalculatorItemsAddedModifierArray[localItemID][x]
                .userQuantity
            ) {
              modifierTempAdded += " selected";
              readOnlyQtyTemp = groupsData[localGroupID].portions[3].multiplier;
            }
            modifierTempAdded +=
              ">" + groupsData[localGroupID].portions[3].name + "</option>";
          }
          modifierTempAdded +=
            "</select>" +
            '<label for="cq2-' +
            localItemID +
            "-" +
            thisModifierID +
            '" value="' +
            readOnlyQtyTemp +
            '" class="sr-only">' +
            globalLanguageForTheLabel.desktop_calculator_js_quantity
              .replace("'", "&#39;")
              .replace('"', "&#34;") +
            "</label>" +
            '<input type="text" class="calcQuantity" id="cq2-' +
            localItemID +
            "-" +
            thisModifierID +
            '" value="' +
            readOnlyQtyTemp +
            '" readonly style="display: none;">';
        }
      }
      if (modifiersData[thisModifierID].name.length < 36) {
        modifierTempAdded +=
          '<span class="name oneLiner"' +
          (locationPreferencesData.hide_calc_info_button === 1
            ? ' style="margin: 0 25px 0 0;"'
            : "") +
          ">" +
          modifiersData[thisModifierID].name +
          "</span>";
      } else {
        modifierTempAdded +=
          '<span class="name"' +
          (locationPreferencesData.hide_calc_info_button === 1
            ? ' style="margin: 0 25px 0 0;"'
            : "") +
          ">" +
          modifiersData[thisModifierID].name +
          "</span>";
      }
      modifierTempAdded += "</div>";
      if (extra_portions_modifiers_show_first_on_calc !== 1) {
        modifierIgnorePortions += modifierTempAdded;
      } else {
        if (groupsData[localGroupID].enable_portions !== 1) {
          modifierTempAddedNoPortions += modifierTempAdded;
        } else {
          modifierTempAddedWithPortions += modifierTempAdded;
        }
      }
    }
    if (extra_portions_modifiers_show_first_on_calc !== 1) {
      $itemModifiers.html(
        '<div class="itemContains">' +
        itemsData[itemIDHolder].name +
        "</div>" +
        modifierIgnorePortions
      );
    } else {
      $itemModifiers.html(
        '<div class="itemContains">' +
        itemsData[itemIDHolder].name +
        "</div>" +
        modifierTempAddedWithPortions +
        modifierTempAddedNoPortions
      );
    }
  } else if (
    templateGroupsData[itemsData[itemIDHolder].template_id] === undefined ||
    templateGroupsData[itemsData[itemIDHolder].template_id].length === 0
  ) {
    if (itemsData[itemIDHolder].description === null) {
      itemsData[itemIDHolder].description = "";
    }
    let itemModifiersTemp =
      '<div id="itemName" class="itemName">' +
      itemsData[itemIDHolder].name +
      "</div>" +
      '<div class="blockItemDetails">';
    if (
      itemsData[itemIDHolder].description !== "" &&
      itemsData[itemIDHolder].description !== "null" &&
      itemsData[itemIDHolder].description !== null
    ) {
      itemModifiersTemp +=
        "<h6>" +
        mobileDescription +
        ":</h6>" +
        "<p>" +
        itemsData[itemIDHolder].description +
        "</p>";
    }
    if (
      itemsData[itemIDHolder].static_ingredients !== "" &&
      itemsData[itemIDHolder].static_ingredients !== "null" &&
      itemsData[itemIDHolder].static_ingredients !== null
    ) {
      itemModifiersTemp +=
        "<h6>" +
        mobileCalculatorIngredients +
        ":</h6>" +
        "<p>" +
        itemsData[itemIDHolder].static_ingredients +
        "</p>";
    }
    itemModifiersTemp +=
      '</div><div class="clear"></div>' +
      '<div class="blockItemTools clearfix">' +
      '<div class="blockItemNutrition">' +
      '<span class="icon info" id="static-item-' +
      localItemID +
      '" ' +
      (locationPreferencesData.hide_calc_info_button === 1
        ? ' style="display: none;"'
        : "") +
      "data-tooltip='" +
      "<ul>" +
      '<li class="title">' +
      itemsData[itemIDHolder].name.replace("'", "&#39;").replace('"', "&#34;") +
      "</li>";
    if (thisModifierID !== undefined) {
      if (
        locationPreferencesData.hide_calc_info_servings_detail === 0 &&
        parseFloat(modifiersData[thisModifierID].serving_unit_quantity) > 0 &&
        modifiersData[thisModifierID].serving_unit_name !== "" &&
        modifiersData[thisModifierID].serving_unit_name !== null
      ) {
        itemModifiersTemp +=
          "<li>" +
          textServingForCalculatorLabel +
          " " +
          removeUnnecessaryDecimal(
            roundLoDashMain(
              modifiersData[thisModifierID].serving_unit_quantity,
              1
            )
          ) +
          " " +
          modifiersData[thisModifierID].serving_unit_name
            .replace("'", "&#39;")
            .replace('"', "&#34;") +
          "</li>";
      }
      if (
        locationPreferencesData.calories === 1 &&
        locationPreferencesData.calories_na === 1
      ) {
        itemModifiersTemp +=
          "<li>" +
          labelAndHeaderTextCalories +
          ": " +
          removeUnnecessaryDecimal(
            roundCalories(itemsData[itemIDHolder].calories)
          ) +
          "</li>";
      }
      if (
        locationPreferencesData.total_fat === 1 &&
        locationPreferencesData.total_fat_na === 1
      ) {
        itemModifiersTemp +=
          "<li>" +
          labelAndHeaderTextTotalFat +
          ": " +
          removeUnnecessaryDecimal(
            roundFat(itemsData[itemIDHolder].total_fat)
          ) +
          "g" +
          "</li>";
      }
      if (
        locationPreferencesData.saturated_fat === 1 &&
        locationPreferencesData.saturated_fat_na === 1
      ) {
        itemModifiersTemp +=
          "<li>" +
          labelAndHeaderTextSatFatForCalcu +
          ": " +
          removeUnnecessaryDecimal(
            roundFat(itemsData[itemIDHolder].saturated_fat)
          ) +
          "g" +
          "</li>";
      }
      if (
        locationPreferencesData.cholesterol === 1 &&
        locationPreferencesData.cholesterol_na === 1
      ) {
        itemModifiersTemp +=
          "<li>" +
          labelAndHeaderTextCholesterol +
          ": " +
          removeUnnecessaryDecimal(
            roundCholesterol(itemsData[itemIDHolder].cholesterol)
          ) +
          "mg" +
          "</li>";
      }
      if (
        locationPreferencesData.sodium === 1 &&
        locationPreferencesData.sodium_na === 1
      ) {
        itemModifiersTemp +=
          "<li>" +
          labelAndHeaderTextSodium +
          ": " +
          removeUnnecessaryDecimal(
            roundSodium(itemsData[itemIDHolder].sodium)
          ) +
          "mg" +
          "</li>";
      }
      if (
        locationPreferencesData.total_carb === 1 &&
        locationPreferencesData.total_carb_na === 1
      ) {
        itemModifiersTemp +=
          "<li>" +
          labelAndHeaderTextTotalCarbForCalcu +
          ": " +
          removeUnnecessaryDecimal(
            roundCarbFiberSugarProtein(itemsData[itemIDHolder].total_carb)
          ) +
          "g" +
          "</li>";
      }
      if (
        locationPreferencesData.fibers === 1 &&
        locationPreferencesData.fibers_na === 1
      ) {
        itemModifiersTemp +=
          "<li>" +
          labelAndHeaderTextFibersForCalcu +
          ": " +
          removeUnnecessaryDecimal(
            roundCarbFiberSugarProtein(itemsData[itemIDHolder].fibers)
          ) +
          "g" +
          "</li>";
      }
      if (
        locationPreferencesData.sugars === 1 &&
        locationPreferencesData.sugars_na === 1
      ) {
        itemModifiersTemp +=
          "<li>" +
          labelAndHeaderTextSugars +
          ": " +
          removeUnnecessaryDecimal(
            roundCarbFiberSugarProtein(itemsData[itemIDHolder].sugars)
          ) +
          "g" +
          "</li>";
      }
      if (
        locationPreferencesData.sugar_alcohol === 1 &&
        locationPreferencesData.sugar_alcohol_na === 1
      ) {
        itemModifiersTemp +=
          "<li>" +
          labelAndHeaderTextSugarAlcohol +
          ": " +
          removeUnnecessaryDecimal(
            roundCarbFiberSugarProtein(itemsData[itemIDHolder].sugar_alcohol)
          ) +
          "g" +
          "</li>";
      }
      if (
        locationPreferencesData.protein === 1 &&
        locationPreferencesData.protein_na === 1
      ) {
        itemModifiersTemp +=
          "<li>" +
          labelAndHeaderTextProteins +
          ": " +
          removeUnnecessaryDecimal(
            roundCarbFiberSugarProtein(itemsData[itemIDHolder].protein)
          ) +
          "g" +
          "</li>";
      }
    }
    itemModifiersTemp +=
      "</ul>'>" +
      "</span>" +
      '<span class="text">' +
      desktopCalculatorJsNutritionInfo +
      "</span>" +
      "</div>" +
      '<div class="blockItemQuantity">' +
      '<span class="text">' +
      desktopCalculatorJsQuantity +
      "</span>" +
      '<label for="iqc2-' +
      localItemID +
      '" class="sr-only">' +
      globalLanguageForTheLabel.desktop_calculator_js_quantity
        .replace("'", "&#39;")
        .replace('"', "&#34;") +
      "</label>" +
      '<input type="text" value="' +
      roundLoDashMain(globalCalculatorItemsArray[localItemID].quantity, 1) +
      '"' +
      ' class="formText itemQuantityStatic ac" id="iqc2-' +
      localItemID +
      '">' +
      '<span class="setter">' +
      '<a class="addQuantityStatic" href="Increase the quantity" aria-label="' +
      globalLanguageForTheLabel.desktop_calculator_increase_quantity
        .replace("'", "&#39;")
        .replace('"', "&#34;") +
      '" id="iqa2-' +
      localItemID +
      '" rel="nofollow">' +
      '<span class="sr-only">' +
      globalLanguageForTheLabel.desktop_calculator_increase_quantity
        .replace("'", "&#39;")
        .replace('"', "&#34;") +
      "</span>" +
      "</a>" +
      '<a class="minusQuantityStatic" href="Decrease the quantity" aria-label="' +
      globalLanguageForTheLabel.desktop_calculator_decrease_quantity
        .replace("'", "&#39;")
        .replace('"', "&#34;") +
      '" id="iqm2-' +
      localItemID +
      '" rel="nofollow">' +
      '<span class="sr-only">' +
      globalLanguageForTheLabel.desktop_calculator_decrease_quantity
        .replace("'", "&#39;")
        .replace('"', "&#34;") +
      "</span>" +
      "</a>" +
      "</span>" +
      "</div>" +
      "</div>";
    $itemModifiers.html(itemModifiersTemp);
  } else {
    $itemModifiers.html(
      '<div class="itemContains">' + itemsData[itemIDHolder].name + "</div>"
    );
  }
  currentItem = localItemID;
  if (showBasket === 1 && addedModifierCounter > 0) {
    $buildNewItem.show();
  } else {
    $buildNewItem.hide();
  }
  $btnStartOver2.show();
  if (fromAddItem || parseInt(newlyAdded) > 0) {
    blinkModifier();
  }
  if (showDebugCode === 1) {
    $calculatorDebugCode.html(debugHTMLValue + "</div>").show();
  }
}
function calculatorDebugCode(
  thisModifierID,
  loopIndex,
  localItemID,
  localGroupID,
  groupModifierMultiplier,
  systemServingSize,
  newMod,
  divide_temp,
  divide_evenly,
  pizza_feature,
  localDividedEvenlyCounter
) {
  let calculatorDebugCodeTD1 =
    '<td class="calculatorDebugCodeTD1 hiddenByDefault tdDebug' +
    thisModifierID +
    '">';
  let calculatorDebugCodeTD2 =
    '<td class="calculatorDebugCodeTD2 hiddenByDefault tdDebug' +
    thisModifierID +
    '">';
  let calculatorDebugCodeTD1Blue =
    '<td class="calculatorDebugCodeTD1 hiddenByDefault colorBlue tdDebug' +
    thisModifierID +
    '">';
  let calculatorDebugCodeTD1Green =
    '<td class="calculatorDebugCodeTD1 hiddenByDefault colorGreen tdDebug' +
    thisModifierID +
    '">';
  let calculatorDebugCodeTD1BaseValue =
    '<td class="calculatorDebugCodeTD1 hiddenByDefault colorBaseValue tdDebug' +
    thisModifierID +
    '">';
  let debugHTMLValue =
    '<table cellpadding="0" callspacing="0" ' +
    'style="background-color: rgb(' +
    Math.floor(Math.random() * 61 + 195) +
    ", " +
    Math.floor(Math.random() * 61 + 195) +
    ", " +
    Math.floor(Math.random() * 61 + 195) +
    ')"><tbody>' +
    "<tr>" +
    '<td class="calculatorDebugCodeTD1">' +
    "Modifier Name" +
    '<a href="" onClick="$(\'.tdDebug' +
    thisModifierID +
    '\').toggle(); return false;" class="calcuDebugLink">Show / Hide Other Values</a>' +
    "</td>" +
    '<td class="calculatorDebugCodeTD2">' +
    modifiersData[thisModifierID].name +
    " (Modifier ID: " +
    thisModifierID +
    ")</td>" +
    "</tr>" +
    "<tr>" +
    calculatorDebugCodeTD1 +
    "Template Name</td>" +
    calculatorDebugCodeTD2 +
    templatesData[
      globalCalculatorItemsAddedModifierArray[localItemID][loopIndex]
        .modifierTemplateID
    ].name +
    " (Template ID: " +
    globalCalculatorItemsAddedModifierArray[localItemID][loopIndex]
      .modifierTemplateID +
    ")</td>" +
    "</tr>" +
    "<tr>" +
    calculatorDebugCodeTD1 +
    "Group Name</td>" +
    calculatorDebugCodeTD2 +
    groupsData[localGroupID].name +
    " (Group ID: " +
    localGroupID +
    ")</td>" +
    "</tr>" +
    "<tr>" +
    calculatorDebugCodeTD1BaseValue +
    "Modifier Base Value - Calories</td>" +
    calculatorDebugCodeTD2 +
    modifiersData[thisModifierID].calories +
    "</td>" +
    "</tr>";
  if (
    globalCalculatorItemsAddedModifierArray[localItemID][loopIndex]
      .templateModifier !== 1
  ) {
    debugHTMLValue +=
      "<tr>" +
      calculatorDebugCodeTD1 +
      "Template Multiplier</td>" +
      calculatorDebugCodeTD2 +
      globalCalculatorItemsAddedModifierArray[localItemID][loopIndex]
        .templateModifier +
      "</td>" +
      "</tr>";
  }
  if (groupModifierMultiplier !== 1) {
    debugHTMLValue +=
      "<tr>" +
      calculatorDebugCodeTD1 +
      "Group Multiplier</td>" +
      calculatorDebugCodeTD2 +
      groupModifierMultiplier +
      "</td>" +
      "</tr>";
  }
  if (systemServingSize !== 1) {
    debugHTMLValue +=
      "<tr>" +
      calculatorDebugCodeTD1 +
      "Menu Multiplier</td>" +
      calculatorDebugCodeTD2 +
      systemServingSize +
      "</td>" +
      "</tr>";
  }
  if (
    globalCalculatorItemsAddedModifierArray[localItemID][loopIndex]
      .userQuantity !== 1
  ) {
    debugHTMLValue +=
      "<tr>" +
      calculatorDebugCodeTD1 +
      "Menu Public Qty</td>" +
      calculatorDebugCodeTD2 +
      globalCalculatorItemsAddedModifierArray[localItemID][loopIndex]
        .userQuantity +
      "</td>" +
      "</tr>";
  }
  debugHTMLValue +=
    "<tr>" +
    calculatorDebugCodeTD1Blue +
    "Group Divide Evenly Feature Enabled?</td>" +
    calculatorDebugCodeTD2 +
    (groupsData[localGroupID].divide_evenly === 1 ? "Enabled" : "Disabled") +
    "</td>" +
    "</tr>";
  if (groupsData[localGroupID].divide_evenly === 1) {
    debugHTMLValue +=
      "<tr>" +
      calculatorDebugCodeTD1Blue +
      "Sum of all the modifier quantities in the group</td>" +
      calculatorDebugCodeTD2 +
      divide_temp +
      "</td>" +
      "</tr>" +
      "<tr>" +
      calculatorDebugCodeTD1Blue +
      "# of modifiers from this group</td>" +
      calculatorDebugCodeTD2 +
      localDividedEvenlyCounter +
      "</td>" +
      "</tr>" +
      "<tr>" +
      calculatorDebugCodeTD1Blue +
      "# of modifiers from this group with zero quantity</td>" +
      calculatorDebugCodeTD2 +
      globalDividedEvenlyFeatureZeroArray[localItemID][localGroupID] +
      "</td>" +
      "</tr>" +
      "<tr>" +
      calculatorDebugCodeTD1Blue +
      "Group Divide Evenly Factor</td>" +
      calculatorDebugCodeTD2 +
      divide_evenly +
      "</td>" +
      "</tr>";
  }
  debugHTMLValue +=
    "<tr>" +
    calculatorDebugCodeTD1Green +
    "Group Pizza Feature Enabled?</td>" +
    calculatorDebugCodeTD2 +
    (groupsData[localGroupID].pizza_multiplier_enabled === 1
      ? "Enabled"
      : "Disabled") +
    "</td>" +
    "</tr>";
  if (groupsData[localGroupID].pizza_multiplier_enabled === 1) {
    debugHTMLValue +=
      "<tr>" +
      calculatorDebugCodeTD1Green +
      "Group Pizza Multiple Item Qty</td>" +
      calculatorDebugCodeTD2 +
      groupsData[localGroupID].pizza_multiplier_count_threshold +
      "</td>" +
      "</tr>" +
      "<tr>" +
      calculatorDebugCodeTD1Green +
      "Number of Modifiers on this Group</td>" +
      calculatorDebugCodeTD2 +
      globalPizzaFeatureCounterArray[localItemID][localGroupID] +
      "</td>" +
      "</tr>" +
      "<tr>" +
      calculatorDebugCodeTD1Green +
      "Group Pizza Factor</td>" +
      calculatorDebugCodeTD2 +
      pizza_feature +
      "</td>" +
      "</tr>";
  }
  return (
    debugHTMLValue +
    "<tr>" +
    calculatorDebugCodeTD1 +
    "Multiplier Final Value</td>" +
    calculatorDebugCodeTD2 +
    newMod +
    "</td>" +
    "</tr>" +
    "<tr>" +
    calculatorDebugCodeTD1 +
    "Modifier Final Value - Calories (without toFixed)</td>" +
    calculatorDebugCodeTD2 +
    modifiersData[thisModifierID].calories * newMod +
    "</td>" +
    "</tr>" +
    "<tr>" +
    calculatorDebugCodeTD1 +
    "Modifier Final Value - Calories</td>" +
    calculatorDebugCodeTD2 +
    roundLoDashMain(modifiersData[thisModifierID].calories * newMod, 1) +
    "</td>" +
    "</tr>" +
    "<tr>" +
    calculatorDebugCodeTD1BaseValue +
    "Modifier Base Value - Added Sugars</td>" +
    calculatorDebugCodeTD2 +
    modifiersData[thisModifierID].added_sugars +
    "</td>" +
    "</tr>" +
    "<tr>" +
    calculatorDebugCodeTD1BaseValue +
    "Modifier Base Value - Calcium</td>" +
    calculatorDebugCodeTD2 +
    modifiersData[thisModifierID].calcium +
    "</td>" +
    "</tr>" +
    "<tr>" +
    calculatorDebugCodeTD1BaseValue +
    "Modifier Base Value - Calories</td>" +
    calculatorDebugCodeTD2 +
    modifiersData[thisModifierID].calories +
    "</td>" +
    "</tr>" +
    "<tr>" +
    calculatorDebugCodeTD1BaseValue +
    "Modifier Base Value - Cholesterol</td>" +
    calculatorDebugCodeTD2 +
    modifiersData[thisModifierID].cholesterol +
    "</td>" +
    "</tr>" +
    "<tr>" +
    calculatorDebugCodeTD1BaseValue +
    "Modifier Base Value - Fat Calories</td>" +
    calculatorDebugCodeTD2 +
    modifiersData[thisModifierID].fat_calories +
    "</td>" +
    "</tr>" +
    "<tr>" +
    calculatorDebugCodeTD1BaseValue +
    "Modifier Base Value - Fibers</td>" +
    calculatorDebugCodeTD2 +
    modifiersData[thisModifierID].fibers +
    "</td>" +
    "</tr>" +
    "<tr>" +
    calculatorDebugCodeTD1BaseValue +
    "Modifier Base Value - Iron</td>" +
    calculatorDebugCodeTD2 +
    modifiersData[thisModifierID].iron +
    "</td>" +
    "</tr>" +
    "<tr>" +
    calculatorDebugCodeTD1BaseValue +
    "Modifier Base Value - Monounsaturated Fat</td>" +
    calculatorDebugCodeTD2 +
    modifiersData[thisModifierID].monounsaturated_fat +
    "</td>" +
    "</tr>" +
    "<tr>" +
    calculatorDebugCodeTD1BaseValue +
    "Modifier Base Value - Polyunsaturated Fat</td>" +
    calculatorDebugCodeTD2 +
    modifiersData[thisModifierID].polyunsaturated_fat +
    "</td>" +
    "</tr>" +
    "<tr>" +
    calculatorDebugCodeTD1BaseValue +
    "Modifier Base Value - Potassium</td>" +
    calculatorDebugCodeTD2 +
    modifiersData[thisModifierID].potassium +
    "</td>" +
    "</tr>" +
    "<tr>" +
    calculatorDebugCodeTD1BaseValue +
    "Modifier Base Value - Caffeine</td>" +
    calculatorDebugCodeTD2 +
    modifiersData[thisModifierID].caffeine +
    "</td>" +
    "</tr>" +
    "<tr>" +
    calculatorDebugCodeTD1BaseValue +
    "Modifier Base Value - Protein</td>" +
    calculatorDebugCodeTD2 +
    modifiersData[thisModifierID].protein +
    "</td>" +
    "</tr>" +
    "<tr>" +
    calculatorDebugCodeTD1BaseValue +
    "Modifier Base Value - Saturated Fat</td>" +
    calculatorDebugCodeTD2 +
    modifiersData[thisModifierID].saturated_fat +
    "</td>" +
    "</tr>" +
    "<tr>" +
    calculatorDebugCodeTD1BaseValue +
    "Modifier Base Value - Sodium</td>" +
    calculatorDebugCodeTD2 +
    modifiersData[thisModifierID].sodium +
    "</td>" +
    "</tr>" +
    "<tr>" +
    calculatorDebugCodeTD1BaseValue +
    "Modifier Base Value - Sugar Alcohol</td>" +
    calculatorDebugCodeTD2 +
    modifiersData[thisModifierID].sugar_alcohol +
    "</td>" +
    "</tr>" +
    "<tr>" +
    calculatorDebugCodeTD1BaseValue +
    "Modifier Base Value - Sugars</td>" +
    calculatorDebugCodeTD2 +
    modifiersData[thisModifierID].sugars +
    "</td>" +
    "</tr>" +
    "<tr>" +
    calculatorDebugCodeTD1BaseValue +
    "Modifier Base Value - Total Carb</td>" +
    calculatorDebugCodeTD2 +
    modifiersData[thisModifierID].total_carb +
    "</td>" +
    "</tr>" +
    "<tr>" +
    calculatorDebugCodeTD1BaseValue +
    "Modifier Base Value - Total Fat</td>" +
    calculatorDebugCodeTD2 +
    modifiersData[thisModifierID].total_fat +
    "</td>" +
    "</tr>" +
    "<tr>" +
    calculatorDebugCodeTD1BaseValue +
    "Modifier Base Value - Trans Fat</td>" +
    calculatorDebugCodeTD2 +
    modifiersData[thisModifierID].trans_fat +
    "</td>" +
    "</tr>" +
    "<tr>" +
    calculatorDebugCodeTD1BaseValue +
    "Modifier Base Value - Vitamin A</td>" +
    calculatorDebugCodeTD2 +
    modifiersData[thisModifierID].vitamin_a +
    "</td>" +
    "</tr>" +
    "<tr>" +
    calculatorDebugCodeTD1BaseValue +
    "Modifier Base Value - Vitamin C</td>" +
    calculatorDebugCodeTD2 +
    modifiersData[thisModifierID].vitamin_c +
    "</td>" +
    "</tr>" +
    "<tr>" +
    calculatorDebugCodeTD1BaseValue +
    "Modifier Base Value - Vitamin D</td>" +
    calculatorDebugCodeTD2 +
    modifiersData[thisModifierID].vitamin_d +
    "</td>" +
    "</tr>" +
    "</tbody></table><br/><hr/><br/>"
  );
}
!(function ($) {
  for (let x = 1; x < 8; x++) {
    let tab = "";
    for (let t = 1; t <= x; t++) tab += "\t";
    eval("var globalTab" + x + ' = "' + tab + '";');
  }
  function NutritionLabel(t, e) {
    return (
      (this.nutritionLabel = null), (this.settings = t), (this.$elem = e), this
    );
  }
  function cleanSettings(t) {
    let e = [
      "calorieIntake",
      "dailyValueCalcium",
      "dailyValueCarb",
      "dailyValueCholesterol",
      "dailyValueEnergyKcal",
      "dailyValueFiber",
      "dailyValueIron",
      "dailyValuePotassium",
      "dailyValueProtein",
      "dailyValueSalt",
      "dailyValueSatFat",
      "dailyValueSodium",
      "dailyValueSugar",
      "dailyValueTotalFat",
      "dailyValueVitaminD",
      "decimalPlacesForDailyValues",
      "decimalPlacesForNutrition",
      "decimalPlacesForQuantityTextbox",
      "scrollHeightComparison",
      "scrollHeightPixel",
      "scrollLongItemNamePixel",
      "scrollLongItemNamePixel2018Override",
      "valueAddedSugars",
      "valueCaffeine",
      "valueCalcium",
      "valueCalories",
      "valueCholesterol",
      "valueCol1CalorieDiet",
      "valueCol1Dietary",
      "valueCol1DietaryCholesterol",
      "valueCol1DietaryPotassium",
      "valueCol1DietarySatFat",
      "valueCol1DietarySodium",
      "valueCol1DietaryTotalCarb",
      "valueCol1DietaryTotalFat",
      "valueCol2CalorieDiet",
      "valueCol2Dietary",
      "valueCol2DietaryCholesterol",
      "valueCol2DietaryPotassium",
      "valueCol2DietarySatFat",
      "valueCol2DietarySodium",
      "valueCol2DietaryTotalCarb",
      "valueCol2DietaryTotalFat",
      "valueFatCalories",
      "valueFibers",
      "valueIron",
      "valueMonoFat",
      "valuePolyFat",
      "valuePotassium",
      "valueProteins",
      "valueSatFat",
      "valueServingPerContainer",
      "valueServingSize",
      "valueServingUnitQuantity",
      "valueServingWeightGrams",
      "valueSodium",
      "valueSugarAlcohol",
      "valueSugars",
      "valueTotalCarb",
      "valueTotalFat",
      "valueTransFat",
      "valueVitaminA",
      "valueVitaminC",
      "valueVitaminD",
      "width",
    ];
    return (
      $.each(t, function (a, n) {
        -1 !== jQuery.inArray(a, e) &&
          ((t[a] = parseFloat(t[a])),
            (isNaN(t[a]) || void 0 === t[a]) && (t[a] = 0));
      }),
      t.valueServingUnitQuantity < 0 && (t.valueServingUnitQuantity = 0),
      t
    );
  }
  function updateNutritionValueWithMultiplier(t) {
    let e = [
      "valueAddedSugars",
      "valueCaffeine",
      "valueCalcium",
      "valueCalories",
      "valueCholesterol",
      "valueFatCalories",
      "valueFibers",
      "valueIron",
      "valueMonoFat",
      "valuePolyFat",
      "valuePotassium",
      "valuePotassium_2018",
      "valueProteins",
      "valueSatFat",
      "valueServingWeightGrams",
      "valueSodium",
      "valueSugarAlcohol",
      "valueSugars",
      "valueTotalCarb",
      "valueTotalFat",
      "valueTransFat",
      "valueVitaminA",
      "valueVitaminC",
      "valueVitaminD",
    ];
    return (
      $.each(t, function (a, n) {
        -1 !== jQuery.inArray(a, e) &&
          ((t[a] = parseFloat(t[a])),
            (isNaN(t[a]) || void 0 === t[a]) && (t[a] = 0),
            (t[a] =
              parseFloat(t[a]) *
              parseFloat(t.valueServingUnitQuantity) *
              parseFloat(t.nutritionValueMultiplier)));
      }),
      0 == parseFloat(t.valueServingUnitQuantity)
        ? (t.valueServingPerContainer = 0)
        : isNaN(t.valueServingPerContainer) ||
        null == t.valueServingPerContainer ||
        (t.valueServingPerContainer =
          parseFloat(t.totalContainerQuantity) /
          parseFloat(t.valueServingUnitQuantity)),
      t
    );
  }
  function init(t, e) {
    let a = $.extend({}, $.fn.nutritionLabel.defaultSettings, t || {}),
      n = cleanSettings(
        $.extend({}, $.fn.nutritionLabel.defaultSettings, t || {})
      );
    (a.totalContainerQuantity =
      parseFloat(a.valueServingPerContainer) *
      parseFloat(a.valueServingUnitQuantity)),
      (n.totalContainerQuantity =
        parseFloat(n.valueServingPerContainer) *
        parseFloat(n.valueServingUnitQuantity)),
      (a = cleanSettings(a)),
      (n = cleanSettings(n)),
      (a.nutritionValueMultiplier =
        a.valueServingUnitQuantity <= 0 ? 1 : 1 / a.valueServingUnitQuantity);
    let i = updateNutritionValueWithMultiplier(a);
    (a.originalServingUnitQuantity = i.valueServingUnitQuantity),
      i.valueServingUnitQuantity <= 0 &&
      ((n.valueServingUnitQuantity = 1),
        ((i =
          updateNutritionValueWithMultiplier(n)).valueServingUnitQuantity = 1));
    var l = new NutritionLabel(i, e);
    i.showLegacyVersion
      ? (updateValuesAfterAQuantityChanged(a, l, e, !0, !0, !1),
        a.showServingUnitQuantityTextbox &&
        (a.hideTextboxArrows ||
          ($("#" + e.attr("id")).on("click", ".unitQuantityUp", function (n) {
            n.preventDefault(),
              changeQuantityByArrow(
                $(this),
                1,
                updateTheSettingsAfterAnEvent(a, t),
                l,
                e,
                !0,
                !1
              );
          }),
            $("#" + e.attr("id")).on(
              "click",
              ".unitQuantityDown",
              function (n) {
                n.preventDefault(),
                  changeQuantityByArrow(
                    $(this),
                    -1,
                    updateTheSettingsAfterAnEvent(a, t),
                    l,
                    e,
                    !0,
                    !1
                  );
              }
            )),
          $("#" + e.attr("id")).on("change", ".unitQuantityBox", function (n) {
            n.preventDefault(),
              changeQuantityTextbox(
                $(this),
                updateTheSettingsAfterAnEvent(a, t),
                l,
                e,
                !0,
                !1
              );
          }),
          $("#" + e.attr("id")).on("keydown", ".unitQuantityBox", function (n) {
            13 == n.keyCode &&
              (n.preventDefault(),
                changeQuantityTextbox(
                  $(this),
                  updateTheSettingsAfterAnEvent(a, t),
                  l,
                  e,
                  !0,
                  !1
                ));
          })))
      : i.showUKVersion
        ? (updateValuesAfterAQuantityChanged(a, l, e, !1, !0, !0),
          a.showServingUnitQuantityTextbox &&
          (a.hideTextboxArrows ||
            ($("#" + e.attr("id")).on(
              "click",
              ".uk_nf-unitQuantityUp",
              function (n) {
                n.preventDefault(),
                  changeQuantityByArrow(
                    $(this),
                    1,
                    updateTheSettingsAfterAnEvent(a, t),
                    l,
                    e,
                    !1,
                    !0
                  );
              }
            ),
              $("#" + e.attr("id")).on(
                "click",
                ".uk_nf-unitQuantityDown",
                function (n) {
                  n.preventDefault(),
                    changeQuantityByArrow(
                      $(this),
                      -1,
                      updateTheSettingsAfterAnEvent(a, t),
                      l,
                      e,
                      !1,
                      !0
                    );
                }
              )),
            $("#" + e.attr("id")).on(
              "change",
              ".uk_nf-unitQuantityBox",
              function (n) {
                n.preventDefault(),
                  changeQuantityTextbox(
                    $(this),
                    updateTheSettingsAfterAnEvent(a, t),
                    l,
                    e,
                    !1,
                    !0
                  );
              }
            ),
            $("#" + e.attr("id")).on(
              "keydown",
              ".uk_nf-unitQuantityBox",
              function (n) {
                13 == n.keyCode &&
                  (n.preventDefault(),
                    changeQuantityTextbox(
                      $(this),
                      updateTheSettingsAfterAnEvent(a, t),
                      l,
                      e,
                      !1,
                      !0
                    ));
              }
            )))
        : (updateValuesAfterAQuantityChanged(a, l, e, !1, !0, !1),
          a.showServingUnitQuantityTextbox &&
          (a.hideTextboxArrows ||
            ($("#" + e.attr("id")).on(
              "click",
              "div.nf-unitQuantityUp",
              function (n) {
                n.preventDefault(),
                  changeQuantityByArrow(
                    $(this),
                    1,
                    updateTheSettingsAfterAnEvent(a, t),
                    l,
                    e,
                    !1,
                    !1
                  );
              }
            ),
              $("#" + e.attr("id")).on(
                "click",
                "div.nf-unitQuantityDown",
                function (n) {
                  n.preventDefault(),
                    changeQuantityByArrow(
                      $(this),
                      -1,
                      updateTheSettingsAfterAnEvent(a, t),
                      l,
                      e,
                      !1,
                      !1
                    );
                }
              )),
            $("#" + e.attr("id")).on(
              "change",
              ".nf-unitQuantityBox",
              function (n) {
                n.preventDefault(),
                  changeQuantityTextbox(
                    $(this),
                    updateTheSettingsAfterAnEvent(a, t),
                    l,
                    e,
                    !1,
                    !1
                  );
              }
            ),
            $("#" + e.attr("id")).on(
              "keydown",
              ".nf-unitQuantityBox",
              function (n) {
                13 == n.keyCode &&
                  (n.preventDefault(),
                    changeQuantityTextbox(
                      $(this),
                      updateTheSettingsAfterAnEvent(a, t),
                      l,
                      e,
                      !1,
                      !1
                    ));
              }
            ))),
      e.data("_nutritionLabel", l);
  }
  function updateTheSettingsAfterAnEvent(t, e) {
    let a = cleanSettings(
      $.extend({}, $.fn.nutritionLabel.defaultSettings, e || {})
    );
    return (
      (a.originalServingUnitQuantity = t.originalServingUnitQuantity),
      (a.totalContainerQuantity = t.totalContainerQuantity),
      (a.nutritionValueMultiplier =
        a.valueServingUnitQuantity <= 0 ? 1 : 1 / a.valueServingUnitQuantity),
      a
    );
  }
  function addScrollToItemDiv(t, e, a, n) {
    let i = parseInt(e.scrollLongItemNamePixel);
    n || (i = parseInt(e.scrollLongItemNamePixel2018Override)),
      null != $("#" + t.attr("id") + " ." + a + ".inline").val()
        ? $("#" + t.attr("id") + " ." + a + ".inline").height() > i + 1 &&
        $("#" + t.attr("id") + " ." + a + ".inline").css({
          "margin-left": "3.90em",
          height: i + "px",
          "overflow-y": "auto",
        })
        : n
          ? $("#" + t.attr("id") + " ." + a).height() > i + 1 &&
          $("#" + t.attr("id") + " ." + a).css({
            height: i + "px",
            "overflow-y": "auto",
          })
          : $("#" + t.attr("id") + " ." + a + " div").height() >= i + 1 &&
          $("#" + t.attr("id") + " ." + a + " div").css({
            height: i + "px",
            "overflow-y": "auto",
          });
  }
  function notApplicableHover(t) {
    void 0 !== t.attr("id") && "" !== t.attr("id")
      ? ($("#" + t.attr("id") + " .notApplicable").on(
        "mouseenter",
        function () {
          $("#" + t.attr("id") + " .naTooltip")
            .css({
              top: $(this).position().top + "px",
              left: $(this).position().left + 10 + "px",
            })
            .show();
        }
      ),
        $("#" + t.attr("id") + " .notApplicable").on("mouseleave", function () {
          $("#" + t.attr("id") + " .naTooltip").hide();
        }))
      : ($("#" + t.attr("id") + " .notApplicable").on(
        "mouseenter",
        function () {
          $(".naTooltip")
            .css({
              top: $(this).position().top + "px",
              left: $(this).position().left + 10 + "px",
            })
            .show();
        }
      ),
        $("#" + t.attr("id") + " .notApplicable").on("mouseleave", function () {
          $(".naTooltip").hide();
        }));
  }
  function updateScrollingFeature(t, e, a, n, i) {
    let l;
    (l =
      void 0 !== t.attr("id") && "" !== t.attr("id")
        ? $("#" + t.attr("id") + " #" + a).parent()
        : $("#" + a).parent()).innerHeight() > n &&
      l.addClass("scroll").css({ height: i + "px" });
  }
  function updateValuesAfterAQuantityChanged(t, e, a, n, i, l) {
    let o = "ingredientList",
      s = "calcDisclaimerText",
      r = "name";
    if (
      (n || l
        ? !n &&
        l &&
        ((o = "uk_nf-ingredient-statement"), (s = "uk_nf-disclaimer"))
        : ((o = "nf-ingredientList"),
          (s = "nf-calcDisclaimerText"),
          (r = "nf-item-name block")),
        i ||
        (e = new NutritionLabel(
          (t = updateNutritionValueWithMultiplier(t)),
          a
        )),
        n
          ? a.html(e.generateLegacy())
          : l
            ? a.html(e.generateUK())
            : a.html(e.generate2018()),
        t.showIngredients &&
        t.scrollLongIngredients &&
        updateScrollingFeature(
          a,
          t,
          o,
          t.scrollHeightComparison,
          t.scrollHeightPixel
        ),
        t.showDisclaimer &&
        updateScrollingFeature(
          a,
          t,
          s,
          t.scrollDisclaimerHeightComparison,
          t.scrollDisclaimer
        ),
        notApplicableHover(a),
        l || (t.scrollLongItemName && addScrollToItemDiv(a, t, r, n)),
        !i)
    )
      return t;
  }
  function handleQuantityChange(t, e, a, n) {
    let i;
    t.userFunctionOnQuantityChange
      ? (i = t.userFunctionOnQuantityChange)
      : t.userFunctionNameOnQuantityChange &&
      (i = window[t.userFunctionNameOnQuantityChange]),
      "function" == typeof i && i(e, a, n);
  }
  function changeQuantityTextbox(t, e, a, n, i, l) {
    let o,
      s,
      r = "nixLabelBeforeQuantity";
    !i & !l
      ? (r = "nf-nixLabelBeforeQuantity")
      : !i & l && (r = "uk_nf-nixLabelBeforeQuantity"),
      (o = parseFloat($("#" + n.attr("id") + " #" + r).val())),
      (s = regIsPosNumber(t.val()) ? parseFloat(t.val()) : o),
      t.val(roundLoDash(s, e.decimalPlacesForQuantityTextbox)),
      (e.valueServingUnitQuantity = s),
      (e = updateValuesAfterAQuantityChanged(e, a, n, i, !1, l))
        .allowGoogleAnalyticsEventLog &&
      window[e.gooleAnalyticsFunctionName](
        "send",
        "event",
        e.textGoogleAnalyticsEventCategory,
        e.textGoogleAnalyticsEventActionTextbox
      ),
      handleQuantityChange(
        e,
        "textbox",
        roundLoDash(o, e.decimalPlacesForQuantityTextbox),
        roundLoDash(s, e.decimalPlacesForQuantityTextbox)
      );
  }
  function changeQuantityByArrow(t, e, a, n, i, l, o) {
    let s = "unitQuantityBox";
    !l & !o
      ? (s = "nf-unitQuantityBox")
      : !l & o && (s = "uk_nf-unitQuantityBox");
    let r = parseFloat(
      t
        .parent()
        .parent()
        .find("input." + s)
        .val()
    );
    isNaN(r) && (r = 1);
    let u = r;
    r <= 1 && -1 == e
      ? (r += e = -0.5)
      : r < 1 && 1 == e
        ? (r += e = 0.5)
        : r <= 2 && r > 1 && -1 == e
          ? (r = 1)
          : (r += e),
      r < 0 && (r = 0),
      t
        .parent()
        .parent()
        .find("input." + s)
        .val(roundLoDash(r, a.decimalPlacesForQuantityTextbox)),
      (a.valueServingUnitQuantity = r),
      (a = updateValuesAfterAQuantityChanged(a, n, i, l, !1, o))
        .allowGoogleAnalyticsEventLog &&
      (e > 0
        ? window[a.gooleAnalyticsFunctionName](
          "send",
          "event",
          a.textGoogleAnalyticsEventCategory,
          a.textGoogleAnalyticsEventActionUpArrow
        )
        : window[a.gooleAnalyticsFunctionName](
          "send",
          "event",
          a.textGoogleAnalyticsEventCategory,
          a.textGoogleAnalyticsEventActionDownArrow
        )),
      handleQuantityChange(a, e > 0 ? "up arrow" : "down arrow", u, r);
  }
  function roundToNearestNum(t, e) {
    return e < 0 ? Math.round(t * e) / e : Math.round(t / e) * e;
  }
  function roundCalories(t, e) {
    return (t = roundCaloriesRule(t)) > 0 && (t = roundLoDash(t, e)), t;
  }
  function roundFat(t, e) {
    return (t = roundFatRule(t)) > 0 && (t = roundLoDash(t, e)), t;
  }
  function roundSodium(t, e) {
    return (t = roundSodiumRule(t)) > 0 && (t = roundLoDash(t, e)), t;
  }
  function roundPotassium(t, e) {
    return (t = roundPotassiumRule(t)) > 0 && (t = roundLoDash(t, e)), t;
  }
  function roundCholesterol(t, e) {
    let a = !0,
      n = roundCholesterolRule(t);
    return (
      !1 === n ? (a = !1) : (t = n),
      a ? t > 0 && (t = roundLoDash(t, e)) : (t = "< 5"),
      t
    );
  }
  function roundCarbFiberSugarProtein(t, e) {
    let a = !0,
      n = roundCarbFiberSugarProteinRule(t);
    return (
      !1 === n ? (a = !1) : (t = n),
      a ? t > 0 && (t = roundLoDash(t, e)) : (t = "< 1"),
      t
    );
  }
  function roundCaffeine(t, e) {
    return (t = roundToNearestNum(t, 1)) > 0 && (t = roundLoDash(t, e)), t;
  }
  function roundCaloriesRule(t) {
    return t < 5 ? 0 : roundToNearestNum(t, t <= 50 ? 5 : 10);
  }
  function roundFatRule(t) {
    return t < 0.5 ? 0 : roundToNearestNum(t, t < 5 ? 0.5 : 1);
  }
  function roundSodiumRule(t) {
    return t < 5 ? 0 : roundToNearestNum(t, t <= 140 ? 5 : 10);
  }
  function roundPotassiumRule(t) {
    return t < 5 ? 0 : roundToNearestNum(t, t <= 140 ? 5 : 10);
  }
  function roundCholesterolRule(t) {
    return t < 2 ? 0 : !(t <= 5) && roundToNearestNum(t, 5);
  }
  function roundCarbFiberSugarProteinRule(t) {
    return t < 0.5 ? 0 : !(t < 1) && roundToNearestNum(t, 1);
  }
  function roundVitaminsCalciumIron(t) {
    return t > 0 ? roundToNearestNum(t, t < 10 ? 2 : t < 50 ? 5 : 10) : 0;
  }
  function roundForUKLabelTotalFatCarbsSugarFiberProtein(t) {
    let e = !0,
      a = roundForUKLabelTotalFatCarbsSugarFiberProteinRule(t);
    return !1 === a ? (e = !1) : (t = a), e && 0 == t && (t = "< 0.5"), t;
  }
  function roundForUKLabelTotalFatCarbsSugarFiberProteinRule(t) {
    return t <= 0.5
      ? 0
      : t < 10
        ? roundLoDash(roundToNearestNum(t, 0.1), 1)
        : roundLoDash(roundToNearestNum(t, 1));
  }
  function roundForUKLabelSatFat(t) {
    let e = !0,
      a = roundForUKLabelSatFatRule(t);
    return !1 === a ? (e = !1) : (t = a), e && 0 == t && (t = "< 0.1"), t;
  }
  function roundForUKLabelSatFatRule(t) {
    return t <= 0.1
      ? 0
      : t < 10
        ? roundLoDash(roundToNearestNum(t, 0.1), 1)
        : roundLoDash(roundToNearestNum(t, 1));
  }
  function roundForUKLabelSalt(t) {
    let e = !0,
      a = roundForUKLabelSaltRule(t);
    return !1 === a ? (e = !1) : (t = a), e && 0 == t && (t = "< 0.01"), t;
  }
  function roundForUKLabelSaltRule(t) {
    return t <= 0.0125
      ? 0
      : t < 1
        ? roundLoDash(roundToNearestNum(t, 0.01), 2)
        : roundLoDash(roundToNearestNum(t, 0.1), 1);
  }
  function roundFor2018LabelVitaminDIron(t) {
    return (t = roundFor2018LabelVitaminDIronRule(t)) > 0
      ? roundLoDash(t, 1)
      : 0;
  }
  function roundFor2018LabelVitaminDIronRule(t) {
    return roundToNearestNum(t, 0.1);
  }
  function roundFor2018LabelCalciumPotassium(t) {
    return (t = roundFor2018LabelCalciumPotassiumRule(t)) > 0 ? t : 0;
  }
  function roundFor2018LabelCalciumPotassiumRule(t) {
    return roundToNearestNum(t, 10);
  }
  function regIsPosNumber(t) {
    return new RegExp("(^[0-9]+[.]?[0-9]+$)|(^[0-9]+$)").test(t);
  }
  function itemNameHtmlLegacy(t) {
    let e = globalTab1,
      a = "",
      n = "";
    if (
      t.showServingUnitQuantityTextbox &&
      (null === t.valueServingSizeUnit ||
        "" == t.valueServingSizeUnit ||
        ("" !== t.valueServingSizeUnit &&
          null !== t.valueServingSizeUnit &&
          t.originalServingUnitQuantity <= 0))
    ) {
      let i = "unitQuantityBox";
      (a += globalTab1 + '<div class="cf">\n'),
        (a += globalTab2 + '<div class="rel servingSizeField">\n'),
        t.hideTextboxArrows
          ? (i = "unitQuantityBox arrowsAreHidden")
          : ((a += globalTab3 + '<div class="setter">\n'),
            (a +=
              globalTab4 +
              '<a href="' +
              t.textAriaLabelIncreaseQuantityArrow +
              '" class="unitQuantityUp" '),
            (a +=
              'aria-label="' +
              t.textAriaLabelIncreaseQuantityArrow +
              '" rel="nofollow" tabindex="0"></a>\n'),
            (a +=
              globalTab4 +
              '<a href="' +
              t.textAriaLabelDecreaseQuantityArrow +
              '" class="unitQuantityDown" '),
            (a +=
              'aria-label="' +
              t.textAriaLabelDecreaseQuantityArrow +
              '" rel="nofollow" tabindex="0"></a>\n'),
            (a +=
              globalTab3 + '</div>\x3c!-- closing class="setter" --\x3e\n\n')),
        (a +=
          globalTab3 +
          '<input type="text" data-role="none" value="' +
          roundLoDash(
            t.valueServingUnitQuantity,
            t.decimalPlacesForQuantityTextbox
          ) +
          '" class="' +
          i +
          '" aria-label="' +
          t.textAriaLabelChangeQuantityTextbox +
          '">\n'),
        (a +=
          globalTab3 +
          '<input type="hidden" value="' +
          roundLoDash(
            t.valueServingUnitQuantity,
            t.decimalPlacesForQuantityTextbox
          ) +
          '" id="nixLabelBeforeQuantity">\n'),
        (a +=
          globalTab2 +
          '</div>\x3c!-- closing class="servingSizeField" --\x3e\n\n'),
        (e = globalTab2),
        (n = "inline");
    }
    return (
      (a += e + '<div class="name ' + n + '" tabindex="0">'),
      (a += t.itemName),
      t.showBrandName &&
      null !== t.brandName &&
      "" != t.brandName &&
      (a += " - " + t.brandName),
      (a += "</div>\n"),
      t.showServingUnitQuantityTextbox &&
      (null === t.valueServingSizeUnit ||
        "" == t.valueServingSizeUnit ||
        ("" !== t.valueServingSizeUnit &&
          null !== t.valueServingSizeUnit &&
          t.originalServingUnitQuantity <= 0)) &&
      (a += globalTab1 + '</div>\x3c!-- closing class="cf" --\x3e\n\n'),
      a
    );
  }
  function sevingUnitQuantityHtmlLegacy(t) {
    let e = !1,
      a = !1,
      n = "";
    if (t.showServingUnitQuantity) {
      if (
        ((n += globalTab1 + '<div class="serving" tabIndex="0">\n'),
          t.originalServingUnitQuantity > 0)
      ) {
        let e = "",
          a = "";
        if (
          ((n += globalTab2 + '<div class="cf">\n'),
            (n +=
              globalTab3 +
              '<div class="servingSizeText fl">' +
              t.textServingSize +
              "</div>\n"),
            (n += t.showServingUnitQuantityTextbox
              ? ""
              : globalTab3 +
              '<div class="servingUnitQuantity fl" itemprop="servingSize">' +
              roundLoDash(
                t.originalServingUnitQuantity,
                t.decimalPlacesForNutrition
              ) +
              "</div>\n"),
            "" !== t.valueServingSizeUnit && null !== t.valueServingSizeUnit)
        ) {
          if (
            t.showServingUnitQuantityTextbox &&
            null !== t.valueServingSizeUnit &&
            "" != t.valueServingSizeUnit
          ) {
            let i = "unitQuantityBox";
            (e = "unitHasTextbox"),
              (a = "gramsHasTextbox"),
              (n += globalTab3 + '<div class="rel servingSizeField fl">\n'),
              t.hideTextboxArrows
                ? (i = "unitQuantityBox arrowsAreHidden")
                : ((n += globalTab4 + '<div class="setter">\n'),
                  (n +=
                    globalTab5 +
                    '<a href="' +
                    t.textAriaLabelIncreaseQuantityArrow +
                    '" class="unitQuantityUp" '),
                  (n +=
                    'aria-label="' +
                    t.textAriaLabelIncreaseQuantityArrow +
                    '" rel="nofollow" tabindex="0"></a>\n'),
                  (n +=
                    globalTab5 +
                    '<a href="' +
                    t.textAriaLabelDecreaseQuantityArrow +
                    '" class="unitQuantityDown" '),
                  (n +=
                    'aria-label="' +
                    t.textAriaLabelDecreaseQuantityArrow +
                    '" rel="nofollow" tabindex="0"></a>\n'),
                  (n +=
                    globalTab4 +
                    '</div>\x3c!-- closing class="setter" --\x3e\n\n')),
              (n +=
                globalTab4 +
                '<input type="text" value="' +
                roundLoDash(
                  t.valueServingUnitQuantity,
                  t.decimalPlacesForQuantityTextbox
                ) +
                '" class="' +
                i +
                '" aria-label="' +
                t.textAriaLabelChangeQuantityTextbox +
                '">\n'),
              (n +=
                globalTab4 +
                '<input type="hidden" value="' +
                roundLoDash(
                  t.valueServingUnitQuantity,
                  t.decimalPlacesForQuantityTextbox
                ) +
                '" id="nixLabelBeforeQuantity">\n'),
              (n +=
                globalTab3 +
                '</div>\x3c!-- closing class="servingSizeField" --\x3e\n\n');
          } else
            t.originalServingUnitQuantity > 0 &&
              t.showServingUnitQuantityTextbox &&
              (n +=
                globalTab3 +
                '<div class="servingUnitQuantity" itemprop="servingSize">' +
                roundLoDash(
                  t.originalServingUnitQuantity,
                  t.decimalPlacesForNutrition
                ) +
                "</div>\n");
          n +=
            globalTab3 +
            '<div class="servingUnit fl ' +
            e +
            '" tabindex="0">' +
            t.valueServingSizeUnit +
            (1 == t.legacyVersion ? "</div>\n" : "");
        } else
          t.originalServingUnitQuantity > 0 &&
            t.showServingUnitQuantityTextbox &&
            (n +=
              globalTab3 +
              '<div class="servingUnitQuantity fl" itemprop="servingSize">' +
              roundLoDash(
                t.originalServingUnitQuantity,
                t.decimalPlacesForNutrition
              ) +
              "</div>\n");
        t.showServingWeightGrams &&
          t.valueServingWeightGrams > 0 &&
          (n +=
            globalTab3 +
            "<" +
            (1 == t.legacyVersion ? "div" : "span") +
            ' class="servingWeightGrams ' +
            (1 == t.legacyVersion ? "fl" : "") +
            " " +
            a +
            '">(<span itemprop="servingSize">' +
            roundLoDash(
              t.valueServingWeightGrams,
              t.decimalPlacesForNutrition
            ) +
            t.unitServingWeight +
            "</span>)\n</" +
            (1 == t.legacyVersion ? "div" : "span") +
            ">\n"),
          (n += globalTab3 + (1 == t.legacyVersion ? "" : "</div>\n")),
          (n += globalTab2 + '</div>\x3c!-- closing class="cf" --\x3e\n\n');
      } else e = !0;
      t.showServingsPerContainer && t.valueServingPerContainer > 0
        ? (n +=
          globalTab2 +
          '<div tabindex="0">' +
          t.textServingsPerContainer +
          " " +
          roundLoDash(
            t.valueServingPerContainer,
            t.decimalPlacesForNutrition
          ) +
          "</div>\n")
        : (a = !0),
        (n += globalTab1 + '</div>\x3c!-- closing class="serving" --\x3e\n\n');
    }
    return {
      servingSizeIsHidden: e,
      servingContainerIsHidden: a,
      nutritionLabel: n,
    };
  }
  function calorieDietHtmlLegacy(t) {
    let e = globalTab2 + '<table class="tblCalorieDiet" aria-hidden="true">\n';
    return (
      (e += globalTab3 + "<thead>\n"),
      (e += globalTab4 + "<tr>\n"),
      (e += globalTab5 + "<th>&nbsp;</th>\n"),
      (e += globalTab5 + "<th>" + t.textCalories + "</th>\n"),
      (e += globalTab5 + "<th>" + t.valueCol1CalorieDiet + "</th>\n"),
      (e += globalTab5 + "<th>" + t.valueCol2CalorieDiet + "</th>\n"),
      (e += globalTab4 + "</tr>\n"),
      (e += globalTab3 + "</thead>\n"),
      (e += globalTab3 + "<tbody>\n"),
      (e += globalTab4 + "<tr>\n"),
      (e += globalTab5 + "<td>" + t.textTotalFat + "</td>\n"),
      (e +=
        globalTab5 + "<td>" + t.textCalorieDietHtmlLegacyLessThan + "</td>\n"),
      (e += globalTab5 + "<td>" + t.valueCol1DietaryTotalFat + "g</td>\n"),
      (e += globalTab5 + "<td>" + t.valueCol2DietaryTotalFat + "g</td>\n"),
      (e += globalTab4 + "</tr>\n"),
      (e += globalTab4 + "<tr>\n"),
      (e += globalTab5 + "<td>&nbsp;&nbsp; " + t.textSatFat + "</td>\n"),
      (e +=
        globalTab5 + "<td>" + t.textCalorieDietHtmlLegacyLessThan + "</td>\n"),
      (e += globalTab5 + "<td>" + t.valueCol1DietarySatFat + "g</td>\n"),
      (e += globalTab5 + "<td>" + t.valueCol2DietarySatFat + "g</td>\n"),
      (e += globalTab4 + "</tr>\n"),
      (e += globalTab4 + "<tr>\n"),
      (e += globalTab5 + "<td>" + t.textCholesterol + "</td>\n"),
      (e +=
        globalTab5 + "<td>" + t.textCalorieDietHtmlLegacyLessThan + "</td>\n"),
      (e += globalTab5 + "<td>" + t.valueCol1DietaryCholesterol + "mg</td>\n"),
      (e += globalTab5 + "<td>" + t.valueCol2DietaryCholesterol + "mg</td>\n"),
      (e += globalTab4 + "</tr>\n"),
      (e += globalTab4 + "<tr>\n"),
      (e += globalTab5 + "<td>" + t.textSodium + "</td>\n"),
      (e +=
        globalTab5 + "<td>" + t.textCalorieDietHtmlLegacyLessThan + "</td>\n"),
      (e += globalTab5 + "<td>" + t.valueCol1DietarySodium + "mg</td>\n"),
      (e += globalTab5 + "<td>" + t.valueCol2DietarySodium + "mg</td>\n"),
      (e += globalTab4 + "</tr>\n"),
      (e += globalTab4 + "<tr>\n"),
      (e += globalTab5 + "<td>" + t.textPotassium + "</td>\n"),
      (e +=
        globalTab5 + "<td>" + t.textCalorieDietHtmlLegacyLessThan + "</td>\n"),
      (e += globalTab5 + "<td>" + t.valueCol1DietaryPotassium + "mg</td>\n"),
      (e += globalTab5 + "<td>" + t.valueCol2DietaryPotassium + "mg</td>\n"),
      (e += globalTab4 + "</tr>\n"),
      (e += globalTab4 + "<tr>\n"),
      (e += globalTab5 + "<td>" + t.textTotalCarb + "</td>\n"),
      (e += globalTab5 + "<td>&nbsp;</td>\n"),
      (e += globalTab5 + "<td>" + t.valueCol1DietaryTotalCarb + "g</td>\n"),
      (e += globalTab5 + "<td>" + t.valueCol2DietaryTotalCarb + "g</td>\n"),
      (e += globalTab4 + "</tr>\n"),
      (e += globalTab4 + "<tr>\n"),
      (e +=
        globalTab5 +
        "<td>&nbsp;&nbsp; " +
        t.textCalorieDietHtmlLegacyDietary +
        "</td>\n"),
      (e += globalTab5 + "<td>&nbsp;</td>\n"),
      (e += globalTab5 + "<td>" + t.valueCol1Dietary + "g</td>\n"),
      (e += globalTab5 + "<td>" + t.valueCol2Dietary + "g</td>\n"),
      (e += globalTab4 + "</tr>\n"),
      (e += globalTab3 + "</tbody>\n") + (globalTab2 + "</table>\n")
    );
  }
  function ingredientsHtmlLegacy(t) {
    let e = "";
    return (
      t.hidePercentDailyValues || (e += globalTab3 + "<br/>\n"),
      (e +=
        globalTab3 +
        '<div class="' +
        (t.hidePercentDailyValues
          ? "ingredientListDivHiddenDailyValues"
          : "ingredientListDiv") +
        '" tabindex="0">\n'),
      (e +=
        globalTab4 +
        '<strong class="active" id="ingredientList">' +
        t.ingredientLabel +
        "</strong>\n"),
      (e += globalTab4 + t.ingredientList + "\n") +
      (globalTab3 +
        '</div>\x3c!-- closing class="ingredientListDiv" --\x3e\n\n')
    );
  }
  function disclaimerHtmlLegacy(t) {
    let e = globalTab3 + "<br/>\n\n";
    return (
      (e += globalTab3 + '<div id="calcDisclaimer">\n'),
      (e +=
        globalTab4 +
        '<span id="calcDisclaimerText" tabindex="0">' +
        t.valueDisclaimer +
        "</span>\n"),
      (e +=
        globalTab3 +
        '</div>\x3c!-- closing class="calcDisclaimer" --\x3e\n\n') +
      (globalTab3 + "<br/>\n\n")
    );
  }
  function bottomLinkHtmlLegacy(t) {
    let e = globalTab1 + '<div class="spaceAbove"></div>\n';
    return (
      (e +=
        globalTab1 +
        '<a href="' +
        t.urlBottomLink +
        '" target="_newSite" class="homeLinkPrint">' +
        t.nameBottomLink +
        "</a>\n") +
      (globalTab1 + '<div class="spaceBelow"></div>\n')
    );
  }
  function generateAttributeWithoutPercentageHtmlLegacy(
    $localSettings,
    valueIndex,
    unitIndex,
    naIndex,
    attributeText,
    localTabValue,
    lineClass,
    attributeDisplayType,
    itemPropValue,
    localExtraTab,
    roundFunctionName
  ) {
    let localNaValue =
      '<font class="notApplicable" aria-hidden="true">' +
      $localSettings.textNotApplicable +
      '&nbsp;</font><font class="sr-only">' +
      $localSettings.textDataNotAvailable +
      "</font>\n",
      localNutritionLabel =
        localTabValue + '<div class="' + lineClass + '" tabindex="0">';
    return (
      1 == attributeDisplayType
        ? (localNutritionLabel +=
          "<strong>" +
          $localSettings[attributeText] +
          '</strong> <span itemprop="' +
          itemPropValue +
          '">')
        : 2 == attributeDisplayType
          ? (localNutritionLabel += $localSettings[attributeText] + " ")
          : 3 == attributeDisplayType
            ? (localNutritionLabel +=
              localExtraTab +
              $localSettings[attributeText] +
              ' <span itemprop="' +
              itemPropValue +
              '">')
            : 4 == attributeDisplayType
              ? (localNutritionLabel +=
                $localSettings[attributeText] +
                ' <span itemprop="' +
                itemPropValue +
                '">')
              : 5 == attributeDisplayType &&
              (localNutritionLabel += localExtraTab + '<div class="dv">'),
      (localNutritionLabel += $localSettings[naIndex]
        ? localNaValue
        : ($localSettings.allowFDARounding
          ? eval(roundFunctionName)(
            $localSettings[valueIndex],
            $localSettings.decimalPlacesForNutrition
          )
          : roundLoDash(
            $localSettings[valueIndex],
            $localSettings.decimalPlacesForNutrition
          )) + $localSettings[unitIndex]),
      1 == attributeDisplayType || 4 == attributeDisplayType
        ? (localNutritionLabel += "</span></div>\n")
        : 2 == attributeDisplayType
          ? (localNutritionLabel += "</div>\n")
          : 3 == attributeDisplayType
            ? (localNutritionLabel += "\n" + localTabValue + "</span></div>\n")
            : 5 == attributeDisplayType &&
            ((localNutritionLabel += "</div>\n"),
              (localNutritionLabel +=
                localExtraTab + $localSettings[attributeText] + "\n"),
              (localNutritionLabel += localTabValue + "</div>\n")),
      localNutritionLabel
    );
  }
  function generateAttributeWithPercentageHtmlLegacy(
    $localSettings,
    valueIndex,
    dailyValueIndex,
    unitIndex,
    naIndex,
    attributeTexts,
    lineClass,
    itemPropValue,
    roundFunctionName,
    roundFunctionRuleName,
    boldName,
    showPercentageCode
  ) {
    let localNaValue =
      '<font class="notApplicable" aria-hidden="true">' +
      $localSettings.textNotApplicable +
      '&nbsp;</font><font class="sr-only">' +
      $localSettings.textDataNotAvailable +
      "</font>\n",
      localNutritionLabel =
        globalTab1 + '<div class="' + lineClass + '" tabindex="0">\n';
    return (
      (localNutritionLabel += boldName
        ? globalTab2 +
        "<strong>" +
        $localSettings[attributeTexts] +
        '</strong> <span itemprop="' +
        itemPropValue +
        '">'
        : globalTab2 +
        $localSettings[attributeTexts] +
        ' <span itemprop="' +
        itemPropValue +
        '">'),
      (localNutritionLabel +=
        ($localSettings[naIndex]
          ? localNaValue
          : ($localSettings.allowFDARounding
            ? eval(roundFunctionName)(
              $localSettings[valueIndex],
              $localSettings.decimalPlacesForNutrition
            )
            : roundLoDash(
              $localSettings[valueIndex],
              $localSettings.decimalPlacesForNutrition
            )) + $localSettings[unitIndex]) + "\n"),
      !$localSettings.hidePercentDailyValues &&
      showPercentageCode &&
      ((localNutritionLabel += globalTab2 + '<div class="dv">'),
        (localNutritionLabel += $localSettings[naIndex]
          ? localNaValue
          : "<strong>" +
          roundLoDash(
            (($localSettings.allowFDARounding
              ? eval(roundFunctionRuleName)($localSettings[valueIndex])
              : $localSettings[valueIndex]) /
              (0 == $localSettings[dailyValueIndex]
                ? 1
                : $localSettings[dailyValueIndex] *
                roundLoDash(
                  parseFloat($localSettings.calorieIntake) / 2e3,
                  2
                ))) *
            100,
            $localSettings.decimalPlacesForDailyValues
          ) +
          '</strong>% <span class="sr-only">' +
          $localSettings.textDailyValues +
          "</span>"),
        (localNutritionLabel += "</div>\n")),
      localNutritionLabel + (globalTab1 + "</span></div>\n")
    );
  }
  function generateAttributeHtml2018Version(
    $localSettings,
    valueIndex,
    unitIndex,
    naIndex,
    attributeText,
    itemPropValue,
    topDivClass,
    showPercentageCode,
    roundFunctionName,
    roundFunctionRuleName,
    labelClass,
    valueClass,
    dailyValueIndex
  ) {
    let localNaValue =
      '<font class="notApplicable" aria-hidden="true">' +
      $localSettings.textNotApplicable +
      '&nbsp;</font><font class="sr-only">' +
      $localSettings.textDataNotAvailable +
      "</font>\n",
      localNutritionLabel =
        globalTab1 + '<div class="' + topDivClass + '" tabindex="0">\n';
    return (
      "valueAddedSugars" != valueIndex
        ? ((localNutritionLabel +=
          globalTab2 + '<span class="' + labelClass + '">'),
          (localNutritionLabel += $localSettings[attributeText]),
          (localNutritionLabel += "</span>\n"),
          (localNutritionLabel +=
            globalTab2 +
            '<span class="' +
            valueClass +
            '" itemprop="' +
            itemPropValue +
            '">'),
          (localNutritionLabel += $localSettings[naIndex]
            ? localNaValue
            : ($localSettings.allowFDARounding
              ? eval(roundFunctionName)(
                $localSettings[valueIndex],
                $localSettings.decimalPlacesForNutrition
              )
              : roundLoDash(
                $localSettings[valueIndex],
                $localSettings.decimalPlacesForNutrition
              )) + $localSettings[unitIndex]),
          (localNutritionLabel += "</span>\n"))
        : ((localNutritionLabel +=
          globalTab2 + '<span class="' + labelClass + '">\n'),
          (localNutritionLabel += $localSettings.textAddedSugars1 + "\n"),
          (localNutritionLabel +=
            globalTab3 +
            '<span class="' +
            valueClass +
            '" itemprop="' +
            itemPropValue +
            '">'),
          (localNutritionLabel += $localSettings[naIndex]
            ? localNaValue
            : ($localSettings.allowFDARounding
              ? eval(roundFunctionName)(
                $localSettings[valueIndex],
                $localSettings.decimalPlacesForNutrition
              )
              : roundLoDash(
                $localSettings[valueIndex],
                $localSettings.decimalPlacesForNutrition
              )) + $localSettings[unitIndex]),
          (localNutritionLabel += "</span>\n"),
          (localNutritionLabel += $localSettings.textAddedSugars2),
          (localNutritionLabel += "</span>\n")),
      showPercentageCode &&
      !$localSettings.hidePercentDailyValues &&
      ((localNutritionLabel +=
        globalTab2 + '<span class="nf-highlight nf-pr">'),
        (localNutritionLabel += $localSettings[naIndex]
          ? localNaValue
          : roundLoDash(
            (($localSettings.allowFDARounding
              ? eval(roundFunctionRuleName)($localSettings[valueIndex])
              : $localSettings[valueIndex]) /
              (0 == $localSettings[dailyValueIndex]
                ? 1
                : $localSettings[dailyValueIndex] *
                roundLoDash(
                  parseFloat($localSettings.calorieIntake) / 2e3,
                  2
                ))) *
            100,
            $localSettings.decimalPlacesForDailyValues
          ) +
          '% <span class="sr-only">' +
          $localSettings.textDailyValues +
          "</span>"),
        (localNutritionLabel += "</span>\n")),
      localNutritionLabel + (globalTab1 + "</div>\n")
    );
  }
  function ingredientsHtml2018Version(t) {
    let e = "";
    return (
      t.hidePercentDailyValues || (e += globalTab3 + "<br/>\n\n"),
      (e +=
        globalTab3 +
        '<div class="' +
        (t.hidePercentDailyValues
          ? "nf-ingredientListDivHiddenDailyValues"
          : "nf-ingredientListDiv") +
        '" tabindex="0">\n'),
      (e +=
        globalTab4 +
        '<strong class="active" id="nf-ingredientList">' +
        t.ingredientLabel +
        "</strong>\n"),
      (e += globalTab4 + t.ingredientList + "\n") +
      (globalTab3 +
        '</div>\x3c!-- closing class="nf-ingredientListDiv" --\x3e\n\n')
    );
  }
  function disclaimerHtml2018Version(t) {
    let e = globalTab3 + "<br/>\n\n";
    return (
      (e += globalTab3 + '<div id="nf-calcDisclaimer">\n'),
      (e +=
        globalTab4 +
        '<span id="nf-calcDisclaimerText" tabindex="0">' +
        t.valueDisclaimer +
        "</span>\n"),
      (e +=
        globalTab3 +
        '</div>\x3c!-- closing class="nf-calcDisclaimer" --\x3e\n\n') +
      (globalTab3 + "<br/>\n\n")
    );
  }
  function bottomLinkHtml2018Version(t) {
    let e = globalTab1 + '<div class="nf-spaceAbove"></div>\n';
    return (
      (e +=
        globalTab1 +
        '<a href="' +
        t.urlBottomLink +
        '" target="_newSite" class="nf-homeLinkPrint">' +
        t.nameBottomLink +
        "</a>\n") +
      (globalTab1 + '<div class="nf-spaceBelow"></div>\n')
    );
  }
  function generate2018HtmlAndComputeValueGivenThePercentage(
    t,
    e,
    a,
    n,
    i,
    l,
    o,
    s,
    r
  ) {
    let u =
      '<font class="notApplicable" aria-hidden="true">' +
      t.textNotApplicable +
      '&nbsp;</font><font class="sr-only">' +
      t.textDataNotAvailable +
      "</font>\n",
      g =
        '<div class="nf-vitamin-column' +
        (r ? " nf-vitamin-column-last" : "") +
        '" tabindex="0">\n';
    return (
      (g += t[o] + " "),
      (g +=
        (t[l]
          ? u
          : roundLoDash((t[e] / 100) * t[a], t.decimalPlacesForDailyValues) +
          t[n] +
          (s
            ? ' <span class="nf-pr">' +
            roundLoDash(t[e], t.decimalPlacesForDailyValues) +
            t[i] +
            "</span>"
            : "")) + "\n") + "</div>\n"
    );
  }
  function itemNameHtml2018(t) {
    let e = "",
      a = "";
    if (t.showServingUnitQuantityTextbox)
      if (
        null === t.valueServingSizeUnit ||
        "" == t.valueServingSizeUnit ||
        ("" !== t.valueServingSizeUnit &&
          null !== t.valueServingSizeUnit &&
          t.originalServingUnitQuantity <= 0)
      ) {
        let n = "",
          i = "nf-unitQuantityBox nf-modifier-field";
        t.hideTextboxArrows
          ? ((i = "nf-unitQuantityBox nf-modifier-field nf-arrowsAreHidden"),
            (n = "nf-fixed-serving "))
          : ((a += globalTab3 + '<div class="nf-arrows">\n'),
            (a +=
              globalTab4 +
              '<div class="nf-unitQuantityUp nf-arrow-up" aria-label="' +
              t.textAriaLabelIncreaseQuantityArrow +
              '" '),
            (a += 'rel="nofollow" tabindex="0"></div>\n'),
            (a +=
              globalTab4 +
              '<div class="nf-unitQuantityDown nf-arrow-down" aria-label="' +
              t.textAriaLabelDecreaseQuantityArrow +
              '" '),
            (a += 'rel="nofollow" tabindex="0"></div>\n'),
            (a +=
              globalTab3 +
              '</div>\x3c!-- closing class="nf-arrows v1" --\x3e\n\n')),
          (a +=
            globalTab3 +
            '<input type="text" value="' +
            roundLoDash(
              t.valueServingUnitQuantity,
              t.decimalPlacesForQuantityTextbox
            ) +
            '" class="' +
            i +
            '" data-role="none" aria-label="' +
            t.textAriaLabelChangeQuantityTextbox +
            '">\n'),
          (a +=
            globalTab3 +
            '<input type="hidden" value="' +
            roundLoDash(
              t.valueServingUnitQuantity,
              t.decimalPlacesForQuantityTextbox
            ) +
            '" id="nf-nixLabelBeforeQuantity">\n\n'),
          (e = n);
      } else t.showServingUnitQuantity || (e += "no-indent");
    else e += "no-indent";
    return (
      (a +=
        globalTab3 +
        '<div class="nf-serving-unit-name ' +
        e +
        '" tabindex="0">\n'),
      t.showServingUnitQuantity &&
      t.originalServingUnitQuantity > 0 &&
      "" !== t.valueServingSizeUnit &&
      null !== t.valueServingSizeUnit &&
      ((a += globalTab4 + t.valueServingSizeUnit + "\n"),
        t.showServingWeightGrams &&
        t.valueServingWeightGrams > 0 &&
        (a +=
          globalTab4 +
          '(<span itemprop="servingSize">' +
          roundLoDash(
            t.valueServingWeightGrams,
            t.decimalPlacesForNutrition
          ) +
          t.unitServingWeight +
          "</span>)\n")),
      (a += globalTab4 + '<div class="nf-item-name block">\n'),
      (a += globalTab5 + t.itemName + "\n"),
      t.showBrandName &&
      null !== t.brandName &&
      "" != t.brandName &&
      (a += " - " + t.brandName),
      (a += "\n" + globalTab4 + "</div>\n") + (globalTab3 + "</div>\n")
    );
  }
  function sevingUnitQuantityHtml2018(t) {
    let e = !1,
      a = "";
    if (t.showServingUnitQuantity)
      if (t.originalServingUnitQuantity > 0) {
        let e = !1;
        if (
          ((a +=
            globalTab3 +
            '<div tabIndex="0">\x3c!-- opening for serving size div --\x3e\n'),
            (a += globalTab4 + t.textServingSize),
            (a += t.showServingUnitQuantityTextbox
              ? ""
              : ' <span itemprop="servingSize">' +
              roundLoDash(
                t.originalServingUnitQuantity,
                t.decimalPlacesForNutrition
              ) +
              " </span>\n"),
            "" !== t.valueServingSizeUnit && null !== t.valueServingSizeUnit)
        ) {
          if (
            t.showServingUnitQuantityTextbox &&
            null !== t.valueServingSizeUnit &&
            "" != t.valueServingSizeUnit
          ) {
            let n = "nf-unitQuantityBox nf-modifier-field";
            (e = !0),
              (a +=
                "\n" +
                globalTab3 +
                "</div>\x3c!-- closing for serving size div --\x3e\n\n"),
              t.hideTextboxArrows
                ? (n =
                  "nf-unitQuantityBox nf-modifier-field nf-arrowsAreHidden")
                : ((a +=
                  globalTab5 +
                  '<div class="nf-arrows">\x3c!-- opening class="nf-arrows" --\x3e\n'),
                  (a +=
                    globalTab6 +
                    '<div class="nf-unitQuantityUp nf-arrow-up" aria-label="' +
                    t.textAriaLabelIncreaseQuantityArrow +
                    '" '),
                  (a += 'rel="nofollow" tabindex="0"></div>\n'),
                  (a +=
                    globalTab6 +
                    '<div class="nf-unitQuantityDown nf-arrow-down" aria-label="' +
                    t.textAriaLabelDecreaseQuantityArrow +
                    '" '),
                  (a += 'rel="nofollow" tabindex="0"></div>\n'),
                  (a +=
                    globalTab5 +
                    '</div>\x3c!-- closing class="nf-arrows v2" --\x3e\n\n')),
              (a +=
                globalTab5 +
                '<input type="text" data-role="none" value="' +
                roundLoDash(
                  t.valueServingUnitQuantity,
                  t.decimalPlacesForQuantityTextbox
                ) +
                '" class="' +
                n +
                '" aria-label="' +
                t.textAriaLabelChangeQuantityTextbox +
                '">\n'),
              (a +=
                globalTab5 +
                '<input type="hidden" value="' +
                roundLoDash(
                  t.valueServingUnitQuantity,
                  t.decimalPlacesForQuantityTextbox
                ) +
                '" id="nf-nixLabelBeforeQuantity">\n\n');
          } else
            t.originalServingUnitQuantity > 0 &&
              t.showServingUnitQuantityTextbox &&
              (a +=
                ' <span itemprop="servingSize">' +
                roundLoDash(
                  t.originalServingUnitQuantity,
                  t.decimalPlacesForNutrition
                ) +
                "</span>\n");
          t.showItemName ||
            ((a +=
              globalTab5 + '<div class="nf-serving-unit-name" tabindex="0">\n'),
              (a += globalTab6 + t.valueServingSizeUnit + "\n"),
              t.showServingWeightGrams &&
              t.valueServingWeightGrams > 0 &&
              (a +=
                globalTab6 +
                "(" +
                roundLoDash(
                  t.valueServingWeightGrams,
                  t.decimalPlacesForNutrition
                ) +
                t.unitServingWeight +
                ")\n"),
              (a += globalTab5 + "</div>\n"));
        } else
          t.originalServingUnitQuantity > 0 &&
            t.showServingUnitQuantityTextbox &&
            ((a +=
              ' <span itemprop="servingSize">' +
              roundLoDash(
                t.originalServingUnitQuantity,
                t.decimalPlacesForNutrition
              ) +
              "</span>\n"),
              ("" == t.valueServingSizeUnit || null === t.valueServingSizeUnit) &&
              t.showServingWeightGrams &&
              t.valueServingWeightGrams > 0 &&
              (a +=
                globalTab4 +
                "(" +
                roundLoDash(
                  t.valueServingWeightGrams,
                  t.decimalPlacesForNutrition
                ) +
                t.unitServingWeight +
                ")\n"));
        e ||
          (a +=
            globalTab3 +
            "</div>\x3c!-- closing for serving size div --\x3e\n\n");
      } else e = !0;
    else
      !t.showServingUnitQuantity &&
        t.showOnlyTheTextServingSize &&
        ((a += globalTab3 + '<div tabIndex="0" class="nf-line">\n'),
          (a += globalTab4 + t.textServingSize),
          (a += globalTab3 + "</div>\n\n"));
    return {
      servingSizeIsHidden: e,
      servingContainerIsHidden: !1,
      nutritionLabel: a,
    };
  }
  function generateAttributeForUK(
    $localSettings,
    valueIndex,
    dailyValueIndex,
    unitIndex,
    naIndex,
    attributeTexts,
    itemPropValue,
    roundFunctionName,
    roundFunctionRuleName,
    showPercentageCode,
    indentedName
  ) {
    let localNaValue =
      '<font class="notApplicable" aria-hidden="true">' +
      $localSettings.textNotApplicable +
      '&nbsp;</font><font class="sr-only">' +
      $localSettings.textDataNotAvailable +
      "</font>\n",
      localNutritionLabel = globalTab2 + '<tr tabindex="0">\n',
      nameClass = "",
      nutritionValueLocal = $localSettings[valueIndex];
    return (
      indentedName && (nameClass = "uk_nf-indent"),
      (localNutritionLabel += globalTab3 + '<td class="' + nameClass + '">'),
      "" != String(attributeTexts) &&
      (localNutritionLabel += $localSettings[attributeTexts]),
      (localNutritionLabel += "</td>\n"),
      "valueCalories" == valueIndex && "unitEnergy_kj" == unitIndex
        ? (nutritionValueLocal *= 4.184)
        : "valueSodium" == valueIndex && (nutritionValueLocal *= 0.0025),
      (localNutritionLabel += globalTab3 + "<td>"),
      (localNutritionLabel += $localSettings[naIndex]
        ? localNaValue
        : ($localSettings.allowFDARounding
          ? "valueCalories" == valueIndex
            ? eval(roundFunctionName)(
              (nutritionValueLocal /
                $localSettings.valueServingWeightGrams) *
              100,
              1
            )
            : eval(roundFunctionName)(
              (nutritionValueLocal /
                $localSettings.valueServingWeightGrams) *
              100
            )
          : roundLoDash(
            (nutritionValueLocal / $localSettings.valueServingWeightGrams) *
            100,
            $localSettings.decimalPlacesForNutrition
          )) + $localSettings[unitIndex]),
      (localNutritionLabel += "</td>\n"),
      (localNutritionLabel +=
        globalTab3 + '<td itemprop="' + itemPropValue + '">'),
      (localNutritionLabel += $localSettings[naIndex]
        ? localNaValue
        : ($localSettings.allowFDARounding
          ? "valueCalories" == valueIndex
            ? eval(roundFunctionName)(nutritionValueLocal, 1)
            : eval(roundFunctionName)(nutritionValueLocal)
          : roundLoDash(
            nutritionValueLocal,
            $localSettings.decimalPlacesForNutrition
          )) + $localSettings[unitIndex]),
      (localNutritionLabel += "</td>\n"),
      (localNutritionLabel += globalTab3 + '<td aria-hidden="true">'),
      !$localSettings.hidePercentDailyValues &&
      showPercentageCode &&
      (localNutritionLabel += $localSettings[naIndex]
        ? localNaValue
        : roundLoDash(
          (($localSettings.allowFDARounding
            ? "valueCalories" == valueIndex
              ? eval(roundFunctionRuleName)(nutritionValueLocal, 1)
              : eval(roundFunctionRuleName)(nutritionValueLocal)
            : nutritionValueLocal) /
            (0 == $localSettings[dailyValueIndex]
              ? 1
              : $localSettings[dailyValueIndex] *
              roundLoDash(
                parseFloat($localSettings.calorieIntake) / 2e3,
                2
              ))) *
          100,
          $localSettings.decimalPlacesForDailyValues
        ) + "%"),
      localNutritionLabel + "</td>\n" + globalTab2 + "</tr>\n"
    );
  }
  function referenceIntakeHtmlUKVersion(t) {
    let e = globalTab6 + '<div class="referenceIntake" tabindex="0">\n';
    return (
      (e += globalTab7 + "* " + t.textUKReferenceIntake + " "),
      (e +=
        "(" +
        roundToNearestNum(4.184 * t.calorieIntake, 100) +
        t.unitEnergy_kj),
      (e += "/" + t.calorieIntake + t.unitEnergy_kcal + ")\n") +
      (globalTab6 + '</div>\n<div class="uk_nf-spaceBelow"></div>\n')
    );
  }
  function ingredientsHtmlUKVersion(t) {
    let e = globalTab6 + '<div class="uk_nf-ingredientListDiv" tabindex="0">\n';
    return (
      (e +=
        globalTab7 +
        '<strong class="active" id="uk_nf-ingredient-statement">' +
        t.ingredientLabel +
        "</strong> " +
        t.ingredientList +
        "\n") +
      (globalTab6 +
        '</div><br/>\x3c!-- closing class="uk_nf-ingredientListDiv" --\x3e\n\n')
    );
  }
  function disclaimerHtmlUKVersion(t) {
    let e = globalTab6 + '<div id="uk_nf-calcDisclaimer">\n';
    return (
      (e +=
        globalTab7 +
        '<span id="uk_nf-disclaimer" tabindex="0">' +
        t.valueDisclaimer +
        "</span>\n") +
      (globalTab6 +
        '</div><br/>\x3c!-- closing id="uk_nf-calcDisclaimer" --\x3e\n\n')
    );
  }
  function bottomLinkHtmlUKVersion(t) {
    let e = globalTab6 + '<div class="uk_nf-spaceAbove"></div>\n';
    return (
      (e +=
        globalTab6 +
        '<a href="' +
        t.urlBottomLink +
        '" target="_newSite" class="uk_nf-homeLinkPrint">' +
        t.nameBottomLink +
        "</a>\n") +
      (globalTab6 + '<div class="uk_nf-spaceBelow"></div>\n')
    );
  }
  function createRound(t) {
    const e = Math[t];
    return (t, a) => {
      if (
        (a = null === a ? 0 : a >= 0 ? Math.min(a, 292) : Math.max(a, -292))
      ) {
        let n = `${t}e`.split("e");
        return +`${(n = `${e(`${n[0]}e${+n[1] + a}`)}e`.split("e"))[0]}e${+n[1] - a
          }`;
      }
      return e(t);
    };
  }
  ($.fn.nutritionLabel = function (t, e) {
    if ("object" == typeof t) init((e = t), $(this));
    else if ("string" == typeof t && "" !== t)
      if ("destroy" === t) new NutritionLabel().destroy($(this));
      else if ("hide" === t) new NutritionLabel().hide($(this));
      else {
        if ("show" !== t) {
          let a = [],
            n = this.each(function () {
              let n = $(this).data("_nutritionLabel");
              n
                ? void 0 !== $.fn.nutritionLabel.defaultSettings[t] &&
                (void 0 !== e
                  ? ((n.settings[t] = e), init(n.settings, $(this)))
                  : a.push(n.settings[t]))
                : void 0 !== $.fn.nutritionLabel.defaultSettings[t] &&
                void 0 !== e &&
                (($.fn.nutritionLabel.defaultSettings[t] = e),
                  init(null, $(this)));
            });
          return 1 === a.length ? a[0] : a.length > 0 ? a : n;
        }
        new NutritionLabel().show($(this));
      }
    else (void 0 !== t && "" !== t) || init(e, $(this));
  }),
    ($.fn.nutritionLabel.defaultSettings = {
      width: 280,
      allowCustomWidth: !1,
      widthCustom: "auto",
      allowNoBorder: !1,
      allowFDARounding: !1,
      allowGoogleAnalyticsEventLog: !1,
      gooleAnalyticsFunctionName: "ga",
      userFunctionNameOnQuantityChange: null,
      userFunctionOnQuantityChange: null,
      hideNotApplicableValues: !1,
      hidePercentDailyValues: !1,
      brandName: "Brand where this item belongs to",
      scrollLongIngredients: !1,
      scrollHeightComparison: 100,
      scrollHeightPixel: 95,
      decimalPlacesForNutrition: 1,
      decimalPlacesForDailyValues: 0,
      decimalPlacesForQuantityTextbox: 1,
      scrollLongItemName: !0,
      scrollLongItemNamePixel: 36,
      scrollLongItemNamePixel2018Override: 34,
      useBaseValueFor2018LabelAndNotDVPercentage: !1,
      showBottomLink: !1,
      urlBottomLink: "http://www.nutritionix.com",
      nameBottomLink: "Nutritionix",
      valueServingUnitQuantity: 1,
      valueServingSizeUnit: "",
      showServingUnitQuantityTextbox: !0,
      itemName: "Item / Ingredient Name",
      showServingUnitQuantity: !0,
      hideTextboxArrows: !1,
      showOnlyTheTextServingSize: !1,
      originalServingUnitQuantity: 0,
      nutritionValueMultiplier: 1,
      totalContainerQuantity: 1,
      calorieIntake: 2e3,
      dailyValueTotalFat: 65,
      dailyValueSatFat: 20,
      dailyValueCholesterol: 300,
      dailyValueSodium: 2400,
      dailyValuePotassium: 3500,
      dailyValuePotassium_2018: 4700,
      dailyValueCarb: 300,
      dailyValueFiber: 25,
      dailyValueCalcium: 1300,
      dailyValueIron: 18,
      dailyValueVitaminD: 20,
      dailyValueAddedSugar: 50,
      dailyValueSugar: 100,
      dailyValueEnergyKcal: 2e3,
      dailyValueProtein: 50,
      dailyValueSalt: 6,
      showCalories: !0,
      showFatCalories: !0,
      showTotalFat: !0,
      showSatFat: !0,
      showTransFat: !0,
      showPolyFat: !1,
      showMonoFat: !1,
      showCholesterol: !0,
      showSodium: !0,
      showPotassium: !1,
      showPotassium_2018: !0,
      showTotalCarb: !0,
      showFibers: !0,
      showSugars: !0,
      showAddedSugars: !0,
      showSugarAlcohol: !1,
      showProteins: !0,
      showVitaminA: !0,
      showVitaminC: !0,
      showVitaminD: !0,
      showCalcium: !0,
      showIron: !0,
      showCaffeine: !0,
      showServingWeightGrams: !0,
      showDailyTotalFat: !0,
      showDailySatFat: !0,
      showDailyCholesterol: !0,
      showDailySodium: !0,
      showDailyPotassium: !0,
      showDailyPotassium_2018: !0,
      showDailyTotalCarb: !0,
      showDailyFibers: !0,
      showDailySugars: !1,
      showDailyAddedSugars: !0,
      showDailyVitaminD: !0,
      showDailyCalcium: !0,
      showDailyIron: !0,
      showDailyProtein: !0,
      showDailyEnergy: !0,
      showAmountPerServing: !0,
      showServingsPerContainer: !1,
      showItemName: !0,
      showItemNameForUK: !1,
      showBrandName: !1,
      showIngredients: !0,
      showCalorieDiet: !1,
      showCustomFooter: !1,
      indentSugarAndRemoveBoldStyleFor2018Label: !0,
      boldCaffeine: !0,
      showDisclaimer: !1,
      scrollDisclaimerHeightComparison: 100,
      scrollDisclaimer: 95,
      valueDisclaimer:
        "Please note that these nutrition values are estimated based on our standard serving portions. As food servings may have a slight variance each time you visit, please expect these values to be with in 10% +/- of your actual meal. If you have any questions about our nutrition calculator, please contact Nutritionix.",
      ingredientLabel: "INGREDIENTS:",
      valueCustomFooter: "",
      naCalories: !1,
      naFatCalories: !1,
      naTotalFat: !1,
      naSatFat: !1,
      naTransFat: !1,
      naPolyFat: !1,
      naMonoFat: !1,
      naCholesterol: !1,
      naSodium: !1,
      naPotassium: !1,
      naPotassium_2018: !1,
      naTotalCarb: !1,
      naFibers: !1,
      naSugars: !1,
      naAddedSugars: !1,
      naSugarAlcohol: !1,
      naProteins: !1,
      naVitaminA: !1,
      naVitaminC: !1,
      naVitaminD: !1,
      naCalcium: !1,
      naIron: !1,
      naCaffeine: !1,
      valueServingWeightGrams: 0,
      valueServingPerContainer: 1,
      valueCalories: 0,
      valueFatCalories: 0,
      valueTotalFat: 0,
      valueSatFat: 0,
      valueTransFat: 0,
      valuePolyFat: 0,
      valueMonoFat: 0,
      valueCholesterol: 0,
      valueSodium: 0,
      valuePotassium: 0,
      valuePotassium_2018: 0,
      valueTotalCarb: 0,
      valueFibers: 0,
      valueSugars: 0,
      valueAddedSugars: 0,
      valueSugarAlcohol: 0,
      valueProteins: 0,
      valueVitaminA: 0,
      valueVitaminC: 0,
      valueVitaminD: 0,
      valueCalcium: 0,
      valueIron: 0,
      valueCaffeine: 0,
      unitCalories: "",
      unitFatCalories: "",
      unitTotalFat:
        '<span aria-hidden="true">g</span><span class="sr-only"> grams</span>',
      unitSatFat:
        '<span aria-hidden="true">g</span><span class="sr-only"> grams</span>',
      unitTransFat:
        '<span aria-hidden="true">g</span><span class="sr-only"> grams</span>',
      unitPolyFat:
        '<span aria-hidden="true">g</span><span class="sr-only"> grams</span>',
      unitMonoFat:
        '<span aria-hidden="true">g</span><span class="sr-only"> grams</span>',
      unitCholesterol:
        '<span aria-hidden="true">mg</span><span class="sr-only"> milligrams</span>',
      unitSodium:
        '<span aria-hidden="true">mg</span><span class="sr-only"> milligrams</span>',
      unitPotassium:
        '<span aria-hidden="true">mg</span><span class="sr-only"> milligrams</span>',
      unitPotassium_base:
        '<span aria-hidden="true">mg</span><span class="sr-only"> milligrams</span>',
      unitPotassium_percent: "%",
      unitTotalCarb:
        '<span aria-hidden="true">g</span><span class="sr-only"> grams</span>',
      unitFibers:
        '<span aria-hidden="true">g</span><span class="sr-only"> grams</span>',
      unitSugars:
        '<span aria-hidden="true">g</span><span class="sr-only"> grams</span>',
      unitAddedSugars:
        '<span aria-hidden="true">g</span><span class="sr-only"> grams</span>',
      unitSugarAlcohol:
        '<span aria-hidden="true">g</span><span class="sr-only"> grams</span>',
      unitProteins:
        '<span aria-hidden="true">g</span><span class="sr-only"> grams</span>',
      unitVitaminA: "%",
      unitVitaminC: "%",
      unitVitaminD_base:
        '<span aria-hidden="true">mcg</span><span class="sr-only"> micrograms</span>',
      unitVitaminD_percent: "%",
      unitCalcium: "%",
      unitCalcium_base:
        '<span aria-hidden="true">mg</span><span class="sr-only"> milligrams</span>',
      unitCalcium_percent: "%",
      unitIron: "%",
      unitIron_base:
        '<span aria-hidden="true">mg</span><span class="sr-only"> milligrams</span>',
      unitIron_percent: "%",
      unitServingWeight:
        '<span aria-hidden="true">g</span><span class="sr-only"> grams</span>',
      unitEnergy_kj: "kj",
      unitEnergy_kcal: "kcal",
      unitSalt: "g",
      unitGramOrMlForThePer100Part: "g",
      unitCaffeine: "mg",
      valueCol1CalorieDiet: 2e3,
      valueCol2CalorieDiet: 2500,
      valueCol1DietaryTotalFat: 0,
      valueCol2DietaryTotalFat: 0,
      valueCol1DietarySatFat: 0,
      valueCol2DietarySatFat: 0,
      valueCol1DietaryCholesterol: 0,
      valueCol2DietaryCholesterol: 0,
      valueCol1DietarySodium: 0,
      valueCol2DietarySodium: 0,
      valueCol1DietaryPotassium: 0,
      valueCol2DietaryPotassium: 0,
      valueCol1DietaryTotalCarb: 0,
      valueCol2DietaryTotalCarb: 0,
      valueCol1Dietary: 0,
      valueCol2Dietary: 0,
      textNutritionFacts: "Nutrition Facts",
      textDailyValues: "Daily Value",
      textServingSize: "Serving Size:",
      textServingsPerContainer: "Servings Per Container",
      textAmountPerServing: "Amount Per Serving",
      textCalories: "Calories",
      textFatCalories: "Calories from Fat",
      textTotalFat: "Total Fat",
      textSatFat: "Saturated Fat",
      textTransFat: "<em>Trans</em> Fat",
      textPolyFat: "Polyunsaturated Fat",
      textMonoFat: "Monounsaturated Fat",
      textCholesterol: "Cholesterol",
      textSodium: "Sodium",
      textPotassium: "Potassium",
      textTotalCarb: "Total Carbohydrates",
      textFibers: "Dietary Fiber",
      textSugars: "Sugars",
      textAddedSugars1: "Includes ",
      textAddedSugars2: " Added Sugars",
      textSugarAlcohol: "Sugar Alcohol",
      textProteins: "Protein",
      textVitaminA: "Vitamin A",
      textVitaminC: "Vitamin C",
      textVitaminD: "Vitamin D",
      textCalcium: "Calcium",
      textIron: "Iron",
      textNotApplicable: "-",
      ingredientList: "None",
      textPercentDailyPart1: "Percent Daily Values are based on a",
      textPercentDailyPart2: "calorie diet",
      textPercentDaily2018VersionPart1:
        "The % Daily Value (DV) tells you how much a nutrient in a serving of food contributes to a daily diet. ",
      textPercentDaily2018VersionPart2:
        " calories a day is used for general nutrition advice.",
      textGoogleAnalyticsEventCategory: "Nutrition Label",
      textGoogleAnalyticsEventActionUpArrow: "Quantity Up Arrow Clicked",
      textGoogleAnalyticsEventActionDownArrow: "Quantity Down Arrow Clicked",
      textGoogleAnalyticsEventActionTextbox: "Quantity Textbox Changed",
      textUKTypicalValues: "Typical Values",
      textUKReferenceIntake: "Reference intake of an average adult",
      textUKPer100: "Per",
      textUKDefaultServingNameIfEmpty: "Serving",
      textDataNotAvailable: "Data not available",
      textAriaLabelIncreaseQuantityArrow: "Increase the Quantity Arrow",
      textAriaLabelDecreaseQuantityArrow: "Decrease the Quantity Arrow",
      textAriaLabelChangeQuantityTextbox: "Change the Quantity Textbox",
      textCalorieDietHtmlLegacyLessThan: "Less than",
      textCalorieDietHtmlLegacyDietary: "Dietary",
      textCaffeine: "Caffeine",
      showLegacyVersion: !0,
      showUKVersion: !1,
      convertEmptyServingNametoServingForUKLabel: !0,
      legacyVersion: 1,
    });
  const roundLoDash = createRound("round");
  NutritionLabel.prototype = {
    generateLegacy: function () {
      let t = this,
        e = "",
        a = "",
        n = sevingUnitQuantityHtmlLegacy(t.settings),
        i = n.servingSizeIsHidden,
        l = n.servingContainerIsHidden,
        o = "addedPadding",
        s = "addedPadding";
      return t.nutritionLabel
        ? t.nutritionLabel
        : (t.settings.hideNotApplicableValues &&
          ((t.settings.showCalories =
            !t.settings.naCalories && t.settings.showCalories),
            (t.settings.showFatCalories =
              !t.settings.naFatCalories && t.settings.showFatCalories),
            (t.settings.showTotalFat =
              !t.settings.naTotalFat && t.settings.showTotalFat),
            (t.settings.showSatFat =
              !t.settings.naSatFat && t.settings.showSatFat),
            (t.settings.showTransFat =
              !t.settings.naTransFat && t.settings.showTransFat),
            (t.settings.showPolyFat =
              !t.settings.naPolyFat && t.settings.showPolyFat),
            (t.settings.showMonoFat =
              !t.settings.naMonoFat && t.settings.showMonoFat),
            (t.settings.showCholesterol =
              !t.settings.naCholesterol && t.settings.showCholesterol),
            (t.settings.showSodium =
              !t.settings.naSodium && t.settings.showSodium),
            (t.settings.showPotassium =
              !t.settings.naPotassium && t.settings.showPotassium),
            (t.settings.showTotalCarb =
              !t.settings.naTotalCarb && t.settings.showTotalCarb),
            (t.settings.showFibers =
              !t.settings.naFibers && t.settings.showFibers),
            (t.settings.showSugars =
              !t.settings.naSugars && t.settings.showSugars),
            (t.settings.showSugarAlcohol =
              !t.settings.naSugarAlcohol && t.settings.showSugarAlcohol),
            (t.settings.showProteins =
              !t.settings.naProteins && t.settings.showProteins),
            (t.settings.showVitaminA =
              !t.settings.naVitaminA && t.settings.showVitaminA),
            (t.settings.showVitaminC =
              !t.settings.naVitaminC && t.settings.showVitaminC),
            (t.settings.showCalcium =
              !t.settings.naCalcium && t.settings.showCalcium),
            (t.settings.showIron = !t.settings.naIron && t.settings.showIron)),
          t.settings.hidePercentDailyValues &&
          ((t.settings.showVitaminA = !1),
            (t.settings.showVitaminC = !1),
            (t.settings.showCalcium = !1),
            (t.settings.showIron = !1)),
          t.settings.allowNoBorder && (e = "border: 0;"),
          (a =
            '<div itemscope itemtype="http://schema.org/NutritionInformation" class="nutritionLabel" role="region" aria-label="nutrition label" style="' +
            e),
          t.settings.allowCustomWidth
            ? (a += " width: " + t.settings.widthCustom + ';">\n')
            : (a += " width: " + t.settings.width + 'px;">\n'),
          (a +=
            globalTab1 +
            '<div class="title" tabindex="0">' +
            t.settings.textNutritionFacts +
            "</div>\n"),
          t.settings.showItemName && (a += itemNameHtmlLegacy(t.settings)),
          (a += n.nutritionLabel),
          ((!t.settings.showItemName && !t.settings.showServingUnitQuantity) ||
            (!t.settings.showItemName && i && l)) &&
          (a += globalTab1 + '<div class="headerSpacer"></div>\n'),
          (a += globalTab1 + '<div class="bar1"></div>\n'),
          t.settings.showAmountPerServing &&
          ((a += globalTab1 + '<div class="addedPadding m" tabindex="0">'),
            (a += "<strong>" + t.settings.textAmountPerServing + "</strong>"),
            (a += "</div>\n")),
          (a +=
            globalTab1 +
            '<div class="' +
            (t.settings.showAmountPerServing ? "line" : "addedPadding") +
            ' cf">\n'),
          t.settings.showCalories
            ? (a += generateAttributeWithoutPercentageHtmlLegacy(
              t.settings,
              "valueCalories",
              "unitCalories",
              "naCalories",
              "textCalories",
              globalTab2,
              "fl",
              1,
              "calories",
              "",
              "roundCalories"
            ))
            : t.settings.showFatCalories &&
            (a += globalTab2 + "<div>&nbsp;</div>\n"),
          t.settings.showFatCalories &&
          (a += generateAttributeWithoutPercentageHtmlLegacy(
            t.settings,
            "valueFatCalories",
            "unitFatCalories",
            "naFatCalories",
            "textFatCalories",
            globalTab2,
            "ar",
            2,
            "",
            "",
            "roundCalories"
          )),
          (a += globalTab1 + "</div>\n"),
          (a += globalTab1 + '<div class="bar2"></div>\n'),
          t.settings.hidePercentDailyValues ||
          ((o = "line"),
            (a += globalTab1 + '<div class="addedPadding ar">'),
            (a +=
              "<strong>% " +
              t.settings.textDailyValues +
              "<sup>*</sup></strong>"),
            (a += "</div>\n")),
          t.settings.showTotalFat &&
          ((a += generateAttributeWithPercentageHtmlLegacy(
            t.settings,
            "valueTotalFat",
            "dailyValueTotalFat",
            "unitTotalFat",
            "naTotalFat",
            "textTotalFat",
            o,
            "fatContent",
            "roundFat",
            "roundFatRule",
            !0,
            t.settings.showDailyTotalFat
          )),
            (o = "line")),
          t.settings.showSatFat &&
          ((a += generateAttributeWithPercentageHtmlLegacy(
            t.settings,
            "valueSatFat",
            "dailyValueSatFat",
            "unitSatFat",
            "naSatFat",
            "textSatFat",
            o + " indent",
            "saturatedFatContent",
            "roundFat",
            "roundFatRule",
            !1,
            t.settings.showDailySatFat
          )),
            (o = "line")),
          t.settings.showTransFat &&
          ((a += generateAttributeWithoutPercentageHtmlLegacy(
            t.settings,
            "valueTransFat",
            "unitTransFat",
            "naTransFat",
            "textTransFat",
            globalTab1,
            o + " indent",
            3,
            "transFatContent",
            globalTab2,
            "roundFat"
          )),
            (o = "line")),
          t.settings.showPolyFat &&
          ((a += generateAttributeWithoutPercentageHtmlLegacy(
            t.settings,
            "valuePolyFat",
            "unitPolyFat",
            "naPolyFat",
            "textPolyFat",
            globalTab1,
            o + " indent",
            2,
            "",
            "",
            "roundFat"
          )),
            (o = "line")),
          t.settings.showMonoFat &&
          ((a += generateAttributeWithoutPercentageHtmlLegacy(
            t.settings,
            "valueMonoFat",
            "unitMonoFat",
            "naMonoFat",
            "textMonoFat",
            globalTab1,
            o + " indent",
            2,
            "",
            "",
            "roundFat"
          )),
            (o = "line")),
          t.settings.showCholesterol &&
          ((a += generateAttributeWithPercentageHtmlLegacy(
            t.settings,
            "valueCholesterol",
            "dailyValueCholesterol",
            "unitCholesterol",
            "naCholesterol",
            "textCholesterol",
            o,
            "cholesterolContent",
            "roundCholesterol",
            "roundCholesterolRule",
            !0,
            t.settings.showDailyCholesterol
          )),
            (o = "line")),
          t.settings.showSodium &&
          ((a += generateAttributeWithPercentageHtmlLegacy(
            t.settings,
            "valueSodium",
            "dailyValueSodium",
            "unitSodium",
            "naSodium",
            "textSodium",
            o,
            "sodiumContent",
            "roundSodium",
            "roundSodiumRule",
            !0,
            t.settings.showDailySodium
          )),
            (o = "line")),
          t.settings.showPotassium &&
          ((a += generateAttributeWithPercentageHtmlLegacy(
            t.settings,
            "valuePotassium",
            "dailyValuePotassium",
            "unitPotassium",
            "naPotassium",
            "textPotassium",
            o,
            "potassiumContent",
            "roundPotassium",
            "roundPotassiumRule",
            !0,
            t.settings.showDailyPotassium
          )),
            (o = "line")),
          t.settings.showTotalCarb &&
          ((a += generateAttributeWithPercentageHtmlLegacy(
            t.settings,
            "valueTotalCarb",
            "dailyValueCarb",
            "unitTotalCarb",
            "naTotalCarb",
            "textTotalCarb",
            o,
            "carbohydrateContent",
            "roundCarbFiberSugarProtein",
            "roundCarbFiberSugarProteinRule",
            !0,
            t.settings.showDailyTotalCarb
          )),
            (o = "line")),
          t.settings.showFibers &&
          ((a += generateAttributeWithPercentageHtmlLegacy(
            t.settings,
            "valueFibers",
            "dailyValueFiber",
            "unitFibers",
            "naFibers",
            "textFibers",
            o + " indent",
            "fiberContent",
            "roundCarbFiberSugarProtein",
            "roundCarbFiberSugarProteinRule",
            !1,
            t.settings.showDailyFibers
          )),
            (o = "line")),
          t.settings.showSugars &&
          ((a += generateAttributeWithPercentageHtmlLegacy(
            t.settings,
            "valueSugars",
            "dailyValueSugar",
            "unitSugars",
            "naSugars",
            "textSugars",
            o + " indent",
            "sugarContent",
            "roundCarbFiberSugarProtein",
            "roundCarbFiberSugarProteinRule",
            !1,
            t.settings.showDailySugars
          )),
            (o = "line")),
          t.settings.showSugarAlcohol &&
          ((a += generateAttributeWithoutPercentageHtmlLegacy(
            t.settings,
            "valueSugarAlcohol",
            "unitSugarAlcohol",
            "naSugarAlcohol",
            "textSugarAlcohol",
            globalTab1,
            o + " indent",
            4,
            "",
            "",
            "roundCarbFiberSugarProtein"
          )),
            (o = "line")),
          t.settings.showProteins &&
          ((a += generateAttributeWithoutPercentageHtmlLegacy(
            t.settings,
            "valueProteins",
            "unitProteins",
            "naProteins",
            "textProteins",
            globalTab1,
            o,
            1,
            "proteinContent",
            "",
            "roundCarbFiberSugarProtein"
          )),
            (o = "line")),
          (a += globalTab1 + '<div class="bar1"></div>\n'),
          t.settings.showVitaminA &&
          ((a += generateAttributeWithoutPercentageHtmlLegacy(
            t.settings,
            "valueVitaminA",
            "unitVitaminA",
            "naVitaminA",
            "textVitaminA",
            globalTab1,
            s + " vitaminA",
            5,
            "",
            globalTab2,
            "roundVitaminsCalciumIron"
          )),
            (s = "line")),
          t.settings.showVitaminC &&
          ((a += generateAttributeWithoutPercentageHtmlLegacy(
            t.settings,
            "valueVitaminC",
            "unitVitaminC",
            "naVitaminC",
            "textVitaminC",
            globalTab1,
            s + " vitaminC",
            5,
            "",
            globalTab2,
            "roundVitaminsCalciumIron"
          )),
            (s = "line")),
          t.settings.showCalcium &&
          ((a += generateAttributeWithoutPercentageHtmlLegacy(
            t.settings,
            "valueCalcium",
            "unitCalcium",
            "naCalcium",
            "textCalcium",
            globalTab1,
            s + " calcium",
            5,
            "",
            globalTab2,
            "roundVitaminsCalciumIron"
          )),
            (s = "line")),
          t.settings.showIron &&
          ((a += generateAttributeWithoutPercentageHtmlLegacy(
            t.settings,
            "valueIron",
            "unitIron",
            "naIron",
            "textIron",
            globalTab1,
            s + " iron",
            5,
            "",
            globalTab2,
            "roundVitaminsCalciumIron"
          )),
            (s = "line")),
          (a += globalTab1 + '<div class="dvCalorieDiet ' + s + '">\n'),
          (a += globalTab2 + '<div class="calorieNote">\n'),
          t.settings.hidePercentDailyValues ||
          (a +=
            globalTab3 +
            '<span tabindex="0"><span class="star" aria-hidden="true">*</span> ' +
            t.settings.textPercentDailyPart1 +
            " " +
            t.settings.calorieIntake +
            " " +
            t.settings.textPercentDailyPart2 +
            ".</span>\n"),
          t.settings.showIngredients &&
          (a += ingredientsHtmlLegacy(t.settings)),
          t.settings.showDisclaimer && (a += disclaimerHtmlLegacy(t.settings)),
          (a +=
            globalTab2 +
            '</div>\x3c!-- closing class="calorieNote" --\x3e\n\n'),
          t.settings.showCalorieDiet &&
          (a += calorieDietHtmlLegacy(t.settings)),
          (a +=
            globalTab1 +
            '</div>\x3c!-- closing class="dvCalorieDiet line" --\x3e\n\n'),
          t.settings.showBottomLink && (a += bottomLinkHtmlLegacy(t.settings)),
          t.settings.showCustomFooter &&
          (a +=
            globalTab1 +
            '<div class="customFooter" tabindex="0">' +
            t.settings.valueCustomFooter +
            "</div>\n"),
          a +
          '<div class="naTooltip">' +
          t.settings.textDataNotAvailable +
          '</div>\n</div>\x3c!-- closing class="nutritionLabel" --\x3e\n');
    },
    generate2018: function () {
      let t,
        e = this,
        a = "",
        n = "",
        i = sevingUnitQuantityHtml2018(e.settings),
        l = i.servingSizeIsHidden,
        o = i.servingContainerIsHidden;
      if (e.nutritionLabel) return e.nutritionLabel;
      if (
        (e.settings.hideNotApplicableValues &&
          ((e.settings.showCalories =
            !e.settings.naCalories && e.settings.showCalories),
            (e.settings.showFatCalories =
              !e.settings.naFatCalories && e.settings.showFatCalories),
            (e.settings.showTotalFat =
              !e.settings.naTotalFat && e.settings.showTotalFat),
            (e.settings.showSatFat =
              !e.settings.naSatFat && e.settings.showSatFat),
            (e.settings.showTransFat =
              !e.settings.naTransFat && e.settings.showTransFat),
            (e.settings.showPolyFat =
              !e.settings.naPolyFat && e.settings.showPolyFat),
            (e.settings.showMonoFat =
              !e.settings.naMonoFat && e.settings.showMonoFat),
            (e.settings.showCholesterol =
              !e.settings.naCholesterol && e.settings.showCholesterol),
            (e.settings.showSodium =
              !e.settings.naSodium && e.settings.showSodium),
            (e.settings.showPotassium_2018 =
              !e.settings.naPotassium_2018 && e.settings.showPotassium_2018),
            (e.settings.showTotalCarb =
              !e.settings.naTotalCarb && e.settings.showTotalCarb),
            (e.settings.showFibers =
              !e.settings.naFibers && e.settings.showFibers),
            (e.settings.showSugars =
              !e.settings.naSugars && e.settings.showSugars),
            (e.settings.showAddedSugars =
              !e.settings.naAddedSugars && e.settings.showAddedSugars),
            (e.settings.showSugarAlcohol =
              !e.settings.naSugarAlcohol && e.settings.showSugarAlcohol),
            (e.settings.showProteins =
              !e.settings.naProteins && e.settings.showProteins),
            (e.settings.showVitaminD =
              !e.settings.naVitaminD && e.settings.showVitaminD),
            (e.settings.showCalcium =
              !e.settings.naCalcium && e.settings.showCalcium),
            (e.settings.showIron = !e.settings.naIron && e.settings.showIron),
            (e.settings.showCaffeine =
              !e.settings.naCaffeine && e.settings.showCaffeine)),
          e.settings.hidePercentDailyValues &&
          ((e.settings.showDailyVitaminD = !1),
            (e.settings.showDailyCalcium = !1),
            (e.settings.showDailyIron = !1),
            (e.settings.showDailyPotassium_2018 = !1)),
          e.settings.allowNoBorder && (a = "border: 0;"),
          (n =
            '<div itemscope itemtype="http://schema.org/NutritionInformation" class="nf" role="region" aria-label="nutrition label" style="' +
            a),
          e.settings.allowCustomWidth
            ? (n += " width: " + e.settings.widthCustom + ';">\n')
            : (n += " width: " + e.settings.width + 'px;">\n'),
          (n +=
            globalTab1 +
            '<div class="nf-title" tabindex="0">' +
            e.settings.textNutritionFacts +
            "</div>\n"),
          (t =
            e.settings.showItemName ||
            (!e.settings.showItemName && l && o) ||
            (!e.settings.showItemName &&
              e.settings.originalServingUnitQuantity > 0 &&
              e.settings.showServingWeightGrams &&
              e.settings.valueServingWeightGrams > 0) ||
            (e.settings.showServingUnitQuantity &&
              e.settings.originalServingUnitQuantity > 0 &&
              e.settings.showServingsPerContainer &&
              e.settings.valueServingPerContainer > 0)),
          e.settings.showServingUnitQuantity &&
          e.settings.originalServingUnitQuantity > 0 &&
          e.settings.showServingsPerContainer &&
          e.settings.valueServingPerContainer > 0 &&
          ((n += globalTab2 + '<div class="nf-per-container" tabindex="0">\n'),
            (n +=
              globalTab3 +
              roundLoDash(
                e.settings.valueServingPerContainer,
                e.settings.decimalPlacesForNutrition
              )),
            (n += " " + e.settings.textServingsPerContainer + "\n"),
            (n += globalTab2 + "</div>\n\n")),
          t && (n += globalTab1 + '<div class="nf-line">\n'),
          (n += globalTab2 + '<div class="nf-serving">\n'),
          (n += i.nutritionLabel),
          e.settings.showItemName && (n += itemNameHtml2018(e.settings)),
          (n +=
            globalTab2 + '</div>\x3c!-- end of class="nf-serving" --\x3e\n\n'),
          t &&
          (n += globalTab1 + '</div>\x3c!-- end of class="nf-line" --\x3e\n\n'),
          (n += globalTab1 + '<div class="nf-bar2"></div>\n'),
          (n +=
            globalTab1 +
            '<div class="nf-amount-per-serving" tabindex="0">' +
            e.settings.textAmountPerServing +
            "</div>\n"),
          e.settings.showCalories &&
          (n += generateAttributeHtml2018Version(
            e.settings,
            "valueCalories",
            "unitCalories",
            "naCalories",
            "textCalories",
            "calories",
            "nf-calories",
            !1,
            "roundCalories",
            "",
            "",
            "nf-pr",
            ""
          )),
          (n += globalTab1 + '<div class="nf-bar1"></div>\n'),
          e.settings.hidePercentDailyValues ||
          ((n += globalTab1 + '<div class="nf-line nf-text-right">\n'),
            (n +=
              globalTab2 +
              '<span class="nf-highlight nf-percent-dv">% ' +
              e.settings.textDailyValues +
              "*</span>\n"),
            (n += globalTab1 + "</div>\n")),
          e.settings.showTotalFat &&
          (n += generateAttributeHtml2018Version(
            e.settings,
            "valueTotalFat",
            "unitTotalFat",
            "naTotalFat",
            "textTotalFat",
            "fatContent",
            "nf-line",
            e.settings.showDailyTotalFat,
            "roundFat",
            "roundFatRule",
            "nf-highlight",
            "",
            "dailyValueTotalFat"
          )),
          e.settings.showSatFat &&
          (n += generateAttributeHtml2018Version(
            e.settings,
            "valueSatFat",
            "unitSatFat",
            "naSatFat",
            "textSatFat",
            "saturatedFatContent",
            "nf-line nf-indent",
            e.settings.showDailySatFat,
            "roundFat",
            "roundFatRule",
            "",
            "",
            "dailyValueSatFat"
          )),
          e.settings.showTransFat &&
          (n += generateAttributeHtml2018Version(
            e.settings,
            "valueTransFat",
            "unitTransFat",
            "naTransFat",
            "textTransFat",
            "transFatContent",
            "nf-line nf-indent",
            !1,
            "roundFat",
            "",
            "",
            "",
            ""
          )),
          e.settings.showPolyFat &&
          (n += generateAttributeHtml2018Version(
            e.settings,
            "valuePolyFat",
            "unitPolyFat",
            "naPolyFat",
            "textPolyFat",
            "",
            "nf-line nf-indent",
            !1,
            "roundFat",
            "",
            "",
            "",
            ""
          )),
          e.settings.showMonoFat &&
          (n += generateAttributeHtml2018Version(
            e.settings,
            "valueMonoFat",
            "unitMonoFat",
            "naMonoFat",
            "textMonoFat",
            "",
            "nf-line nf-indent",
            !1,
            "roundFat",
            "",
            "",
            "",
            ""
          )),
          e.settings.showCholesterol &&
          (n += generateAttributeHtml2018Version(
            e.settings,
            "valueCholesterol",
            "unitCholesterol",
            "naCholesterol",
            "textCholesterol",
            "cholesterolContent",
            "nf-line",
            e.settings.showDailyCholesterol,
            "roundCholesterol",
            "roundCholesterolRule",
            "nf-highlight",
            "",
            "dailyValueCholesterol"
          )),
          e.settings.showSodium &&
          (n += generateAttributeHtml2018Version(
            e.settings,
            "valueSodium",
            "unitSodium",
            "naSodium",
            "textSodium",
            "sodiumContent",
            "nf-line",
            e.settings.showDailySodium,
            "roundSodium",
            "roundSodiumRule",
            "nf-highlight",
            "",
            "dailyValueSodium"
          )),
          e.settings.showTotalCarb &&
          (n += generateAttributeHtml2018Version(
            e.settings,
            "valueTotalCarb",
            "unitTotalCarb",
            "naTotalCarb",
            "textTotalCarb",
            "carbohydrateContent",
            "nf-line",
            e.settings.showDailyTotalCarb,
            "roundCarbFiberSugarProtein",
            "roundCarbFiberSugarProteinRule",
            "nf-highlight",
            "",
            "dailyValueCarb"
          )),
          e.settings.showFibers &&
          (n += generateAttributeHtml2018Version(
            e.settings,
            "valueFibers",
            "unitFibers",
            "naFibers",
            "textFibers",
            "fiberContent",
            "nf-line nf-indent",
            e.settings.showDailyFibers,
            "roundCarbFiberSugarProtein",
            "roundCarbFiberSugarProteinRule",
            "",
            "",
            "dailyValueFiber"
          )),
          e.settings.showSugars &&
          (e.settings.indentSugarAndRemoveBoldStyleFor2018Label
            ? (n += generateAttributeHtml2018Version(
              e.settings,
              "valueSugars",
              "unitSugars",
              "naSugars",
              "textSugars",
              "sugarContent",
              "nf-line nf-indent",
              e.settings.showDailySugars,
              "roundCarbFiberSugarProtein",
              "roundCarbFiberSugarProteinRule",
              "",
              "",
              "dailyValueSugar"
            ))
            : (n += generateAttributeHtml2018Version(
              e.settings,
              "valueSugars",
              "unitSugars",
              "naSugars",
              "textSugars",
              "sugarContent",
              "nf-line",
              e.settings.showDailySugars,
              "roundCarbFiberSugarProtein",
              "roundCarbFiberSugarProteinRule",
              "nf-highlight",
              "",
              "dailyValueSugar"
            ))),
          e.settings.showAddedSugars &&
          (n += generateAttributeHtml2018Version(
            e.settings,
            "valueAddedSugars",
            "unitAddedSugars",
            "naAddedSugars",
            "textAddedSugars1",
            "",
            "nf-line nf-indent2",
            e.settings.showDailyAddedSugars,
            "roundCarbFiberSugarProtein",
            "roundCarbFiberSugarProteinRule",
            "",
            "",
            "dailyValueAddedSugar"
          )),
          e.settings.showSugarAlcohol &&
          (n += generateAttributeHtml2018Version(
            e.settings,
            "valueSugarAlcohol",
            "unitSugarAlcohol",
            "naSugarAlcohol",
            "textSugarAlcohol",
            "",
            "nf-line nf-indent",
            !1,
            "roundCarbFiberSugarProtein",
            "",
            "",
            "",
            ""
          )),
          e.settings.showProteins &&
          (n += generateAttributeHtml2018Version(
            e.settings,
            "valueProteins",
            "unitProteins",
            "naProteins",
            "textProteins",
            "proteinContent",
            "nf-line",
            !1,
            "roundCarbFiberSugarProtein",
            "",
            "nf-highlight",
            "",
            ""
          )),
          e.settings.showVitaminD ||
          e.settings.showCalcium ||
          e.settings.showIron ||
          e.settings.showPotassium_2018)
      ) {
        let t = "valueVitaminD",
          a = "valuePotassium_2018";
        (n += globalTab1 + '<div class="nf-bar2"></div>\n'),
          (n += globalTab1 + '<div class="nf-vitamins">\n'),
          (n += globalTab2 + '<div class="nf-vitamins">\n'),
          e.settings.useBaseValueFor2018LabelAndNotDVPercentage ||
          (e.settings.showPotassium_2018
            ? (t = "valuePotassium_2018")
            : e.settings.showIron
              ? (t = "valueIron")
              : e.settings.showCalcium && (t = "valueCalcium")),
          e.settings.useBaseValueFor2018LabelAndNotDVPercentage &&
          (e.settings.showVitaminD
            ? (a = "valueVitaminD")
            : e.settings.showCalcium
              ? (a = "valueCalcium")
              : e.settings.showIron && (a = "valueIron")),
          e.settings.showVitaminD &&
            !e.settings.useBaseValueFor2018LabelAndNotDVPercentage
            ? (n +=
              globalTab3 +
              generate2018HtmlAndComputeValueGivenThePercentage(
                e.settings,
                "valueVitaminD",
                "dailyValueVitaminD",
                "unitVitaminD_base",
                "unitVitaminD_percent",
                "naVitaminD",
                "textVitaminD",
                e.settings.showDailyVitaminD,
                "valueVitaminD" == t
              ))
            : e.settings.showVitaminD &&
            e.settings.useBaseValueFor2018LabelAndNotDVPercentage &&
            (n += generateAttributeHtml2018Version(
              e.settings,
              "valueVitaminD",
              "unitVitaminD_base",
              "naVitaminD",
              "textVitaminD",
              "vitaminDContent",
              "valueVitaminD" == a ? "" : "nf-line",
              e.settings.showDailyVitaminD,
              "roundFor2018LabelVitaminDIron",
              "roundFor2018LabelVitaminDIronRule",
              "",
              "",
              "dailyValueVitaminD"
            )),
          e.settings.showCalcium &&
            !e.settings.useBaseValueFor2018LabelAndNotDVPercentage
            ? (n +=
              globalTab3 +
              generate2018HtmlAndComputeValueGivenThePercentage(
                e.settings,
                "valueCalcium",
                "dailyValueCalcium",
                "unitCalcium_base",
                "unitCalcium_percent",
                "naCalcium",
                "textCalcium",
                e.settings.showDailyCalcium,
                "valueCalcium" == t
              ))
            : e.settings.showCalcium &&
            e.settings.useBaseValueFor2018LabelAndNotDVPercentage &&
            (n += generateAttributeHtml2018Version(
              e.settings,
              "valueCalcium",
              "unitCalcium_base",
              "naCalcium",
              "textCalcium",
              "calciumContent",
              "valueCalcium" == a ? "" : "nf-line",
              e.settings.showDailyCalcium,
              "roundFor2018LabelCalciumPotassium",
              "roundFor2018LabelCalciumPotassiumRule",
              "",
              "",
              "dailyValueCalcium"
            )),
          e.settings.showIron &&
            !e.settings.useBaseValueFor2018LabelAndNotDVPercentage
            ? (n +=
              globalTab3 +
              generate2018HtmlAndComputeValueGivenThePercentage(
                e.settings,
                "valueIron",
                "dailyValueIron",
                "unitIron_base",
                "unitIron_percent",
                "naIron",
                "textIron",
                e.settings.showDailyIron,
                "valueIron" == t
              ))
            : e.settings.showIron &&
            e.settings.useBaseValueFor2018LabelAndNotDVPercentage &&
            (n += generateAttributeHtml2018Version(
              e.settings,
              "valueIron",
              "unitIron_base",
              "naIron",
              "textIron",
              "ironContent",
              "valueIron" == a ? "" : "nf-line",
              e.settings.showDailyIron,
              "roundFor2018LabelVitaminDIron",
              "roundFor2018LabelVitaminDIronRule",
              "",
              "",
              "dailyValueIron"
            )),
          e.settings.showPotassium_2018 &&
            !e.settings.useBaseValueFor2018LabelAndNotDVPercentage
            ? (n +=
              globalTab3 +
              generate2018HtmlAndComputeValueGivenThePercentage(
                e.settings,
                "valuePotassium_2018",
                "dailyValuePotassium_2018",
                "unitPotassium_base",
                "unitPotassium_percent",
                "naPotassium_2018",
                "textPotassium",
                e.settings.showDailyPotassium_2018,
                "valuePotassium_2018" == t
              ))
            : e.settings.showPotassium_2018 &&
            e.settings.useBaseValueFor2018LabelAndNotDVPercentage &&
            (n += generateAttributeHtml2018Version(
              e.settings,
              "valuePotassium_2018",
              "unitPotassium_base",
              "naPotassium_2018",
              "textPotassium",
              "potassiumContent",
              "valuePotassium_2018" == a ? "" : "nf-line",
              e.settings.showDailyPotassium_2018,
              "roundFor2018LabelCalciumPotassium",
              "roundFor2018LabelCalciumPotassiumRule",
              "",
              "",
              "dailyValuePotassium_2018"
            )),
          (n += globalTab2 + "</div>\n"),
          (n += globalTab1 + "</div>\n");
      }
      if (
        ((n += globalTab1 + '<div class="nf-bar2"></div>\n'),
          e.settings.showCaffeine)
      ) {
        let t = "nf-highlight";
        e.settings.boldCaffeine || (t = ""),
          (n += generateAttributeHtml2018Version(
            e.settings,
            "valueCaffeine",
            "unitCaffeine",
            "naCaffeine",
            "textCaffeine",
            "caffeineContent",
            "",
            !1,
            "roundCaffeine",
            "",
            t,
            "",
            ""
          )),
          (n += globalTab1 + '<div class="nf-bar1"></div>\n'),
          (n += globalTab1 + '<div class="nf-vitamins">\n');
      }
      return (
        (n +=
          globalTab1 +
          '<div class="' +
          (e.settings.hidePercentDailyValues
            ? "nf-footnoteHiddenDailyValues"
            : "nf-footnote") +
          '">\n'),
        e.settings.hidePercentDailyValues ||
        ((n +=
          globalTab2 +
          '<span tabIndex="0">' +
          e.settings.textPercentDaily2018VersionPart1),
          (n += e.settings.calorieIntake),
          (n += e.settings.textPercentDaily2018VersionPart2 + "</span>\n")),
        e.settings.showIngredients &&
        (n += ingredientsHtml2018Version(e.settings)),
        e.settings.showDisclaimer &&
        (n += disclaimerHtml2018Version(e.settings)),
        (n += globalTab1 + "</div>\n"),
        e.settings.showBottomLink &&
        (n += bottomLinkHtml2018Version(e.settings)),
        e.settings.showCustomFooter &&
        (n +=
          globalTab1 +
          '<div class="nf-customFooter" tabindex="0">' +
          e.settings.valueCustomFooter +
          "</div>\n"),
        n +
        '<div class="naTooltip">' +
        e.settings.textDataNotAvailable +
        '</div>\n</div>\x3c!-- closing class="nf" --\x3e\n'
      );
    },
    generateUK: function () {
      let t = this,
        e = "",
        a = "";
      return t.nutritionLabel
        ? t.nutritionLabel
        : (t.settings.hideNotApplicableValues &&
          ((t.settings.showCalories =
            !t.settings.naCalories && t.settings.showCalories),
            (t.settings.showTotalFat =
              !t.settings.naTotalFat && t.settings.showTotalFat),
            (t.settings.showSatFat =
              !t.settings.naSatFat && t.settings.showSatFat),
            (t.settings.showTotalCarb =
              !t.settings.naTotalCarb && t.settings.showTotalCarb),
            (t.settings.showSugars =
              !t.settings.naSugars && t.settings.showSugars),
            (t.settings.showFibers =
              !t.settings.naFibers && t.settings.showFibers),
            (t.settings.showProteins =
              !t.settings.naProteins && t.settings.showProteins),
            (t.settings.showSodium =
              !t.settings.naSodium && t.settings.showSodium)),
          t.settings.valueServingWeightGrams <= 0 &&
          ((t.settings.naCalories = !0),
            (t.settings.naTotalFat = !0),
            (t.settings.naSatFat = !0),
            (t.settings.naTotalCarb = !0),
            (t.settings.naSugars = !0),
            (t.settings.naFibers = !0),
            (t.settings.naProteins = !0),
            (t.settings.naSodium = !0)),
          t.settings.allowNoBorder && (e = "border: 0;"),
          (a =
            '<div itemscope itemtype="http://schema.org/NutritionInformation" role="region" aria-label="nutrition label" class="uk_nf uk" style="' +
            e),
          t.settings.allowCustomWidth
            ? (a += " width: " + t.settings.widthCustom + ';">\n')
            : (a += " width: " + t.settings.width + 'px;">\n'),
          (a +=
            globalTab1 +
            '<div class="uk_nf-title" tabindex="0">' +
            t.settings.textNutritionFacts +
            "</div>\n"),
          t.settings.showItemNameForUK &&
          (a +=
            globalTab1 +
            '<div class="uk_nf-item-name" tabindex="0">' +
            t.settings.itemName +
            "</div>\n"),
          t.settings.convertEmptyServingNametoServingForUKLabel &&
          "" === String(t.settings.valueServingSizeUnit) &&
          (t.settings.valueServingSizeUnit =
            t.settings.textUKDefaultServingNameIfEmpty),
          (a += globalTab1 + "<table>\n"),
          (a += globalTab2 + "<thead>\n"),
          (a += globalTab3 + "<tr>\n"),
          (a +=
            globalTab4 + "<th>" + t.settings.textUKTypicalValues + "</th>\n"),
          (a +=
            globalTab4 +
            "<th>" +
            t.settings.textUKPer100 +
            " 100" +
            t.settings.unitGramOrMlForThePer100Part +
            "</th>\n"),
          (a += globalTab4 + "<th>"),
          t.settings.showServingUnitQuantityTextbox
            ? (t.settings.hideTextboxArrows ||
              ((a += globalTab5 + '<div class="setter">\n'),
                (a +=
                  globalTab6 +
                  '<a href="' +
                  t.settings.textAriaLabelIncreaseQuantityArrow +
                  '" class="uk_nf-unitQuantityUp" '),
                (a +=
                  'aria-label="' +
                  t.settings.textAriaLabelIncreaseQuantityArrow +
                  '" rel="nofollow" tabindex="0"></a>\n'),
                (a +=
                  globalTab6 +
                  '<a href="' +
                  t.settings.textAriaLabelDecreaseQuantityArrow +
                  '" class="uk_nf-unitQuantityDown" '),
                (a +=
                  'aria-label="' +
                  t.settings.textAriaLabelDecreaseQuantityArrow +
                  '" rel="nofollow" tabindex="0"></a>\n'),
                (a +=
                  globalTab5 +
                  '</div>\x3c!-- closing class="setter" --\x3e\n\n')),
              (a +=
                globalTab5 +
                '<input type="text" data-role="none" value="' +
                roundLoDash(
                  t.settings.valueServingUnitQuantity,
                  this.settings.decimalPlacesForQuantityTextbox
                ) +
                '" '),
              (a +=
                'class="uk_nf-unitQuantityBox uk_nf-modifier-field" aria-label="' +
                this.settings.textAriaLabelChangeQuantityTextbox +
                '">\n'),
              (a +=
                globalTab5 +
                '<input type="hidden" value="' +
                roundLoDash(
                  this.settings.valueServingUnitQuantity,
                  this.settings.decimalPlacesForQuantityTextbox
                ) +
                '" id="uk_nf-nixLabelBeforeQuantity">\n\n'))
            : (a += globalTab5 + t.settings.valueServingUnitQuantity),
          (a +=
            globalTab5 +
            '<span class="uk_nf-servingUnit">' +
            t.settings.valueServingSizeUnit),
          (a +=
            " (" +
            roundLoDash(t.settings.valueServingWeightGrams) +
            t.settings.unitGramOrMlForThePer100Part +
            ")</span>\n"),
          (a += "</th>\n"),
          (a +=
            globalTab4 +
            "<th>%*(" +
            roundLoDash(t.settings.valueServingWeightGrams) +
            t.settings.unitGramOrMlForThePer100Part +
            ")</th>\n"),
          (a += globalTab3 + "</tr>\n"),
          (a += globalTab2 + "</thead>\n"),
          (a += globalTab1 + "<tbody>\n"),
          t.settings.showCalories &&
          ((a += generateAttributeForUK(
            t.settings,
            "valueCalories",
            "",
            "unitEnergy_kj",
            "naCalories",
            "textCalories",
            "",
            "roundToNearestNum",
            "roundToNearestNum",
            !1,
            !1
          )),
            (a += generateAttributeForUK(
              t.settings,
              "valueCalories",
              "dailyValueEnergyKcal",
              "unitEnergy_kcal",
              "naCalories",
              "",
              "",
              "roundToNearestNum",
              "roundToNearestNum",
              t.settings.showDailyEnergy,
              !1
            ))),
          t.settings.showTotalFat &&
          (a += generateAttributeForUK(
            t.settings,
            "valueTotalFat",
            "dailyValueTotalFat",
            "unitTotalFat",
            "naTotalFat",
            "textTotalFat",
            "fatContent",
            "roundForUKLabelTotalFatCarbsSugarFiberProtein",
            "roundForUKLabelTotalFatCarbsSugarFiberProteinRule",
            t.settings.showDailyTotalFat,
            !1
          )),
          t.settings.showSatFat &&
          (a += generateAttributeForUK(
            t.settings,
            "valueSatFat",
            "dailyValueSatFat",
            "unitSatFat",
            "naSatFat",
            "textSatFat",
            "saturatedFatContent",
            "roundForUKLabelSatFat",
            "roundForUKLabelSatFatRule",
            t.settings.showDailySatFat,
            !0
          )),
          t.settings.showTotalCarb &&
          (a += generateAttributeForUK(
            t.settings,
            "valueTotalCarb",
            "dailyValueCarb",
            "unitTotalCarb",
            "naTotalCarb",
            "textTotalCarb",
            "carbohydrateContent",
            "roundForUKLabelTotalFatCarbsSugarFiberProtein",
            "roundForUKLabelTotalFatCarbsSugarFiberProteinRule",
            t.settings.showDailyTotalCarb,
            !1
          )),
          t.settings.showSugars &&
          (a += generateAttributeForUK(
            t.settings,
            "valueSugars",
            "dailyValueSugar",
            "unitSugars",
            "naSugars",
            "textSugars",
            "sugarContent",
            "roundForUKLabelTotalFatCarbsSugarFiberProtein",
            "roundForUKLabelTotalFatCarbsSugarFiberProteinRule",
            t.settings.showDailySugars,
            !0
          )),
          t.settings.showFibers &&
          (a += generateAttributeForUK(
            t.settings,
            "valueFibers",
            "",
            "unitFibers",
            "naFibers",
            "textFibers",
            "fiberContent",
            "roundForUKLabelTotalFatCarbsSugarFiberProtein",
            "roundForUKLabelTotalFatCarbsSugarFiberProteinRule",
            !1,
            !1
          )),
          t.settings.showProteins &&
          (a += generateAttributeForUK(
            t.settings,
            "valueProteins",
            "dailyValueProtein",
            "unitProteins",
            "naProteins",
            "textProteins",
            "proteinContent",
            "roundForUKLabelTotalFatCarbsSugarFiberProtein",
            "roundForUKLabelTotalFatCarbsSugarFiberProteinRule",
            t.settings.showDailyProtein,
            !1
          )),
          t.settings.showSodium &&
          (a += generateAttributeForUK(
            t.settings,
            "valueSodium",
            "dailyValueSalt",
            "unitSalt",
            "naSodium",
            "textSodium",
            "sodiumContent",
            "roundForUKLabelSalt",
            "roundForUKLabelSaltRule",
            t.settings.showDailySodium,
            !1
          )),
          (a += globalTab2 + "</tbody>\n"),
          (a += globalTab2 + "<tfoot>\n"),
          (a += globalTab3 + "<tr>\n"),
          (a += globalTab4 + '<td colspan="4">\n'),
          (a += globalTab5 + '<div class="uk_nf-footnote">\n'),
          (a += referenceIntakeHtmlUKVersion(t.settings)),
          t.settings.showIngredients &&
          (a += ingredientsHtmlUKVersion(t.settings)),
          t.settings.showDisclaimer &&
          (a += disclaimerHtmlUKVersion(t.settings)),
          t.settings.showBottomLink &&
          (a += bottomLinkHtmlUKVersion(t.settings)),
          t.settings.showCustomFooter &&
          (a +=
            globalTab6 +
            '<div class="uk_nf-customFooter" tabindex="0">\n' +
            globalTab7 +
            t.settings.valueCustomFooter +
            "\n" +
            globalTab6 +
            "</div>\n"),
          (a += globalTab5 + "</div>\n"),
          (a += globalTab4 + "</td>\n"),
          (a += globalTab3 + "</tr>\n"),
          (a += globalTab2 + "</tfoot>\n"),
          (a += globalTab1 + "</table>\n") +
          '<div class="naTooltip">' +
          t.settings.textDataNotAvailable +
          '</div>\n</div>\x3c!-- closing class="uk_nf" --\x3e\n');
    },
  };
})(jQuery);
function createRoundMain(methodName) {
  const func = Math[methodName];
  return (number, precision) => {
    precision =
      precision === null
        ? 0
        : precision >= 0
          ? Math.min(precision, 292)
          : Math.max(precision, -292);
    if (precision) {
      let pair = `${number}e`.split("e");
      const value = func(`${pair[0]}e${+pair[1] + precision}`);
      pair = `${value}e`.split("e");
      return +`${pair[0]}e${+pair[1] - precision}`;
    }
    return func(number);
  };
}
const roundLoDashMain = createRoundMain("round");
var API = {
  ingredients: null,
  items: null,
  categories: null,
  groups: null,
  templates: null,
  preferences: null,
  categoryItems: null,
  itemIngredients: null,
  itemDefaultIngredients: null,
  templateGroupMultipliers: null,
  templateGroups: null,
  templateGroupsDivideEvenlyString: null,
  templateGroupsDivideEvenly: null,
  templateGroupsPizzaFeatureString: null,
  templateGroupsPizzaFeature: null,
  groupIngredients: null,
  groupIngredientsMaxValue: null,
  groupIngredientsMultiplierValue: null,
  groupIngredientsDividedEvenlyString: null,
  groupIngredientsDividedEvenly: null,
  groupIngredientsPizzaFeatureString: null,
  groupIngredientsPizzaFeature: null,
  templateItems: null,
  mainDropdown: null,
  settings: { async: false, refresh: true, dataType: "JSON" },
  init: function (initUrl) {
    let api = this;
    if (initUrl.indexOf("?mode=preview") === -1) {
      if (initUrl.indexOf("corsFailover") === -1) {
        return $.ajax({
          url: initUrl,
          dataType: "JSON",
          crossDomain: true,
          success: function (data) {
            if (data !== undefined && data !== null) {
              for (let prop in api) {
                if (
                  data["calculator"][prop] !== undefined &&
                  data["calculator"][prop] !== null
                ) {
                  api[prop] = data["calculator"][prop];
                }
              }
            }
          },
          error: function (jqXHR, textStatus, errorThrown) { },
        });
      } else {
        return $.ajax({
          url: initUrl.replace(
            "cdn1.nutritionix.com",
            "nixdotcom.s3.amazonaws.com"
          ),
          success: function (data2) {
            if (data2 !== undefined && data2 !== null) {
              for (let prop in api) {
                if (
                  data2["calculator"][prop] !== undefined &&
                  data2["calculator"][prop] !== null
                ) {
                  api[prop] = data2["calculator"][prop];
                }
              }
            }
          },
          error: function (jqXHR, textStatus, errorThrown) { },
        });
      }
    } else {
      return $.ajax({
        url: initUrl,
        dataType: "JSON",
        success: function (data) {
          if (data !== undefined && data !== null) {
            for (let prop in api) {
              if (
                data["calculator"][prop] !== undefined &&
                data["calculator"][prop] !== null
              ) {
                api[prop] = data["calculator"][prop];
              }
            }
          }
        },
        error: function (jqXHR, textStatus, errorThrown) {
          $("#item_category_id").attr("disabled", true);
          $("#btnStartOver").hide();
          showMessage.warning({
            text: [
              'There was an error loading the calculator, please <a href="' +
              document.location.href +
              '">click here</a> to refresh this page',
            ],
            autoClose: false,
          });
          $("#standalone-loader").hide();
        },
      });
    }
  },
  getData: function (type, arg1, arg2) {
    let api = this;
    if (!api.hasOwnProperty(type)) {
      throw type + " is not a valid property of the API object.";
    }
    return api[type];
  },
};
(function ($) {
  var helper = {},
    current,
    title,
    tID,
    IE = $.browser.msie && /MSIE\s(5\.5|6\.)/.test(navigator.userAgent),
    track = false;
  $.tooltip = {
    blocked: false,
    defaults: {
      delay: 200,
      fade: false,
      showURL: true,
      extraClass: "",
      top: 15,
      left: 15,
      id: "tooltip",
    },
    block: function () {
      $.tooltip.blocked = !$.tooltip.blocked;
    },
  };
  $.fn.extend({
    tooltip: function (settings) {
      settings = $.extend({}, $.tooltip.defaults, settings);
      createHelper(settings);
      return this.each(function () {
        $.data(this, "tooltip", settings);
        this.tOpacity = helper.parent.css("opacity");
        this.tooltipText = this.title;
        $(this).removeAttr("title");
        this.alt = "";
      })
        .mouseover(save)
        .mouseout(hide)
        .click(hide);
    },
    fixPNG: IE
      ? function () {
        return this.each(function () {
          var image = $(this).css("backgroundImage");
          if (image.match(/^url\(["']?(.*\.png)["']?\)$/i)) {
            image = RegExp.$1;
            $(this)
              .css({
                backgroundImage: "none",
                filter:
                  "progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop, src='" +
                  image +
                  "')",
              })
              .each(function () {
                var position = $(this).css("position");
                if (position != "absolute" && position != "relative")
                  $(this).css("position", "relative");
              });
          }
        });
      }
      : function () {
        return this;
      },
    unfixPNG: IE
      ? function () {
        return this.each(function () {
          $(this).css({ filter: "", backgroundImage: "" });
        });
      }
      : function () {
        return this;
      },
    hideWhenEmpty: function () {
      return this.each(function () {
        $(this)[$(this).html() ? "show" : "hide"]();
      });
    },
    url: function () {
      return this.attr("href") || this.attr("src");
    },
  });
  function createHelper(settings) {
    if (helper.parent) return;
    helper.parent = $(
      '<div id="' +
      settings.id +
      '"><h3></h3><div class="body"></div><div class="url"></div></div>'
    )
      .appendTo(document.body)
      .hide();
    if ($.fn.bgiframe) helper.parent.bgiframe();
    helper.title = $("h3", helper.parent);
    helper.body = $("div.body", helper.parent);
    helper.url = $("div.url", helper.parent);
  }
  function settings(element) {
    return $.data(element, "tooltip");
  }
  function handle(event) {
    if (settings(this).delay) tID = setTimeout(show, settings(this).delay);
    else show();
    track = !!settings(this).track;
    $(document.body).bind("mousemove", update);
    update(event);
  }
  function save() {
    if (
      $.tooltip.blocked ||
      this == current ||
      (!this.tooltipText && !settings(this).bodyHandler)
    )
      return;
    current = this;
    title = this.tooltipText;
    if (settings(this).bodyHandler) {
      helper.title.hide();
      var bodyContent = settings(this).bodyHandler.call(this);
      if (bodyContent.nodeType || bodyContent.jquery) {
        helper.body.empty().append(bodyContent);
      } else {
        helper.body.html(bodyContent);
      }
      helper.body.show();
    } else if (settings(this).showBody) {
      var parts = title.split(settings(this).showBody);
      helper.title.html(parts.shift()).show();
      helper.body.empty();
      for (var i = 0, part; (part = parts[i]); i++) {
        if (i > 0) helper.body.append("<br/>");
        helper.body.append(part);
      }
      helper.body.hideWhenEmpty();
    } else {
      helper.title.html(title).show();
      helper.body.hide();
    }
    if (settings(this).showURL && $(this).url())
      helper.url.html($(this).url().replace("http://", "")).show();
    else helper.url.hide();
    helper.parent.addClass(settings(this).extraClass);
    if (settings(this).fixPNG) helper.parent.fixPNG();
    handle.apply(this, arguments);
  }
  function show() {
    tID = null;
    if ((!IE || !$.fn.bgiframe) && settings(current).fade) {
      if (helper.parent.is(":animated"))
        helper.parent
          .stop()
          .show()
          .fadeTo(settings(current).fade, current.tOpacity);
      else
        helper.parent.is(":visible")
          ? helper.parent.fadeTo(settings(current).fade, current.tOpacity)
          : helper.parent.fadeIn(settings(current).fade);
    } else {
      helper.parent.show();
    }
    update();
  }
  function update(event) {
    if ($.tooltip.blocked) return;
    if (event && event.target.tagName == "OPTION") {
      return;
    }
    if (!track && helper.parent.is(":visible")) {
      $(document.body).unbind("mousemove", update);
    }
    if (current == null) {
      $(document.body).unbind("mousemove", update);
      return;
    }
    helper.parent.removeClass("viewport-right").removeClass("viewport-bottom");
    var left = helper.parent[0].offsetLeft;
    var top = helper.parent[0].offsetTop;
    if (event) {
      left = event.pageX + settings(current).left;
      top = event.pageY + settings(current).top;
      var right = "auto";
      if (settings(current).positionLeft) {
        right = $(window).width() - left;
        left = "auto";
      }
      helper.parent.css({ left: left, right: right, top: top });
    }
    var v = viewport(),
      h = helper.parent[0];
    if (v.x + v.cx < h.offsetLeft + h.offsetWidth) {
      left -= h.offsetWidth + 20 + settings(current).left;
      helper.parent.css({ left: left + "px" }).addClass("viewport-right");
    }
    if (v.y + v.cy < h.offsetTop + h.offsetHeight) {
      top -= h.offsetHeight + 20 + settings(current).top;
      helper.parent.css({ top: top + "px" }).addClass("viewport-bottom");
    }
  }
  function viewport() {
    return {
      x: $(window).scrollLeft(),
      y: $(window).scrollTop(),
      cx: $(window).width(),
      cy: $(window).height(),
    };
  }
  function hide(event) {
    if ($.tooltip.blocked) return;
    if (tID) clearTimeout(tID);
    current = null;
    var tsettings = settings(this);
    function complete() {
      helper.parent.removeClass(tsettings.extraClass).hide().css("opacity", "");
    }
    if ((!IE || !$.fn.bgiframe) && tsettings.fade) {
      if (helper.parent.is(":animated"))
        helper.parent.stop().fadeTo(tsettings.fade, 0, complete);
      else helper.parent.stop().fadeOut(tsettings.fade, complete);
    } else complete();
    if (settings(this).fixPNG) helper.parent.unfixPNG();
  }
})(jQuery);
(function ($) {
  function fixTitle($ele) {
    if ($ele.attr("title") || typeof $ele.attr("original-title") != "string") {
      $ele.attr("original-title", $ele.attr("title") || "").removeAttr("title");
    }
  }
  function Tipsy(element, options) {
    this.$element = $(element);
    this.options = options;
    this.enabled = true;
    fixTitle(this.$element);
  }
  Tipsy.prototype = {
    show: function () {
      var title = this.getTitle();
      if (title && this.enabled) {
        var $tip = this.tip();
        $tip.find(".tipsy-inner")[this.options.html ? "html" : "text"](title);
        $tip[0].className = "tipsy";
        $tip
          .remove()
          .css({ top: 0, left: 0, visibility: "hidden", display: "block" })
          .appendTo(document.body);
        var pos = $.extend({}, this.$element.offset(), {
          width: this.$element[0].offsetWidth,
          height: this.$element[0].offsetHeight,
        });
        var actualWidth = $tip[0].offsetWidth,
          actualHeight = $tip[0].offsetHeight;
        var gravity =
          typeof this.options.gravity == "function"
            ? this.options.gravity.call(this.$element[0])
            : this.options.gravity;
        var tp;
        switch (gravity.charAt(0)) {
          case "n":
            tp = {
              top: pos.top + pos.height + this.options.offset,
              left: pos.left + pos.width / 2 - actualWidth / 2,
            };
            break;
          case "s":
            tp = {
              top: pos.top - actualHeight - this.options.offset,
              left: pos.left + pos.width / 2 - actualWidth / 2,
            };
            break;
          case "e":
            tp = {
              top: pos.top + pos.height / 2 - actualHeight / 2,
              left: pos.left - actualWidth - this.options.offset,
            };
            break;
          case "w":
            tp = {
              top: pos.top + pos.height / 2 - actualHeight / 2,
              left: pos.left + pos.width + this.options.offset,
            };
            break;
        }
        if (gravity.length == 2) {
          if (gravity.charAt(1) == "w") {
            tp.left = pos.left + pos.width / 2 - 15;
          } else {
            tp.left = pos.left + pos.width / 2 - actualWidth + 15;
          }
        }
        $tip.css(tp).addClass("tipsy-" + gravity);
        if (this.options.fade) {
          $tip
            .stop()
            .css({ opacity: 0, display: "block", visibility: "visible" })
            .animate({ opacity: this.options.opacity });
        } else {
          $tip.css({ visibility: "visible", opacity: this.options.opacity });
        }
      }
    },
    hide: function () {
      if (this.options.fade) {
        this.tip()
          .stop()
          .fadeOut(function () {
            $(this).remove();
          });
      } else {
        this.tip().remove();
      }
    },
    getTitle: function () {
      var title,
        $e = this.$element,
        o = this.options;
      fixTitle($e);
      var title,
        o = this.options;
      if (typeof o.title == "string") {
        title = $e.attr(o.title == "title" ? "original-title" : o.title);
      } else if (typeof o.title == "function") {
        title = o.title.call($e[0]);
      }
      title = ("" + title).replace(/(^\s*|\s*$)/, "");
      return title || o.fallback;
    },
    tip: function () {
      if (!this.$tip) {
        this.$tip = $('<div class="tipsy"></div>').html(
          '<div class="tipsy-arrow"></div><div class="tipsy-inner"/></div>'
        );
      }
      return this.$tip;
    },
    validate: function () {
      if (!this.$element[0].parentNode) {
        this.hide();
        this.$element = null;
        this.options = null;
      }
    },
    enable: function () {
      this.enabled = true;
    },
    disable: function () {
      this.enabled = false;
    },
    toggleEnabled: function () {
      this.enabled = !this.enabled;
    },
  };
  $.fn.tipsy = function (options) {
    if (options === true) {
      return this.data("tipsy");
    } else if (typeof options == "string") {
      return this.data("tipsy")[options]();
    }
    options = $.extend({}, $.fn.tipsy.defaults, options);
    function get(ele) {
      var tipsy = $.data(ele, "tipsy");
      if (!tipsy) {
        tipsy = new Tipsy(ele, $.fn.tipsy.elementOptions(ele, options));
        $.data(ele, "tipsy", tipsy);
      }
      return tipsy;
    }
    function enter() {
      var tipsy = get(this);
      tipsy.hoverState = "in";
      if (options.delayIn == 0) {
        tipsy.show();
      } else {
        setTimeout(function () {
          if (tipsy.hoverState == "in") tipsy.show();
        }, options.delayIn);
      }
    }
    function leave() {
      var tipsy = get(this);
      tipsy.hoverState = "out";
      if (options.delayOut == 0) {
        tipsy.hide();
      } else {
        setTimeout(function () {
          if (tipsy.hoverState == "out") tipsy.hide();
        }, options.delayOut);
      }
    }
    if (!options.live)
      this.each(function () {
        get(this);
      });
    if (options.trigger != "manual") {
      var binder = options.live ? "live" : "bind",
        eventIn = options.trigger == "hover" ? "mouseenter" : "focus",
        eventOut = options.trigger == "hover" ? "mouseleave" : "blur";
      this[binder](eventIn, enter)[binder](eventOut, leave);
    }
    return this;
  };
  $.fn.tipsy.defaults = {
    delayIn: 0,
    delayOut: 0,
    fade: false,
    fallback: "",
    gravity: "n",
    html: false,
    live: false,
    offset: 0,
    opacity: 0.8,
    title: "title",
    trigger: "hover",
  };
  $.fn.tipsy.elementOptions = function (ele, options) {
    return $.metadata ? $.extend({}, options, $(ele).metadata()) : options;
  };
  $.fn.tipsy.autoNS = function () {
    return $(this).offset().top >
      $(document).scrollTop() + $(window).height() / 2
      ? "s"
      : "n";
  };
  $.fn.tipsy.autoWE = function () {
    return $(this).offset().left >
      $(document).scrollLeft() + $(window).width() / 2
      ? "e"
      : "w";
  };
})(jQuery);
(function ($) {
  $(".nix-tiny-logo").tooltip({
    bodyHandler: function () {
      return $("#calcDisclaimerText").html();
    },
    showURL: false,
    fade: 200,
  });
})(jQuery);
("use strict");
var qrcodegen = new (function () {
  this.QrCode = function (initData, mask, version, errCorLvl) {
    if (mask < -1 || mask > 7) throw "Mask value out of range";
    if (initData instanceof Array) {
      if (version < 1 || version > 40) throw "Version value out of range";
    } else if (initData instanceof qrcodegen.QrCode) {
      if (version != undefined || errCorLvl != undefined)
        throw "Values must be undefined";
      version = initData.version;
      errCorLvl = initData.errorCorrectionLevel;
    } else throw "Invalid initial data";
    var size = version * 4 + 17;
    var row = [];
    for (var i = 0; i < size; i++) row.push(false);
    var modules = [];
    var isFunction = [];
    for (var i = 0; i < size; i++) {
      modules.push(row.slice());
      isFunction.push(row.slice());
    }
    if (initData instanceof Array) {
      drawFunctionPatterns();
      var allCodewords = appendErrorCorrection(initData);
      drawCodewords(allCodewords);
    } else if (initData instanceof qrcodegen.QrCode) {
      for (var y = 0; y < size; y++) {
        for (var x = 0; x < size; x++) {
          modules[y][x] = initData.getModule(x, y) == 1;
          isFunction[y][x] = initData.isFunctionModule(x, y);
        }
      }
      applyMask(initData.mask);
    } else throw "Invalid initial data";
    if (mask == -1) {
      var minPenalty = Infinity;
      for (var i = 0; i < 8; i++) {
        drawFormatBits(i);
        applyMask(i);
        var penalty = getPenaltyScore();
        if (penalty < minPenalty) {
          mask = i;
          minPenalty = penalty;
        }
        applyMask(i);
      }
    }
    if (mask < 0 || mask > 7) throw "Assertion error";
    drawFormatBits(mask);
    applyMask(mask);
    Object.defineProperty(this, "version", { value: version });
    Object.defineProperty(this, "size", { value: size });
    Object.defineProperty(this, "errorCorrectionLevel", { value: errCorLvl });
    Object.defineProperty(this, "mask", { value: mask });
    this.getModule = function (x, y) {
      if (0 <= x && x < size && 0 <= y && y < size)
        return modules[y][x] ? 1 : 0;
      else return 0;
    };
    this.isFunctionModule = function (x, y) {
      if (0 <= x && x < size && 0 <= y && y < size) return isFunction[y][x];
      else return false;
    };
    this.drawCanvas = function (scale, border, canvas) {
      if (scale <= 0 || border < 0) throw "Value out of range";
      var width = (size + border * 2) * scale;
      canvas.width = width;
      canvas.height = width;
      var ctx = canvas.getContext("2d");
      for (var y = -border; y < size + border; y++) {
        for (var x = -border; x < size + border; x++) {
          ctx.fillStyle = this.getModule(x, y) == 1 ? "#000000" : "#FFFFFF";
          ctx.fillRect(
            (x + border) * scale,
            (y + border) * scale,
            scale,
            scale
          );
        }
      }
    };
    this.toSvgString = function (border) {
      if (border < 0) throw "Border must be non-negative";
      var result = '<?xml version="1.0" encoding="UTF-8"?>\n';
      result +=
        '<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n';
      result +=
        '<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 ' +
        (size + border * 2) +
        " " +
        (size + border * 2) +
        '">\n';
      result +=
        '\t<rect width="100%" height="100%" fill="#FFFFFF" stroke-width="0"/>\n';
      result += '\t<path d="';
      var head = true;
      for (var y = -border; y < size + border; y++) {
        for (var x = -border; x < size + border; x++) {
          if (this.getModule(x, y) == 1) {
            if (head) head = false;
            else result += " ";
            result += "M" + (x + border) + "," + (y + border) + "h1v1h-1z";
          }
        }
      }
      result += '" fill="#000000" stroke-width="0"/>\n';
      result += "</svg>\n";
      return result;
    };
    function drawFunctionPatterns() {
      for (var i = 0; i < size; i++) {
        setFunctionModule(6, i, i % 2 == 0);
        setFunctionModule(i, 6, i % 2 == 0);
      }
      drawFinderPattern(3, 3);
      drawFinderPattern(size - 4, 3);
      drawFinderPattern(3, size - 4);
      var alignPatPos = QrCode.getAlignmentPatternPositions(version);
      var numAlign = alignPatPos.length;
      for (var i = 0; i < numAlign; i++) {
        for (var j = 0; j < numAlign; j++) {
          if (
            (i == 0 && j == 0) ||
            (i == 0 && j == numAlign - 1) ||
            (i == numAlign - 1 && j == 0)
          )
            continue;
          else drawAlignmentPattern(alignPatPos[i], alignPatPos[j]);
        }
      }
      drawFormatBits(0);
      drawVersion();
    }
    function drawFormatBits(mask) {
      var data = (errCorLvl.formatBits << 3) | mask;
      var rem = data;
      for (var i = 0; i < 10; i++) rem = (rem << 1) ^ ((rem >>> 9) * 0x537);
      data = (data << 10) | rem;
      data ^= 0x5412;
      if (data >>> 15 != 0) throw "Assertion error";
      for (var i = 0; i <= 5; i++)
        setFunctionModule(8, i, ((data >>> i) & 1) != 0);
      setFunctionModule(8, 7, ((data >>> 6) & 1) != 0);
      setFunctionModule(8, 8, ((data >>> 7) & 1) != 0);
      setFunctionModule(7, 8, ((data >>> 8) & 1) != 0);
      for (var i = 9; i < 15; i++)
        setFunctionModule(14 - i, 8, ((data >>> i) & 1) != 0);
      for (var i = 0; i <= 7; i++)
        setFunctionModule(size - 1 - i, 8, ((data >>> i) & 1) != 0);
      for (var i = 8; i < 15; i++)
        setFunctionModule(8, size - 15 + i, ((data >>> i) & 1) != 0);
      setFunctionModule(8, size - 8, true);
    }
    function drawVersion() {
      if (version < 7) return;
      var rem = version;
      for (var i = 0; i < 12; i++) rem = (rem << 1) ^ ((rem >>> 11) * 0x1f25);
      var data = (version << 12) | rem;
      if (data >>> 18 != 0) throw "Assertion error";
      for (var i = 0; i < 18; i++) {
        var bit = ((data >>> i) & 1) != 0;
        var a = size - 11 + (i % 3),
          b = Math.floor(i / 3);
        setFunctionModule(a, b, bit);
        setFunctionModule(b, a, bit);
      }
    }
    function drawFinderPattern(x, y) {
      for (var i = -4; i <= 4; i++) {
        for (var j = -4; j <= 4; j++) {
          var dist = Math.max(Math.abs(i), Math.abs(j));
          var xx = x + j,
            yy = y + i;
          if (0 <= xx && xx < size && 0 <= yy && yy < size)
            setFunctionModule(xx, yy, dist != 2 && dist != 4);
        }
      }
    }
    function drawAlignmentPattern(x, y) {
      for (var i = -2; i <= 2; i++) {
        for (var j = -2; j <= 2; j++)
          setFunctionModule(
            x + j,
            y + i,
            Math.max(Math.abs(i), Math.abs(j)) != 1
          );
      }
    }
    function setFunctionModule(x, y, isBlack) {
      modules[y][x] = isBlack;
      isFunction[y][x] = true;
    }
    function appendErrorCorrection(data) {
      if (data.length != QrCode.getNumDataCodewords(version, errCorLvl))
        throw "Invalid argument";
      var numBlocks =
        QrCode.NUM_ERROR_CORRECTION_BLOCKS[errCorLvl.ordinal][version];
      var totalEcc =
        QrCode.NUM_ERROR_CORRECTION_CODEWORDS[errCorLvl.ordinal][version];
      if (totalEcc % numBlocks != 0) throw "Assertion error";
      var blockEccLen = Math.floor(totalEcc / numBlocks);
      var numShortBlocks =
        numBlocks -
        (Math.floor(QrCode.getNumRawDataModules(version) / 8) % numBlocks);
      var shortBlockLen = Math.floor(
        QrCode.getNumRawDataModules(version) / (numBlocks * 8)
      );
      var blocks = [];
      var rs = new ReedSolomonGenerator(blockEccLen);
      for (var i = 0, k = 0; i < numBlocks; i++) {
        var dat = data.slice(
          k,
          k + shortBlockLen - blockEccLen + (i < numShortBlocks ? 0 : 1)
        );
        k += dat.length;
        var ecc = rs.getRemainder(dat);
        if (i < numShortBlocks) dat.push(0);
        ecc.forEach(function (b) {
          dat.push(b);
        });
        blocks.push(dat);
      }
      var result = [];
      for (var i = 0; i < blocks[0].length; i++) {
        for (var j = 0; j < blocks.length; j++) {
          if (i != shortBlockLen - blockEccLen || j >= numShortBlocks)
            result.push(blocks[j][i]);
        }
      }
      if (result.length != Math.floor(QrCode.getNumRawDataModules(version) / 8))
        throw "Assertion error";
      return result;
    }
    function drawCodewords(data) {
      if (data.length != Math.floor(QrCode.getNumRawDataModules(version) / 8))
        throw "Invalid argument";
      var i = 0;
      for (var right = size - 1; right >= 1; right -= 2) {
        if (right == 6) right = 5;
        for (var vert = 0; vert < size; vert++) {
          for (var j = 0; j < 2; j++) {
            var x = right - j;
            var upwards = ((right & 2) == 0) ^ (x < 6);
            var y = upwards ? size - 1 - vert : vert;
            if (!isFunction[y][x] && i < data.length * 8) {
              modules[y][x] = ((data[i >>> 3] >>> (7 - (i & 7))) & 1) != 0;
              i++;
            }
          }
        }
      }
      if (i != data.length * 8) throw "Assertion error";
    }
    function applyMask(mask) {
      if (mask < 0 || mask > 7) throw "Mask value out of range";
      for (var y = 0; y < size; y++) {
        for (var x = 0; x < size; x++) {
          var invert;
          switch (mask) {
            case 0:
              invert = (x + y) % 2 == 0;
              break;
            case 1:
              invert = y % 2 == 0;
              break;
            case 2:
              invert = x % 3 == 0;
              break;
            case 3:
              invert = (x + y) % 3 == 0;
              break;
            case 4:
              invert = (Math.floor(x / 3) + Math.floor(y / 2)) % 2 == 0;
              break;
            case 5:
              invert = ((x * y) % 2) + ((x * y) % 3) == 0;
              break;
            case 6:
              invert = (((x * y) % 2) + ((x * y) % 3)) % 2 == 0;
              break;
            case 7:
              invert = (((x + y) % 2) + ((x * y) % 3)) % 2 == 0;
              break;
            default:
              throw "Assertion error";
          }
          modules[y][x] ^= invert & !isFunction[y][x];
        }
      }
    }
    function getPenaltyScore() {
      var result = 0;
      for (var y = 0; y < size; y++) {
        var colorX = modules[y][0];
        for (var x = 1, runX = 1; x < size; x++) {
          if (modules[y][x] != colorX) {
            colorX = modules[y][x];
            runX = 1;
          } else {
            runX++;
            if (runX == 5) result += QrCode.PENALTY_N1;
            else if (runX > 5) result++;
          }
        }
      }
      for (var x = 0; x < size; x++) {
        var colorY = modules[0][x];
        for (var y = 1, runY = 1; y < size; y++) {
          if (modules[y][x] != colorY) {
            colorY = modules[y][x];
            runY = 1;
          } else {
            runY++;
            if (runY == 5) result += QrCode.PENALTY_N1;
            else if (runY > 5) result++;
          }
        }
      }
      for (var y = 0; y < size - 1; y++) {
        for (var x = 0; x < size - 1; x++) {
          var color = modules[y][x];
          if (
            color == modules[y][x + 1] &&
            color == modules[y + 1][x] &&
            color == modules[y + 1][x + 1]
          )
            result += QrCode.PENALTY_N2;
        }
      }
      for (var y = 0; y < size; y++) {
        for (var x = 0, bits = 0; x < size; x++) {
          bits = ((bits << 1) & 0x7ff) | (modules[y][x] ? 1 : 0);
          if (x >= 10 && (bits == 0x05d || bits == 0x5d0))
            result += QrCode.PENALTY_N3;
        }
      }
      for (var x = 0; x < size; x++) {
        for (var y = 0, bits = 0; y < size; y++) {
          bits = ((bits << 1) & 0x7ff) | (modules[y][x] ? 1 : 0);
          if (y >= 10 && (bits == 0x05d || bits == 0x5d0))
            result += QrCode.PENALTY_N3;
        }
      }
      var black = 0;
      modules.forEach(function (row) {
        row.forEach(function (color) {
          if (color) black++;
        });
      });
      var total = size * size;
      for (
        var k = 0;
        black * 20 < (9 - k) * total || black * 20 > (11 + k) * total;
        k++
      )
        result += QrCode.PENALTY_N4;
      return result;
    }
  };
  this.QrCode.encodeText = function (text, ecl) {
    var segs = qrcodegen.QrSegment.makeSegments(text);
    return this.encodeSegments(segs, ecl);
  };
  this.QrCode.encodeBinary = function (data, ecl) {
    var seg = qrcodegen.QrSegment.makeBytes(data);
    return this.encodeSegments([seg], ecl);
  };
  this.QrCode.encodeSegments = function (
    segs,
    ecl,
    minVersion,
    maxVersion,
    mask,
    boostEcl
  ) {
    if (minVersion == undefined) minVersion = 1;
    if (maxVersion == undefined) maxVersion = 40;
    if (mask == undefined) mask = -1;
    if (boostEcl == undefined) boostEcl = true;
    if (
      !(1 <= minVersion && minVersion <= maxVersion && maxVersion <= 40) ||
      mask < -1 ||
      mask > 7
    )
      throw "Invalid value";
    var version, dataUsedBits;
    for (version = minVersion; ; version++) {
      var dataCapacityBits = QrCode.getNumDataCodewords(version, ecl) * 8;
      dataUsedBits = qrcodegen.QrSegment.getTotalBits(segs, version);
      if (dataUsedBits != null && dataUsedBits <= dataCapacityBits) break;
      if (version >= maxVersion) throw "Data too long";
    }
    [this.Ecc.MEDIUM, this.Ecc.QUARTILE, this.Ecc.HIGH].forEach(function (
      newEcl
    ) {
      if (
        boostEcl &&
        dataUsedBits <= QrCode.getNumDataCodewords(version, newEcl) * 8
      )
        ecl = newEcl;
    });
    var dataCapacityBits = QrCode.getNumDataCodewords(version, ecl) * 8;
    var bb = new BitBuffer();
    segs.forEach(function (seg) {
      bb.appendBits(seg.mode.modeBits, 4);
      bb.appendBits(seg.numChars, seg.mode.numCharCountBits(version));
      bb.appendData(seg);
    });
    bb.appendBits(0, Math.min(4, dataCapacityBits - bb.bitLength()));
    bb.appendBits(0, (8 - (bb.bitLength() % 8)) % 8);
    for (
      var padByte = 0xec;
      bb.bitLength() < dataCapacityBits;
      padByte ^= 0xec ^ 0x11
    )
      bb.appendBits(padByte, 8);
    if (bb.bitLength() % 8 != 0) throw "Assertion error";
    return new this(bb.getBytes(), mask, version, ecl);
  };
  var QrCode = {};
  QrCode.getAlignmentPatternPositions = function (ver) {
    if (ver < 1 || ver > 40) throw "Version number out of range";
    else if (ver == 1) return [];
    else {
      var size = ver * 4 + 17;
      var numAlign = Math.floor(ver / 7) + 2;
      var step;
      if (ver != 32) step = Math.ceil((size - 13) / (2 * numAlign - 2)) * 2;
      else step = 26;
      var result = [6];
      for (var i = 0, pos = size - 7; i < numAlign - 1; i++, pos -= step)
        result.splice(1, 0, pos);
      return result;
    }
  };
  QrCode.getNumRawDataModules = function (ver) {
    if (ver < 1 || ver > 40) throw "Version number out of range";
    var result = (16 * ver + 128) * ver + 64;
    if (ver >= 2) {
      var numAlign = Math.floor(ver / 7) + 2;
      result -= (25 * numAlign - 10) * numAlign - 55;
      if (ver >= 7) result -= 18 * 2;
    }
    return result;
  };
  QrCode.getNumDataCodewords = function (ver, ecl) {
    if (ver < 1 || ver > 40) throw "Version number out of range";
    return (
      Math.floor(QrCode.getNumRawDataModules(ver) / 8) -
      QrCode.NUM_ERROR_CORRECTION_CODEWORDS[ecl.ordinal][ver]
    );
  };
  QrCode.PENALTY_N1 = 3;
  QrCode.PENALTY_N2 = 3;
  QrCode.PENALTY_N3 = 40;
  QrCode.PENALTY_N4 = 10;
  QrCode.NUM_ERROR_CORRECTION_CODEWORDS = [
    [
      null,
      7,
      10,
      15,
      20,
      26,
      36,
      40,
      48,
      60,
      72,
      80,
      96,
      104,
      120,
      132,
      144,
      168,
      180,
      196,
      224,
      224,
      252,
      270,
      300,
      312,
      336,
      360,
      390,
      420,
      450,
      480,
      510,
      540,
      570,
      570,
      600,
      630,
      660,
      720,
      750,
    ],
    [
      null,
      10,
      16,
      26,
      36,
      48,
      64,
      72,
      88,
      110,
      130,
      150,
      176,
      198,
      216,
      240,
      280,
      308,
      338,
      364,
      416,
      442,
      476,
      504,
      560,
      588,
      644,
      700,
      728,
      784,
      812,
      868,
      924,
      980,
      1036,
      1064,
      1120,
      1204,
      1260,
      1316,
      1372,
    ],
    [
      null,
      13,
      22,
      36,
      52,
      72,
      96,
      108,
      132,
      160,
      192,
      224,
      260,
      288,
      320,
      360,
      408,
      448,
      504,
      546,
      600,
      644,
      690,
      750,
      810,
      870,
      952,
      1020,
      1050,
      1140,
      1200,
      1290,
      1350,
      1440,
      1530,
      1590,
      1680,
      1770,
      1860,
      1950,
      2040,
    ],
    [
      null,
      17,
      28,
      44,
      64,
      88,
      112,
      130,
      156,
      192,
      224,
      264,
      308,
      352,
      384,
      432,
      480,
      532,
      588,
      650,
      700,
      750,
      816,
      900,
      960,
      1050,
      1110,
      1200,
      1260,
      1350,
      1440,
      1530,
      1620,
      1710,
      1800,
      1890,
      1980,
      2100,
      2220,
      2310,
      2430,
    ],
  ];
  QrCode.NUM_ERROR_CORRECTION_BLOCKS = [
    [
      null,
      1,
      1,
      1,
      1,
      1,
      2,
      2,
      2,
      2,
      4,
      4,
      4,
      4,
      4,
      6,
      6,
      6,
      6,
      7,
      8,
      8,
      9,
      9,
      10,
      12,
      12,
      12,
      13,
      14,
      15,
      16,
      17,
      18,
      19,
      19,
      20,
      21,
      22,
      24,
      25,
    ],
    [
      null,
      1,
      1,
      1,
      2,
      2,
      4,
      4,
      4,
      5,
      5,
      5,
      8,
      9,
      9,
      10,
      10,
      11,
      13,
      14,
      16,
      17,
      17,
      18,
      20,
      21,
      23,
      25,
      26,
      28,
      29,
      31,
      33,
      35,
      37,
      38,
      40,
      43,
      45,
      47,
      49,
    ],
    [
      null,
      1,
      1,
      2,
      2,
      4,
      4,
      6,
      6,
      8,
      8,
      8,
      10,
      12,
      16,
      12,
      17,
      16,
      18,
      21,
      20,
      23,
      23,
      25,
      27,
      29,
      34,
      34,
      35,
      38,
      40,
      43,
      45,
      48,
      51,
      53,
      56,
      59,
      62,
      65,
      68,
    ],
    [
      null,
      1,
      1,
      2,
      4,
      4,
      4,
      5,
      6,
      8,
      8,
      11,
      11,
      16,
      16,
      18,
      16,
      19,
      21,
      25,
      25,
      25,
      34,
      30,
      32,
      35,
      37,
      40,
      42,
      45,
      48,
      51,
      54,
      57,
      60,
      63,
      66,
      70,
      74,
      77,
      81,
    ],
  ];
  this.QrCode.Ecc = {
    LOW: new Ecc(0, 1),
    MEDIUM: new Ecc(1, 0),
    QUARTILE: new Ecc(2, 3),
    HIGH: new Ecc(3, 2),
  };
  function Ecc(ord, fb) {
    Object.defineProperty(this, "ordinal", { value: ord });
    Object.defineProperty(this, "formatBits", { value: fb });
  }
  this.QrSegment = function (mode, numChars, bitData) {
    if (numChars < 0 || !(mode instanceof Mode)) throw "Invalid argument";
    Object.defineProperty(this, "mode", { value: mode });
    Object.defineProperty(this, "numChars", { value: numChars });
    this.getBits = function () {
      return bitData.slice();
    };
  };
  this.QrSegment.makeBytes = function (data) {
    var bb = new BitBuffer();
    data.forEach(function (b) {
      bb.appendBits(b, 8);
    });
    return new this(this.Mode.BYTE, data.length, bb.getBits());
  };
  this.QrSegment.makeNumeric = function (digits) {
    if (!this.NUMERIC_REGEX.test(digits))
      throw "String contains non-numeric characters";
    var bb = new BitBuffer();
    var i;
    for (i = 0; i + 3 <= digits.length; i += 3)
      bb.appendBits(parseInt(digits.substr(i, 3), 10), 10);
    var rem = digits.length - i;
    if (rem > 0) bb.appendBits(parseInt(digits.substring(i), 10), rem * 3 + 1);
    return new this(this.Mode.NUMERIC, digits.length, bb.getBits());
  };
  this.QrSegment.makeAlphanumeric = function (text) {
    if (!this.ALPHANUMERIC_REGEX.test(text))
      throw "String contains unencodable characters in alphanumeric mode";
    var bb = new BitBuffer();
    var i;
    for (i = 0; i + 2 <= text.length; i += 2) {
      var temp =
        QrSegment.ALPHANUMERIC_ENCODING_TABLE[text.charCodeAt(i) - 32] * 45;
      temp +=
        QrSegment.ALPHANUMERIC_ENCODING_TABLE[text.charCodeAt(i + 1) - 32];
      bb.appendBits(temp, 11);
    }
    if (i < text.length)
      bb.appendBits(
        QrSegment.ALPHANUMERIC_ENCODING_TABLE[text.charCodeAt(i) - 32],
        6
      );
    return new this(this.Mode.ALPHANUMERIC, text.length, bb.getBits());
  };
  this.QrSegment.makeSegments = function (text) {
    if (text == "") return [];
    else if (this.NUMERIC_REGEX.test(text)) return [this.makeNumeric(text)];
    else if (this.ALPHANUMERIC_REGEX.test(text))
      return [this.makeAlphanumeric(text)];
    else return [this.makeBytes(toUtf8ByteArray(text))];
  };
  this.QrSegment.getTotalBits = function (segs, version) {
    if (version < 1 || version > 40) throw "Version number out of range";
    var result = 0;
    for (var i = 0; i < segs.length; i++) {
      var seg = segs[i];
      var ccbits = seg.mode.numCharCountBits(version);
      if (seg.numChars >= 1 << ccbits) return null;
      result += 4 + ccbits + seg.getBits().length;
    }
    return result;
  };
  var QrSegment = {};
  this.QrSegment.NUMERIC_REGEX = /^[0-9]*$/;
  this.QrSegment.ALPHANUMERIC_REGEX = /^[A-Z0-9 $%*+.\/:-]*$/;
  QrSegment.ALPHANUMERIC_ENCODING_TABLE = [
    36, -1, -1, -1, 37, 38, -1, -1, -1, -1, 39, 40, -1, 41, 42, 43, 0, 1, 2, 3,
    4, 5, 6, 7, 8, 9, 44, -1, -1, -1, -1, -1, -1, 10, 11, 12, 13, 14, 15, 16,
    17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,
  ];
  this.QrSegment.Mode = {
    NUMERIC: new Mode(0x1, [10, 12, 14]),
    ALPHANUMERIC: new Mode(0x2, [9, 11, 13]),
    BYTE: new Mode(0x4, [8, 16, 16]),
    KANJI: new Mode(0x8, [8, 10, 12]),
  };
  function Mode(mode, ccbits) {
    Object.defineProperty(this, "modeBits", { value: mode });
    this.numCharCountBits = function (ver) {
      if (1 <= ver && ver <= 9) return ccbits[0];
      else if (10 <= ver && ver <= 26) return ccbits[1];
      else if (27 <= ver && ver <= 40) return ccbits[2];
      else throw "Version number out of range";
    };
  }
  function toUtf8ByteArray(str) {
    str = encodeURI(str);
    var result = [];
    for (var i = 0; i < str.length; i++) {
      if (str.charAt(i) != "%") result.push(str.charCodeAt(i));
      else {
        result.push(parseInt(str.substr(i + 1, 2), 16));
        i += 2;
      }
    }
    return result;
  }
  function ReedSolomonGenerator(degree) {
    if (degree < 1 || degree > 255) throw "Degree out of range";
    var coefficients = [];
    for (var i = 0; i < degree - 1; i++) coefficients.push(0);
    coefficients.push(1);
    var root = 1;
    for (var i = 0; i < degree; i++) {
      for (var j = 0; j < coefficients.length; j++) {
        coefficients[j] = ReedSolomonGenerator.multiply(coefficients[j], root);
        if (j + 1 < coefficients.length) coefficients[j] ^= coefficients[j + 1];
      }
      root = (root << 1) ^ ((root >>> 7) * 0x11d);
    }
    this.getRemainder = function (data) {
      var result = coefficients.map(function () {
        return 0;
      });
      data.forEach(function (b) {
        var factor = b ^ result[0];
        result.shift();
        result.push(0);
        for (var i = 0; i < result.length; i++)
          result[i] ^= ReedSolomonGenerator.multiply(coefficients[i], factor);
      });
      return result;
    };
  }
  ReedSolomonGenerator.multiply = function (x, y) {
    if (x >>> 8 != 0 || y >>> 8 != 0) throw "Byte out of range";
    var z = 0;
    for (var i = 7; i >= 0; i--) {
      z = (z << 1) ^ ((z >>> 7) * 0x11d);
      z ^= ((y >>> i) & 1) * x;
    }
    if (z >>> 8 != 0) throw "Assertion error";
    return z;
  };
  function BitBuffer() {
    var bitData = [];
    this.bitLength = function () {
      return bitData.length;
    };
    this.getBits = function () {
      return bitData.slice();
    };
    this.getBytes = function () {
      var result = [];
      var numBytes = Math.ceil(bitData.length / 8);
      for (var i = 0; i < numBytes; i++) result.push(0);
      bitData.forEach(function (bit, i) {
        result[i >>> 3] |= bit << (7 - (i & 7));
      });
      return result;
    };
    this.appendBits = function (val, len) {
      if (len < 0 || len > 32 || (len < 32 && val >>> len != 0))
        throw "Value out of range";
      for (var i = len - 1; i >= 0; i--) bitData.push((val >>> i) & 1);
    };
    this.appendData = function (seg) {
      seg.getBits().forEach(function (b) {
        bitData.push(b);
      });
    };
  }
})();
(function (window) {
  var BlockAdBlock = function (options) {
    this._options = {
      checkOnLoad: false,
      resetOnEnd: false,
      loopCheckTime: 50,
      loopMaxNumber: 5,
      baitClass:
        "pub_300x250 pub_300x250m pub_728x90 text-ad textAd text_ad text_ads text-ads text-ad-links",
      baitStyle:
        "width: 1px !important; height: 1px !important; position: absolute !important; left: -10000px !important; top: -1000px !important;",
      debug: false,
    };
    this._var = {
      version: "3.2.1",
      bait: null,
      checking: false,
      loop: null,
      loopNumber: 0,
      event: { detected: [], notDetected: [] },
    };
    if (options !== undefined) {
      this.setOption(options);
    }
    var self = this;
    var eventCallback = function () {
      setTimeout(function () {
        if (self._options.checkOnLoad === true) {
          if (self._options.debug === true) {
            self._log("onload->eventCallback", "A check loading is launched");
          }
          if (self._var.bait === null) {
            self._creatBait();
          }
          setTimeout(function () {
            self.check();
          }, 1);
        }
      }, 1);
    };
    if (window.addEventListener !== undefined) {
      window.addEventListener("load", eventCallback, false);
    } else {
      window.attachEvent("onload", eventCallback);
    }
  };
  BlockAdBlock.prototype._options = null;
  BlockAdBlock.prototype._var = null;
  BlockAdBlock.prototype._bait = null;
  BlockAdBlock.prototype._log = function (method, message) {
    console.log("[BlockAdBlock][" + method + "] " + message);
  };
  BlockAdBlock.prototype.setOption = function (options, value) {
    if (value !== undefined) {
      var key = options;
      options = {};
      options[key] = value;
    }
    for (var option in options) {
      this._options[option] = options[option];
      if (this._options.debug === true) {
        this._log(
          "setOption",
          'The option "' +
          option +
          '" he was assigned to "' +
          options[option] +
          '"'
        );
      }
    }
    return this;
  };
  BlockAdBlock.prototype._creatBait = function () {
    var bait = document.createElement("div");
    bait.setAttribute("class", this._options.baitClass);
    bait.setAttribute("style", this._options.baitStyle);
    this._var.bait = window.document.body.appendChild(bait);
    this._var.bait.offsetParent;
    this._var.bait.offsetHeight;
    this._var.bait.offsetLeft;
    this._var.bait.offsetTop;
    this._var.bait.offsetWidth;
    this._var.bait.clientHeight;
    this._var.bait.clientWidth;
    if (this._options.debug === true) {
      this._log("_creatBait", "Bait has been created");
    }
  };
  BlockAdBlock.prototype._destroyBait = function () {
    window.document.body.removeChild(this._var.bait);
    this._var.bait = null;
    if (this._options.debug === true) {
      this._log("_destroyBait", "Bait has been removed");
    }
  };
  BlockAdBlock.prototype.check = function (loop) {
    if (loop === undefined) {
      loop = true;
    }
    if (this._options.debug === true) {
      this._log(
        "check",
        "An audit was requested " +
        (loop === true ? "with a" : "without") +
        " loop"
      );
    }
    if (this._var.checking === true) {
      if (this._options.debug === true) {
        this._log(
          "check",
          "A check was canceled because there is already an ongoing"
        );
      }
      return false;
    }
    this._var.checking = true;
    if (this._var.bait === null) {
      this._creatBait();
    }
    var self = this;
    this._var.loopNumber = 0;
    if (loop === true) {
      this._var.loop = setInterval(function () {
        self._checkBait(loop);
      }, this._options.loopCheckTime);
    }
    setTimeout(function () {
      self._checkBait(loop);
    }, 1);
    if (this._options.debug === true) {
      this._log("check", "A check is in progress ...");
    }
    return true;
  };
  BlockAdBlock.prototype._checkBait = function (loop) {
    var detected = false;
    if (this._var.bait === null) {
      this._creatBait();
    }
    if (
      window.document.body.getAttribute("abp") !== null ||
      this._var.bait.offsetParent === null ||
      this._var.bait.offsetHeight == 0 ||
      this._var.bait.offsetLeft == 0 ||
      this._var.bait.offsetTop == 0 ||
      this._var.bait.offsetWidth == 0 ||
      this._var.bait.clientHeight == 0 ||
      this._var.bait.clientWidth == 0
    ) {
      detected = true;
    }
    if (window.getComputedStyle !== undefined) {
      var baitTemp = window.getComputedStyle(this._var.bait, null);
      if (
        baitTemp &&
        (baitTemp.getPropertyValue("display") == "none" ||
          baitTemp.getPropertyValue("visibility") == "hidden")
      ) {
        detected = true;
      }
    }
    if (this._options.debug === true) {
      this._log(
        "_checkBait",
        "A check (" +
        (this._var.loopNumber + 1) +
        "/" +
        this._options.loopMaxNumber +
        " ~" +
        (1 + this._var.loopNumber * this._options.loopCheckTime) +
        "ms) was conducted and detection is " +
        (detected === true ? "positive" : "negative")
      );
    }
    if (loop === true) {
      this._var.loopNumber++;
      if (this._var.loopNumber >= this._options.loopMaxNumber) {
        this._stopLoop();
      }
    }
    if (detected === true) {
      this._stopLoop();
      this._destroyBait();
      this.emitEvent(true);
      if (loop === true) {
        this._var.checking = false;
      }
    } else if (this._var.loop === null || loop === false) {
      this._destroyBait();
      this.emitEvent(false);
      if (loop === true) {
        this._var.checking = false;
      }
    }
  };
  BlockAdBlock.prototype._stopLoop = function (detected) {
    clearInterval(this._var.loop);
    this._var.loop = null;
    this._var.loopNumber = 0;
    if (this._options.debug === true) {
      this._log("_stopLoop", "A loop has been stopped");
    }
  };
  BlockAdBlock.prototype.emitEvent = function (detected) {
    if (this._options.debug === true) {
      this._log(
        "emitEvent",
        "An event with a " +
        (detected === true ? "positive" : "negative") +
        " detection was called"
      );
    }
    var fns = this._var.event[detected === true ? "detected" : "notDetected"];
    for (var i in fns) {
      if (this._options.debug === true) {
        this._log(
          "emitEvent",
          "Call function " + (parseInt(i) + 1) + "/" + fns.length
        );
      }
      if (fns.hasOwnProperty(i)) {
        fns[i]();
      }
    }
    if (this._options.resetOnEnd === true) {
      this.clearEvent();
    }
    return this;
  };
  BlockAdBlock.prototype.clearEvent = function () {
    this._var.event.detected = [];
    this._var.event.notDetected = [];
    if (this._options.debug === true) {
      this._log("clearEvent", "The event list has been cleared");
    }
  };
  BlockAdBlock.prototype.on = function (detected, fn) {
    this._var.event[detected === true ? "detected" : "notDetected"].push(fn);
    if (this._options.debug === true) {
      this._log(
        "on",
        'A type of event "' +
        (detected === true ? "detected" : "notDetected") +
        '" was added'
      );
    }
    return this;
  };
  BlockAdBlock.prototype.onDetected = function (fn) {
    return this.on(true, fn);
  };
  BlockAdBlock.prototype.onNotDetected = function (fn) {
    return this.on(false, fn);
  };
  window.BlockAdBlock = BlockAdBlock;
  if (window.blockAdBlock === undefined) {
    window.blockAdBlock = new BlockAdBlock({
      checkOnLoad: true,
      resetOnEnd: true,
    });
  }
})(window);
(function ($) {
  var _ = (function () {
    "use strict";
    return {
      isMsie: function () {
        return /(msie|trident)/i.test(navigator.userAgent)
          ? navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]
          : false;
      },
      isBlankString: function (str) {
        return !str || /^\s*$/.test(str);
      },
      escapeRegExChars: function (str) {
        return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&");
      },
      isString: function (obj) {
        return typeof obj === "string";
      },
      isNumber: function (obj) {
        return typeof obj === "number";
      },
      isArray: $.isArray,
      isFunction: $.isFunction,
      isObject: $.isPlainObject,
      isUndefined: function (obj) {
        return typeof obj === "undefined";
      },
      toStr: function toStr(s) {
        return _.isUndefined(s) || s === null ? "" : s + "";
      },
      bind: $.proxy,
      each: function (collection, cb) {
        $.each(collection, reverseArgs);
        function reverseArgs(index, value) {
          return cb(value, index);
        }
      },
      map: $.map,
      filter: $.grep,
      every: function (obj, test) {
        var result = true;
        if (!obj) {
          return result;
        }
        $.each(obj, function (key, val) {
          if (!(result = test.call(null, val, key, obj))) {
            return false;
          }
        });
        return !!result;
      },
      some: function (obj, test) {
        var result = false;
        if (!obj) {
          return result;
        }
        $.each(obj, function (key, val) {
          if ((result = test.call(null, val, key, obj))) {
            return false;
          }
        });
        return !!result;
      },
      mixin: $.extend,
      getUniqueId: (function () {
        var counter = 0;
        return function () {
          return counter++;
        };
      })(),
      templatify: function templatify(obj) {
        return $.isFunction(obj) ? obj : template;
        function template() {
          return String(obj);
        }
      },
      defer: function (fn) {
        setTimeout(fn, 0);
      },
      debounce: function (func, wait, immediate) {
        var timeout, result;
        return function () {
          var context = this,
            args = arguments,
            later,
            callNow;
          later = function () {
            timeout = null;
            if (!immediate) {
              result = func.apply(context, args);
            }
          };
          callNow = immediate && !timeout;
          clearTimeout(timeout);
          timeout = setTimeout(later, wait);
          if (callNow) {
            result = func.apply(context, args);
          }
          return result;
        };
      },
      throttle: function (func, wait) {
        var context, args, timeout, result, previous, later;
        previous = 0;
        later = function () {
          previous = new Date();
          timeout = null;
          result = func.apply(context, args);
        };
        return function () {
          var now = new Date(),
            remaining = wait - (now - previous);
          context = this;
          args = arguments;
          if (remaining <= 0) {
            clearTimeout(timeout);
            timeout = null;
            previous = now;
            result = func.apply(context, args);
          } else if (!timeout) {
            timeout = setTimeout(later, remaining);
          }
          return result;
        };
      },
      noop: function () { },
    };
  })();
  var VERSION = "0.10.5";
  var tokenizers = (function () {
    "use strict";
    return {
      nonword: nonword,
      whitespace: whitespace,
      obj: {
        nonword: getObjTokenizer(nonword),
        whitespace: getObjTokenizer(whitespace),
      },
    };
    function whitespace(str) {
      str = _.toStr(str);
      return str ? str.split(/\s+/) : [];
    }
    function nonword(str) {
      str = _.toStr(str);
      return str ? str.split(/\W+/) : [];
    }
    function getObjTokenizer(tokenizer) {
      return function setKey() {
        var args = [].slice.call(arguments, 0);
        return function tokenize(o) {
          var tokens = [];
          _.each(args, function (k) {
            tokens = tokens.concat(tokenizer(_.toStr(o[k])));
          });
          return tokens;
        };
      };
    }
  })();
  var LruCache = (function () {
    "use strict";
    function LruCache(maxSize) {
      this.maxSize = _.isNumber(maxSize) ? maxSize : 100;
      this.reset();
      if (this.maxSize <= 0) {
        this.set = this.get = $.noop;
      }
    }
    _.mixin(LruCache.prototype, {
      set: function set(key, val) {
        var tailItem = this.list.tail,
          node;
        if (this.size >= this.maxSize) {
          this.list.remove(tailItem);
          delete this.hash[tailItem.key];
        }
        if ((node = this.hash[key])) {
          node.val = val;
          this.list.moveToFront(node);
        } else {
          node = new Node(key, val);
          this.list.add(node);
          this.hash[key] = node;
          this.size++;
        }
      },
      get: function get(key) {
        var node = this.hash[key];
        if (node) {
          this.list.moveToFront(node);
          return node.val;
        }
      },
      reset: function reset() {
        this.size = 0;
        this.hash = {};
        this.list = new List();
      },
    });
    function List() {
      this.head = this.tail = null;
    }
    _.mixin(List.prototype, {
      add: function add(node) {
        if (this.head) {
          node.next = this.head;
          this.head.prev = node;
        }
        this.head = node;
        this.tail = this.tail || node;
      },
      remove: function remove(node) {
        node.prev ? (node.prev.next = node.next) : (this.head = node.next);
        node.next ? (node.next.prev = node.prev) : (this.tail = node.prev);
      },
      moveToFront: function (node) {
        this.remove(node);
        this.add(node);
      },
    });
    function Node(key, val) {
      this.key = key;
      this.val = val;
      this.prev = this.next = null;
    }
    return LruCache;
  })();
  var PersistentStorage = (function () {
    "use strict";
    var ls, methods;
    try {
      ls = window.localStorage;
      ls.setItem("~~~", "!");
      ls.removeItem("~~~");
    } catch (err) {
      ls = null;
    }
    function PersistentStorage(namespace) {
      this.prefix = ["__", namespace, "__"].join("");
      this.ttlKey = "__ttl__";
      this.keyMatcher = new RegExp("^" + _.escapeRegExChars(this.prefix));
    }
    if (ls && window.JSON) {
      methods = {
        _prefix: function (key) {
          return this.prefix + key;
        },
        _ttlKey: function (key) {
          return this._prefix(key) + this.ttlKey;
        },
        get: function (key) {
          if (this.isExpired(key)) {
            this.remove(key);
          }
          return decode(ls.getItem(this._prefix(key)));
        },
        set: function (key, val, ttl) {
          if (_.isNumber(ttl)) {
            ls.setItem(this._ttlKey(key), encode(now() + ttl));
          } else {
            ls.removeItem(this._ttlKey(key));
          }
          return ls.setItem(this._prefix(key), encode(val));
        },
        remove: function (key) {
          ls.removeItem(this._ttlKey(key));
          ls.removeItem(this._prefix(key));
          return this;
        },
        clear: function () {
          var i,
            key,
            keys = [],
            len = ls.length;
          for (i = 0; i < len; i++) {
            if ((key = ls.key(i)).match(this.keyMatcher)) {
              keys.push(key.replace(this.keyMatcher, ""));
            }
          }
          for (i = keys.length; i--;) {
            this.remove(keys[i]);
          }
          return this;
        },
        isExpired: function (key) {
          var ttl = decode(ls.getItem(this._ttlKey(key)));
          return _.isNumber(ttl) && now() > ttl ? true : false;
        },
      };
    } else {
      methods = {
        get: _.noop,
        set: _.noop,
        remove: _.noop,
        clear: _.noop,
        isExpired: _.noop,
      };
    }
    _.mixin(PersistentStorage.prototype, methods);
    return PersistentStorage;
    function now() {
      return new Date().getTime();
    }
    function encode(val) {
      return JSON.stringify(_.isUndefined(val) ? null : val);
    }
    function decode(val) {
      return JSON.parse(val);
    }
  })();
  var Transport = (function () {
    "use strict";
    var pendingRequestsCount = 0,
      pendingRequests = {},
      maxPendingRequests = 6,
      sharedCache = new LruCache(10);
    function Transport(o) {
      o = o || {};
      this.cancelled = false;
      this.lastUrl = null;
      this._send = o.transport ? callbackToDeferred(o.transport) : $.ajax;
      this._get = o.rateLimiter ? o.rateLimiter(this._get) : this._get;
      this._cache = o.cache === false ? new LruCache(0) : sharedCache;
    }
    Transport.setMaxPendingRequests = function setMaxPendingRequests(num) {
      maxPendingRequests = num;
    };
    Transport.resetCache = function resetCache() {
      sharedCache.reset();
    };
    _.mixin(Transport.prototype, {
      _get: function (url, o, cb) {
        var that = this,
          jqXhr;
        if (this.cancelled || url !== this.lastUrl) {
          return;
        }
        if ((jqXhr = pendingRequests[url])) {
          jqXhr.done(done).fail(fail);
        } else if (pendingRequestsCount < maxPendingRequests) {
          pendingRequestsCount++;
          pendingRequests[url] = this._send(url, o)
            .done(done)
            .fail(fail)
            .always(always);
        } else {
          this.onDeckRequestArgs = [].slice.call(arguments, 0);
        }
        function done(resp) {
          cb && cb(null, resp);
          that._cache.set(url, resp);
        }
        function fail() {
          cb && cb(true);
        }
        function always() {
          pendingRequestsCount--;
          delete pendingRequests[url];
          if (that.onDeckRequestArgs) {
            that._get.apply(that, that.onDeckRequestArgs);
            that.onDeckRequestArgs = null;
          }
        }
      },
      get: function (url, o, cb) {
        var resp;
        if (_.isFunction(o)) {
          cb = o;
          o = {};
        }
        this.cancelled = false;
        this.lastUrl = url;
        if ((resp = this._cache.get(url))) {
          _.defer(function () {
            cb && cb(null, resp);
          });
        } else {
          this._get(url, o, cb);
        }
        return !!resp;
      },
      cancel: function () {
        this.cancelled = true;
      },
    });
    return Transport;
    function callbackToDeferred(fn) {
      return function customSendWrapper(url, o) {
        var deferred = $.Deferred();
        fn(url, o, onSuccess, onError);
        return deferred;
        function onSuccess(resp) {
          _.defer(function () {
            deferred.resolve(resp);
          });
        }
        function onError(err) {
          _.defer(function () {
            deferred.reject(err);
          });
        }
      };
    }
  })();
  var SearchIndex = (function () {
    "use strict";
    function SearchIndex(o) {
      o = o || {};
      if (!o.datumTokenizer || !o.queryTokenizer) {
        $.error("datumTokenizer and queryTokenizer are both required");
      }
      this.datumTokenizer = o.datumTokenizer;
      this.queryTokenizer = o.queryTokenizer;
      this.reset();
    }
    _.mixin(SearchIndex.prototype, {
      bootstrap: function bootstrap(o) {
        this.datums = o.datums;
        this.trie = o.trie;
      },
      add: function (data) {
        var that = this;
        data = _.isArray(data) ? data : [data];
        _.each(data, function (datum) {
          var id, tokens;
          id = that.datums.push(datum) - 1;
          tokens = normalizeTokens(that.datumTokenizer(datum));
          _.each(tokens, function (token) {
            var node, chars, ch;
            node = that.trie;
            chars = token.split("");
            while ((ch = chars.shift())) {
              node = node.children[ch] || (node.children[ch] = newNode());
              node.ids.push(id);
            }
          });
        });
      },
      get: function get(query) {
        var that = this,
          tokens,
          matches;
        tokens = normalizeTokens(this.queryTokenizer(query));
        _.each(tokens, function (token) {
          var node, chars, ch, ids;
          if (matches && matches.length === 0) {
            return false;
          }
          node = that.trie;
          chars = token.split("");
          while (node && (ch = chars.shift())) {
            node = node.children[ch];
          }
          if (node && chars.length === 0) {
            ids = node.ids.slice(0);
            matches = matches ? getIntersection(matches, ids) : ids;
          } else {
            matches = [];
            return false;
          }
        });
        return matches
          ? _.map(unique(matches), function (id) {
            return that.datums[id];
          })
          : [];
      },
      reset: function reset() {
        this.datums = [];
        this.trie = newNode();
      },
      serialize: function serialize() {
        return { datums: this.datums, trie: this.trie };
      },
    });
    return SearchIndex;
    function normalizeTokens(tokens) {
      tokens = _.filter(tokens, function (token) {
        return !!token;
      });
      tokens = _.map(tokens, function (token) {
        return token.toLowerCase();
      });
      return tokens;
    }
    function newNode() {
      return { ids: [], children: {} };
    }
    function unique(array) {
      var seen = {},
        uniques = [];
      for (var i = 0, len = array.length; i < len; i++) {
        if (!seen[array[i]]) {
          seen[array[i]] = true;
          uniques.push(array[i]);
        }
      }
      return uniques;
    }
    function getIntersection(arrayA, arrayB) {
      var ai = 0,
        bi = 0,
        intersection = [];
      arrayA = arrayA.sort(compare);
      arrayB = arrayB.sort(compare);
      var lenArrayA = arrayA.length,
        lenArrayB = arrayB.length;
      while (ai < lenArrayA && bi < lenArrayB) {
        if (arrayA[ai] < arrayB[bi]) {
          ai++;
        } else if (arrayA[ai] > arrayB[bi]) {
          bi++;
        } else {
          intersection.push(arrayA[ai]);
          ai++;
          bi++;
        }
      }
      return intersection;
      function compare(a, b) {
        return a - b;
      }
    }
  })();
  var oParser = (function () {
    "use strict";
    return { local: getLocal, prefetch: getPrefetch, remote: getRemote };
    function getLocal(o) {
      return o.local || null;
    }
    function getPrefetch(o) {
      var prefetch, defaults;
      defaults = {
        url: null,
        thumbprint: "",
        ttl: 24 * 60 * 60 * 1e3,
        filter: null,
        ajax: {},
      };
      if ((prefetch = o.prefetch || null)) {
        prefetch = _.isString(prefetch) ? { url: prefetch } : prefetch;
        prefetch = _.mixin(defaults, prefetch);
        prefetch.thumbprint = VERSION + prefetch.thumbprint;
        prefetch.ajax.type = prefetch.ajax.type || "GET";
        prefetch.ajax.dataType = prefetch.ajax.dataType || "json";
        !prefetch.url && $.error("prefetch requires url to be set");
      }
      return prefetch;
    }
    function getRemote(o) {
      var remote, defaults;
      defaults = {
        url: null,
        cache: true,
        wildcard: "%QUERY",
        replace: null,
        rateLimitBy: "debounce",
        rateLimitWait: 300,
        send: null,
        filter: null,
        ajax: {},
      };
      if ((remote = o.remote || null)) {
        remote = _.isString(remote) ? { url: remote } : remote;
        remote = _.mixin(defaults, remote);
        remote.rateLimiter = /^throttle$/i.test(remote.rateLimitBy)
          ? byThrottle(remote.rateLimitWait)
          : byDebounce(remote.rateLimitWait);
        remote.ajax.type = remote.ajax.type || "GET";
        remote.ajax.dataType = remote.ajax.dataType || "json";
        delete remote.rateLimitBy;
        delete remote.rateLimitWait;
        !remote.url && $.error("remote requires url to be set");
      }
      return remote;
      function byDebounce(wait) {
        return function (fn) {
          return _.debounce(fn, wait);
        };
      }
      function byThrottle(wait) {
        return function (fn) {
          return _.throttle(fn, wait);
        };
      }
    }
  })();
  (function (root) {
    "use strict";
    var old, keys;
    old = root.Bloodhound;
    keys = { data: "data", protocol: "protocol", thumbprint: "thumbprint" };
    root.Bloodhound = Bloodhound;
    function Bloodhound(o) {
      if (!o || (!o.local && !o.prefetch && !o.remote)) {
        $.error("one of local, prefetch, or remote is required");
      }
      this.limit = o.limit || 5;
      this.sorter = getSorter(o.sorter);
      this.dupDetector = o.dupDetector || ignoreDuplicates;
      this.local = oParser.local(o);
      this.prefetch = oParser.prefetch(o);
      this.remote = oParser.remote(o);
      this.cacheKey = this.prefetch
        ? this.prefetch.cacheKey || this.prefetch.url
        : null;
      this.index = new SearchIndex({
        datumTokenizer: o.datumTokenizer,
        queryTokenizer: o.queryTokenizer,
      });
      this.storage = this.cacheKey
        ? new PersistentStorage(this.cacheKey)
        : null;
    }
    Bloodhound.noConflict = function noConflict() {
      root.Bloodhound = old;
      return Bloodhound;
    };
    Bloodhound.tokenizers = tokenizers;
    _.mixin(Bloodhound.prototype, {
      _loadPrefetch: function loadPrefetch(o) {
        var that = this,
          serialized,
          deferred;
        if ((serialized = this._readFromStorage(o.thumbprint))) {
          this.index.bootstrap(serialized);
          deferred = $.Deferred().resolve();
        } else {
          deferred = $.ajax(o.url, o.ajax).done(handlePrefetchResponse);
        }
        return deferred;
        function handlePrefetchResponse(resp) {
          that.clear();
          that.add(o.filter ? o.filter(resp) : resp);
          that._saveToStorage(that.index.serialize(), o.thumbprint, o.ttl);
        }
      },
      _getFromRemote: function getFromRemote(query, cb) {
        var that = this,
          url,
          uriEncodedQuery;
        if (!this.transport) {
          return;
        }
        query = query || "";
        uriEncodedQuery = encodeURIComponent(query);
        url = this.remote.replace
          ? this.remote.replace(this.remote.url, query)
          : this.remote.url.replace(this.remote.wildcard, uriEncodedQuery);
        return this.transport.get(url, this.remote.ajax, handleRemoteResponse);
        function handleRemoteResponse(err, resp) {
          err
            ? cb([])
            : cb(that.remote.filter ? that.remote.filter(resp) : resp);
        }
      },
      _cancelLastRemoteRequest: function cancelLastRemoteRequest() {
        this.transport && this.transport.cancel();
      },
      _saveToStorage: function saveToStorage(data, thumbprint, ttl) {
        if (this.storage) {
          this.storage.set(keys.data, data, ttl);
          this.storage.set(keys.protocol, location.protocol, ttl);
          this.storage.set(keys.thumbprint, thumbprint, ttl);
        }
      },
      _readFromStorage: function readFromStorage(thumbprint) {
        var stored = {},
          isExpired;
        if (this.storage) {
          stored.data = this.storage.get(keys.data);
          stored.protocol = this.storage.get(keys.protocol);
          stored.thumbprint = this.storage.get(keys.thumbprint);
        }
        isExpired =
          stored.thumbprint !== thumbprint ||
          stored.protocol !== location.protocol;
        return stored.data && !isExpired ? stored.data : null;
      },
      _initialize: function initialize() {
        var that = this,
          local = this.local,
          deferred;
        deferred = this.prefetch
          ? this._loadPrefetch(this.prefetch)
          : $.Deferred().resolve();
        local && deferred.done(addLocalToIndex);
        this.transport = this.remote ? new Transport(this.remote) : null;
        return (this.initPromise = deferred.promise());
        function addLocalToIndex() {
          that.add(_.isFunction(local) ? local() : local);
        }
      },
      initialize: function initialize(force) {
        return !this.initPromise || force
          ? this._initialize()
          : this.initPromise;
      },
      add: function add(data) {
        this.index.add(data);
      },
      get: function get(query, cb) {
        var that = this,
          matches = [],
          cacheHit = false;
        matches = this.index.get(query);
        matches = this.sorter(matches).slice(0, this.limit);
        matches.length < this.limit
          ? (cacheHit = this._getFromRemote(query, returnRemoteMatches))
          : this._cancelLastRemoteRequest();
        if (!cacheHit) {
          (matches.length > 0 || !this.transport) && cb && cb(matches);
        }
        function returnRemoteMatches(remoteMatches) {
          var matchesWithBackfill = matches.slice(0);
          _.each(remoteMatches, function (remoteMatch) {
            var isDuplicate;
            isDuplicate = _.some(matchesWithBackfill, function (match) {
              return that.dupDetector(remoteMatch, match);
            });
            !isDuplicate && matchesWithBackfill.push(remoteMatch);
            return matchesWithBackfill.length < that.limit;
          });
          cb && cb(that.sorter(matchesWithBackfill));
        }
      },
      clear: function clear() {
        this.index.reset();
      },
      clearPrefetchCache: function clearPrefetchCache() {
        this.storage && this.storage.clear();
      },
      clearRemoteCache: function clearRemoteCache() {
        this.transport && Transport.resetCache();
      },
      ttAdapter: function ttAdapter() {
        return _.bind(this.get, this);
      },
    });
    return Bloodhound;
    function getSorter(sortFn) {
      return _.isFunction(sortFn) ? sort : noSort;
      function sort(array) {
        return array.sort(sortFn);
      }
      function noSort(array) {
        return array;
      }
    }
    function ignoreDuplicates() {
      return false;
    }
  })(this);
  var html = (function () {
    return {
      wrapper: '<span class="twitter-typeahead"></span>',
      dropdown: '<span class="tt-dropdown-menu"></span>',
      dataset: '<div class="tt-dataset-%CLASS%"></div>',
      suggestions: '<span class="tt-suggestions"></span>',
      suggestion: '<div class="tt-suggestion"></div>',
    };
  })();
  var css = (function () {
    "use strict";
    var css = {
      wrapper: { position: "relative", display: "inline-block" },
      hint: {
        position: "absolute",
        top: "0",
        left: "0",
        borderColor: "transparent",
        boxShadow: "none",
        opacity: "1",
      },
      input: {
        position: "relative",
        verticalAlign: "top",
        backgroundColor: "transparent",
      },
      inputWithNoHint: { position: "relative", verticalAlign: "top" },
      dropdown: {
        position: "absolute",
        top: "100%",
        left: "0",
        zIndex: "100",
        display: "none",
      },
      suggestions: { display: "block" },
      suggestion: { whiteSpace: "nowrap", cursor: "pointer" },
      suggestionChild: { whiteSpace: "normal" },
      ltr: { left: "0", right: "auto" },
      rtl: { left: "auto", right: " 0" },
    };
    if (_.isMsie()) {
      _.mixin(css.input, {
        backgroundImage:
          "url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)",
      });
    }
    if (_.isMsie() && _.isMsie() <= 7) {
      _.mixin(css.input, { marginTop: "-1px" });
    }
    return css;
  })();
  var EventBus = (function () {
    "use strict";
    var namespace = "typeahead:";
    function EventBus(o) {
      if (!o || !o.el) {
        $.error("EventBus initialized without el");
      }
      this.$el = $(o.el);
    }
    _.mixin(EventBus.prototype, {
      trigger: function (type) {
        var args = [].slice.call(arguments, 1);
        this.$el.trigger(namespace + type, args);
      },
    });
    return EventBus;
  })();
  var EventEmitter = (function () {
    "use strict";
    var splitter = /\s+/,
      nextTick = getNextTick();
    return { onSync: onSync, onAsync: onAsync, off: off, trigger: trigger };
    function on(method, types, cb, context) {
      var type;
      if (!cb) {
        return this;
      }
      types = types.split(splitter);
      cb = context ? bindContext(cb, context) : cb;
      this._callbacks = this._callbacks || {};
      while ((type = types.shift())) {
        this._callbacks[type] = this._callbacks[type] || {
          sync: [],
          async: [],
        };
        this._callbacks[type][method].push(cb);
      }
      return this;
    }
    function onAsync(types, cb, context) {
      return on.call(this, "async", types, cb, context);
    }
    function onSync(types, cb, context) {
      return on.call(this, "sync", types, cb, context);
    }
    function off(types) {
      var type;
      if (!this._callbacks) {
        return this;
      }
      types = types.split(splitter);
      while ((type = types.shift())) {
        delete this._callbacks[type];
      }
      return this;
    }
    function trigger(types) {
      var type, callbacks, args, syncFlush, asyncFlush;
      if (!this._callbacks) {
        return this;
      }
      types = types.split(splitter);
      args = [].slice.call(arguments, 1);
      while ((type = types.shift()) && (callbacks = this._callbacks[type])) {
        syncFlush = getFlush(callbacks.sync, this, [type].concat(args));
        asyncFlush = getFlush(callbacks.async, this, [type].concat(args));
        syncFlush() && nextTick(asyncFlush);
      }
      return this;
    }
    function getFlush(callbacks, context, args) {
      return flush;
      function flush() {
        var cancelled;
        for (var i = 0, len = callbacks.length; !cancelled && i < len; i += 1) {
          cancelled = callbacks[i].apply(context, args) === false;
        }
        return !cancelled;
      }
    }
    function getNextTick() {
      var nextTickFn;
      if (window.setImmediate) {
        nextTickFn = function nextTickSetImmediate(fn) {
          setImmediate(function () {
            fn();
          });
        };
      } else {
        nextTickFn = function nextTickSetTimeout(fn) {
          setTimeout(function () {
            fn();
          }, 0);
        };
      }
      return nextTickFn;
    }
    function bindContext(fn, context) {
      return fn.bind
        ? fn.bind(context)
        : function () {
          fn.apply(context, [].slice.call(arguments, 0));
        };
    }
  })();
  var highlight = (function (doc) {
    "use strict";
    var defaults = {
      node: null,
      pattern: null,
      tagName: "strong",
      className: null,
      wordsOnly: false,
      caseSensitive: false,
    };
    return function hightlight(o) {
      var regex;
      o = _.mixin({}, defaults, o);
      if (!o.node || !o.pattern) {
        return;
      }
      o.pattern = _.isArray(o.pattern) ? o.pattern : [o.pattern];
      regex = getRegex(o.pattern, o.caseSensitive, o.wordsOnly);
      traverse(o.node, hightlightTextNode);
      function hightlightTextNode(textNode) {
        var match, patternNode, wrapperNode;
        if ((match = regex.exec(textNode.data))) {
          wrapperNode = doc.createElement(o.tagName);
          o.className && (wrapperNode.className = o.className);
          patternNode = textNode.splitText(match.index);
          patternNode.splitText(match[0].length);
          wrapperNode.appendChild(patternNode.cloneNode(true));
          textNode.parentNode.replaceChild(wrapperNode, patternNode);
        }
        return !!match;
      }
      function traverse(el, hightlightTextNode) {
        var childNode,
          TEXT_NODE_TYPE = 3;
        for (var i = 0; i < el.childNodes.length; i++) {
          childNode = el.childNodes[i];
          if (childNode.nodeType === TEXT_NODE_TYPE) {
            i += hightlightTextNode(childNode) ? 1 : 0;
          } else {
            traverse(childNode, hightlightTextNode);
          }
        }
      }
    };
    function getRegex(patterns, caseSensitive, wordsOnly) {
      var escapedPatterns = [],
        regexStr;
      for (var i = 0, len = patterns.length; i < len; i++) {
        escapedPatterns.push(_.escapeRegExChars(patterns[i]));
      }
      regexStr = wordsOnly
        ? "\\b(" + escapedPatterns.join("|") + ")\\b"
        : "(" + escapedPatterns.join("|") + ")";
      return caseSensitive ? new RegExp(regexStr) : new RegExp(regexStr, "i");
    }
  })(window.document);
  var Input = (function () {
    "use strict";
    var specialKeyCodeMap;
    specialKeyCodeMap = {
      9: "tab",
      27: "esc",
      37: "left",
      39: "right",
      13: "enter",
      38: "up",
      40: "down",
    };
    function Input(o) {
      var that = this,
        onBlur,
        onFocus,
        onKeydown,
        onInput;
      o = o || {};
      if (!o.input) {
        $.error("input is missing");
      }
      onBlur = _.bind(this._onBlur, this);
      onFocus = _.bind(this._onFocus, this);
      onKeydown = _.bind(this._onKeydown, this);
      onInput = _.bind(this._onInput, this);
      this.$hint = $(o.hint);
      this.$input = $(o.input)
        .on("blur.tt", onBlur)
        .on("focus.tt", onFocus)
        .on("keydown.tt", onKeydown);
      if (this.$hint.length === 0) {
        this.setHint =
          this.getHint =
          this.clearHint =
          this.clearHintIfInvalid =
          _.noop;
      }
      if (!_.isMsie()) {
        this.$input.on("input.tt", onInput);
      } else {
        this.$input.on("keydown.tt keypress.tt cut.tt paste.tt", function ($e) {
          if (specialKeyCodeMap[$e.which || $e.keyCode]) {
            return;
          }
          _.defer(_.bind(that._onInput, that, $e));
        });
      }
      this.query = this.$input.val();
      this.$overflowHelper = buildOverflowHelper(this.$input);
    }
    Input.normalizeQuery = function (str) {
      return (str || "").replace(/^\s*/g, "").replace(/\s{2,}/g, " ");
    };
    _.mixin(Input.prototype, EventEmitter, {
      _onBlur: function onBlur() {
        this.resetInputValue();
        this.trigger("blurred");
      },
      _onFocus: function onFocus() {
        this.trigger("focused");
      },
      _onKeydown: function onKeydown($e) {
        var keyName = specialKeyCodeMap[$e.which || $e.keyCode];
        this._managePreventDefault(keyName, $e);
        if (keyName && this._shouldTrigger(keyName, $e)) {
          this.trigger(keyName + "Keyed", $e);
        }
      },
      _onInput: function onInput() {
        this._checkInputValue();
      },
      _managePreventDefault: function managePreventDefault(keyName, $e) {
        var preventDefault, hintValue, inputValue;
        switch (keyName) {
          case "tab":
            hintValue = this.getHint();
            inputValue = this.getInputValue();
            preventDefault =
              hintValue && hintValue !== inputValue && !withModifier($e);
            break;
          case "up":
          case "down":
            preventDefault = !withModifier($e);
            break;
          default:
            preventDefault = false;
        }
        preventDefault && $e.preventDefault();
      },
      _shouldTrigger: function shouldTrigger(keyName, $e) {
        var trigger;
        switch (keyName) {
          case "tab":
            trigger = !withModifier($e);
            break;
          default:
            trigger = true;
        }
        return trigger;
      },
      _checkInputValue: function checkInputValue() {
        var inputValue, areEquivalent, hasDifferentWhitespace;
        inputValue = this.getInputValue();
        areEquivalent = areQueriesEquivalent(inputValue, this.query);
        hasDifferentWhitespace = areEquivalent
          ? this.query.length !== inputValue.length
          : false;
        this.query = inputValue;
        if (!areEquivalent) {
          this.trigger("queryChanged", this.query);
        } else if (hasDifferentWhitespace) {
          this.trigger("whitespaceChanged", this.query);
        }
      },
      focus: function focus() {
        this.$input.focus();
      },
      blur: function blur() {
        this.$input.blur();
      },
      getQuery: function getQuery() {
        return this.query;
      },
      setQuery: function setQuery(query) {
        this.query = query;
      },
      getInputValue: function getInputValue() {
        return this.$input.val();
      },
      setInputValue: function setInputValue(value, silent) {
        this.$input.val(value);
        silent ? this.clearHint() : this._checkInputValue();
      },
      resetInputValue: function resetInputValue() {
        this.setInputValue(this.query, true);
      },
      getHint: function getHint() {
        return this.$hint.val();
      },
      setHint: function setHint(value) {
        this.$hint.val(value);
      },
      clearHint: function clearHint() {
        this.setHint("");
      },
      clearHintIfInvalid: function clearHintIfInvalid() {
        var val, hint, valIsPrefixOfHint, isValid;
        val = this.getInputValue();
        hint = this.getHint();
        valIsPrefixOfHint = val !== hint && hint.indexOf(val) === 0;
        isValid = val !== "" && valIsPrefixOfHint && !this.hasOverflow();
        !isValid && this.clearHint();
      },
      getLanguageDirection: function getLanguageDirection() {
        return (this.$input.css("direction") || "ltr").toLowerCase();
      },
      hasOverflow: function hasOverflow() {
        var constraint = this.$input.width() - 2;
        this.$overflowHelper.text(this.getInputValue());
        return this.$overflowHelper.width() >= constraint;
      },
      isCursorAtEnd: function () {
        var valueLength, selectionStart, range;
        valueLength = this.$input.val().length;
        selectionStart = this.$input[0].selectionStart;
        if (_.isNumber(selectionStart)) {
          return selectionStart === valueLength;
        } else if (document.selection) {
          range = document.selection.createRange();
          range.moveStart("character", -valueLength);
          return valueLength === range.text.length;
        }
        return true;
      },
      destroy: function destroy() {
        this.$hint.off(".tt");
        this.$input.off(".tt");
        this.$hint = this.$input = this.$overflowHelper = null;
      },
    });
    return Input;
    function buildOverflowHelper($input) {
      return $('<pre aria-hidden="true"></pre>')
        .css({
          position: "absolute",
          visibility: "hidden",
          whiteSpace: "pre",
          fontFamily: $input.css("font-family"),
          fontSize: $input.css("font-size"),
          fontStyle: $input.css("font-style"),
          fontVariant: $input.css("font-variant"),
          fontWeight: $input.css("font-weight"),
          wordSpacing: $input.css("word-spacing"),
          letterSpacing: $input.css("letter-spacing"),
          textIndent: $input.css("text-indent"),
          textRendering: $input.css("text-rendering"),
          textTransform: $input.css("text-transform"),
        })
        .insertAfter($input);
    }
    function areQueriesEquivalent(a, b) {
      return Input.normalizeQuery(a) === Input.normalizeQuery(b);
    }
    function withModifier($e) {
      return $e.altKey || $e.ctrlKey || $e.metaKey || $e.shiftKey;
    }
  })();
  var Dataset = (function () {
    "use strict";
    var datasetKey = "ttDataset",
      valueKey = "ttValue",
      datumKey = "ttDatum";
    function Dataset(o) {
      o = o || {};
      o.templates = o.templates || {};
      if (!o.source) {
        $.error("missing source");
      }
      if (o.name && !isValidName(o.name)) {
        $.error("invalid dataset name: " + o.name);
      }
      this.query = null;
      this.highlight = !!o.highlight;
      this.name = o.name || _.getUniqueId();
      this.source = o.source;
      this.displayFn = getDisplayFn(o.display || o.displayKey);
      this.templates = getTemplates(o.templates, this.displayFn);
      this.$el = $(html.dataset.replace("%CLASS%", this.name));
    }
    Dataset.extractDatasetName = function extractDatasetName(el) {
      return $(el).data(datasetKey);
    };
    Dataset.extractValue = function extractDatum(el) {
      return $(el).data(valueKey);
    };
    Dataset.extractDatum = function extractDatum(el) {
      return $(el).data(datumKey);
    };
    _.mixin(Dataset.prototype, EventEmitter, {
      _render: function render(query, suggestions) {
        if (!this.$el) {
          return;
        }
        var that = this,
          hasSuggestions;
        this.$el.empty();
        hasSuggestions = suggestions && suggestions.length;
        if (!hasSuggestions && this.templates.empty) {
          this.$el
            .html(getEmptyHtml())
            .prepend(that.templates.header ? getHeaderHtml() : null)
            .append(that.templates.footer ? getFooterHtml() : null);
        } else if (hasSuggestions) {
          this.$el
            .html(getSuggestionsHtml())
            .prepend(that.templates.header ? getHeaderHtml() : null)
            .append(that.templates.footer ? getFooterHtml() : null);
        }
        this.trigger("rendered");
        function getEmptyHtml() {
          return that.templates.empty({ query: query, isEmpty: true });
        }
        function getSuggestionsHtml() {
          var $suggestions, nodes;
          $suggestions = $(html.suggestions).css(css.suggestions);
          nodes = _.map(suggestions, getSuggestionNode);
          $suggestions.append.apply($suggestions, nodes);
          that.highlight &&
            highlight({
              className: "tt-highlight",
              node: $suggestions[0],
              pattern: query,
            });
          return $suggestions;
          function getSuggestionNode(suggestion) {
            var $el;
            $el = $(html.suggestion)
              .append(that.templates.suggestion(suggestion))
              .data(datasetKey, that.name)
              .data(valueKey, that.displayFn(suggestion))
              .data(datumKey, suggestion);
            $el.children().each(function () {
              $(this).css(css.suggestionChild);
            });
            return $el;
          }
        }
        function getHeaderHtml() {
          return that.templates.header({
            query: query,
            isEmpty: !hasSuggestions,
          });
        }
        function getFooterHtml() {
          return that.templates.footer({
            query: query,
            isEmpty: !hasSuggestions,
          });
        }
      },
      getRoot: function getRoot() {
        return this.$el;
      },
      update: function update(query) {
        var that = this;
        this.query = query;
        this.canceled = false;
        this.source(query, render);
        function render(suggestions) {
          if (!that.canceled && query === that.query) {
            that._render(query, suggestions);
          }
        }
      },
      cancel: function cancel() {
        this.canceled = true;
      },
      clear: function clear() {
        this.cancel();
        this.$el.empty();
        this.trigger("rendered");
      },
      isEmpty: function isEmpty() {
        return this.$el.is(":empty");
      },
      destroy: function destroy() {
        this.$el = null;
      },
    });
    return Dataset;
    function getDisplayFn(display) {
      display = display || "value";
      return _.isFunction(display) ? display : displayFn;
      function displayFn(obj) {
        return obj[display];
      }
    }
    function getTemplates(templates, displayFn) {
      return {
        empty: templates.empty && _.templatify(templates.empty),
        header: templates.header && _.templatify(templates.header),
        footer: templates.footer && _.templatify(templates.footer),
        suggestion: templates.suggestion || suggestionTemplate,
      };
      function suggestionTemplate(context) {
        return "<p>" + displayFn(context) + "</p>";
      }
    }
    function isValidName(str) {
      return /^[_a-zA-Z0-9-]+$/.test(str);
    }
  })();
  var Dropdown = (function () {
    "use strict";
    function Dropdown(o) {
      var that = this,
        onSuggestionClick,
        onSuggestionMouseEnter,
        onSuggestionMouseLeave;
      o = o || {};
      if (!o.menu) {
        $.error("menu is required");
      }
      this.isOpen = false;
      this.isEmpty = true;
      this.datasets = _.map(o.datasets, initializeDataset);
      onSuggestionClick = _.bind(this._onSuggestionClick, this);
      onSuggestionMouseEnter = _.bind(this._onSuggestionMouseEnter, this);
      onSuggestionMouseLeave = _.bind(this._onSuggestionMouseLeave, this);
      this.$menu = $(o.menu)
        .on("click.tt", ".tt-suggestion", onSuggestionClick)
        .on("mouseenter.tt", ".tt-suggestion", onSuggestionMouseEnter)
        .on("mouseleave.tt", ".tt-suggestion", onSuggestionMouseLeave);
      _.each(this.datasets, function (dataset) {
        that.$menu.append(dataset.getRoot());
        dataset.onSync("rendered", that._onRendered, that);
      });
    }
    _.mixin(Dropdown.prototype, EventEmitter, {
      _onSuggestionClick: function onSuggestionClick($e) {
        this.trigger("suggestionClicked", $($e.currentTarget));
      },
      _onSuggestionMouseEnter: function onSuggestionMouseEnter($e) {
        this._removeCursor();
        this._setCursor($($e.currentTarget), true);
      },
      _onSuggestionMouseLeave: function onSuggestionMouseLeave() {
        this._removeCursor();
      },
      _onRendered: function onRendered() {
        this.isEmpty = _.every(this.datasets, isDatasetEmpty);
        this.isEmpty ? this._hide() : this.isOpen && this._show();
        this.trigger("datasetRendered");
        function isDatasetEmpty(dataset) {
          return dataset.isEmpty();
        }
      },
      _hide: function () {
        this.$menu.hide();
      },
      _show: function () {
        this.$menu.css("display", "block");
      },
      _getSuggestions: function getSuggestions() {
        return this.$menu.find(".tt-suggestion");
      },
      _getCursor: function getCursor() {
        return this.$menu.find(".tt-cursor").first();
      },
      _setCursor: function setCursor($el, silent) {
        $el.first().addClass("tt-cursor");
        !silent && this.trigger("cursorMoved");
      },
      _removeCursor: function removeCursor() {
        this._getCursor().removeClass("tt-cursor");
      },
      _moveCursor: function moveCursor(increment) {
        var $suggestions, $oldCursor, newCursorIndex, $newCursor;
        if (!this.isOpen) {
          return;
        }
        $oldCursor = this._getCursor();
        $suggestions = this._getSuggestions();
        this._removeCursor();
        newCursorIndex = $suggestions.index($oldCursor) + increment;
        newCursorIndex = ((newCursorIndex + 1) % ($suggestions.length + 1)) - 1;
        if (newCursorIndex === -1) {
          this.trigger("cursorRemoved");
          return;
        } else if (newCursorIndex < -1) {
          newCursorIndex = $suggestions.length - 1;
        }
        this._setCursor(($newCursor = $suggestions.eq(newCursorIndex)));
        this._ensureVisible($newCursor);
      },
      _ensureVisible: function ensureVisible($el) {
        var elTop, elBottom, menuScrollTop, menuHeight;
        elTop = $el.position().top;
        elBottom = elTop + $el.outerHeight(true);
        menuScrollTop = this.$menu.scrollTop();
        menuHeight =
          this.$menu.height() +
          parseInt(this.$menu.css("paddingTop"), 10) +
          parseInt(this.$menu.css("paddingBottom"), 10);
        if (elTop < 0) {
          this.$menu.scrollTop(menuScrollTop + elTop);
        } else if (menuHeight < elBottom) {
          this.$menu.scrollTop(menuScrollTop + (elBottom - menuHeight));
        }
      },
      close: function close() {
        if (this.isOpen) {
          this.isOpen = false;
          this._removeCursor();
          this._hide();
          this.trigger("closed");
        }
      },
      open: function open() {
        if (!this.isOpen) {
          this.isOpen = true;
          !this.isEmpty && this._show();
          this.trigger("opened");
        }
      },
      setLanguageDirection: function setLanguageDirection(dir) {
        this.$menu.css(dir === "ltr" ? css.ltr : css.rtl);
      },
      moveCursorUp: function moveCursorUp() {
        this._moveCursor(-1);
      },
      moveCursorDown: function moveCursorDown() {
        this._moveCursor(+1);
      },
      getDatumForSuggestion: function getDatumForSuggestion($el) {
        var datum = null;
        if ($el.length) {
          datum = {
            raw: Dataset.extractDatum($el),
            value: Dataset.extractValue($el),
            datasetName: Dataset.extractDatasetName($el),
          };
        }
        return datum;
      },
      getDatumForCursor: function getDatumForCursor() {
        return this.getDatumForSuggestion(this._getCursor().first());
      },
      getDatumForTopSuggestion: function getDatumForTopSuggestion() {
        return this.getDatumForSuggestion(this._getSuggestions().first());
      },
      update: function update(query) {
        _.each(this.datasets, updateDataset);
        function updateDataset(dataset) {
          dataset.update(query);
        }
      },
      empty: function empty() {
        _.each(this.datasets, clearDataset);
        this.isEmpty = true;
        function clearDataset(dataset) {
          dataset.clear();
        }
      },
      isVisible: function isVisible() {
        return this.isOpen && !this.isEmpty;
      },
      destroy: function destroy() {
        this.$menu.off(".tt");
        this.$menu = null;
        _.each(this.datasets, destroyDataset);
        function destroyDataset(dataset) {
          dataset.destroy();
        }
      },
    });
    return Dropdown;
    function initializeDataset(oDataset) {
      return new Dataset(oDataset);
    }
  })();
  var Typeahead = (function () {
    "use strict";
    var attrsKey = "ttAttrs";
    function Typeahead(o) {
      var $menu, $input, $hint;
      o = o || {};
      if (!o.input) {
        $.error("missing input");
      }
      this.isActivated = false;
      this.autoselect = !!o.autoselect;
      this.minLength = _.isNumber(o.minLength) ? o.minLength : 1;
      this.$node = buildDom(o.input, o.withHint);
      $menu = this.$node.find(".tt-dropdown-menu");
      $input = this.$node.find(".tt-input");
      $hint = this.$node.find(".tt-hint");
      $input.on("blur.tt", function ($e) {
        var active, isActive, hasActive;
        active = document.activeElement;
        isActive = $menu.is(active);
        hasActive = $menu.has(active).length > 0;
        if (_.isMsie() && (isActive || hasActive)) {
          $e.preventDefault();
          $e.stopImmediatePropagation();
          _.defer(function () {
            $input.focus();
          });
        }
      });
      $menu.on("mousedown.tt", function ($e) {
        $e.preventDefault();
      });
      this.eventBus = o.eventBus || new EventBus({ el: $input });
      this.dropdown = new Dropdown({ menu: $menu, datasets: o.datasets })
        .onSync("suggestionClicked", this._onSuggestionClicked, this)
        .onSync("cursorMoved", this._onCursorMoved, this)
        .onSync("cursorRemoved", this._onCursorRemoved, this)
        .onSync("opened", this._onOpened, this)
        .onSync("closed", this._onClosed, this)
        .onAsync("datasetRendered", this._onDatasetRendered, this);
      this.input = new Input({ input: $input, hint: $hint })
        .onSync("focused", this._onFocused, this)
        .onSync("blurred", this._onBlurred, this)
        .onSync("enterKeyed", this._onEnterKeyed, this)
        .onSync("tabKeyed", this._onTabKeyed, this)
        .onSync("escKeyed", this._onEscKeyed, this)
        .onSync("upKeyed", this._onUpKeyed, this)
        .onSync("downKeyed", this._onDownKeyed, this)
        .onSync("leftKeyed", this._onLeftKeyed, this)
        .onSync("rightKeyed", this._onRightKeyed, this)
        .onSync("queryChanged", this._onQueryChanged, this)
        .onSync("whitespaceChanged", this._onWhitespaceChanged, this);
      this._setLanguageDirection();
    }
    _.mixin(Typeahead.prototype, {
      _onSuggestionClicked: function onSuggestionClicked(type, $el) {
        var datum;
        if ((datum = this.dropdown.getDatumForSuggestion($el))) {
          this._select(datum);
        }
      },
      _onCursorMoved: function onCursorMoved() {
        var datum = this.dropdown.getDatumForCursor();
        this.input.setInputValue(datum.value, true);
        this.eventBus.trigger("cursorchanged", datum.raw, datum.datasetName);
      },
      _onCursorRemoved: function onCursorRemoved() {
        this.input.resetInputValue();
        this._updateHint();
      },
      _onDatasetRendered: function onDatasetRendered() {
        this._updateHint();
      },
      _onOpened: function onOpened() {
        this._updateHint();
        this.eventBus.trigger("opened");
      },
      _onClosed: function onClosed() {
        this.input.clearHint();
        this.eventBus.trigger("closed");
      },
      _onFocused: function onFocused() {
        this.isActivated = true;
        this.dropdown.open();
      },
      _onBlurred: function onBlurred() {
        this.isActivated = false;
        this.dropdown.empty();
        this.dropdown.close();
      },
      _onEnterKeyed: function onEnterKeyed(type, $e) {
        var cursorDatum, topSuggestionDatum;
        cursorDatum = this.dropdown.getDatumForCursor();
        topSuggestionDatum = this.dropdown.getDatumForTopSuggestion();
        if (cursorDatum) {
          this._select(cursorDatum);
          $e.preventDefault();
        } else if (this.autoselect && topSuggestionDatum) {
          this._select(topSuggestionDatum);
          $e.preventDefault();
        }
      },
      _onTabKeyed: function onTabKeyed(type, $e) {
        var datum;
        if ((datum = this.dropdown.getDatumForCursor())) {
          this._select(datum);
          $e.preventDefault();
        } else {
          this._autocomplete(true);
        }
      },
      _onEscKeyed: function onEscKeyed() {
        this.dropdown.close();
        this.input.resetInputValue();
      },
      _onUpKeyed: function onUpKeyed() {
        var query = this.input.getQuery();
        this.dropdown.isEmpty && query.length >= this.minLength
          ? this.dropdown.update(query)
          : this.dropdown.moveCursorUp();
        this.dropdown.open();
      },
      _onDownKeyed: function onDownKeyed() {
        var query = this.input.getQuery();
        this.dropdown.isEmpty && query.length >= this.minLength
          ? this.dropdown.update(query)
          : this.dropdown.moveCursorDown();
        this.dropdown.open();
      },
      _onLeftKeyed: function onLeftKeyed() {
        this.dir === "rtl" && this._autocomplete();
      },
      _onRightKeyed: function onRightKeyed() {
        this.dir === "ltr" && this._autocomplete();
      },
      _onQueryChanged: function onQueryChanged(e, query) {
        this.input.clearHintIfInvalid();
        query.length >= this.minLength
          ? this.dropdown.update(query)
          : this.dropdown.empty();
        this.dropdown.open();
        this._setLanguageDirection();
      },
      _onWhitespaceChanged: function onWhitespaceChanged() {
        this._updateHint();
        this.dropdown.open();
      },
      _setLanguageDirection: function setLanguageDirection() {
        var dir;
        if (this.dir !== (dir = this.input.getLanguageDirection())) {
          this.dir = dir;
          this.$node.css("direction", dir);
          this.dropdown.setLanguageDirection(dir);
        }
      },
      _updateHint: function updateHint() {
        var datum, val, query, escapedQuery, frontMatchRegEx, match;
        datum = this.dropdown.getDatumForTopSuggestion();
        if (datum && this.dropdown.isVisible() && !this.input.hasOverflow()) {
          val = this.input.getInputValue();
          query = Input.normalizeQuery(val);
          escapedQuery = _.escapeRegExChars(query);
          frontMatchRegEx = new RegExp("^(?:" + escapedQuery + ")(.+$)", "i");
          match = frontMatchRegEx.exec(datum.value);
          match ? this.input.setHint(val + match[1]) : this.input.clearHint();
        } else {
          this.input.clearHint();
        }
      },
      _autocomplete: function autocomplete(laxCursor) {
        var hint, query, isCursorAtEnd, datum;
        hint = this.input.getHint();
        query = this.input.getQuery();
        isCursorAtEnd = laxCursor || this.input.isCursorAtEnd();
        if (hint && query !== hint && isCursorAtEnd) {
          datum = this.dropdown.getDatumForTopSuggestion();
          datum && this.input.setInputValue(datum.value);
          this.eventBus.trigger("autocompleted", datum.raw, datum.datasetName);
        }
      },
      _select: function select(datum) {
        this.input.setQuery(datum.value);
        this.input.setInputValue(datum.value, true);
        this._setLanguageDirection();
        this.eventBus.trigger("selected", datum.raw, datum.datasetName);
        this.dropdown.close();
        _.defer(_.bind(this.dropdown.empty, this.dropdown));
      },
      open: function open() {
        this.dropdown.open();
      },
      close: function close() {
        this.dropdown.close();
      },
      setVal: function setVal(val) {
        val = _.toStr(val);
        if (this.isActivated) {
          this.input.setInputValue(val);
        } else {
          this.input.setQuery(val);
          this.input.setInputValue(val, true);
        }
        this._setLanguageDirection();
      },
      getVal: function getVal() {
        return this.input.getQuery();
      },
      destroy: function destroy() {
        this.input.destroy();
        this.dropdown.destroy();
        destroyDomStructure(this.$node);
        this.$node = null;
      },
    });
    return Typeahead;
    function buildDom(input, withHint) {
      var $input, $wrapper, $dropdown, $hint;
      $input = $(input);
      $wrapper = $(html.wrapper).css(css.wrapper);
      $dropdown = $(html.dropdown).css(css.dropdown);
      $hint = $input.clone().css(css.hint).css(getBackgroundStyles($input));
      $hint
        .val("")
        .removeData()
        .addClass("tt-hint")
        .removeAttr("id name placeholder required")
        .prop("readonly", true)
        .attr({ autocomplete: "off", spellcheck: "false", tabindex: -1 });
      $input.data(attrsKey, {
        dir: $input.attr("dir"),
        autocomplete: $input.attr("autocomplete"),
        spellcheck: $input.attr("spellcheck"),
        style: $input.attr("style"),
      });
      $input
        .addClass("tt-input")
        .attr({ autocomplete: "off", spellcheck: false })
        .css(withHint ? css.input : css.inputWithNoHint);
      try {
        !$input.attr("dir") && $input.attr("dir", "auto");
      } catch (e) { }
      return $input
        .wrap($wrapper)
        .parent()
        .prepend(withHint ? $hint : null)
        .append($dropdown);
    }
    function getBackgroundStyles($el) {
      return {
        backgroundAttachment: $el.css("background-attachment"),
        backgroundClip: $el.css("background-clip"),
        backgroundColor: $el.css("background-color"),
        backgroundImage: $el.css("background-image"),
        backgroundOrigin: $el.css("background-origin"),
        backgroundPosition: $el.css("background-position"),
        backgroundRepeat: $el.css("background-repeat"),
        backgroundSize: $el.css("background-size"),
      };
    }
    function destroyDomStructure($node) {
      var $input = $node.find(".tt-input");
      _.each($input.data(attrsKey), function (val, key) {
        _.isUndefined(val) ? $input.removeAttr(key) : $input.attr(key, val);
      });
      $input
        .detach()
        .removeData(attrsKey)
        .removeClass("tt-input")
        .insertAfter($node);
      $node.remove();
    }
  })();
  (function () {
    "use strict";
    var old, typeaheadKey, methods;
    old = $.fn.typeahead;
    typeaheadKey = "ttTypeahead";
    methods = {
      initialize: function initialize(o, datasets) {
        datasets = _.isArray(datasets) ? datasets : [].slice.call(arguments, 1);
        o = o || {};
        return this.each(attach);
        function attach() {
          var $input = $(this),
            eventBus,
            typeahead;
          _.each(datasets, function (d) {
            d.highlight = !!o.highlight;
          });
          typeahead = new Typeahead({
            input: $input,
            eventBus: (eventBus = new EventBus({ el: $input })),
            withHint: _.isUndefined(o.hint) ? true : !!o.hint,
            minLength: o.minLength,
            autoselect: o.autoselect,
            datasets: datasets,
          });
          $input.data(typeaheadKey, typeahead);
        }
      },
      open: function open() {
        return this.each(openTypeahead);
        function openTypeahead() {
          var $input = $(this),
            typeahead;
          if ((typeahead = $input.data(typeaheadKey))) {
            typeahead.open();
          }
        }
      },
      close: function close() {
        return this.each(closeTypeahead);
        function closeTypeahead() {
          var $input = $(this),
            typeahead;
          if ((typeahead = $input.data(typeaheadKey))) {
            typeahead.close();
          }
        }
      },
      val: function val(newVal) {
        return !arguments.length ? getVal(this.first()) : this.each(setVal);
        function setVal() {
          var $input = $(this),
            typeahead;
          if ((typeahead = $input.data(typeaheadKey))) {
            typeahead.setVal(newVal);
          }
        }
        function getVal($input) {
          var typeahead, query;
          if ((typeahead = $input.data(typeaheadKey))) {
            query = typeahead.getVal();
          }
          return query;
        }
      },
      destroy: function destroy() {
        return this.each(unattach);
        function unattach() {
          var $input = $(this),
            typeahead;
          if ((typeahead = $input.data(typeaheadKey))) {
            typeahead.destroy();
            $input.removeData(typeaheadKey);
          }
        }
      },
    };
    $.fn.typeahead = function (method) {
      var tts;
      if (methods[method] && method !== "initialize") {
        tts = this.filter(function () {
          return !!$(this).data(typeaheadKey);
        });
        return methods[method].apply(tts, [].slice.call(arguments, 1));
      } else {
        return methods.initialize.apply(this, arguments);
      }
    };
    $.fn.typeahead.noConflict = function noConflict() {
      $.fn.typeahead = old;
      return this;
    };
  })();
})(window.jQuery);
(function ($) {
  "use strict";
  let nixSuggestions;
  let userAgent = window.navigator.userAgent;
  let isIE =
    ($.browser && $.browser.msie) ||
    userAgent.indexOf("MSIE") !== -1 ||
    userAgent.indexOf("Trident") !== -1;
  $.fn.nixAutocomplete = function (options) {
    let settings = $.extend(
      { endpoint: "https://api.nutritionix.com", appId: null, appKey: null },
      options
    );
    if (!nixSuggestions) {
      nixSuggestions = new Bloodhound({
        datumTokenizer: Bloodhound.tokenizers.obj.whitespace("text"),
        queryTokenizer: Bloodhound.tokenizers.whitespace,
        remote: {
          url:
            (isIE ? "/cors/api0" : settings.endpoint) +
            "/v2/autocomplete?q=%QUERY",
          ajax: {
            global: false,
            headers: {
              "X-APP-ID": settings.appId,
              "X-APP-KEY": settings.appKey,
            },
          },
          rateLimitBy: "debounce",
          rateLimitWait: 300,
        },
      });
      nixSuggestions.initialize();
    }
    let searchInput = $(this);
    let typeahead = searchInput.typeahead(
      { hint: true, highlight: true, minLength: 1 },
      {
        name: "nixSuggestions",
        displayKey: "text",
        source: nixSuggestions.ttAdapter(),
      }
    );
    if (searchInput.attr("autofocus")) {
      typeahead.focus();
    }
    searchInput.data("typeahead", typeahead);
    searchInput.bind("typeahead:selected", function () {
      searchInput.closest("form").submit();
    });
    return this;
  };
})(jQuery);
/* HTML5 Placeholder jQuery Plugin - v2.1.1
 * Copyright (c)2015 Mathias Bynens
 * 2015-02-19
 */
!(function (a) {
  "function" == typeof define && define.amd ? define(["jquery"], a) : a(jQuery);
})(function (a) {
  function b(b) {
    var c = {},
      d = /^jQuery\d+$/;
    return (
      a.each(b.attributes, function (a, b) {
        b.specified && !d.test(b.name) && (c[b.name] = b.value);
      }),
      c
    );
  }
  function c(b, c) {
    var d = this,
      f = a(d);
    if (d.value == f.attr("placeholder") && f.hasClass(m.customClass))
      if (f.data("placeholder-password")) {
        if (
          ((f = f
            .hide()
            .nextAll('input[type="password"]:first')
            .show()
            .attr("id", f.removeAttr("id").data("placeholder-id"))),
            b === !0)
        )
          return (f[0].value = c);
        f.focus();
      } else
        (d.value = ""), f.removeClass(m.customClass), d == e() && d.select();
  }
  function d() {
    var d,
      e = this,
      f = a(e),
      g = this.id;
    if ("" === e.value) {
      if ("password" === e.type) {
        if (!f.data("placeholder-textinput")) {
          try {
            d = f.clone().attr({ type: "text" });
          } catch (h) {
            d = a("<input>").attr(a.extend(b(this), { type: "text" }));
          }
          d
            .removeAttr("name")
            .data({ "placeholder-password": f, "placeholder-id": g })
            .bind("focus.placeholder", c),
            f
              .data({ "placeholder-textinput": d, "placeholder-id": g })
              .before(d);
        }
        f = f
          .removeAttr("id")
          .hide()
          .prevAll('input[type="text"]:first')
          .attr("id", g)
          .show();
      }
      f.addClass(m.customClass), (f[0].value = f.attr("placeholder"));
    } else f.removeClass(m.customClass);
  }
  function e() {
    try {
      return document.activeElement;
    } catch (a) { }
  }
  var f,
    g,
    h =
      "[object OperaMini]" == Object.prototype.toString.call(window.operamini),
    i = "placeholder" in document.createElement("input") && !h,
    j = "placeholder" in document.createElement("textarea") && !h,
    k = a.valHooks,
    l = a.propHooks;
  if (i && j)
    (g = a.fn.placeholder =
      function () {
        return this;
      }),
      (g.input = g.textarea = !0);
  else {
    var m = {};
    (g = a.fn.placeholder =
      function (b) {
        var e = { customClass: "placeholder" };
        m = a.extend({}, e, b);
        var f = this;
        return (
          f
            .filter((i ? "textarea" : ":input") + "[placeholder]")
            .not("." + m.customClass)
            .bind({ "focus.placeholder": c, "blur.placeholder": d })
            .data("placeholder-enabled", !0)
            .trigger("blur.placeholder"),
          f
        );
      }),
      (g.input = i),
      (g.textarea = j),
      (f = {
        get: function (b) {
          var c = a(b),
            d = c.data("placeholder-password");
          return d
            ? d[0].value
            : c.data("placeholder-enabled") && c.hasClass(m.customClass)
              ? ""
              : b.value;
        },
        set: function (b, f) {
          var g = a(b),
            h = g.data("placeholder-password");
          return h
            ? (h[0].value = f)
            : g.data("placeholder-enabled")
              ? ("" === f
                ? ((b.value = f), b != e() && d.call(b))
                : g.hasClass(m.customClass)
                  ? c.call(b, !0, f) || (b.value = f)
                  : (b.value = f),
                g)
              : (b.value = f);
        },
      }),
      i || ((k.input = f), (l.value = f)),
      j || ((k.textarea = f), (l.value = f)),
      a(function () {
        a(document).delegate("form", "submit.placeholder", function () {
          var b = a("." + m.customClass, this).each(c);
          setTimeout(function () {
            b.each(d);
          }, 10);
        });
      }),
      a(window).bind("beforeunload.placeholder", function () {
        a("." + m.customClass).each(function () {
          this.value = "";
        });
      });
  }
});
//# sourceMappingURL=jquery.placeholder.min.js.map
let googleAnalyticsID = "UA-19183277-1";
var showMessage = (function () {
  $("body").delegate("#showMessage", "click", function (event) {
    if (!$(this).hasClass("noClickToClose")) {
      showMessage.close();
    }
    event.stopPropagation();
  });
  return {
    clickToClose: function (msg) {
      if (msg.clickToClose === false) {
        return msg.className + " noClickToClose";
      } else {
        return msg.className;
      }
    },
    success: function (msg) {
      msg.className = "msgSuccess";
      msg.className = this.clickToClose(msg);
      this.render(msg);
    },
    warning: function (msg) {
      msg.className = "msgWarning";
      msg.className = this.clickToClose(msg);
      this.render(msg);
    },
    error: function (msg) {
      msg.className = "msgError";
      msg.className = this.clickToClose(msg);
      this.render(msg);
    },
    render: function (msg) {
      $("body").showMessage({
        thisMessage: msg.text,
        className: msg.className,
        opacity: 100,
        closeText: "X",
        useEsc: false,
        delayTime: 5000,
        autoClose: msg.autoClose,
      });
    },
    close: function () {
      $("#showMessage span a").trigger("click");
    },
  };
})();
let ajaxLoading = {
  _elem: undefined,
  _defaultMessage: "Please Wait ...",
  init: function (defaultMessage) {
    if (defaultMessage === undefined) {
      defaultMessage = this._defaultMessage;
    }
    this._elem = $(
      '<div id="alert" style="display:none">' + defaultMessage + "</div>"
    );
    $("body").append(this._elem);
  },
  _setMessage: function (message) {
    this._elem.text(message);
  },
  show: function (message) {
    this._setMessage(
      message === undefined || message + "" === ""
        ? this._defaultMessage
        : message
    );
    this._elem.fadeIn(400);
  },
  hide: function () {
    this._elem.fadeOut(400);
  },
};
var errors2array = function (form, messages) {
  let settings = $(form).data("settings");
  let results = new Array();
  let index = 0;
  $.each(settings.attributes, function (i, attribute) {
    if (messages && $.isArray(messages[attribute.id])) {
      $.each(messages[attribute.id], function (j, message) {
        results[index] = message;
        index++;
      });
    }
  });
  return results;
};
var popUp = function (url) {
  window.open(
    url,
    "popupWin",
    "width=700,height=500,toolbar=no,status=no,location=no,menubar=no,resizeable=yes,scrollbars=yes,left=" +
    (window.screen.width - 700) / 2 +
    ",top=" +
    (window.screen.height - 500) / 2
  );
};
var popUpV2 = function (url, thisWidth, thisHeight) {
  window.open(
    url,
    "popupWin",
    "width=" +
    thisWidth +
    ", height=" +
    thisHeight +
    ", toolbar=no, status=no, location=no, menubar=no, resizeable=yes, scrollbars=yes, left=" +
    (window.screen.width - parseInt(thisWidth)) / 2 +
    ", top=" +
    (window.screen.height - parseInt(thisHeight)) / 2
  );
};
function split(val) {
  return val.split(/,\s*/);
}
function extractLast(term) {
  return split(term).pop();
}
function isInt(x) {
  let y = parseInt(x);
  if (isNaN(y)) {
    return false;
  }
  return x === y && x.toString() === y.toString();
}
$(function () {
  $("a.linkExternal").on("click", function (e) {
    e.preventDefault();
    window.open($(this).attr("href"));
  });
  if ($("a.goTo")) {
    let linkBGColor = $("a.goTo").css("background");
    $("a.goTo").on("touchend", function () {
      $(this).css("background", linkBGColor);
    });
  }
});
$("#privacyPolicyButton").click(function (e) {
  e.preventDefault();
  window.open("https://www.nutritionix.com/privacy/gdpr", "_gdpr");
});
$("#acceptNixCookie").click(function (e) {
  e.preventDefault();
  $(".gdpr-banner").hide();
  $.cookie("gdpr_accepted", true, { expires: 90, path: "/" });
  loadThirdPartyWithCookies();
});
$("#refuseNixCookie").click(function (e) {
  e.preventDefault();
  $.cookie("gdpr_rejected", true, { expires: 90, path: "/" });
  $(".gdpr-banner").hide();
});
function loadThirdPartyWithCookies() {
  if (parseInt($("#nixServer").val()) < 2) {
    window.fbAsyncInit = function () {
      FB.init({
        appId: $("#facebookAppId").val(),
        cookie: true,
        xfbml: true,
        status: true,
      });
    };
    (function () {
      let e = document.createElement("script");
      e.async = true;
      e.src =
        document.location.protocol + "//connect.facebook.net/en_US/all.js";
      document.getElementById("fb-root").appendChild(e);
    })();
  }
}
$(document).ready(function () {
  if (
    $("#publicPages").val() !== undefined &&
    parseInt($("#nixServer").val()) < 2
  ) {
    let analyticsURL = "//www.google-analytics.com/analytics_debug.js";
    if (parseInt($("#nixServer").val()) === 0) {
      analyticsURL = "//www.google-analytics.com/analytics.js";
    }
    (function (i, s, o, g, r, a, m) {
      i["GoogleAnalyticsObject"] = r;
      (i[r] =
        i[r] ||
        function () {
          (i[r].q = i[r].q || []).push(arguments);
        }),
        (i[r].l = 1 * new Date());
      (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
      a.async = 1;
      a.src = g;
      m.parentNode.insertBefore(a, m);
    })(window, document, "script", analyticsURL, "ga");
    ga("create", { trackingId: "UA-19183277-1" });
    ga("set", "anonymizeIp", true);
    if (parseInt($("#nixServer").val()) > 1) {
      ga("set", "sendHitTask", null);
    }
    ga("send", "pageview");
    if (
      $.cookie("gdpr_accepted") === null &&
      $.cookie("gdpr_rejected") === null
    ) {
      $(".gdpr-banner").show();
    }
    if ($.cookie("gdpr_accepted") !== null) {
      loadThirdPartyWithCookies();
    }
  }
});
var jstz = (function () {
  "use strict";
  var HEMISPHERE_SOUTH = "s",
    get_date_offset = function (date) {
      var offset = -date.getTimezoneOffset();
      return offset !== null ? offset : 0;
    },
    get_january_offset = function () {
      return get_date_offset(new Date(2010, 0, 1, 0, 0, 0, 0));
    },
    get_june_offset = function () {
      return get_date_offset(new Date(2010, 5, 1, 0, 0, 0, 0));
    },
    date_is_dst = function (date) {
      var base_offset =
        date.getMonth() > 5 ? get_june_offset() : get_january_offset(),
        date_offset = get_date_offset(date);
      return base_offset - date_offset !== 0;
    },
    lookup_key = function () {
      var january_offset = get_january_offset(),
        june_offset = get_june_offset(),
        diff = get_january_offset() - get_june_offset();
      if (diff < 0) {
        return january_offset + ",1";
      } else if (diff > 0) {
        return june_offset + ",1," + HEMISPHERE_SOUTH;
      }
      return january_offset + ",0";
    },
    determine_timezone = function () {
      var key = lookup_key();
      return new jstz.TimeZone(jstz.olson.timezones[key]);
    };
  return { determine_timezone: determine_timezone, date_is_dst: date_is_dst };
})();
jstz.TimeZone = (function () {
  "use strict";
  var timezone_name = null,
    uses_dst = null,
    utc_offset = null,
    name = function () {
      return timezone_name;
    },
    dst = function () {
      return uses_dst;
    },
    offset = function () {
      return utc_offset;
    },
    ambiguity_check = function () {
      var ambiguity_list = jstz.olson.ambiguity_list[timezone_name],
        length = ambiguity_list.length,
        i = 0,
        tz = ambiguity_list[0];
      for (; i < length; i += 1) {
        tz = ambiguity_list[i];
        if (jstz.date_is_dst(jstz.olson.dst_start_dates[tz])) {
          timezone_name = tz;
          return;
        }
      }
    },
    is_ambiguous = function () {
      return typeof jstz.olson.ambiguity_list[timezone_name] !== "undefined";
    },
    Constr = function (tz_info) {
      utc_offset = tz_info[0];
      timezone_name = tz_info[1];
      uses_dst = tz_info[2];
      if (is_ambiguous()) {
        ambiguity_check();
      }
    };
  Constr.prototype = {
    constructor: jstz.TimeZone,
    name: name,
    dst: dst,
    offset: offset,
  };
  return Constr;
})();
jstz.olson = {};
jstz.olson.timezones = (function () {
  "use strict";
  return {
    "-720,0": ["-12:00", "Etc/GMT+12", false],
    "-660,0": ["-11:00", "Pacific/Pago_Pago", false],
    "-600,1": ["-11:00", "America/Adak", true],
    "-660,1,s": ["-11:00", "Pacific/Apia", true],
    "-600,0": ["-10:00", "Pacific/Honolulu", false],
    "-570,0": ["-09:30", "Pacific/Marquesas", false],
    "-540,0": ["-09:00", "Pacific/Gambier", false],
    "-540,1": ["-09:00", "America/Anchorage", true],
    "-480,1": ["-08:00", "America/Los_Angeles", true],
    "-480,0": ["-08:00", "Pacific/Pitcairn", false],
    "-420,0": ["-07:00", "America/Phoenix", false],
    "-420,1": ["-07:00", "America/Denver", true],
    "-360,0": ["-06:00", "America/Guatemala", false],
    "-360,1": ["-06:00", "America/Chicago", true],
    "-360,1,s": ["-06:00", "Pacific/Easter", true],
    "-300,0": ["-05:00", "America/Bogota", false],
    "-300,1": ["-05:00", "America/New_York", true],
    "-270,0": ["-04:30", "America/Caracas", false],
    "-240,1": ["-04:00", "America/Halifax", true],
    "-240,0": ["-04:00", "America/Santo_Domingo", false],
    "-240,1,s": ["-04:00", "America/Asuncion", true],
    "-210,1": ["-03:30", "America/St_Johns", true],
    "-180,1": ["-03:00", "America/Godthab", true],
    "-180,0": ["-03:00", "America/Argentina/Buenos_Aires", false],
    "-180,1,s": ["-03:00", "America/Montevideo", true],
    "-120,0": ["-02:00", "America/Noronha", false],
    "-120,1": ["-02:00", "Etc/GMT+2", true],
    "-60,1": ["-01:00", "Atlantic/Azores", true],
    "-60,0": ["-01:00", "Atlantic/Cape_Verde", false],
    "0,0": ["00:00", "Etc/UTC", false],
    "0,1": ["00:00", "Europe/London", true],
    "60,1": ["+01:00", "Europe/Berlin", true],
    "60,0": ["+01:00", "Africa/Lagos", false],
    "60,1,s": ["+01:00", "Africa/Windhoek", true],
    "120,1": ["+02:00", "Asia/Beirut", true],
    "120,0": ["+02:00", "Africa/Johannesburg", false],
    "180,1": ["+03:00", "Europe/Moscow", true],
    "180,0": ["+03:00", "Asia/Baghdad", false],
    "210,1": ["+03:30", "Asia/Tehran", true],
    "240,0": ["+04:00", "Asia/Dubai", false],
    "240,1": ["+04:00", "Asia/Yerevan", true],
    "270,0": ["+04:30", "Asia/Kabul", false],
    "300,1": ["+05:00", "Asia/Yekaterinburg", true],
    "300,0": ["+05:00", "Asia/Karachi", false],
    "330,0": ["+05:30", "Asia/Kolkata", false],
    "345,0": ["+05:45", "Asia/Kathmandu", false],
    "360,0": ["+06:00", "Asia/Dhaka", false],
    "360,1": ["+06:00", "Asia/Omsk", true],
    "390,0": ["+06:30", "Asia/Rangoon", false],
    "420,1": ["+07:00", "Asia/Krasnoyarsk", true],
    "420,0": ["+07:00", "Asia/Jakarta", false],
    "480,0": ["+08:00", "Asia/Shanghai", false],
    "480,1": ["+08:00", "Asia/Irkutsk", true],
    "525,0": ["+08:45", "Australia/Eucla", true],
    "525,1,s": ["+08:45", "Australia/Eucla", true],
    "540,1": ["+09:00", "Asia/Yakutsk", true],
    "540,0": ["+09:00", "Asia/Tokyo", false],
    "570,0": ["+09:30", "Australia/Darwin", false],
    "570,1,s": ["+09:30", "Australia/Adelaide", true],
    "600,0": ["+10:00", "Australia/Brisbane", false],
    "600,1": ["+10:00", "Asia/Vladivostok", true],
    "600,1,s": ["+10:00", "Australia/Sydney", true],
    "630,1,s": ["+10:30", "Australia/Lord_Howe", true],
    "660,1": ["+11:00", "Asia/Kamchatka", true],
    "660,0": ["+11:00", "Pacific/Noumea", false],
    "690,0": ["+11:30", "Pacific/Norfolk", false],
    "720,1,s": ["+12:00", "Pacific/Auckland", true],
    "720,0": ["+12:00", "Pacific/Tarawa", false],
    "765,1,s": ["+12:45", "Pacific/Chatham", true],
    "780,0": ["+13:00", "Pacific/Tongatapu", false],
    "840,0": ["+14:00", "Pacific/Kiritimati", false],
  };
})();
jstz.olson.dst_start_dates = (function () {
  "use strict";
  return {
    "America/Denver": new Date(2011, 2, 13, 3, 0, 0, 0),
    "America/Mazatlan": new Date(2011, 3, 3, 3, 0, 0, 0),
    "America/Chicago": new Date(2011, 2, 13, 3, 0, 0, 0),
    "America/Mexico_City": new Date(2011, 3, 3, 3, 0, 0, 0),
    "Atlantic/Stanley": new Date(2011, 8, 4, 7, 0, 0, 0),
    "America/Asuncion": new Date(2011, 9, 2, 3, 0, 0, 0),
    "America/Santiago": new Date(2011, 9, 9, 3, 0, 0, 0),
    "America/Campo_Grande": new Date(2011, 9, 16, 5, 0, 0, 0),
    "America/Montevideo": new Date(2011, 9, 2, 3, 0, 0, 0),
    "America/Sao_Paulo": new Date(2011, 9, 16, 5, 0, 0, 0),
    "America/Los_Angeles": new Date(2011, 2, 13, 8, 0, 0, 0),
    "America/Santa_Isabel": new Date(2011, 3, 5, 8, 0, 0, 0),
    "America/Havana": new Date(2011, 2, 13, 2, 0, 0, 0),
    "America/New_York": new Date(2011, 2, 13, 7, 0, 0, 0),
    "Asia/Gaza": new Date(2011, 2, 26, 23, 0, 0, 0),
    "Asia/Beirut": new Date(2011, 2, 27, 1, 0, 0, 0),
    "Europe/Minsk": new Date(2011, 2, 27, 2, 0, 0, 0),
    "Europe/Helsinki": new Date(2011, 2, 27, 4, 0, 0, 0),
    "Europe/Istanbul": new Date(2011, 2, 28, 5, 0, 0, 0),
    "Asia/Damascus": new Date(2011, 3, 1, 2, 0, 0, 0),
    "Asia/Jerusalem": new Date(2011, 3, 1, 6, 0, 0, 0),
    "Africa/Cairo": new Date(2010, 3, 30, 4, 0, 0, 0),
    "Asia/Yerevan": new Date(2011, 2, 27, 4, 0, 0, 0),
    "Asia/Baku": new Date(2011, 2, 27, 8, 0, 0, 0),
    "Pacific/Auckland": new Date(2011, 8, 26, 7, 0, 0, 0),
    "Pacific/Fiji": new Date(2010, 11, 29, 23, 0, 0, 0),
    "America/Halifax": new Date(2011, 2, 13, 6, 0, 0, 0),
    "America/Goose_Bay": new Date(2011, 2, 13, 2, 1, 0, 0),
    "America/Miquelon": new Date(2011, 2, 13, 5, 0, 0, 0),
    "America/Godthab": new Date(2011, 2, 27, 1, 0, 0, 0),
  };
})();
jstz.olson.ambiguity_list = {
  "America/Denver": ["America/Denver", "America/Mazatlan"],
  "America/Chicago": ["America/Chicago", "America/Mexico_City"],
  "America/Asuncion": [
    "Atlantic/Stanley",
    "America/Asuncion",
    "America/Santiago",
    "America/Campo_Grande",
  ],
  "America/Montevideo": ["America/Montevideo", "America/Sao_Paulo"],
  "Asia/Beirut": [
    "Asia/Gaza",
    "Asia/Beirut",
    "Europe/Minsk",
    "Europe/Helsinki",
    "Europe/Istanbul",
    "Asia/Damascus",
    "Asia/Jerusalem",
    "Africa/Cairo",
  ],
  "Asia/Yerevan": ["Asia/Yerevan", "Asia/Baku"],
  "Pacific/Auckland": ["Pacific/Auckland", "Pacific/Fiji"],
  "America/Los_Angeles": ["America/Los_Angeles", "America/Santa_Isabel"],
  "America/New_York": ["America/Havana", "America/New_York"],
  "America/Halifax": ["America/Goose_Bay", "America/Halifax"],
  "America/Godthab": ["America/Miquelon", "America/Godthab"],
};
var timezone = jstz.determine_timezone();
$.cookie("timezone", timezone.name(), { expires: 1, path: "/" });
(function ($) {
  var showMessage_t;
  $.fn.showMessage = function (options) {
    var defaults = {
      thisMessage: [""],
      className: "notification",
      position: "top",
      zIndex: 1001,
      opacity: 90,
      useEsc: true,
      displayNavigation: true,
      autoClose: false,
      delayTime: 5000,
      closeText: "close",
      escText: "Esc Key or",
    };
    var option = $.extend(defaults, options);
    this.each(function () {
      if ($("#showMessage").length) {
        $("#showMessage").remove();
      }
      var messageHolder = $("<div></div>")
        .css({
          display: "none",
          position: "fixed",
          "z-index": option.zIndex,
          left: 0,
          width: "100%",
          margin: 0,
          filter: "Alpha(Opacity=" + option.opacity + ")",
          opacity: option.opacity / 100,
        })
        .attr("id", "showMessage")
        .addClass(option.className);
      if (option.position == "top") {
        $(messageHolder).css("top", 0);
      } else {
        $(messageHolder).css("bottom", 0);
      }
      if (option.useEsc) {
        $(window).keydown(function (e) {
          var keycode;
          if (e === null) {
            keycode = window.event.keyCode;
          } else {
            keycode = e.which;
          }
          if (keycode == 27) {
            $("#showMessage").fadeOut();
            if (typeof showMessage_t != "undefined") {
              clearTimeout(showMessage_t);
            }
          }
        });
      } else {
        $(window).unbind("keydown");
      }
      if (option.displayNavigation) {
        var messageNavigation = $("<span></span>").css({
          float: "right",
          "padding-right": "1em",
          "font-weight": "bold",
          "font-size": "small",
        });
        if (option.useEsc) {
          $(messageNavigation).html(option.escText + " ");
        }
        var closeText = $("")   //<a></a> This is removed inside ""
          .attr({ href: "", title: option.closeText })
          .css("text-decoration", "underline")
          .click(function () {
            $("#showMessage").fadeOut();
            clearTimeout(showMessage_t);
            return false;
          })
          .text(option.closeText);
        $(messageNavigation).append(closeText);
        $(messageHolder).append(messageNavigation);
      } else {
        $(window).click(function () {
          if ($("#showMessage").length) {
            $("#showMessage").fadeOut();
            $(window).unbind("click");
            if (typeof showMessage_t != "undefined") {
              clearTimeout(showMessage_t);
            }
          }
        });
      }
      var stateHolder = $(
        '<div class="messageText" aria-live="assertive"></div>'
      ).css({ width: "90%", margin: "1em auto"});
      var showmessageul = $("<ul></ul>").css({
        "font-size": "large",
        "font-weight": "bold",
        "margin-left": 0,
        "padding-left": 0,
      });
      for (var i = 0; i < option.thisMessage.length; i++) {
        var showmessageli = $("<li></li>")
          .html(option.thisMessage[i])
          .css({
            "list-style-image": "none",
            "list-style-position": "outside",
            "list-style-type": "none",
          });
        $(showmessageul).append(showmessageli);
      }
      $(stateHolder).append(showmessageul);
      $(messageHolder).append(stateHolder);
      if (option.position == "top") {
        $(this).prepend(messageHolder);
      } else {
        $(this).append(messageHolder);
      }
      $(messageHolder).fadeIn();
      if (option.autoClose) {
        if (typeof showMessage_t != "undefined") {
          clearTimeout(showMessage_t);
        }
        showMessage_t = setTimeout(function () {
          $("#showMessage").fadeOut();
        }, option.delayTime);
      }
    });
  };
  $.fn.showMessage.closeMessage = function (txt) {
    if ($("#showMessage").length) {
      clearTimeout(showMessage_t);
      $("#showMessage").fadeOut();
    }
  };
})(jQuery);
